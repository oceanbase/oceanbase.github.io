"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[4469],{40413:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var i=s(74848),r=s(28453);const a={title:"Prepare for IOPS Resource Isolation",weight:3},t=void 0,o={id:"user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_01_multi_tenants/resource_isolation_within_a_tenant/disk_performance_calibration",title:"Prepare for IOPS Resource Isolation",description:"Calibrate the Disk Performance",source:"@site/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_01_multi_tenants/04_resource_isolation_within_a_tenant/03_disk_performance_calibration.md",sourceDirName:"user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_01_multi_tenants/04_resource_isolation_within_a_tenant",slug:"/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_01_multi_tenants/resource_isolation_within_a_tenant/disk_performance_calibration",permalink:"/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_01_multi_tenants/resource_isolation_within_a_tenant/disk_performance_calibration",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_01_multi_tenants/04_resource_isolation_within_a_tenant/03_disk_performance_calibration.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Prepare for IOPS Resource Isolation",weight:3},sidebar:"operation_and_maintenanceEnglishSidebar",previous:{title:"Prepare for CPU Resource Isolation",permalink:"/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_01_multi_tenants/resource_isolation_within_a_tenant/cgroup_config"},next:{title:"Configure Resource Isolation Within a Tenant",permalink:"/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_01_multi_tenants/resource_isolation_within_a_tenant/dbms_resource_manager"}},c={},l=[{value:"Calibrate the Disk Performance",id:"calibrate-the-disk-performance",level:2},{value:"Calculate the baseline IOPS value",id:"calculate-the-baseline-iops-value",level:3},{value:"Calibration methods",id:"calibration-methods",level:3},{value:"Automatic calibration",id:"automatic-calibration",level:3},{value:"Manual calibration",id:"manual-calibration",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"calibrate-the-disk-performance",children:"Calibrate the Disk Performance"}),"\n",(0,i.jsx)(n.p,{children:"Before you perform IOPS resource isolation, you must calibrate the disk performance. If IOPS resource isolation is not required, skip this step."}),"\n",(0,i.jsx)(n.h3,{id:"calculate-the-baseline-iops-value",children:"Calculate the baseline IOPS value"}),"\n",(0,i.jsx)(n.p,{children:"Disk performance calibration is mainly about calibrating the IOPS value of the disk. The formula for calculating the baseline IOPS value is as follows:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Baseline IOPS value = Min(Maximum IOPS value supported by the disk, (Target bandwidth/Amount of data involved in I/O operations))"})}),"\n",(0,i.jsx)(n.p,{children:"You must consider the following aspects when you determine the target bandwidth:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Specifications of the server, specifically, the bandwidth limit of the disk"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Sensitivity requirements on the response time (RT)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Bandwidth used by the I/O manager, which must be excluded"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"10 to 20 MB/s of bandwidth reserved for clogs"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The baseline IOPS value for 16 KB reads on the disk is calculated as follows: Assume that the bandwidth limit of the disk is 600 MB/s, the IOPS is 30,000, and your business is highly sensitive to the RT. The probability of jitters will significantly increase if the entire bandwidth is used. Therefore, 400 MB/s is taken as the target bandwidth considering other factors such as the bandwidth reserved for clogs. The maximum IOPS allowed for 16 KB reads with a bandwidth of 400 MB/s is ",(0,i.jsx)(n.code,{children:"(400 \xd7 1024 KB)/16 KB = 25600"}),". Therefore, you can calibrate the IOPS value to 25600. If the calculated IOPS value reaches or exceeds the IOPS limit of the disk, such as 10000, you can calibrate the IOPS value to 10000."]}),"\n",(0,i.jsx)(n.h3,{id:"calibration-methods",children:"Calibration methods"}),"\n",(0,i.jsx)(n.p,{children:"OceanBase Database provides the disk performance calibration feature for you to calibrate the read/write performance of the disk where an OBServer node resides. At present, OceanBase Database supports two disk performance calibration modes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Automatic calibration: A background automatic calibration job is triggered by the ",(0,i.jsx)(n.code,{children:"ALTER SYSTEM RUN JOB"})," statement."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Manual calibration: You can refresh the disk performance information for manual calibration."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"automatic-calibration",children:"Automatic calibration"}),"\n",(0,i.jsxs)(n.p,{children:["If the current OceanBase cluster runs with zero load and the data disk has much idle space, you can execute the ",(0,i.jsx)(n.code,{children:"ALTER SYSTEM RUN JOB"})," statement to trigger a background job to automatically calibrate the disk performance. In this mode, the system automatically calibrates the data disk."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Log in to the ",(0,i.jsx)(n.code,{children:"sys"})," tenant of the cluster as the ",(0,i.jsx)(n.code,{children:"root"})," user."]}),"\n",(0,i.jsx)(n.p,{children:"Note that you must specify the corresponding parameters in the following sample code based on your actual database configurations."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"obclient -h10.xx.xx.xx -P2883 -uroot@sys#obdemo -p***** -A\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Trigger a disk calibration job by using an appropriate statement based on business scenarios."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Trigger a disk calibration job for all OBServer nodes in a cluster"}),"\n",(0,i.jsx)(n.p,{children:"The syntax is as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'ALTER SYSTEM RUN JOB "job_name";\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In the statement, ",(0,i.jsx)(n.code,{children:"job_name"})," specifies the name of the background job. To trigger a background disk calibration job, specify ",(0,i.jsx)(n.code,{children:"io_calibration"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Here is an example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'ALTER SYSTEM RUN JOB "io_calibration";\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Trigger a disk calibration job for all OBServer nodes in a specified zone"}),"\n",(0,i.jsx)(n.p,{children:"The syntax is as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'ALTER SYSTEM RUN JOB "job_name" ZONE [=] zone_name;\n'})}),"\n",(0,i.jsx)(n.p,{children:"The parameters are described as follows:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"job_name"}),": the name of the background job. To trigger a background disk calibration job, specify ",(0,i.jsx)(n.code,{children:"io_calibration"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"zone_name"}),": the name of the zone for which the disk calibration job is to be triggered. At present, you can specify only one zone."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Here is an example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'ALTER SYSTEM RUN JOB "io_calibration" ZONE = zone1;\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Trigger a disk calibration job for a specified OBServer node"}),"\n",(0,i.jsx)(n.p,{children:"The syntax is as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"ALTER SYSTEM RUN JOB \"job_name\" SERVER [=] 'svr_ip:svr_port';\n"})}),"\n",(0,i.jsx)(n.p,{children:"The parameters are described as follows:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"job_name"}),": the name of the background job. To trigger a background disk calibration job, specify ",(0,i.jsx)(n.code,{children:"io_calibration"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"svr_ip"}),": the IP address of the OBServer node for which the disk calibration job is to be triggered. At present, you can specify only one OBServer node."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"svr_port"}),": the remote procedure call (RPC) port of the OBServer node for which the disk calibration job is to be triggered."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Here is an example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"ALTER SYSTEM RUN JOB \"io_calibration\" SERVER = 'xx.xx.xx.1:2882';\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Query the disk I/O calibration status."}),"\n",(0,i.jsxs)(n.p,{children:["After you trigger a disk calibration job, you can query the ",(0,i.jsx)(n.code,{children:"GV$OB_IO_CALIBRATION_STATUS"})," or ",(0,i.jsx)(n.code,{children:"V$OB_IO_CALIBRATION_STATUS"})," view for the I/O calibration status."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM oceanbase.V$OB_IO_CALIBRATION_STATUS;\n"})}),"\n",(0,i.jsx)(n.p,{children:"The query result is as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"+----------------+----------+--------------+-------------+----------------------------+-------------+\n| SVR_IP         | SVR_PORT | STORAGE_NAME | STATUS      | START_TIME                 | FINISH_TIME |\n+----------------+----------+--------------+-------------+----------------------------+-------------+\n| xx.xx.xx.197   |     2882 | DATA         | IN PROGRESS | 2023-06-27 14:30:38.393482 | NULL        |\n+----------------+----------+--------------+-------------+----------------------------+-------------+\n1 row in set\n"})}),"\n",(0,i.jsx)(n.p,{children:"Possible I/O calibration states include the following ones:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"NOT AVAILABLE"}),": I/O calibration is not started."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"IN PROGRESS"}),": I/O calibration is in progress."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"READY"}),": I/O calibration is completed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"FAILED"}),": I/O calibration failed."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["In the sample query result, the value of the ",(0,i.jsx)(n.code,{children:"STATUS"})," column is ",(0,i.jsx)(n.code,{children:"IN PROGRESS"}),", indicating that disk I/O calibration is in progress. After the disk I/O calibration is completed, the value of the ",(0,i.jsx)(n.code,{children:"STATUS"})," column changes to ",(0,i.jsx)(n.code,{children:"READY"}),", and the completion time is displayed in the ",(0,i.jsx)(n.code,{children:"FINISH_TIME"})," column."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"+----------------+----------+--------------+--------+----------------------------+----------------------------+\n| SVR_IP         | SVR_PORT | STORAGE_NAME | STATUS | START_TIME                 | FINISH_TIME                |\n+----------------+----------+--------------+--------+----------------------------+----------------------------+\n| xx.xx.xx.197   |     2882 | DATA         | READY  | 2023-06-27 14:25:20.202022 | 2023-06-27 14:27:00.398748 |\n+----------------+----------+--------------+--------+----------------------------+----------------------------+\n1 row in set\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify whether the disk I/O calibration takes effect."}),"\n",(0,i.jsxs)(n.p,{children:["After the disk I/O calibration is completed, you can query the ",(0,i.jsx)(n.code,{children:"GV$OB_IO_BENCHMARK"})," or ",(0,i.jsx)(n.code,{children:"V$OB_IO_BENCHMARK"})," view to check whether the calibration takes effect."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM oceanbase.GV$OB_IO_BENCHMARK;\n"})}),"\n",(0,i.jsx)(n.p,{children:"A sample query result is as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"+----------------+----------+--------------+-------+---------+--------+------+---------+\n| SVR_IP         | SVR_PORT | STORAGE_NAME | MODE  | SIZE    | IOPS   | MBPS | LATENCY |\n+----------------+----------+--------------+-------+---------+--------+------+---------+\n| xx.xx.xx.197   |     2882 | DATA         | READ  |    4096 | 124648 |  486 |     128 |\n| xx.xx.xx.197   |     2882 | DATA         | READ  |    8192 | 118546 |  926 |     134 |\n| xx.xx.xx.197   |     2882 | DATA         | READ  |   16384 |  98870 | 1544 |     161 |\n| xx.xx.xx.197   |     2882 | DATA         | READ  |   32768 |  73857 | 2308 |     216 |\n| xx.xx.xx.197   |     2882 | DATA         | READ  |   65536 |  48015 | 3000 |     332 |\n| xx.xx.xx.197   |     2882 | DATA         | READ  |  131072 |  33780 | 4222 |     473 |\n| xx.xx.xx.197   |     2882 | DATA         | READ  |  262144 |  20650 | 5162 |     774 |\n| xx.xx.xx.197   |     2882 | DATA         | READ  |  524288 |  12111 | 6055 |    1321 |\n| xx.xx.xx.197   |     2882 | DATA         | READ  | 1048576 |   6237 | 6237 |    2565 |\n| xx.xx.xx.197   |     2882 | DATA         | READ  | 2097152 |   2762 | 5524 |    5795 |\n| xx.xx.xx.197   |     2882 | DATA         | WRITE |    4096 |  49771 |  194 |     321 |\n| xx.xx.xx.197   |     2882 | DATA         | WRITE |    8192 |  48566 |  379 |     329 |\n| xx.xx.xx.197   |     2882 | DATA         | WRITE |   16384 |  42784 |  668 |     373 |\n| xx.xx.xx.197   |     2882 | DATA         | WRITE |   32768 |  35187 | 1099 |     454 |\n| xx.xx.xx.197   |     2882 | DATA         | WRITE |   65536 |  24892 | 1555 |     642 |\n| xx.xx.xx.197   |     2882 | DATA         | WRITE |  131072 |  12720 | 1590 |    1257 |\n| xx.xx.xx.197   |     2882 | DATA         | WRITE |  262144 |   6889 | 1722 |    2322 |\n| xx.xx.xx.197   |     2882 | DATA         | WRITE |  524288 |   3452 | 1726 |    4636 |\n| xx.xx.xx.197   |     2882 | DATA         | WRITE | 1048576 |   1689 | 1689 |    9481 |\n| xx.xx.xx.197   |     2882 | DATA         | WRITE | 2097152 |    876 | 1752 |   18296 |\n+----------------+----------+--------------+-------+---------+--------+------+---------+\n20 rows in set\n"})}),"\n",(0,i.jsx)(n.p,{children:"The columns in the query result are described as follows:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"STORAGE_NAME"}),": the name of the storage disk. ",(0,i.jsx)(n.code,{children:"DATA"})," indicates a data disk."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"MODE"}),": the I/O mode, which can be read or write."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"SIZE"}),": the size of each I/O request, in bytes."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"IOPS"}),": the number of I/O requests completed per second."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"MBPS"}),": the disk bandwidth, in MB/s."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"LATENCY"}),": the RT of the disk, in microseconds."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"manual-calibration",children:"Manual calibration"}),"\n",(0,i.jsx)(n.p,{children:"If the current OceanBase cluster runs at a load, you can actively refresh the disk performance information to manually calibrate the disk performance."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Log in to the ",(0,i.jsx)(n.code,{children:"sys"})," tenant of the cluster as the ",(0,i.jsx)(n.code,{children:"root"})," user."]}),"\n",(0,i.jsx)(n.p,{children:"Note that you must specify the corresponding parameters in the following sample code based on your actual database configurations."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"obclient -h10.xx.xx.xx -P2883 -uroot@sys#obdemo -p***** -A\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Actively refresh the disk performance information by using an appropriate statement based on business scenarios."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Refresh the disk performance information for all OBServer nodes in the cluster"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'ALTER SYSTEM REFRESH IO CALIBRATION [STORAGE [=] \'storage_name\'] [CALIBRATION_INFO [=] ("mode : size : latency : iops" [, "mode : size : latency : iops"])];\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Clear the disk performance information of all OBServer nodes in the cluster"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"ALTER SYSTEM REFRESH IO CALIBRATION [STORAGE [=] 'storage_name'] CALIBRATION_INFO = (\"\");\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Refresh the disk performance information for all OBServer nodes in a specified zone"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'ALTER SYSTEM REFRESH IO CALIBRATION [STORAGE [=] \'storage_name\'] [CALIBRATION_INFO [=] ("mode : size : latency : iops "[, "mode : size : latency : iops"])] ZONE [=] zone_name;\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Refresh the disk performance information for a specified OBServer node"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"ALTER SYSTEM REFRESH IO CALIBRATION [STORAGE [=] 'storage_name'] [CALIBRATION_INFO [=] (\"mode : size : latency : iops\" [, \"mode : size : latency : iops\"])] SERVER [=] 'svr_ip:svr_port';\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The parameters are described as follows:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"STORAGE"}),": the name of the storage disk of OceanBase Database. At present, the value can be only ",(0,i.jsx)(n.code,{children:"DATA"}),", which indicates a data disk."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"CALIBRATION_INFO"}),": the disk performance information to be refreshed. If you do not specify this parameter, the disk performance information is refreshed from the internal table by default. When you set ",(0,i.jsx)(n.code,{children:"CALIBRATION_INFO"}),", you must specify at least one record for both the read and write modes. Otherwise, the system returns an error."]}),"\n",(0,i.jsxs)("main",{id:"notice",type:"explain",children:[(0,i.jsx)("h4",{children:"Note"}),(0,i.jsxs)("p",{children:["When you specify disk performance information, if no stress testing data of the current disk is available, you can use the flexible I/O (FIO) tester to perform a performance stress test to obtain performance data of the current disk. For more information about the FIO tester, visit its ",(0,i.jsx)("a",{href:"https://fio.readthedocs.io/en/latest/index.html",children:"official website"}),". "]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"mode"}),": the I/O mode. Valid values are ",(0,i.jsx)(n.code,{children:"r"}),", ",(0,i.jsx)(n.code,{children:"w"}),", ",(0,i.jsx)(n.code,{children:"read"}),", and ",(0,i.jsx)(n.code,{children:"write"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"size"}),": the size of a single I/O request. The value must be followed by a unit, such as 4K. Supported units are KB (K), MB (M), and GB (G)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"latency"}),": the RT of the disk. If a numeric value is specified, the default unit is seconds. We recommend that you specify a unit together with a value and do not use the default unit. Supported units are us, ms, s, min, and h."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"iops"}),": the number of I/O requests processed per second."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"zone_name"}),": the zone for which the disk performance information is to be refreshed. At present, you can specify only one zone."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"svr_ip"}),": the IP address of the OBServer node for which the disk performance information is to be refreshed."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"svr_port"}),": the RPC port of the OBServer node for which the disk performance information is to be refreshed."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Here is an example:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Refresh the disk performance information for the data disks of all OBServer nodes in the cluster from the internal table"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"ALTER SYSTEM REFRESH IO CALIBRATION;\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Clear the disk performance information of data disks of all OBServer nodes in the cluster"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'ALTER SYSTEM REFRESH IO CALIBRATION CALIBRATION_INFO = ("");\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Refresh the disk performance information for the data disks of all OBServer nodes in ",(0,i.jsx)(n.code,{children:"zone1"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:'ALTER SYSTEM REFRESH IO CALIBRATION STORAGE = \'DATA\' CALIBRATION_INFO = ("read:4K:100us:200000","write:2M:5ms:1500") ZONE = zone1;\n'})}),"\n",(0,i.jsx)(n.p,{children:"In this example, the refreshed disk performance information is as follows: The RT of random reads of 4 KB data is 100 \u03bcs with an IOPS value of 200000. The RT of random writes of 2 MB data is 5 ms with an IOPS value of 1500."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Refresh the disk performance information for the data disk of a specified OBServer node"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"ALTER SYSTEM REFRESH IO CALIBRATION STORAGE = 'DATA' CALIBRATION_INFO = (\"read:4K:100us:200000\",\"write:2M:5ms:1500\") SERVER = 'xx.xx.xx.1:2882';\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify whether the disk I/O calibration takes effect."}),"\n",(0,i.jsxs)(n.p,{children:["After the disk performance information is refreshed, you can query the ",(0,i.jsx)(n.code,{children:"GV$OB_IO_BENCHMARK"})," or ",(0,i.jsx)(n.code,{children:"V$OB_IO_BENCHMARK"})," view to confirm whether the disk I/O calibration takes effect."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM oceanbase.GV$OB_IO_BENCHMARK;\n"})}),"\n",(0,i.jsx)(n.p,{children:"A sample query result is as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"+----------------+----------+--------------+-------+---------+--------+------+---------+\n| SVR_IP         | SVR_PORT | STORAGE_NAME | MODE  | SIZE    | IOPS   | MBPS | LATENCY |\n+----------------+----------+--------------+-------+---------+--------+------+---------+\n| xx.xx.xx.197   |     2882 | DATA         | READ  |    4096 | 200000 |  781 |     100 |\n+----------------+----------+--------------+-------+---------+--------+------+---------+\n1 rows in set\n"})}),"\n",(0,i.jsx)(n.p,{children:"The columns in the query result are described as follows:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"STORAGE_NAME"}),": the name of the storage disk. ",(0,i.jsx)(n.code,{children:"DATA"})," indicates a data disk."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"MODE"}),": the I/O mode, which can be read or write."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"SIZE"}),": the size of each I/O request, in bytes."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"IOPS"}),": the number of I/O requests completed per second."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"MBPS"}),": the disk bandwidth, in MB/s."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"LATENCY"}),": the RT of the disk, in microseconds."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var i=s(96540);const r={},a=i.createContext(r);function t(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);
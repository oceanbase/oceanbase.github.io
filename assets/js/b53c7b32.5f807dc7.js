"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[9242],{56760:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var n=a(74848),i=a(28453);const s={slug:"parallel-execution-IV",title:"Mastering Parallel Execution in OceanBase Database: Part 4 - Parallel Execution Types"},r=void 0,l={id:"blogs/tech/parallel-execution-IV",title:"Mastering Parallel Execution in OceanBase Database: Part 4 - Parallel Execution Types",description:"OceanBase Database supports parallel execution for various types of statements. This article introduces these types in detail, including parallel query, parallel DML (PDML), parallel DDL, and parallel LOAD DATA.",source:"@site/docs/blogs/tech/parallel-execution-IV.md",sourceDirName:"blogs/tech",slug:"/blogs/tech/parallel-execution-IV",permalink:"/docs/blogs/tech/parallel-execution-IV",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/blogs/tech/parallel-execution-IV.md",tags:[],version:"current",frontMatter:{slug:"parallel-execution-IV",title:"Mastering Parallel Execution in OceanBase Database: Part 4 - Parallel Execution Types"},sidebar:"blogsSidebar",previous:{title:"Mastering Parallel Execution in OceanBase Database: Part 3 - Concurrency Control and Queuing",permalink:"/docs/blogs/tech/parallel-execution-III"},next:{title:"Evolution of Database Query Engines",permalink:"/docs/blogs/tech/query-engines"}},o={},d=[{value:"4.1 Parallel Query",id:"41-parallel-query",level:2},{value:"4.2 PDML",id:"42-pdml",level:2},{value:"4.2.1 DOP for DML",id:"421-dop-for-dml",level:3},{value:"4.2.2 Strategy for Processing Index Tables",id:"422-strategy-for-processing-index-tables",level:3},{value:"4.2.3 Strategy for Updating a Partitioning Key",id:"423-strategy-for-updating-a-partitioning-key",level:3},{value:"4.2.4 Transaction Processing",id:"424-transaction-processing",level:3},{value:"4.2.5 Direct Load",id:"425-direct-load",level:3},{value:"4.2.6 DML Operations Unsuitable for Parallel Execution",id:"426-dml-operations-unsuitable-for-parallel-execution",level:3},{value:"4.2.7 Row Movement",id:"427-row-movement",level:3},{value:"4.3 Parallel DDL",id:"43-parallel-ddl",level:2},{value:"4.3.0 Technical Mechanism",id:"430-technical-mechanism",level:3},{value:"4.3.1 Specify a DOP by Using a Hint",id:"431-specify-a-dop-by-using-a-hint",level:3},{value:"4.3.2 Specify a DOP by Using a Session Variable",id:"432-specify-a-dop-by-using-a-session-variable",level:3},{value:"4.3.3 Specify a DOP by Using the PARALLEL Attribute of a Table",id:"433-specify-a-dop-by-using-the-parallel-attribute-of-a-table",level:3},{value:"4.3.4 Priorities",id:"434-priorities",level:3},{value:"4.3.5 Direct Load",id:"435-direct-load",level:3},{value:"4.4 Parallel LOAD DATA",id:"44-parallel-load-data",level:2},{value:"4.5 Scenarios Where Parallel Execution Is Partially Inapplicable",id:"45-scenarios-where-parallel-execution-is-partially-inapplicable",level:2}];function c(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"OceanBase Database supports parallel execution for various types of statements. This article introduces these types in detail, including parallel query, parallel DML (PDML), parallel DDL, and parallel LOAD DATA."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"This is the fourth article of a seven-part series on parallel execution."}),"\n",(0,n.jsx)(t.p,{children:"Part 1"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://oceanbase.github.io/docs/blogs/tech/parallel-execution-I",children:"Introduction"})}),"\n",(0,n.jsx)(t.p,{children:"Part 2"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://oceanbase.github.io/docs/blogs/tech/parallel-execution-II",children:"Set the DOP"})}),"\n",(0,n.jsx)(t.p,{children:"Part 3"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://oceanbase.github.io/docs/blogs/tech/parallel-execution-III",children:"Concurrency Control and Queuing"})}),"\n",(0,n.jsx)(t.p,{children:"Part 4"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://oceanbase.github.io/docs/blogs/tech/parallel-execution-IV",children:"Parallel Execution Types"})}),"\n",(0,n.jsx)(t.p,{children:"Part 5"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://oceanbase.github.io/docs/blogs/tech/parallel-execution-V",children:"Parallel Execution Parameters"})}),"\n",(0,n.jsx)(t.p,{children:"Part 6"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://oceanbase.github.io/docs/blogs/tech/parallel-execution-VI",children:"Troubleshooting and Tuning Tips"})}),"\n",(0,n.jsx)(t.p,{children:"Part 7"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://oceanbase.github.io/docs/blogs/tech/parallel-execution-VII",children:"Get Started with a PoC Test"})}),"\n",(0,n.jsx)(t.h2,{id:"41-parallel-query",children:"4.1 Parallel Query"}),"\n",(0,n.jsx)(t.p,{children:"You can use parallel queries in the following scenarios:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"SELECT"})," statements and ",(0,n.jsx)(t.code,{children:"SELECT"})," subqueries"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Query part of DML statements (such as ",(0,n.jsx)(t.code,{children:"INSERT"}),", ",(0,n.jsx)(t.code,{children:"UPDATE"}),", and ",(0,n.jsx)(t.code,{children:"DELETE"}),")"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Queries on external tables"}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"A parallel query involves two decision-making steps:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Decide whether to perform a parallel query. If a ",(0,n.jsx)(t.code,{children:"PARALLEL"})," hint is used in the query, the parallel query feature is enabled for the current session, or the ",(0,n.jsx)(t.code,{children:"PARALLEL"})," attribute is specified for a table, a parallel query will be performed."]}),"\n",(0,n.jsx)(t.li,{children:"Determine a degree of parallelism (DOP). In a parallel query, each data flow operation (DFO) can have a different DOP."}),"\n"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["For a DFO for scanning base tables or indexes, its DOP is determined by the ",(0,n.jsx)(t.code,{children:"PARALLEL"})," hint, parallel query attribute of the session, or the ",(0,n.jsx)(t.code,{children:"PARALLEL"})," attribute of the table."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"If it is detected that the data accessed by a DFO for scanning base tables or indexes is less than a macroblock, the DOP is partially decreased while the DFO is running."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"The DOP of an intermediate node such as a join is inherited from that of the left-side sub-DFO of the join."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Some DFOs, such as a node for calculating ",(0,n.jsx)(t.code,{children:"ROWNUM"}),", do not support parallel execution. The DOPs of such DFOs are forcibly set to 1."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"42-pdml",children:"4.2 PDML"}),"\n",(0,n.jsx)(t.p,{children:"In most scenarios, PDML can significantly improve the data import, update, and deletion performance."}),"\n",(0,n.jsx)(t.h3,{id:"421-dop-for-dml",children:"4.2.1 DOP for DML"}),"\n",(0,n.jsx)(t.p,{children:"The DOP for DML is consistent with that of the query part. If PDML is enabled, parallel execution is automatically enabled for the query part. The data read is redistributed based on the partition locations in the table to be updated. The DML operations are executed in parallel by multiple threads. Each thread processes the data of multiple partitions."}),"\n",(0,n.jsx)(t.p,{children:"The optimal performance can be achieved if the DOP is a multiple of the number of partitions in the target table. When the DOP is greater than the number of partitions, multiple threads process the data in the same partition. When the DOP is smaller than the partition quantity, a single thread may process the data of multiple partitions and the partitions processed by a thread do not overlap with those processed by another thread. When the DOP is greater than the number of partitions in the target table, we recommend that you set the DOP to an integral multiple of the number of partitions."}),"\n",(0,n.jsx)(t.p,{children:"Generally, the number of threads that concurrently insert data into the same partition cannot exceed 4. If more than four threads concurrently insert data into the same partition, the scalability is limited, log synchronization may become a bottleneck, and partition-level lock synchronization overheads are generated. When the DOP is smaller than the number of partitions in the target table, we recommend that you set the DOP to a value which ensures that the number of partitions is an integral multiple of the DOP. In this way, each thread processes a similar number of partitions, avoiding an imbalance in the insertion workloads."}),"\n",(0,n.jsx)(t.h3,{id:"422-strategy-for-processing-index-tables",children:"4.2.2 Strategy for Processing Index Tables"}),"\n",(0,n.jsx)(t.p,{children:"Automatic maintenance is supported for index tables during PDML."}),"\n",(0,n.jsx)(t.p,{children:"For local index tables, the storage layer automatically maintains them when the primary table is updated by using PDML."}),"\n",(0,n.jsx)(t.p,{children:"For global index tables, the PDML framework maintains them by generating a specific plan. Assume that two global indexes exist. Here is how they are processed:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"DFO 1 updates the primary table."}),"\n",(0,n.jsx)(t.li,{children:"DFO 1 transfers the data required by global indexes 1 and 2 to DFO 2, and DFO 2 updates global index table 1."}),"\n",(0,n.jsx)(t.li,{children:"DFO 2 transfers the data required by global index 2 to DFO 3, and DFO 3 updates global index table 2."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"1705634034",src:a(23659).A+"",width:"1314",height:"740"})}),"\n",(0,n.jsxs)(t.p,{children:["The preceding strategy applies to ",(0,n.jsx)(t.code,{children:"INSERT"}),", ",(0,n.jsx)(t.code,{children:"DELETE"}),", and ",(0,n.jsx)(t.code,{children:"UPDATE"})," statements. For the ",(0,n.jsx)(t.code,{children:"MERGE"})," statement, index maintenance is concentrated in a single DFO, as shown in the following figure."]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"DFO 1 updates the primary table."}),"\n",(0,n.jsx)(t.li,{children:"DFO 1 transfers the data required by global indexes 1 and 2 to DFO 2, and DFO 2 maintains the two global indexes one by one."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"1705634043",src:a(37643).A+"",width:"1310",height:"570"})}),"\n",(0,n.jsx)(t.h3,{id:"423-strategy-for-updating-a-partitioning-key",children:"4.2.3 Strategy for Updating a Partitioning Key"}),"\n",(0,n.jsxs)(t.p,{children:["When you use the ",(0,n.jsx)(t.code,{children:"UPDATE"})," statement to update the partitioning key of a primary table or global index table, you must perform row movement to delete the existing data from the original partition and insert new data into the new partition."]}),"\n",(0,n.jsxs)(t.p,{children:["During row movement, an ",(0,n.jsx)(t.code,{children:"UPDATE"})," operation is divided into a ",(0,n.jsx)(t.code,{children:"DELETE"})," operation and an ",(0,n.jsx)(t.code,{children:"INSERT"})," operation. The first DFO is responsible for the ",(0,n.jsx)(t.code,{children:"DELETE"})," operation and the second DFO is responsible for the ",(0,n.jsx)(t.code,{children:"INSERT"})," operation. To avoid primary key conflicts, the ",(0,n.jsx)(t.code,{children:"INSERT"})," DFO can be executed only after the ",(0,n.jsx)(t.code,{children:"DELETE"})," DFO is completed."]}),"\n",(0,n.jsx)(t.h3,{id:"424-transaction-processing",children:"4.2.4 Transaction Processing"}),"\n",(0,n.jsx)(t.p,{children:"Like regular DML statements in OceanBase Database, PDML statements also support transaction processing. A PDML statement can appear in the same transaction with another query statement. After the PDML statement is executed, the transaction does not need to be immediately committed. The execution result of the PDML statement can be read in the subsequent query statement."}),"\n",(0,n.jsxs)(t.p,{children:["In OceanBase Database of a version earlier than V4.1, if the execution time of a PDML statement is excessively long, you must set an appropriate value for the tenant-level parameter ",(0,n.jsx)(t.code,{children:"undo_retention"}),". Otherwise, the error ",(0,n.jsx)(t.code,{children:"-4138 (OB_SNAPSHOT_DISCARDED)"})," may occur and the SQL statements are repeatedly retried until a timeout. Literally, the ",(0,n.jsx)(t.code,{children:"undo_retention"})," parameter specifies the retention point of undo logs, which is the scope of the undo logs to be retained from the time dimension. In OceanBase Database, all multiversion data within the specified period is retained. If the execution time of a PDML statement exceeds the value of the ",(0,n.jsx)(t.code,{children:"undo_retention"})," parameter, the multiversion data may be evicted. If any subsequent operation tries to access the evicted multiversion data, the error ",(0,n.jsx)(t.code,{children:"OB_SNAPSHOT_DISCARDED"})," will be returned. The default value of the ",(0,n.jsx)(t.code,{children:"undo_retention"})," parameter is 30 minutes. To be specific, if a PDML statement is not completed within 30 minutes, it can time out with an error returned, regardless of the timeout value specified for the statement. Generally, if the maximum PDML execution time is 2 hours, you can set ",(0,n.jsx)(t.code,{children:"undo_retention"})," to 2.5 hours. You cannot set ",(0,n.jsx)(t.code,{children:"undo_retention"})," to a very large value. Otherwise, the multiversion data cannot be recycled and the disk space will be used up."]}),"\n",(0,n.jsxs)(t.p,{children:["Since OceanBase Database V4.1, the execution time of PDML statements is no longer controlled by the ",(0,n.jsx)(t.code,{children:"undo_retention"})," parameter. Multiversion data is recycled based on the transaction version. The data that can be read based on the version of a transaction will not be recycled as long as this transaction is active. However, it makes an exception if the data disk is full. In this case, the multiversion data is forcibly recycled. The system returns the error ",(0,n.jsx)(t.code,{children:"OB_SNAPSHOT_DISCARDED"})," for the PDML statement and automatically retries the whole statement."]}),"\n",(0,n.jsx)(t.h3,{id:"425-direct-load",children:"4.2.5 Direct Load"}),"\n",(0,n.jsx)(t.p,{children:"Insufficient memory space easily leads to an out of memory (OOM) error for PDML statements. A PDML statement that does not use a direct load path first writes data to the MemTable, and then the data is written to the disk through minor and major compactions. If the PDML statement writes data to the MemTable at a speed higher than the minor compaction speed, the memory usage keeps increasing until an OOM error is returned."}),"\n",(0,n.jsxs)(t.p,{children:["To resolve this issue, OceanBase Database V4.1 has introduced the ",(0,n.jsx)(t.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001714719",children:"direct load"})," feature at the storage layer. If a PDML statement executes an ",(0,n.jsx)(t.code,{children:"INSERT"})," operation through direct load, data will be directly written to the disk without the need to be written to the MemTable first. This avoids the OOM error and improves the data import performance."]}),"\n",(0,n.jsxs)(t.p,{children:["You can use an ",(0,n.jsx)(t.code,{children:"APPEND"})," hint to enable the direct load feature. Before starting direct load, make sure that the previous transaction is committed and set ",(0,n.jsx)(t.code,{children:"autocommit"})," to ",(0,n.jsx)(t.code,{children:"1"}),". In OceanBase Database V4.2, direct load must be used in combination with PDML. If PDML is not enabled by using a hint or for the session, the direct load hint is automatically ignored. Here is an example:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"1",src:a(10078).A+"",width:"1756",height:"130"})}),"\n",(0,n.jsx)(t.p,{children:"In later versions, you can use the direct load feature at any point within a transaction."}),"\n",(0,n.jsx)(t.h3,{id:"426-dml-operations-unsuitable-for-parallel-execution",children:"4.2.6 DML Operations Unsuitable for Parallel Execution"}),"\n",(0,n.jsx)(t.p,{children:"To ensure correct DML semantics, parallel execution is supported for the query part but not for the DML part in the following scenarios:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The target table contains a local unique index."}),"\n",(0,n.jsxs)(t.li,{children:["The ",(0,n.jsx)(t.code,{children:"INSERT ON DUPLICATE KEY UPDATE"})," statement is used."]}),"\n",(0,n.jsx)(t.li,{children:"The target table contains triggers or foreign keys."}),"\n",(0,n.jsxs)(t.li,{children:["The target table of the ",(0,n.jsx)(t.code,{children:"MERGE INTO"})," statement contains a global unique index."]}),"\n",(0,n.jsxs)(t.li,{children:["The ",(0,n.jsx)(t.code,{children:"IGNORE"})," mode is enabled for DML."]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["If parallel execution is not performed for a DML statement, you can execute the ",(0,n.jsx)(t.code,{children:"EXPLAIN EXTENDED"})," statement and view the ",(0,n.jsx)(t.code,{children:"Note"})," field in the return result for the reason."]}),"\n",(0,n.jsx)(t.h3,{id:"427-row-movement",children:"4.2.7 Row Movement"}),"\n",(0,n.jsx)(t.p,{children:"When you update the partitioning key of a partitioned table, data may be migrated from one partition to another. In Oracle mode, you can execute the following statement to disable cross-partition data migration:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"2",src:a(77429).A+"",width:"1584",height:"240"})}),"\n",(0,n.jsxs)(t.p,{children:["However, PDML will ignore the ",(0,n.jsx)(t.code,{children:"ROW MOVEMENT"})," attribute of tables and always allow partitioning key updates."]}),"\n",(0,n.jsx)(t.h2,{id:"43-parallel-ddl",children:"4.3 Parallel DDL"}),"\n",(0,n.jsx)(t.p,{children:"OceanBase Database supports parallel execution for the following DDL statements:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"CREATE TABLE AS SELECT"}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"ALTER TABLE"}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"CREATE INDEX"}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"430-technical-mechanism",children:"4.3.0 Technical Mechanism"}),"\n",(0,n.jsx)(t.p,{children:"All parallel DDL operations are completed by using specific PDML operations. For example, creating an index is to create an empty index table, retrieve data of index columns from the primary table in parallel, and insert the data into the index table in parallel."}),"\n",(0,n.jsx)(t.h3,{id:"431-specify-a-dop-by-using-a-hint",children:"4.3.1 Specify a DOP by Using a Hint"}),"\n",(0,n.jsxs)(t.p,{children:["In OceanBase Database V4.2, ",(0,n.jsxs)(t.strong,{children:["only the ",(0,n.jsx)(t.code,{children:"CREATE INDEX"})," statement"]})," supports enabling parallel execution by using the ",(0,n.jsx)(t.code,{children:"PARALLEL"})," hint. For other DDL statements, parallel execution can be enabled only by using a session variable or the ",(0,n.jsx)(t.code,{children:"PARALLEL"})," attribute of the table."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"3",src:a(8332).A+"",width:"1086",height:"98"})}),"\n",(0,n.jsx)(t.h3,{id:"432-specify-a-dop-by-using-a-session-variable",children:"4.3.2 Specify a DOP by Using a Session Variable"}),"\n",(0,n.jsx)(t.p,{children:"All the preceding DDL statements support specifying a DOP by using a session variable. After you specify a DOP, all DDL statements in the session are executed in parallel based on the specified DOP. The DOPs of the query part and modification part are the same."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"4",src:a(38499).A+"",width:"1840",height:"464"})}),"\n",(0,n.jsx)(t.h3,{id:"433-specify-a-dop-by-using-the-parallel-attribute-of-a-table",children:"4.3.3 Specify a DOP by Using the PARALLEL Attribute of a Table"}),"\n",(0,n.jsx)(t.p,{children:"In the real-world test, the parallel execution was not performed on the example provided in this section. You can use the following statement to confirm whether it aligns with the design."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.code,{children:"select plan\\_operation, count(\\*) threads from oceanbase.gv$sql\\_plan\\_monitor where trace\\_id = last\\_trace\\_id() group by plan\\_line\\_id, plan\\_operation order by plan\\_line\\_id;"})}),"\n",(0,n.jsxs)(t.p,{children:["When you want to perform DDL operations on a table that has the ",(0,n.jsx)(t.code,{children:"PARALLEL"})," attribute, you can use the ",(0,n.jsx)(t.code,{children:"SET"})," statement to enable parallel execution by setting the corresponding session variable. Here is an example:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"5",src:a(37274).A+"",width:"1846",height:"472"})}),"\n",(0,n.jsx)(t.h3,{id:"434-priorities",children:"4.3.4 Priorities"}),"\n",(0,n.jsxs)(t.p,{children:["If two or all of the ",(0,n.jsx)(t.code,{children:"PARALLEL"})," hint, session-level attribute ",(0,n.jsx)(t.code,{children:"FORCE SESSION PARALLEL"}),", and table-level attribute ",(0,n.jsx)(t.code,{children:"PARALLEL"})," are specified, their priorities are sorted as follows:"]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"PARALLEL"})," hint > Session-level attribute ",(0,n.jsx)(t.code,{children:"FORCE SESSION PARALLEL"})," > Table-level attribute ",(0,n.jsx)(t.code,{children:"PARALLEL"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"435-direct-load",children:"4.3.5 Direct Load"}),"\n",(0,n.jsxs)(t.p,{children:["Direct load is used for the ",(0,n.jsx)(t.code,{children:"CREATE INDEX"})," statement, regardless of whether parallel execution is enabled for the statement."]}),"\n",(0,n.jsxs)(t.p,{children:["In OceanBase Database V4.2, the ",(0,n.jsx)(t.code,{children:"CREATE TABLE AS SELECT"})," statement does not support direct load. If the amount of data is large, we recommend that you first create an empty table and then insert data into the table in parallel through direct load by using PDML."]}),"\n",(0,n.jsx)(t.h2,{id:"44-parallel-load-data",children:"4.4 Parallel LOAD DATA"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"LOAD DATA"})," is not implemented based on PDML. Specifically, the system uses multiple threads to split the CSV file into multiple ",(0,n.jsx)(t.code,{children:"INSERT"})," statements and then distributes the ",(0,n.jsx)(t.code,{children:"INSERT"})," statements based on the specified DOP."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"6",src:a(51089).A+"",width:"1818",height:"94"})}),"\n",(0,n.jsxs)(t.p,{children:["In the preceding statement, the ",(0,n.jsx)(t.code,{children:"PARALLEL"})," attribute specifies the DOP for loading data. If the value of the ",(0,n.jsx)(t.code,{children:"PARALLEL"})," attribute is not specified, ",(0,n.jsx)(t.code,{children:"LOAD DATA"})," is executed based on the DOP of 4, which is the default value of the ",(0,n.jsx)(t.code,{children:"PARALLEL"})," attribute. We recommend that you set ",(0,n.jsx)(t.code,{children:"PARALLEL"})," to a value within the range from ",(0,n.jsx)(t.code,{children:"0"})," to the maximum number of CPU cores of the tenant."]}),"\n",(0,n.jsx)(t.h2,{id:"45-scenarios-where-parallel-execution-is-partially-inapplicable",children:"4.5 Scenarios Where Parallel Execution Is Partially Inapplicable"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["The top-layer DFO does not require parallel execution. It interacts with the client and executes top-layer operations that do not require parallel execution, such as ",(0,n.jsx)(t.code,{children:"LIMIT"})," and ",(0,n.jsx)(t.code,{children:"PX COORDINATOR"})," operations."]}),"\n",(0,n.jsx)(t.li,{children:"A DFO that contains a table-valued user-defined function (UDF) can only be executed in serial. Other DFOs can still be executed in parallel."}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},10078:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/1-32c7a46477731485c4eb40421e7dc81d.png"},23659:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/1705634034065-a52d5a9498acedc383e99e0787955795.png"},37643:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/1705634043346-fadc5e5a046d4e5b8eecd606a026a2f0.png"},77429:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/2-32ba1c18d91a1faa2cb6be15bfdf56c5.png"},8332:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/3-7b29312edf7f202b6978f29f64c696c1.png"},38499:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/4-d6626fa34b96191ce3beb3450a2c1fa6.png"},37274:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/5-20f219697930dbd63c30f5855482d5ff.png"},51089:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/6-40a4d02a3a86b3e2fcdffddd84259adb.png"},28453:(e,t,a)=>{a.d(t,{R:()=>r,x:()=>l});var n=a(96540);const i={},s=n.createContext(i);function r(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);
"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[1780],{31929:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var s=t(74848),a=t(28453);const i={title:"Use SQL statements for data migration",weight:7},l="4.6 Use SQL statements for data migration",o={id:"user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/migration_and_synchronization_through_sql",title:"Use SQL statements for data migration",description:"It is common and simple to migrate data by using SQL statements. You can use the SELECT INTO OUTFILE statement to export data to external files, and the LOAD DATA statement or source command to import data from external files. You can use the INSERT INTO or MERGE INTO statement to migrate data between tables. This topic describes how to use these methods.",source:"@site/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/06_migration_and_synchronization_through_sql.md",sourceDirName:"user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase",slug:"/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/migration_and_synchronization_through_sql",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/migration_and_synchronization_through_sql",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/06_migration_and_synchronization_through_sql.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Use SQL statements for data migration",weight:7},sidebar:"quick_starts_and_hands_on_practices_in_englishSidebar",previous:{title:"Use OBLOADER & OBDUMPER for data migration",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/use-obdumper_and_obloader"},next:{title:"Use other tools for data migration and synchronization",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/migration_and_synchronization_through_other_tools"}},r={},c=[{value:"Export data by using SELECT INTO OUTFILE",id:"export-data-by-using-select-into-outfile",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Example",id:"example",level:3},{value:"Import data by using LOAD DATA",id:"import-data-by-using-load-data",level:2},{value:"Migrate data between tables",id:"migrate-data-between-tables",level:2},{value:"INSERT INTO",id:"insert-into",level:3},{value:"Syntax",id:"syntax-1",level:4},{value:"Example",id:"example-1",level:4},{value:"Direct load",id:"direct-load",level:2},{value:"Scenarios",id:"scenarios",level:3},{value:"Supported statements for direct load",id:"supported-statements-for-direct-load",level:3},{value:"Import data through direct load by using the LOAD DATA statement",id:"import-data-through-direct-load-by-using-the-load-data-statement",level:3},{value:"Limitations",id:"limitations",level:4},{value:"Considerations",id:"considerations",level:4},{value:"Syntax",id:"syntax-2",level:4},{value:"Example",id:"example-2",level:4},{value:"Import data through direct load by using the INSERT INTO SELECT statement",id:"import-data-through-direct-load-by-using-the-insert-into-select-statement",level:3},{value:"Limitations",id:"limitations-1",level:4},{value:"Syntax",id:"syntax-3",level:4},{value:"Example",id:"example-3",level:4}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"46-use-sql-statements-for-data-migration",children:"4.6 Use SQL statements for data migration"})}),"\n",(0,s.jsxs)(n.p,{children:["It is common and simple to migrate data by using SQL statements. You can use the ",(0,s.jsx)(n.code,{children:"SELECT INTO OUTFILE"})," statement to export data to external files, and the ",(0,s.jsx)(n.code,{children:"LOAD DATA"})," statement or ",(0,s.jsx)(n.code,{children:"source"})," command to import data from external files. You can use the ",(0,s.jsx)(n.code,{children:"INSERT INTO"})," or ",(0,s.jsx)(n.code,{children:"MERGE INTO"})," statement to migrate data between tables. This topic describes how to use these methods."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Note"})}),"\n",(0,s.jsx)(n.p,{children:"The official documents referenced in this tutorial are of the latest version available at the time of writing. You can switch to another version as needed in the upper-left corner of the document page."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"export-data-by-using-select-into-outfile",children:"Export data by using SELECT INTO OUTFILE"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"SELECT INTO OUTFILE"})," statement is often used to export data. It allows you to specify the fields to be exported, and is preferred when primary key fields do not need to be exported. You can use this statement in combination with the ",(0,s.jsx)(n.code,{children:"LOAD DATA INFILE"})," statement to facilitate data import and export."]}),"\n",(0,s.jsx)(n.h3,{id:"syntax",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT column_list_option\nINTO OUTFILE file_route_option\n    [format_of_field_option]\n    [start_and_end_option]\nFROM table_name_list\n[WHERE where_conditions]\n[GROUP BY group_by_list [HAVING having_search_conditions]]\n[ORDER BY order_expression_list]\n\ncolumn_list_option:\n    column_name[,column_name]...\n\nfile_route_option:\n    '/path/file'\n    | 'oss://$PATH/$FILENAME/?host=$HOST&access_id=$ACCESS_ID&access_key=$ACCESSKEY'\n\nformat_of_field_option:\n    {FIELDS | COLUMNS}\n        [TERMINATED BY 'string']\n        [[OPTIONALLY] ENCLOSED BY 'char']\n        [ESCAPED BY 'char']\n\nstart_and_end_option:\n    LINES\n        [STARTING BY 'string']\n        [TERMINATED BY 'string']\n"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Example"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"column_list_option"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsxs)(n.td,{children:["Column options for the export. To select all data, use an asterisk (",(0,s.jsx)(n.code,{children:"*"}),"). ",(0,s.jsx)("br",{}),(0,s.jsx)(n.code,{children:"column_name"})," specifies the name of the column to be exported."]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"SELECT col1,col2,col3 ..."})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"file_route_option"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsxs)(n.td,{children:["The path of the exported file. Alibaba Cloud Object Storage Service (OSS) is supported. ",(0,s.jsxs)("blockquote",{children:["Note",(0,s.jsx)("br",{}),"Alibaba Cloud OSS does not support files larger than 5 GB. When you export a file larger than 5 GB to Alibaba Cloud OSS, it is split into multiple smaller files. "]})]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"... INTO OUTFILE '/home/admin/student.sql' ..."})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"format_of_field_option"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["Field format options for the export. You can use the ",(0,s.jsx)(n.code,{children:"FIELDS"})," or ",(0,s.jsx)(n.code,{children:"COLUMNS"})," clause to specify the format of each field in the output file. ",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)(n.code,{children:"TERMINATED BY"}),": specifies the separator between field values. For example, ",(0,s.jsx)(n.code,{children:"TERMINATED BY ','"})," specifies that field values are separated with commas (,). "]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(n.code,{children:"ENCLOSED BY"}),": specifies the symbol for enclosing field values. For example, ",(0,s.jsx)(n.code,{children:"ENCLOSED BY '\"'"}),' specifies that character values are enclosed within a pair of double quotation marks (""). If the ',(0,s.jsx)(n.code,{children:"OPTIONALLY"})," keyword is used, only values of the string type are enclosed within the specified symbols. "]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(n.code,{children:"ESCAPED BY"}),": specifies the escape character. For example, ",(0,s.jsx)(n.code,{children:"ESCAPED BY '*'"})," indicates that the asterisk (",(0,s.jsx)(n.code,{children:"*"}),") but not the backslash (",(0,s.jsx)(n.code,{children:"\\"}),") is used as the escape character. The backslash (",(0,s.jsx)(n.code,{children:"\\"}),") is the default escape character. "]})]})]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"... TERMINATED BY ',' ENCLOSED BY '\"' ..."})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"start_and_end_option"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["Start and end character options for exported data rows. ",(0,s.jsx)(n.code,{children:"LINES"})," specifies the characters to enclose each line in the output file. ",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)(n.code,{children:"STARTING BY"}),": specifies the character to start each line. "]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(n.code,{children:"TERMINATED BY"}),": specifies the character to end each line. "]})]})]}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"... LINES TERMINATED BY '\\n' ..."})," specifies that a row ends with a line feed."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"FROM table_name_list"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"The object from which data is selected."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"... FROM tbl1,tbl2 ..."})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"WHERE where_conditions"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsx)(n.td,{children:"The filter condition. Only data that meets the condition is returned in the query results."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"... WHERE col1 > 100 ..."})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"GROUP BY group_by_list"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["The grouping field, which is usually used together with aggregate functions. ",(0,s.jsxs)("blockquote",{children:["Note",(0,s.jsx)("br",{}),"If no column following the ",(0,s.jsx)("code",{children:"SELECT"})," clause uses any aggregate function, the columns following the ",(0,s.jsx)(n.code,{children:"SELECT"})," clause must be specified after the ",(0,s.jsx)("code",{children:"GROUP BY"})," clause. "]})]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"... GROUP BY col1,col2 ..."})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HAVING having_search_conditions"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["Filters the grouped data. The ",(0,s.jsx)(n.code,{children:"HAVING"})," clause is similar to the ",(0,s.jsx)(n.code,{children:"WHERE"})," clause, but the ",(0,s.jsx)(n.code,{children:"HAVING"})," clause can reference an aggregate function such as ",(0,s.jsx)(n.code,{children:"SUM()"})," and ",(0,s.jsx)(n.code,{children:"AVG()"}),"."]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"... HAVING SUM(col1) < 160 ..."})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ORDER BY order_expression_list"}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["Sorts the query results by one or multiple columns in ascending (",(0,s.jsx)(n.code,{children:"ASC"}),") or descending (",(0,s.jsx)(n.code,{children:"DESC"}),") order. If you do not specify ",(0,s.jsx)(n.code,{children:"ASC"})," or ",(0,s.jsx)(n.code,{children:"DESC"}),", the default value ",(0,s.jsx)(n.code,{children:"ASC"})," is used. ",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)(n.code,{children:"ASC"}),": indicates an ascending order. "]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(n.code,{children:"DESC"}),": indicates a descending order. "]})]})]}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"... ORDER BY col1,col2 DESC ..."})})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.p,{children:"The following takes exporting data to a local device as an example to describe how to export data."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create a table named ",(0,s.jsx)(n.code,{children:"tbl1"})," in the ",(0,s.jsx)(n.code,{children:"test"})," database in the ",(0,s.jsx)(n.code,{children:"mysql001"})," tenant and insert data into the table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"obclient [test]> CREATE TABLE tbl1(col1 INT PRIMARY KEY,col2 varchar(128),col3 INT);\nQuery OK, 0 rows affected\n\nobclient [test]> INSERT INTO tbl1 VALUES(1,'one',80),(2,'two',90),(3,'three',100);\nQuery OK, 3 rows affected\nRecords: 3  Duplicates: 0  Warnings: 0\n\nobclient [test]> SELECT * FROM tbl1;\n+------+-------+------+\n| col1 | col2  | col3 |\n+------+-------+------+\n|    1 | one   |   80 |\n|    2 | two   |   90 |\n|    3 | three |  100 |\n+------+-------+------+\n3 rows in set\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Set a path for the exported file."}),"\n",(0,s.jsxs)(n.p,{children:["Set the system variable ",(0,s.jsx)(n.code,{children:"secure_file_priv"})," to specify the path that can be accessed for file import or export."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notice"})}),"\n",(0,s.jsxs)(n.p,{children:["For security reasons, when you set the system variable ",(0,s.jsx)(n.code,{children:"secure_file_priv"}),", you can connect to the database only through a local socket to execute the SQL statement that modifies the global variable. For more information, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105254",children:"secure_file_priv"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Log on to the OBServer node to connect to."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Execute the following statement to connect to the ",(0,s.jsx)(n.code,{children:"mysql001"})," tenant through a local Unix Socket:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"[admin@test ~]$ obclient -S /home/admin/oceanbase/run/sql.sock -uroot@mysql001 -p******\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Set the export path to ",(0,s.jsx)(n.code,{children:"/home/admin"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'obclient [(none)]> SET GLOBAL secure_file_priv = "/home/admin";\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["After you reconnect to the database, execute the ",(0,s.jsx)(n.code,{children:"SELECT INTO OUTFILE"})," statement to export data from the ",(0,s.jsx)(n.code,{children:"tbl1"})," table. The name of the exported file is ",(0,s.jsx)(n.code,{children:"tbl1.sql"}),". The field values are separated with a comma (,). The values of the string type are enclosed within a pair of double quotation marks (",(0,s.jsx)(n.code,{children:'""'}),"). The end symbol is a line feed."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"obclient [test]> SELECT * INTO OUTFILE '/home/admin/tbl1.sql' \n    FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' \n    LINES TERMINATED BY '\\n' \n    FROM tbl1;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Log on to the OBServer node and check the information about the exported file in the ",(0,s.jsx)(n.code,{children:"/home/admin"})," directory on your local device."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'[admin@test ~]$ cat tbl1.sql\n1,"one",80\n2,"two",90\n3,"three",100\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"import-data-by-using-load-data",children:"Import data by using LOAD DATA"}),"\n",(0,s.jsxs)(n.p,{children:["You can use the ",(0,s.jsx)(n.code,{children:"LOAD DATA"})," statement to import data to a database from files on OBServer nodes, clients, and OSS."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notice"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Do not use the ",(0,s.jsx)(n.code,{children:"LOAD DATA"})," statement on tables with triggers."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["To import data from an external file, you must have the ",(0,s.jsx)(n.code,{children:"FILE"})," privilege and configure the following settings:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["To load files from an OBServer node, you must configure the system variable ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105254",children:"secure_file_priv"})," to specify the path that can be accessed during file import or export."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["To load local files on a client, you must add the ",(0,s.jsx)(n.code,{children:"--local-infile[=1]"})," option when starting the MySQL client or OBClient to enable data loading from the local file system."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["OceanBase Database supports the following input files for the ",(0,s.jsx)(n.code,{children:"LOAD DATA"})," statement:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Files on an OBServer node. You can execute the ",(0,s.jsx)(n.code,{children:"LOAD DATA INFILE"})," statement to load data from files on an OBServer node into database tables."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Files in the file system of the local client. You can execute the ",(0,s.jsx)(n.code,{children:"LOAD DATA LOCAL INFILE"})," statement to load data from files in the file system of the local client into database tables."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Note"})}),"\n",(0,s.jsxs)(n.p,{children:["Starting from V4.2.2, OceanBase Database in MySQL mode supports the ",(0,s.jsx)(n.code,{children:"LOAD DATA LOCAL INFILE"})," syntax to load local data files. When executing ",(0,s.jsx)(n.code,{children:"LOAD DATA LOCAL INFILE"}),", the system automatically adds the ",(0,s.jsx)(n.code,{children:"IGNORE"})," option."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Files in an OSS file system. You can execute the ",(0,s.jsx)(n.code,{children:"LOAD DATA REMOTE_OSS INFILE"})," statement to load data from files in an OSS file system into database tables."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You can use the ",(0,s.jsx)(n.code,{children:"LOAD DATA"})," statement to import a CSV text file in the following process:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Parse the file: OceanBase Database reads data from a file based on the file name that you enter and determines whether to perform parallel or serial parsing of data from the input file based on the specified degree of parallelism (DOP)."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Distribute the data: OceanBase Database is a distributed database. Data of each partition may be distributed across different OBServer nodes. The ",(0,s.jsx)(n.code,{children:"LOAD DATA"})," statement is used to calculate the parsed data and determine the OBServer node to which data needs to be sent."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Insert the data: After the destination OBServer node receives the data, it executes the ",(0,s.jsx)(n.code,{children:"INSERT"})," statement to insert the data into the corresponding partition."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For more information, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001231164",children:"LOAD DATA"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"migrate-data-between-tables",children:"Migrate data between tables"}),"\n",(0,s.jsxs)(n.p,{children:["You can migrate data between tables in the same tenant by using the ",(0,s.jsx)(n.code,{children:"INSERT INTO"})," or ",(0,s.jsx)(n.code,{children:"MERGE INTO"})," statement."]}),"\n",(0,s.jsx)(n.h3,{id:"insert-into",children:"INSERT INTO"}),"\n",(0,s.jsx)(n.h4,{id:"syntax-1",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"INSERT INTO target_table_name[(target_col_name[, target_col_name] ...)]\nSELECT [(source_col_name[, source_col_name] ...)]\nFROM source_table_name\n[WHERE expr];\n"})}),"\n",(0,s.jsx)(n.p,{children:"The following table describes the parameters."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"target_table_name"}),(0,s.jsx)(n.td,{children:"The destination table to which data is migrated."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"target_col_name"}),(0,s.jsx)(n.td,{children:"The name of a column in the destination table. To update data for all columns in the destination table, you can omit the column names."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"source_col_name"}),(0,s.jsxs)(n.td,{children:["The name of a column in the source table. To select all data, use an asterisk (*). ",(0,s.jsxs)("blockquote",{children:[(0,s.jsx)(n.strong,{children:"Notice"}),(0,s.jsx)("br",{}),"The number of columns selected must be the same as the number of columns in the destination table. "]})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"source_table_name"}),(0,s.jsx)(n.td,{children:"The source table from which data is migrated."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"WHERE expr"}),(0,s.jsxs)(n.td,{children:["The filtering condition for data migration. If you do not specify this parameter, all row records specified in ",(0,s.jsx)(n.code,{children:"SELECT"})," are migrated."]})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,s.jsxs)(n.p,{children:["This example describes how to insert data that meets the condition ",(0,s.jsx)(n.code,{children:"age"})," > 10 in the ",(0,s.jsx)(n.code,{children:"tbl1"})," table into the ",(0,s.jsx)(n.code,{children:"tbl2"})," table."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Query data in the ",(0,s.jsx)(n.code,{children:"tbl1"})," table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> SELECT * FROM tbl1;\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"+------+------+------+\n| id   | name | age  |\n+------+------+------+\n|    1 | ab   |    8 |\n|    2 | bc   |   18 |\n|    3 | cd   |   14 |\n|    4 | de   |   19 |\n|    5 | ef   |    6 |\n|    6 | fg   |   15 |\n+------+------+------+\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Query the schema of the ",(0,s.jsx)(n.code,{children:"tbl2"})," table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> DESC tbl2;\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"+-------+---------+------+-----+---------+-------+\n| Field | Type    | Null | Key | Default | Extra |\n+-------+---------+------+-----+---------+-------+\n| col1  | int(11) | YES  |     | NULL    |       |\n| col2  | int(11) | YES  |     | NULL    |       |\n+-------+---------+------+-----+---------+-------+\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Query data in the ",(0,s.jsx)(n.code,{children:"tbl2"})," table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> SELECT * FROM tbl2;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The output is as follows, which indicates that the ",(0,s.jsx)(n.code,{children:"tbl2"})," table is empty:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"Empty set\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Insert data that meets the condition ",(0,s.jsx)(n.code,{children:"age"})," > 10 in the ",(0,s.jsx)(n.code,{children:"tbl1"})," table into the ",(0,s.jsx)(n.code,{children:"tbl2"})," table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> INSERT INTO tbl2 SELECT id,age FROM tbl1 WHERE age > 10;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Query data in the ",(0,s.jsx)(n.code,{children:"tbl2"})," table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> SELECT * FROM tbl2;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The output is as follows, which indicates that the ",(0,s.jsx)(n.code,{children:"tbl2"})," table contains the data that meets the condition ",(0,s.jsx)(n.code,{children:"age"})," > 10 in the ",(0,s.jsx)(n.code,{children:"tbl1"})," table:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"+------+------+\n| col1 | col2 |\n+------+------+\n|    2 |   18 |\n|    3 |   14 |\n|    4 |   19 |\n|    6 |   15 |\n+------+------+\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"direct-load",children:"Direct load"}),"\n",(0,s.jsx)(n.p,{children:"Direct load allows OceanBase Database to write data directly to a data file. Direct load skips the SQL layer interface, directly allocates space in data files, and inserts data, thereby improving the data import efficiency."}),"\n",(0,s.jsx)(n.h3,{id:"scenarios",children:"Scenarios"}),"\n",(0,s.jsx)(n.p,{children:"The direct load feature applies to the following scenarios:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Data migration and synchronization: In data migration or synchronization, a large amount of data of different types must be migrated from different data sources to OceanBase Database. Conventional SQL interfaces cannot meet the requirement on timeliness."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Conventional extract, transform, and load (ETL): After data is extracted and transformed in the source, a large amount of data must be loaded to the destination within a short time. The direct load technology can improve the import performance. As for the extract, load, and transform (ELT) technology, the data loading efficiency can also be improved by using direct load."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Data loading from text files or other data sources to OceanBase Database: Direct load can accelerate the data loading process."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"supported-statements-for-direct-load",children:"Supported statements for direct load"}),"\n",(0,s.jsx)(n.p,{children:"At present, OceanBase Database supports the following statements for direct load:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"LOAD DATA /*+ direct */"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"INSERT /*+ append */ INTO SELECT"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notice"})}),"\n",(0,s.jsx)(n.p,{children:"Direct load will write all existing data. If the source table contains a large amount of data but only a small amount of data needs to be imported, direct load is inappropriate in this case."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"import-data-through-direct-load-by-using-the-load-data-statement",children:"Import data through direct load by using the LOAD DATA statement"}),"\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.code,{children:"LOAD DATA"})," statement, you can use the ",(0,s.jsx)(n.code,{children:"direct"})," hint to specify to use direct load."]}),"\n",(0,s.jsx)(n.h4,{id:"limitations",children:"Limitations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"You cannot execute two statements to write the same table at a time because a lock is added to the table during import."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The statement is not supported for tables with triggers."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The statement can load data of the ",(0,s.jsx)(n.code,{children:"LOB"})," type but the loading performance is poor, because ",(0,s.jsx)(n.code,{children:"LOB"})," data is still loaded to the corresponding paths by using transactions."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The statement cannot be executed in a multi-row transaction."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"considerations",children:"Considerations"}),"\n",(0,s.jsxs)(n.p,{children:["To speed up data import, OceanBase Database adopts a parallel design for ",(0,s.jsx)(n.code,{children:"LOAD DATA"})," operations. During the process, data to be imported is divided into multiple subtasks, which are executed in parallel. Each subtask is processed as an independent transaction in a random order. Therefore, observe the following considerations:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The atomicity of the overall data import operation is not guaranteed."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"For a table without a primary key, data may be written to the table in an order different from that in the source file."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"syntax-2",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"LOAD DATA /*+ direct(need_sort,max_error) parallel(N) */ INFILE 'file_name' ...\n"})}),"\n",(0,s.jsx)(n.p,{children:"The following table describes the parameters."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"direct"}),(0,s.jsx)(n.td,{children:"Specifies to use direct load."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"need_sort"}),(0,s.jsxs)(n.td,{children:["Specifies whether OceanBase Database needs to sort the data. ",(0,s.jsx)("br",{}),"The value is of the Boolean type.",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)(n.code,{children:"true"}),": Data sorting is needed. "]}),(0,s.jsxs)("li",{children:[(0,s.jsx)(n.code,{children:"false"}),": Data sorting is not needed. "]})]})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"max_error"}),(0,s.jsxs)(n.td,{children:["The maximum number of erroneous rows allowed. The value is of the INT type. If this value is exceeded, the ",(0,s.jsx)(n.code,{children:"LOAD DATA"})," statement returns an error."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"parallel(N)"}),(0,s.jsxs)(n.td,{children:["The DOP for loading data. The default value of ",(0,s.jsx)(n.code,{children:"N"})," is ",(0,s.jsx)(n.code,{children:"4"}),"."]})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"example-2",children:"Example"}),"\n",(0,s.jsxs)(n.p,{children:["This example describes how to import data from an OBServer node. In OceanBase Database, you can also use the ",(0,s.jsx)(n.code,{children:"LOCAL INFILE"})," clause in the ",(0,s.jsx)(n.code,{children:"LOAD DATA"})," statement to import local files through direct load. For more information, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001103637",children:"Import data by using the LOAD DATA statement"}),"."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Log on to the server where the target OBServer node resides and create test data in the ",(0,s.jsx)(n.code,{children:"/home"})," directory."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Note"})}),"\n",(0,s.jsxs)(n.p,{children:["In OceanBase Database, the ",(0,s.jsx)("code",{children:"LOAD DATA"})," statement can load only local input files on OBServer nodes. Therefore, you must copy the to-be-imported files to an OBServer node before the import."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"[admin@test ~]$ vi tbl1.csv\n"})}),"\n",(0,s.jsx)(n.p,{children:"The test data is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"1,11\n2,22\n3,33\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Set the path where the file to be imported is located."}),"\n",(0,s.jsxs)(n.p,{children:["Set the system variable ",(0,s.jsx)(n.code,{children:"secure_file_priv"})," to specify the path that can be accessed for file import or export."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notice"})}),"\n",(0,s.jsxs)(n.p,{children:["For security reasons, when you set the system variable ",(0,s.jsx)(n.code,{children:"secure_file_priv"}),", you can connect to the database only through a local socket to execute the SQL statement that modifies the global variable. For more information, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105254",children:"secure_file_priv"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Log on to the server where the OBServer node to connect to resides."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Execute the following statement to connect to the ",(0,s.jsx)(n.code,{children:"mysql001"})," tenant through a local Unix Socket:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"[admin@test ~]$ obclient -S /home/admin/oceanbase/run/sql.sock -uroot@mysql001 -p******\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Set the import path to ",(0,s.jsx)(n.code,{children:"/home/admin"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'obclient [(none)]> SET GLOBAL secure_file_priv = "/home/admin";\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["After you reconnect to the database, execute the ",(0,s.jsx)(n.code,{children:"LOAD /*+ APPEND */ DATA"})," statement to import data."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> CREATE TABLE tbl1(col1 INT PRIMARY KEY,col2 INT);\nQuery OK, 0 rows affected\n\nobclient [test]> SELECT * FROM tbl1;\nEmpty set\n\nobclient [test]> LOAD DATA /*+ direct(true,1024) parallel(16) */INFILE '/home/admin/tbl1.csv' INTO TABLE tbl1 FIELDS TERMINATED BY ',';\nQuery OK, 3 rows affected\nRecords: 3  Deleted: 0  Skipped: 0  Warnings: 0\n\nobclient [test]> SELECT * FROM tbl1;\n+------+------+\n| col1 | col2 |\n+------+------+\n|    1 |   11 |\n|    2 |   22 |\n|    3 |   33 |\n+------+------+\n3 rows in set\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"import-data-through-direct-load-by-using-the-insert-into-select-statement",children:"Import data through direct load by using the INSERT INTO SELECT statement"}),"\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.code,{children:"INSERT INTO SELECT"})," statement, you can use the ",(0,s.jsx)(n.code,{children:"append"})," hint in combination with the ",(0,s.jsx)(n.code,{children:"enable_parallel_dml"})," hint to enable direct load."]}),"\n",(0,s.jsx)(n.h4,{id:"limitations-1",children:"Limitations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Direct load is supported only for parallel DML."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"You cannot execute two statements to write the same table at a time because a lock is added to the table during import."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The statement is not supported for tables with triggers."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The statement can load data of the ",(0,s.jsx)(n.code,{children:"LOB"})," type but the loading performance is poor, because ",(0,s.jsx)(n.code,{children:"LOB"})," data is still loaded to the corresponding paths by using transactions."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The statement cannot be executed in a multi-row transaction that contains multiple operations."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"syntax-3",children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"INSERT /*+ append enable_parallel_dml parallel(N) */ INTO  table_name select_sentence\n"})}),"\n",(0,s.jsx)(n.p,{children:"The following table describes the parameters."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"append"}),(0,s.jsx)(n.td,{children:"Specifies to use direct load."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"enable_parallel_dml parallel(N)"}),(0,s.jsxs)(n.td,{children:["The DOP for loading data. The default value of ",(0,s.jsx)(n.code,{children:"N"})," is ",(0,s.jsx)(n.code,{children:"4"}),". ",(0,s.jsxs)("blockquote",{children:[(0,s.jsx)(n.strong,{children:"Note"}),(0,s.jsx)("br",{}),"In most cases, the ",(0,s.jsx)("code",{children:"enable_parallel_dml"})," hint must be used together with the ",(0,s.jsx)("code",{children:"parallel"})," hint to enable parallel DML. However, if the table-level DOP is specified on the schema of the target table, you only need to specify the ",(0,s.jsx)("code",{children:"enable_parallel_dml"})," hint. "]})]})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"example-3",children:"Example"}),"\n",(0,s.jsxs)(n.p,{children:["This example describes how to import part of the data in the ",(0,s.jsx)(n.code,{children:"tbl2"})," table to the ",(0,s.jsx)(n.code,{children:"tbl1"})," table through direct load."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Query data in the ",(0,s.jsx)(n.code,{children:"tbl1"})," table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> SELECT * FROM tbl1;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The output is as follows, which indicates that the ",(0,s.jsx)(n.code,{children:"tbl1"})," table is empty:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"Empty set\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Query data in the ",(0,s.jsx)(n.code,{children:"tbl2"})," table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> SELECT * FROM tbl2;\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"+------+------+------+\n| col1 | col2 | col3 |\n+------+------+------+\n|    1 | a1   |   11 |\n|    2 | a2   |   22 |\n|    3 | a3   |   33 |\n+------+------+------+\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Import part of the data in the ",(0,s.jsx)(n.code,{children:"tbl2"})," table to the ",(0,s.jsx)(n.code,{children:"tbl1"})," table through direct load."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> INSERT /*+ append enable_parallel_dml parallel(16) */ INTO tbl1 SELECT t2.col1,t2.col3 FROM tbl2 t2;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Query data in the ",(0,s.jsx)(n.code,{children:"tbl1"})," table."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> SELECT * FROM tbl1;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The output is as follows, which indicates that the ",(0,s.jsx)(n.code,{children:"tbl1"})," table already contains part of the data in the ",(0,s.jsx)(n.code,{children:"tbl2"})," table:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"+------+------+\n| col1 | col2 |\n+------+------+\n|    1 |   11 |\n|    2 |   22 |\n|    3 |   33 |\n+------+------+\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.code,{children:"Note"})," section of the return result of the ",(0,s.jsx)(n.code,{children:"EXPLAIN EXTENDED"})," statement, check whether the data is written through direct load. The statement is as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"obclient [test]> EXPLAIN EXTENDED INSERT /*+ append enable_parallel_dml parallel(16) */ INTO tbl1 SELECT t2.col1,t2.col3 FROM tbl2 t2;\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Query Plan                                                                                                                                                                                                                         |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| ===========================================================================                                                                                                                                                        |\n| |ID|OPERATOR                        |NAME           |EST.ROWS|EST.TIME(us)|                                                                                                                                                        |\n| ---------------------------------------------------------------------------                                                                                                                                                        |\n| |0 |OPTIMIZER STATS MERGE           |               |3       |27          |                                                                                                                                                        |\n| |1 | PX COORDINATOR                 |               |3       |27          |                                                                                                                                                        |\n| |2 |  EXCHANGE OUT DISTR            |:EX10001       |3       |27          |                                                                                                                                                        |\n| |3 |   INSERT                       |               |3       |26          |                                                                                                                                                        |\n| |4 |    EXCHANGE IN DISTR           |               |3       |1           |                                                                                                                                                        |\n| |5 |     EXCHANGE OUT DISTR (RANDOM)|:EX10000       |3       |1           |                                                                                                                                                        |\n| |6 |      OPTIMIZER STATS GATHER    |               |3       |1           |                                                                                                                                                        |\n| |7 |       SUBPLAN SCAN             |ANONYMOUS_VIEW1|3       |1           |                                                                                                                                                        |\n| |8 |        PX BLOCK ITERATOR       |               |3       |1           |                                                                                                                                                        |\n| |9 |         TABLE SCAN             |t2             |3       |1           |                                                                                                                                                        |\n| ===========================================================================                                                                                                                                                        |\n| Outputs & filters:                                                                                                                                                                                                                 |\n| -------------------------------------                                                                                                                                                                                              |\n|   0 - output(nil), filter(nil), rowset=256                                                                                                                                                                                         |\n|   1 - output([column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col1(0x7f0ba6a51800))(0x7f0ba6a522c0)], [column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col3(0x7f0ba6a51ac0))(0x7f0ba6a59630)]),                                      |\n| filter(nil), rowset=256                                                                                                                                                                                                            |\n|   2 - output([column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col1(0x7f0ba6a51800))(0x7f0ba6a522c0)], [column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col3(0x7f0ba6a51ac0))(0x7f0ba6a59630)]),                                      |\n| filter(nil), rowset=256                                                                                                                                                                                                            |\n|       dop=16                                                                                                                                                                                                                       |\n|   3 - output([column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col1(0x7f0ba6a51800))(0x7f0ba6a522c0)], [column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col3(0x7f0ba6a51ac0))(0x7f0ba6a59630)]),                                      |\n| filter(nil)                                                                                                                                                                                                                        |\n|       columns([{tbl1: ({tbl1: (tbl1.__pk_increment(0x7f0ba6a51d80), tbl1.col1(0x7f0ba6a30a90), tbl1.col2(0x7f0ba6a30d50))})}]), partitions(p0),                                                                                    |\n|       column_values([T_HIDDEN_PK(0x7f0ba6a52040)], [column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col1(0x7f0ba6a51800))(0x7f0ba6a522c0)], [column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col3(0x7f0ba6a51ac0))(0x7f0ba6a59630)]) |\n|   4 - output([column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col1(0x7f0ba6a51800))(0x7f0ba6a522c0)], [column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col3(0x7f0ba6a51ac0))(0x7f0ba6a59630)],                                       |\n| [T_HIDDEN_PK(0x7f0ba6a52040)]), filter(nil), rowset=256                                                                                                                                                                            |\n|   5 - output([column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col1(0x7f0ba6a51800))(0x7f0ba6a522c0)], [column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col3(0x7f0ba6a51ac0))(0x7f0ba6a59630)],                                       |\n| [T_HIDDEN_PK(0x7f0ba6a52040)]), filter(nil), rowset=256                                                                                                                                                                            |\n|       dop=16                                                                                                                                                                                                                       |\n|   6 - output([column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col1(0x7f0ba6a51800))(0x7f0ba6a522c0)], [column_conv(INT,PS:(11,0),NULL,ANONYMOUS_VIEW1.col3(0x7f0ba6a51ac0))(0x7f0ba6a59630)]),                                      |\n| filter(nil), rowset=256                                                                                                                                                                                                            |\n|   7 - output([ANONYMOUS_VIEW1.col1(0x7f0ba6a51800)], [ANONYMOUS_VIEW1.col3(0x7f0ba6a51ac0)]), filter(nil), rowset=256                                                                                                              |\n|       access([ANONYMOUS_VIEW1.col1(0x7f0ba6a51800)], [ANONYMOUS_VIEW1.col3(0x7f0ba6a51ac0)])                                                                                                                                       |\n|   8 - output([t2.col1(0x7f0ba6a50d40)], [t2.col3(0x7f0ba6a512f0)]), filter(nil), rowset=256                                                                                                                                        |\n|   9 - output([t2.col1(0x7f0ba6a50d40)], [t2.col3(0x7f0ba6a512f0)]), filter(nil), rowset=256                                                                                                                                        |\n|       access([t2.col1(0x7f0ba6a50d40)], [t2.col3(0x7f0ba6a512f0)]), partitions(p0)                                                                                                                                                 |\n|       is_index_back=false, is_global_index=false,                                                                                                                                                                                  |\n|       range_key([t2.__pk_increment(0x7f0ba6a6ccf0)]), range(MIN ; MAX)always true                                                                                                                                                  |\n| Used Hint:                                                                                                                                                                                                                         |\n| -------------------------------------                                                                                                                                                                                              |\n| /*+                                                                                                                                                                                                                                |\n|                                                                                                                                                                                                                                    |\n|       USE_PLAN_CACHE( NONE )                                                                                                                                                                                                       |\n|       PARALLEL(16)                                                                                                                                                                                                                 |\n|       ENABLE_PARALLEL_DML                                                                                                                                                                                                          |\n|       APPEND                                                                                                                                                                                                                       |\n|       APPEND                                                                                                                                                                                                                       |\n| */                                                                                                                                                                                                                                 |\n| Qb name trace:                                                                                                                                                                                                                     |\n| -------------------------------------                                                                                                                                                                                              |\n|   stmt_id:0, stmt_type:T_EXPLAIN                                                                                                                                                                                                   |\n|   stmt_id:1, INS$1                                                                                                                                                                                                                 |\n|   stmt_id:2, SEL$1                                                                                                                                                                                                                 |\n| Outline Data:                                                                                                                                                                                                                      |\n| -------------------------------------                                                                                                                                                                                              |\n| /*+                                                                                                                                                                                                                                |\n|       BEGIN_OUTLINE_DATA                                                                                                                                                                                                           |\n|       FULL(@"SEL$1" "test"."t2"@"SEL$1")                                                                                                                                                                                           |\n|       USE_PLAN_CACHE( NONE )                                                                                                                                                                                                       |\n|       PARALLEL(16)                                                                                                                                                                                                                 |\n|       ENABLE_PARALLEL_DML                                                                                                                                                                                                          |\n|       OPTIMIZER_FEATURES_ENABLE(\'4.0.0.0\')                                                                                                                                                                                         |\n|       APPEND                                                                                                                                                                                                                       |\n|       APPEND                                                                                                                                                                                                                       |\n|       END_OUTLINE_DATA                                                                                                                                                                                                             |\n| */                                                                                                                                                                                                                                 |\n| Optimization Info:                                                                                                                                                                                                                 |\n| -------------------------------------                                                                                                                                                                                              |\n| t2:                                                                                                                                                                                                                                |\n|       table_rows:3                                                                                                                                                                                                                 |\n|       physical_range_rows:3                                                                                                                                                                                                        |\n|       logical_range_rows:3                                                                                                                                                                                                         |\n|       index_back_rows:0                                                                                                                                                                                                            |\n|       output_rows:3                                                                                                                                                                                                                |\n|       est_method:local_storage                                                                                                                                                                                                     |\n|       optimization_method:cost_based                                                                                                                                                                                               |\n|       avaiable_index_name:[tbl2]                                                                                                                                                                                                   |\n|       table_id:500004:estimation info:(table_type:12, version:-1--1--1, logical_rc:3, physical_rc:3)]                                                                                                                              |\n|       stats version:0                                                                                                                                                                                                              |\n| Plan Type:                                                                                                                                                                                                                         |\n|       DISTRIBUTED                                                                                                                                                                                                                  |\n| Note:                                                                                                                                                                                                                              |\n|       Degree of Parallelism is 16 because of hint                                                                                                                                                                                  |\n|       Direct-mode is enabled in insert into select                                                                                                                                                                                 |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n86 rows in set\n'})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var s=t(96540);const a={},i=s.createContext(a);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);
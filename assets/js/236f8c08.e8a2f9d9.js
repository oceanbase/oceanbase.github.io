"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[8713],{64416:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var s=t(74848),o=t(28453);const a={title:"Create a MySQL user tenant",weight:7},r="2.6 Create a MySQL user tenant",c={id:"user_manual/quick_starts_and_hands_on_practices_in_english/chapter_02_deploy_oceanbase_database/create-tenant",title:"Create a MySQL user tenant",description:"We recommend that you create a user tenant by referring to this topic for testing or business purposes. It is prohibited to use the sys tenant for such purposes.",source:"@site/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_02_deploy_oceanbase_database/06_create-tenant.md",sourceDirName:"user_manual/quick_starts_and_hands_on_practices_in_english/chapter_02_deploy_oceanbase_database",slug:"/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_02_deploy_oceanbase_database/create-tenant",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_02_deploy_oceanbase_database/create-tenant",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_02_deploy_oceanbase_database/06_create-tenant.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Create a MySQL user tenant",weight:7},sidebar:"quick_starts_and_hands_on_practices_in_englishSidebar",previous:{title:"View the resource usage of an OceanBase cluster",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_02_deploy_oceanbase_database/view-resources"},next:{title:"Connect to a tenant",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_02_deploy_oceanbase_database/connecting-tenants"}},i={},l=[{value:"Create a tenant by using OCP",id:"create-a-tenant-by-using-ocp",level:2},{value:"Create a tenant by using an OBD command",id:"create-a-tenant-by-using-an-obd-command",level:2},{value:"Create a tenant by using SQL statements",id:"create-a-tenant-by-using-sql-statements",level:2},{value:"(Optional) Step 1: Create a unit config",id:"optional-step-1-create-a-unit-config",level:3},{value:"Step 2: Create a resource pool",id:"step-2-create-a-resource-pool",level:3},{value:"Step 3: Create a tenant",id:"step-3-create-a-tenant",level:3},{value:"Create a tenant by using ob-operator",id:"create-a-tenant-by-using-ob-operator",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Procedure",id:"procedure",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"26-create-a-mysql-user-tenant",children:"2.6 Create a MySQL user tenant"})}),"\n",(0,s.jsx)(n.p,{children:"We recommend that you create a user tenant by referring to this topic for testing or business purposes. It is prohibited to use the sys tenant for such purposes."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notice"})}),"\n",(0,s.jsx)(n.p,{children:"OceanBase Database Community Edition supports creating only MySQL tenants."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"create-a-tenant-by-using-ocp",children:"Create a tenant by using OCP"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Note"})}),"\n",(0,s.jsxs)(n.p,{children:["This section briefly describes how to create a tenant by using OceanBase Cloud Platform (OCP). For more information, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-ocp-10000000001483666",children:"Create a tenant"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Configure tenant information as shown in the following figure."}),"\n",(0,s.jsxs)(n.p,{children:["If no unit config is suitable, you can create one. After you create a unit config in OCP, it is not immediately recorded in the internal view ",(0,s.jsx)(n.code,{children:"DBA_OB_UNIT_CONFIGS"})," of OceanBase Database, but rather in the ",(0,s.jsx)(n.code,{children:"meta_database.ob_unit_spec"})," table of OCP. The unit config is actually created only when you create a tenant."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Configure the tenant",src:t(9698).A+"",width:"2876",height:"1294"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Configure the IP address allowlist and variables of the tenant."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Configure the tenant",src:t(57881).A+"",width:"1500",height:"666"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"View the tenant creation task."}),"\n",(0,s.jsx)(n.p,{children:"To learn about the task execution process, you can download the logs."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"View logs",src:t(77328).A+"",width:"2878",height:"1376"})}),"\n",(0,s.jsx)(n.p,{children:"You can learn from the logs that OCP will respectively name each unit and resource pool during tenant creation, which is not the case when you create a tenant in OceanBase Deployer (OBD). This practice brings the following benefits:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Units are not reused. Adjusting the unit config of one tenant will not affect other tenants."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Resource pools are not reused. After an OBServer node is deleted, you do not need to split resource pools for tenants on the node."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"create-a-tenant-by-using-an-obd-command",children:"Create a tenant by using an OBD command"}),"\n",(0,s.jsxs)(n.p,{children:["If the cluster where a tenant is to be created is managed by OBD, you can use an OBD command to create the tenant. If the cluster where a tenant is to be created is not managed by OBD, the cluster version is OceanBase Database Community Edition V4.2.1 BP4 or later, and OBShell has been started, you can first run a takeover command and then run the following OBD command to create the tenant. For more information about the takeover, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/community-obd-en-10000000001181553",children:"OceanBase Deployer Documentation Center"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"obd cluster tenant create obtest -n test2 \\\n--max-cpu=2 --memory-size=2G --log-disk-size=3G --max-iops=10000 \\\n--unit-num=1 --charset=utf8 -s 'ob_tcp_invited_nodes=\"%\"'\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For more information about the ",(0,s.jsx)(n.code,{children:"obd cluster tenant create"})," command, see the ",(0,s.jsx)(n.strong,{children:"obd cluster tenant create"})," section in ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/community-obd-en-10000000001181575",children:"Cluster commands"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In this command, ",(0,s.jsx)(n.code,{children:"obtest"})," is a sample cluster name (",(0,s.jsx)(n.code,{children:"deploy name"}),"). You can run the ",(0,s.jsx)(n.code,{children:"obd cluster list"})," command and replace ",(0,s.jsx)(n.code,{children:"obtest"})," with a value in the ",(0,s.jsx)(n.code,{children:"Name"})," column of the output."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"test2"})," is a sample tenant name."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The resource unit and resource pool used by a tenant created by using the OBD command are respectively named ",(0,s.jsx)(n.code,{children:"${tenant_name}_unit"})," and ",(0,s.jsx)(n.code,{children:"${tenant_name}_pool"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The output is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"Get local repositories and plugins ok\nOpen ssh connection ok\nConnect to observer 10.10.10.1:2881 ok\nCreate tenant test2 ok\nTrace ID: 4af55084-cf17-11ee-b825-00163e04608d\nIf you want to view detailed obd logs, please run: obd display-trace 4af55084-cf17-11ee-b825-00163e04608d\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You can copy and run the ",(0,s.jsx)(n.code,{children:"obd display"})," command in the output to view the logs that record the detailed creation process."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"obd display-trace 4af55084-cf17-11ee-b825-00163e04608d\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"[2024-02-19 19:09:04.385] [DEBUG] - cmd: ['obtest']\n[2024-02-19 19:09:04.385] [DEBUG] - opts: {'tenant_name': 'test2', 'max_cpu': 2.0, 'min_cpu': None, 'max_memory': None, 'min_memory': None, 'memory_size': '2G', 'max_disk_size': None, 'log_disk_size': '3G', 'max_iops': 10000, 'min_iops': None, 'iops_weight': None, 'max_session_num': None, 'unit_num': 1, 'zone_list': None, 'mode': 'mysql', 'charset': 'utf8', 'collate': None, 'replica_num': None, 'logonly_replica_num': None, 'tablegroup': None, 'primary_zone': 'RANDOM', 'locality': None, 'variables': 'ob_tcp_invited_nodes=\"%\"'}\n[2024-02-19 19:09:04.385] [DEBUG] - mkdir /home/admin/.obd/lock/\n[2024-02-19 19:09:04.385] [DEBUG] - unknown lock mode\n[2024-02-19 19:09:04.386] [DEBUG] - try to get share lock /home/admin/.obd/lock/global\n[2024-02-19 19:09:04.386] [DEBUG] - share lock `/home/admin/.obd/lock/global`, count 1\n[2024-02-19 19:09:04.386] [DEBUG] - Get Deploy by name\n[2024-02-19 19:09:04.386] [DEBUG] - mkdir /home/admin/.obd/cluster/\n[2024-02-19 19:09:04.386] [DEBUG] - mkdir /home/admin/.obd/config_parser/\n[2024-02-19 19:09:04.386] [DEBUG] - try to get exclusive lock /home/admin/.obd/lock/deploy_obtest\n[2024-02-19 19:09:04.386] [DEBUG] - exclusive lock `/home/admin/.obd/lock/deploy_obtest`, count 1\n[2024-02-19 19:09:04.390] [DEBUG] - Deploy status judge\n[2024-02-19 19:09:04.390] [DEBUG] - Get deploy config\n[2024-02-19 19:09:04.407] [INFO] Get local repositories and plugins\n[2024-02-19 19:09:04.407] [DEBUG] - mkdir /home/admin/.obd/repository\n[2024-02-19 19:09:04.407] [DEBUG] - Get local repository oceanbase-ce-4.2.2.0-aa3053da7370a6685a2ef457cd202d50e5ab75d3\n[2024-02-19 19:09:04.407] [DEBUG] - try to get share lock /home/admin/.obd/lock/mirror_and_repo\n[2024-02-19 19:09:04.408] [DEBUG] - share lock `/home/admin/.obd/lock/mirror_and_repo`, count 1\n[2024-02-19 19:09:04.409] [DEBUG] - Get local repository obproxy-ce-4.2.1.0-0aed4b782120e4248b749f67be3d2cc82cdcb70d\n[2024-02-19 19:09:04.409] [DEBUG] - share lock `/home/admin/.obd/lock/mirror_and_repo`, count 2\n[2024-02-19 19:09:04.410] [DEBUG] - Searching param plugin for components ...\n[2024-02-19 19:09:04.410] [DEBUG] - Search param plugin for oceanbase-ce\n[2024-02-19 19:09:04.410] [DEBUG] - mkdir /home/admin/.obd/plugins\n[2024-02-19 19:09:04.411] [DEBUG] - Found for oceanbase-ce-param-4.2.2.0 for oceanbase-ce-4.2.2.0\n[2024-02-19 19:09:04.411] [DEBUG] - Applying oceanbase-ce-param-4.2.2.0 for oceanbase-ce-4.2.2.0-100000192024011915.el7-aa3053da7370a6685a2ef457cd202d50e5ab75d3\n[2024-02-19 19:09:04.762] [DEBUG] - Search param plugin for obproxy-ce\n[2024-02-19 19:09:04.763] [DEBUG] - Found for obproxy-ce-param-3.1.0 for obproxy-ce-4.2.1.0\n[2024-02-19 19:09:04.763] [DEBUG] - Applying obproxy-ce-param-3.1.0 for obproxy-ce-4.2.1.0-11.el7-0aed4b782120e4248b749f67be3d2cc82cdcb70d\n[2024-02-19 19:09:04.846] [DEBUG] - Searching connect plugin for components ...\n[2024-02-19 19:09:04.846] [DEBUG] - Searching connect plugin for oceanbase-ce-4.2.2.0-100000192024011915.el7-aa3053da7370a6685a2ef457cd202d50e5ab75d3\n[2024-02-19 19:09:04.846] [DEBUG] - Found for oceanbase-ce-py_script_connect-4.2.2.0 for oceanbase-ce-4.2.2.0\n[2024-02-19 19:09:04.846] [DEBUG] - Searching connect plugin for obproxy-ce-4.2.1.0-11.el7-0aed4b782120e4248b749f67be3d2cc82cdcb70d\n[2024-02-19 19:09:04.846] [DEBUG] - Found for obproxy-ce-py_script_connect-3.1.0 for obproxy-ce-4.2.1.0\n[2024-02-19 19:09:04.846] [DEBUG] - Searching create_tenant plugin for components ...\n[2024-02-19 19:09:04.847] [DEBUG] - Searching create_tenant plugin for oceanbase-ce-4.2.2.0-100000192024011915.el7-aa3053da7370a6685a2ef457cd202d50e5ab75d3\n[2024-02-19 19:09:04.847] [DEBUG] - Found for oceanbase-ce-py_script_create_tenant-4.2.0.0 for oceanbase-ce-4.2.2.0\n[2024-02-19 19:09:04.847] [DEBUG] - Searching create_tenant plugin for obproxy-ce-4.2.1.0-11.el7-0aed4b782120e4248b749f67be3d2cc82cdcb70d\n[2024-02-19 19:09:04.847] [DEBUG] - No such create_tenant plugin for obproxy-ce-4.2.1.0\n[2024-02-19 19:09:04.960] [INFO] Open ssh connection\n[2024-02-19 19:09:04.960] [DEBUG] - host: 10.10.10.1, port: 22, user: admin, password: None\n[2024-02-19 19:09:05.019] [DEBUG] - host: 10.10.10.2, port: 22, user: admin, password: None\n[2024-02-19 19:09:05.076] [DEBUG] - host: 10.10.10.3, port: 22, user: admin, password: None\n[2024-02-19 19:09:05.132] [DEBUG] - host: 10.10.10.2, port: 22, user: admin, password: None\n[2024-02-19 19:09:05.221] [DEBUG] - Call oceanbase-ce-py_script_connect-4.2.2.0 for oceanbase-ce-4.2.2.0-100000192024011915.el7-aa3053da7370a6685a2ef457cd202d50e5ab75d3\n[2024-02-19 19:09:05.221] [DEBUG] - import connect\n[2024-02-19 19:09:05.281] [DEBUG] - add connect ref count to 1\n[2024-02-19 19:09:05.282] [DEBUG] -- connect obshell (10.10.10.1:2886)\n[2024-02-19 19:09:05.282] [DEBUG] -- connect obshell (10.10.10.2:2886)\n[2024-02-19 19:09:05.282] [DEBUG] -- connect obshell (10.10.10.3:2886)\n[2024-02-19 19:09:05.282] [INFO] Connect to observer\n[2024-02-19 19:09:05.283] [DEBUG] -- connect 10.10.10.1 -P12881 -uroot -pRoot2023@@Root2023\n[2024-02-19 19:09:05.284] [DEBUG] -- execute sql: select 1. args: None\n[2024-02-19 19:09:05.414] [DEBUG] - sub connect ref count to 0\n[2024-02-19 19:09:05.414] [DEBUG] - export connect\n[2024-02-19 19:09:05.414] [DEBUG] - Call oceanbase-ce-py_script_create_tenant-4.2.0.0 for oceanbase-ce-4.2.2.0-100000192024011915.el7-aa3053da7370a6685a2ef457cd202d50e5ab75d3\n[2024-02-19 19:09:05.414] [DEBUG] - import create_tenant\n[2024-02-19 19:09:05.417] [DEBUG] - add create_tenant ref count to 1\n[2024-02-19 19:09:05.418] [DEBUG] -- execute sql: select * from oceanbase.DBA_OB_UNIT_CONFIGS where name like \"test2_unit%\" order by unit_config_id desc limit 1. args: None\n[2024-02-19 19:09:05.420] [DEBUG] -- execute sql: select * from oceanbase.DBA_OB_TENANTS where TENANT_NAME = %s. args: ('test2',)\n[2024-02-19 19:09:05.439] [INFO] Create tenant test2\n[2024-02-19 19:09:05.440] [DEBUG] -- execute sql: select zone, count(*) num from oceanbase. __all_server where status = 'active' group by zone. args: None\n[2024-02-19 19:09:05.441] [DEBUG] -- execute sql: select count(*) num from oceanbase. __all_server where status = 'active' and start_service_time > 0. args: None\n[2024-02-19 19:09:05.442] [DEBUG] -- execute sql: SELECT * FROM oceanbase.GV$OB_SERVERS where zone in ('zone1','zone2','zone3'). args: None\n[2024-02-19 19:09:05.447] [DEBUG] -- execute sql: create resource unit test2_unit max_cpu 2.0, memory_size 2147483648, min_cpu 2.0, max_iops 10000, log_disk_size 3221225472. args: None\n[2024-02-19 19:09:05.453] [DEBUG] -- execute sql: create resource pool test2_pool unit='test2_unit', unit_num=1, zone_list=('zone1','zone2','zone3'). args: None\n[2024-02-19 19:09:05.472] [DEBUG] -- execute sql: create tenant test2 replica_num=3,zone_list=('zone1','zone2','zone3'),primary_zone='RANDOM',resource_pool_list=('test2_pool'), charset = 'utf8'set ob_tcp_invited_nodes=\"%\", ob_compatibility_mode = 'mysql'. args: None\n[2024-02-19 19:09:38.645] [DEBUG] - sub create_tenant ref count to 0\n[2024-02-19 19:09:38.645] [DEBUG] - export create_tenant\n[2024-02-19 19:09:38.645] [INFO] Trace ID: 4af55084-cf17-11ee-b825-00163e04608d\n[2024-02-19 19:09:38.645] [INFO] If you want to view detailed obd logs, please run: obd display-trace 4af55084-cf17-11ee-b825-00163e04608d\n[2024-02-19 19:09:38.645] [DEBUG] - share lock /home/admin/.obd/lock/mirror_and_repo release, count 1\n[2024-02-19 19:09:38.645] [DEBUG] - share lock /home/admin/.obd/lock/mirror_and_repo release, count 0\n[2024-02-19 19:09:38.645] [DEBUG] - unlock /home/admin/.obd/lock/mirror_and_repo\n[2024-02-19 19:09:38.645] [DEBUG] - exclusive lock /home/admin/.obd/lock/deploy_obtest release, count 0\n[2024-02-19 19:09:38.645] [DEBUG] - unlock /home/admin/.obd/lock/deploy_obtest\n[2024-02-19 19:09:38.646] [DEBUG] - share lock /home/admin/.obd/lock/global release, count 0\n[2024-02-19 19:09:38.646] [DEBUG] - unlock /home/admin/.obd/lock/global\n"})}),"\n",(0,s.jsx)(n.p,{children:"After the tenant is created, you can view it by running the following OBD command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"obd cluster tenant show obtest -t test2\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"Get local repositories and plugins ok\nGet deployment connections ok\nConnect to observer 10.10.10.1:2881 ok\nSelect tenant ok\n+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n|                                                                          tenant base info                                                                         |\n+-------------+-------------+--------------------+--------------+---------+---------+-------------+----------+----------+---------------+-------------+-------------+\n| tenant_name | tenant_type | compatibility_mode | primary_zone | max_cpu | min_cpu | memory_size | max_iops | min_iops | log_disk_size | iops_weight | tenant_role |\n+-------------+-------------+--------------------+--------------+---------+---------+-------------+----------+----------+---------------+-------------+-------------+\n| test2       | USER        | MYSQL              | RANDOM       | 2.0     | 2.0     | 2.0G        | 10000    | 10000    | 3.0G          | 0           | PRIMARY     |\n+-------------+-------------+--------------------+--------------+---------+---------+-------------+----------+----------+---------------+-------------+-------------+\nTrace ID: 00f5e506-cf18-11ee-a74f-00163e04608d\nIf you want to view detailed obd logs, please run: obd display-trace 00f5e506-cf18-11ee-a74f-00163e04608d\n"})}),"\n",(0,s.jsx)(n.h2,{id:"create-a-tenant-by-using-sql-statements",children:"Create a tenant by using SQL statements"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Note"})}),"\n",(0,s.jsx)(n.p,{children:"Log on as the root user to the sys tenant and execute the following statements."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The tenant creation procedure comprises three steps."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a unit config: This step is optional. If an appropriate unit config exists, you can skip this step and reuse the existing one."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a resource pool: You can either create a separate resource pool for each zone, allowing them to use independent unit configs, or create a single resource pool for all zones, so they share the same unit config."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a tenant: When you create a tenant, you must associate the tenant with the resource pool created in step 2."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"optional-step-1-create-a-unit-config",children:"(Optional) Step 1: Create a unit config"}),"\n",(0,s.jsx)(n.p,{children:"A unit config describes the specifications of each resource unit in a resource pool, such as the available CPU cores, memory, log disk size, and IOPS. After you create a unit config, resources are not actually allocated."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a unit config."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"create resource unit u0 min_cpu=2,max_cpu=2,memory_size='2g', log_disk_size='6g',max_iops=10000;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"View the details of the unit config."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from oceanbase.DBA_OB_UNIT_CONFIGS;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The output is as follows. For more information about the ",(0,s.jsx)(n.code,{children:"DBA_OB_UNIT_CONFIGS"})," view, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001104379",children:"oceanbase.DBA_OB_UNIT_CONFIGS"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"+----------------+-----------------+----------------------------+----------------------------+---------+---------+-------------+---------------+---------------------+---------------------+-------------+\n| UNIT_CONFIG_ID | NAME            | CREATE_TIME                | MODIFY_TIME                | MAX_CPU | MIN_CPU | MEMORY_SIZE | LOG_DISK_SIZE | MAX_IOPS            | MIN_IOPS            | IOPS_WEIGHT |\n+----------------+-----------------+----------------------------+----------------------------+---------+---------+-------------+---------------+---------------------+---------------------+-------------+\n|              1 | sys_unit_config | 2024-02-19 15:33:47.524052 | 2024-02-19 15:33:47.524052 |       2 |       2 |  1073741824 |    3221225472 | 9223372036854775807 | 9223372036854775807 |           2 |\n|           1001 | u0              | 2024-02-19 15:50:23.848604 | 2024-02-19 15:50:23.848604 |       2 |       2 |  2147483648 |    6442450944 |               10000 |               10000 |           0 |\n+----------------+-----------------+----------------------------+----------------------------+---------+---------+-------------+---------------+---------------------+---------------------+-------------+\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-create-a-resource-pool",children:"Step 2: Create a resource pool"}),"\n",(0,s.jsxs)(n.p,{children:["When you create a resource pool, resource units are created. Resources are allocated to the resource units based on the unit config. If the resources reserved on a node are insufficient, the creation will fail. You can query the ",(0,s.jsx)(n.code,{children:"GV$OB_SERVERS"})," view for the resource allocation information about all nodes. After a resource pool is created, you can query the ",(0,s.jsx)(n.code,{children:"DBA_OB_RESOURCE_POOLS"})," and ",(0,s.jsx)(n.code,{children:"DBA_OB_UNITS"})," views for the resource pool and its resource units."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notice"})}),"\n",(0,s.jsx)(n.p,{children:"A resource pool cannot be reused. After a tenant is created, the specified resource pool will be allocated to the tenant."}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a resource pool."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"create resource pool p1 unit='u0', zone_list=('zone1','zone2','zone3'),unit_num=1;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Log on as the root user to the sys tenant of the OceanBase cluster and view the details of the resource pool."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select t4.tenant_id,t4.tenant_name,\n    t1.name resource_pool_name, t1.unit_count,\n    t2.`name` unit_config_name,\n    t2.max_cpu, t2.min_cpu,\n    ROUND(t2.memory_size/1024/1024/1024,2) mem_size_gb,\n    ROUND(t2.log_disk_size/1024/1024/1024,2) log_disk_size_gb, t2.max_iops,\n    t2.min_iops, t3.unit_id, t3.zone, concat(t3.svr_ip,':' ,t3.`svr_port`) observer\n    from oceanbase.dba_ob_resource_pools t1\n    join oceanbase.dba_ob_unit_configs t2 on (t1.unit_config_id=t2.unit_config_id)\n    join oceanbase.dba_ob_units t3 on (t1.`resource_pool_id` = t3.`resource_pool_id`)\n    left join oceanbase.dba_ob_tenants t4 on (t1.tenant_id=t4.tenant_id)\n    order by t4.tenant_name,t3.zone;\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"+-----------+-------------+--------------------+------------+------------------+---------+---------+-------------+------------------+---------------------+---------------------+---------+-------+-----------------+\n| tenant_id | tenant_name | resource_pool_name | unit_count | unit_config_name | max_cpu | min_cpu | mem_size_gb | log_disk_size_gb | max_iops            | min_iops            | unit_id | zone  | observer        |\n+-----------+-------------+--------------------+------------+------------------+---------+---------+-------------+------------------+---------------------+---------------------+---------+-------+-----------------+\n|      NULL | NULL        | p1                 |          1 | u0               |       2 |       2 |        2.00 |             6.00 |               10000 |               10000 |    1007 | zone1 | 10.10.10.1:2882 |\n|      NULL | NULL        | p1                 |          1 | u0               |       2 |       2 |        2.00 |             6.00 |               10000 |               10000 |    1008 | zone2 | 10.10.10.2:2882 |\n|      NULL | NULL        | p1                 |          1 | u0               |       2 |       2 |        2.00 |             6.00 |               10000 |               10000 |    1009 | zone3 | 10.10.10.3:2882 |\n|         1 | sys         | sys_pool           |          1 | sys_unit_config  |       2 |       2 |        1.00 |             3.00 | 9223372036854775807 | 9223372036854775807 |       1 | zone1 | 10.10.10.1:2882 |\n|         1 | sys         | sys_pool           |          1 | sys_unit_config  |       2 |       2 |        1.00 |             3.00 | 9223372036854775807 | 9223372036854775807 |       2 | zone2 | 10.10.10.2:2882 |\n|         1 | sys         | sys_pool           |          1 | sys_unit_config  |       2 |       2 |        1.00 |             3.00 | 9223372036854775807 | 9223372036854775807 |       3 | zone3 | 10.10.10.3:2882 |\n+-----------+-------------+--------------------+------------+------------------+---------+---------+-------------+------------------+---------------------+---------------------+---------+-------+-----------------+\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Note"})}),"\n",(0,s.jsxs)(n.p,{children:["The newly created resource pool ",(0,s.jsx)(n.code,{children:"p1"})," is not associated with any tenant. Therefore, the ",(0,s.jsx)(n.code,{children:"tenant_id"})," and ",(0,s.jsx)(n.code,{children:"tenant_name"})," values in the output are both ",(0,s.jsx)(n.code,{children:"NULL"}),", meaning that the resource pool cannot be used by the business system."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The following table describes the columns in the ",(0,s.jsx)(n.code,{children:"DBA_OB_RESOURCE_POOLS"})," view. For more information about the columns, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001104220",children:"oceanbase.DBA_OB_RESOURCE_POOLS"}),"."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Column"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Nullable"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"NAME"}),(0,s.jsx)(n.td,{children:"varchar(128)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The name of the resource pool."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"UNIT_COUNT"}),(0,s.jsx)(n.td,{children:"bigint(20)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The number of resource units in the resource pool."})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["The following table describes the columns in the ",(0,s.jsx)(n.code,{children:"DBA_OB_UNIT_CONFIGS"})," view. For more information about the columns, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001104379",children:"oceanbase.DBA_OB_UNIT_CONFIGS"}),"."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Column"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Nullable"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"UNIT_CONFIG_ID"}),(0,s.jsx)(n.td,{children:"bigint(20)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The ID of the unit config."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"NAME"}),(0,s.jsx)(n.td,{children:"varchar(128)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The name of the unit config."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"MAX_CPU"}),(0,s.jsx)(n.td,{children:"double"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The maximum number of CPU cores."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"MIN_CPU"}),(0,s.jsx)(n.td,{children:"double"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The minimum number of CPU cores."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"MEMORY_SIZE"}),(0,s.jsx)(n.td,{children:"bigint(20)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The memory size, in bytes."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"LOG_DISK_SIZE"}),(0,s.jsx)(n.td,{children:"bigint(20)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The log disk size, in bytes."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"MAX_IOPS"}),(0,s.jsx)(n.td,{children:"bigint(20)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The maximum disk IOPS."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"MIN_IOPS"}),(0,s.jsx)(n.td,{children:"bigint(20)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The minimum disk IOPS."})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["The following table describes the columns in the ",(0,s.jsx)(n.code,{children:"DBA_OB_UNITS"})," view. For more information about the columns, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001104347",children:"oceanbase.DBA_OB_UNITS"}),"."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Column"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Nullable"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"UNIT_ID"}),(0,s.jsx)(n.td,{children:"bigint(20)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The ID of the resource unit."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"RESOURCE_POOL_ID"}),(0,s.jsx)(n.td,{children:"bigint(20)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The ID of the resource pool to which the resource unit belongs."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ZONE"}),(0,s.jsx)(n.td,{children:"varchar(128)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The name of the zone."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"SVR_IP"}),(0,s.jsx)(n.td,{children:"varchar(46)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The IP address of the OBServer node to which the resource unit belongs."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"SVR_PORT"}),(0,s.jsx)(n.td,{children:"bigint(20)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The port number of the OBServer node to which the resource unit belongs."})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["The following table describes the columns in the ",(0,s.jsx)(n.code,{children:"DBA_OB_TENANTS"})," view. For more information about the columns, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001104223",children:"oceanbase.DBA_OB_TENANTS"}),"."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Column"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Nullable"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"TENANT_ID"}),(0,s.jsx)(n.td,{children:"bigint(20)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsxs)(n.td,{children:["The ID of the tenant. Valid values: ",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"1"}),": the sys tenant."]}),(0,s.jsx)("li",{children:"Other values: a user tenant or meta tenant."})]})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"TENANT_NAME"}),(0,s.jsx)(n.td,{children:"varchar(128)"}),(0,s.jsx)(n.td,{children:"NO"}),(0,s.jsx)(n.td,{children:"The name of the tenant."})]})]})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"View the remaining available resources of the cluster."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT ZONE,SVR_IP,SVR_PORT,\n  CPU_CAPACITY,CPU_ASSIGNED_MAX,CPU_CAPACITY-CPU_ASSIGNED_MAX as CPU_FREE,\n  ROUND(MEMORY_LIMIT/1024/1024/1024,2) as MEMORY_TOTAL_GB,\n  ROUND((MEMORY_LIMIT-MEM_CAPACITY)/1024/1024/1024,2) as SYSTEM_MEMORY_GB,\n  ROUND(MEM_ASSIGNED/1024/1024/1024,2) as MEM_ASSIGNED_GB,\n  ROUND((MEM_CAPACITY-MEM_ASSIGNED)/1024/1024/1024,2) as MEMORY_FREE_GB,\n  ROUND(LOG_DISK_CAPACITY/1024/1024/1024,2) as LOG_DISK_CAPACITY_GB,\n  ROUND(LOG_DISK_ASSIGNED/1024/1024/1024,2) as LOG_DISK_ASSIGNED_GB,\n  ROUND((LOG_DISK_CAPACITY-LOG_DISK_ASSIGNED)/1024/1024/1024,2) as LOG_DISK_FREE_GB,\n  ROUND((DATA_DISK_CAPACITY/1024/1024/1024),2) as DATA_DISK_GB,\n  ROUND((DATA_DISK_IN_USE/1024/1024/1024),2) as DATA_DISK_USED_GB,\n  ROUND((DATA_DISK_CAPACITY-DATA_DISK_IN_USE)/1024/1024/1024,2) as DATA_DISK_FREE_GB\n  FROM oceanbase.GV$OB_SERVERS;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The output is as follows. After a resource pool is created, the available resources of the cluster become less. For more information about the ",(0,s.jsx)(n.code,{children:"GV$OB_SERVERS"})," view, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001104534",children:"GV$OB_SERVERS"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"+-------+---------------+----------+--------------+------------------+----------+-----------------+------------------+-----------------+----------------+----------------------+----------------------+------------------+--------------+-------------------+-------------------+\n| ZONE  | SVR_IP        | SVR_PORT | CPU_CAPACITY | CPU_ASSIGNED_MAX | CPU_FREE | MEMORY_TOTAL_GB | SYSTEM_MEMORY_GB | MEM_ASSIGNED_GB | MEMORY_FREE_GB | LOG_DISK_CAPACITY_GB | LOG_DISK_ASSIGNED_GB | LOG_DISK_FREE_GB | DATA_DISK_GB | DATA_DISK_USED_GB | DATA_DISK_FREE_GB |\n+-------+---------------+----------+--------------+------------------+----------+-----------------+------------------+-----------------+----------------+----------------------+----------------------+------------------+--------------+-------------------+-------------------+\n| zone2 | 10.10.10.2    |     2882 |           16 |                2 |       14 |           12.00 |             5.00 |            1.00 |           6.00 |                50.00 |                 3.00 |            47.00 |        50.00 |              0.05 |             49.95 |\n| zone1 | 10.10.10.1    |     2882 |           16 |                2 |       14 |           12.00 |             5.00 |            1.00 |           6.00 |                50.00 |                 3.00 |            47.00 |        50.00 |              0.05 |             49.95 |\n| zone3 | 10.10.10.3    |     2882 |           16 |                2 |       14 |           12.00 |             5.00 |            1.00 |           6.00 |                50.00 |                 3.00 |            47.00 |        50.00 |              0.05 |             49.95 |\n+-------+---------------+----------+--------------+------------------+----------+-----------------+------------------+-----------------+----------------+----------------------+----------------------+------------------+--------------+-------------------+-------------------+\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-3-create-a-tenant",children:"Step 3: Create a tenant"}),"\n",(0,s.jsxs)(n.p,{children:["When you create a tenant, you can specify the ",(0,s.jsx)(n.code,{children:"RESOURCE_POOL_LIST"})," parameter to allocate a resource pool to the tenant. You can either allocate a separate resource pool to each zone, allowing them to use independent unit configs, or allocate a single resource pool for all zones, so they share the same unit config. Besides ",(0,s.jsx)(n.code,{children:"RESOURCE_POOL_LIST"}),", which is a required parameter, you can also set other important attributes and system variables such as the primary zone, locality, and connection allowlist."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"CREATE TENANT IF NOT EXISTS test1 CHARSET='utf8mb4',\nZONE_LIST=('zone1','zone2','zone3'), PRIMARY_ZONE='RANDOM', \nRESOURCE_POOL_LIST=('p1') SET ob_tcp_invited_nodes='%';\n"})}),"\n",(0,s.jsxs)(n.p,{children:["After tenant creation, you can query the ",(0,s.jsx)(n.code,{children:"DBA_OB_TENANTS"})," view for all tenants."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM oceanbase.DBA_OB_TENANTS \\G\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The output is as follows. For more information about the ",(0,s.jsx)(n.code,{children:"DBA_OB_TENANTS"})," view, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001104223",children:"oceanbase.DBA_OB_TENANTS"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"*************************** 1. row ***************************\n                 TENANT_ID: 1\n               TENANT_NAME: sys\n               TENANT_TYPE: SYS\n               CREATE_TIME: 2024-02-19 15:33:47.549569\n               MODIFY_TIME: 2024-02-19 15:33:47.549569\n              PRIMARY_ZONE: RANDOM\n                  LOCALITY: FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3\n         PREVIOUS_LOCALITY: NULL\n        COMPATIBILITY_MODE: MYSQL\n                    STATUS: NORMAL\n             IN_RECYCLEBIN: NO\n                    LOCKED: NO\n               TENANT_ROLE: PRIMARY\n         SWITCHOVER_STATUS: NORMAL\n          SWITCHOVER_EPOCH: 0\n                  SYNC_SCN: NULL\n            REPLAYABLE_SCN: NULL\n              READABLE_SCN: NULL\n        RECOVERY_UNTIL_SCN: NULL\n                  LOG_MODE: NOARCHIVELOG\nARBITRATION_SERVICE_STATUS: DISABLED\n                  UNIT_NUM: 1\n                COMPATIBLE: 4.2.1.3\n                 MAX_LS_ID: 1\n*************************** 2. row ***************************\n                 TENANT_ID: 1005\n               TENANT_NAME: META$1006\n               TENANT_TYPE: META\n               CREATE_TIME: 2024-02-19 19:03:03.358119\n               MODIFY_TIME: 2024-02-19 19:03:23.572876\n              PRIMARY_ZONE: RANDOM\n                  LOCALITY: FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3\n         PREVIOUS_LOCALITY: NULL\n        COMPATIBILITY_MODE: MYSQL\n                    STATUS: NORMAL\n             IN_RECYCLEBIN: NO\n                    LOCKED: NO\n               TENANT_ROLE: PRIMARY\n         SWITCHOVER_STATUS: NORMAL\n          SWITCHOVER_EPOCH: 0\n                  SYNC_SCN: NULL\n            REPLAYABLE_SCN: NULL\n              READABLE_SCN: NULL\n        RECOVERY_UNTIL_SCN: NULL\n                  LOG_MODE: NOARCHIVELOG\nARBITRATION_SERVICE_STATUS: DISABLED\n                  UNIT_NUM: 1\n                COMPATIBLE: 4.2.1.3\n                 MAX_LS_ID: 1\n*************************** 3. row ***************************\n                 TENANT_ID: 1006\n               TENANT_NAME: test1\n               TENANT_TYPE: USER\n               CREATE_TIME: 2024-02-19 19:03:03.360234\n               MODIFY_TIME: 2024-02-19 19:03:23.624946\n              PRIMARY_ZONE: RANDOM\n                  LOCALITY: FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3\n         PREVIOUS_LOCALITY: NULL\n        COMPATIBILITY_MODE: MYSQL\n                    STATUS: NORMAL\n             IN_RECYCLEBIN: NO\n                    LOCKED: NO\n               TENANT_ROLE: PRIMARY\n         SWITCHOVER_STATUS: NORMAL\n          SWITCHOVER_EPOCH: 0\n                  SYNC_SCN: 1708340630218168002\n            REPLAYABLE_SCN: 1708340630218168002\n              READABLE_SCN: 1708340630218168001\n        RECOVERY_UNTIL_SCN: 4611686018427387903\n                  LOG_MODE: NOARCHIVELOG\nARBITRATION_SERVICE_STATUS: DISABLED\n                  UNIT_NUM: 1\n                COMPATIBLE: 4.2.1.3\n                 MAX_LS_ID: 1003\n3 rows in set (0.06 sec)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["By default, the password of the administrator (",(0,s.jsx)(n.code,{children:"root"}),") of a newly created tenant is empty. We recommend that you set a password for the ",(0,s.jsx)(n.code,{children:"root"})," user after tenant creation."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Generate a random string."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"[admin@test001 ~]$ strings /dev/urandom |tr -dc A-Za-z0-9 | head -c8; echo\n"})}),"\n",(0,s.jsx)(n.p,{children:"The output is as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"b******t\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Log on to OceanBase Database and set the random string as the password of the ",(0,s.jsx)(n.code,{children:"root"})," user."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"MySQL [oceanbase]> ALTER USER root IDENTIFIED BY 'b******t' ;\nQuery OK, 0 rows affected (0.118 sec)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For more information about the ",(0,s.jsx)(n.code,{children:"ALTER USER"})," statement, see ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001106252",children:"ALTER USER"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"create-a-tenant-by-using-ob-operator",children:"Create a tenant by using ob-operator"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Note"})}),"\n",(0,s.jsxs)(n.p,{children:["This section briefly describes how to create a tenant by using ob-operator. For more information, see ",(0,s.jsx)(n.a,{href:"https://oceanbase.github.io/ob-operator/docs/manual/ob-operator-user-guide/tenant-management-of-ob-operator/create-tenant",children:"Create a tenant"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"Before you create a tenant, make sure the following conditions are met:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The version of ob-operator is V2.1.0 or later."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"You have deployed an OceanBase cluster, which is running normally."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"procedure",children:"Procedure"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a configuration file."}),"\n",(0,s.jsxs)(n.p,{children:["For the content of the configuration file, see ",(0,s.jsx)(n.a,{href:"https://github.com/oceanbase/ob-operator/blob/2.2.2_release/example/tenant/tenant.yaml",children:"tenant.yaml"})," in GitHub. For the detailed descriptions of the parameters in the configuration file, see ",(0,s.jsx)(n.a,{href:"https://oceanbase.github.io/ob-operator/docs/manual/ob-operator-user-guide/tenant-management-of-ob-operator/create-tenant#example",children:"Example"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a tenant."}),"\n",(0,s.jsxs)(n.p,{children:["Run the following command to create a tenant. This command creates an OBTenant resource for the tenant in the current Kubernetes cluster. In this example, the configuration file is named ",(0,s.jsx)(n.code,{children:"tenant.yaml"}),". Make sure to replace it with the actual file name."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f tenant.yaml\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Check whether the tenant is successfully created."}),"\n",(0,s.jsx)(n.p,{children:"Run the following command to check whether the OBTenant resource of the newly created tenant is available in the Kubernetes cluster:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"kubectl describe obtenants.oceanbase.oceanbase.com -n oceanbase t1\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The output is as follows. The Status.status value of the OBTenant resource is ",(0,s.jsx)(n.code,{children:"running"}),". Related configurations are displayed in the ",(0,s.jsx)(n.code,{children:"Status"})," section."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"Name:         t1\nNamespace:    oceanbase\nLabels:       <none>\nAnnotations:  <none>\nAPI Version:  oceanbase.oceanbase.com/v1alpha1\nKind:         OBTenant\nMetadata:\n  Creation Timestamp:  2023-11-13T07:28:31Z\n  Finalizers:\n    finalizers.oceanbase.com.deleteobtenant\n  Generation:        2\n  Resource Version:  940236\n  UID:               34036a49-26bf-47cf-8201-444b3850aaa2\nSpec:\n  Charset:             utf8mb4\n  Connect White List:  %\n  Credentials:\n    Root:        t1-ro\n    Standby Ro:  t1-ro\n  Force Delete:  true\n  Obcluster:     obcluster\n  Pools:\n    Priority:  1\n    Resource:\n      Iops Weight:    2\n      Log Disk Size:  12Gi\n      Max CPU:        1\n      Max Iops:       1024\n      Memory Size:    5Gi\n      Min CPU:        1\n      Min Iops:       1024\n    Type:\n      Is Active:  true\n      Name:       Full\n      Replica:    1\n    Zone:         zone1\n    ...    # Some output information is omitted here.\nStatus:\n  Credentials:\n    Root:        t1-ro\n    Standby Ro:  t1-ro\n  Resource Pool:\n    Priority:  1\n    Type:\n      Is Active:  true\n      Name:       FULL\n      Replica:    1\n    Unit Config:\n      Iops Weight:    2\n      Log Disk Size:  12884901888\n      Max CPU:        1\n      Max Iops:       1024\n      Memory Size:    5368709120\n      Min CPU:        1\n      Min Iops:       1024\n    Unit Num:         1\n    Units:\n      Migrate:\n        Server IP:    \n        Server Port:  0\n      Server IP:      10.10.10.1\n      Server Port:    2882\n      Status:         ACTIVE\n      Unit Id:        1006\n    Zone List:        zone1\n    ... # Some output information is omitted here.\n  Status:             running\n  Tenant Record Info:\n    Charset:             utf8mb4\n    Connect White List:  %\n    Locality:            FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3\n    Pool List:           pool_t1_zone1,pool_t1_zone2,pool_t1_zone3\n    Primary Zone:        zone3;zone1,zone2\n    Tenant ID:           1006\n    Unit Num:            1\n    Zone List:           zone1,zone2,zone3\n  Tenant Role:           PRIMARY\nEvents:\n  Type    Reason  Age                    From                 Message\n  ----    ------  ----                   ----                 -------\n  Normal          2m58s                  obtenant-controller  start creating\n  Normal          115s                   obtenant-controller  create OBTenant successfully\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},9698:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/001-dbfe6ee2df02a349802cf3046f6aa389.png"},57881:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/002-44b1e1599ea6f71beee0a8f1f015e95d.png"},77328:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/003-15f4138b3267cb578989192ea0f6addd.png"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var s=t(96540);const o={},a=s.createContext(o);function r(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);
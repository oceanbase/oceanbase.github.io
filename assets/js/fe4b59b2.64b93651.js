"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[9188],{1492:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var t=s(4848),c=s(8453);const a={title:"\u5408\u5e76\u8f6c\u50a8\u76f8\u5173SQL",weight:1},r="\u5408\u5e76\u8f6c\u50a8\u76f8\u5173 SQL",i={id:"user_manual/user_best_practices/operation_maintenance/common_sql/compaction",title:"\u5408\u5e76\u8f6c\u50a8\u76f8\u5173SQL",description:"- \u67e5\u770b\u5168\u5c40\u5408\u5e76\u662f\u5426\u5f00\u542f",source:"@site/docs/user_manual/user_best_practices/operation_maintenance/common_sql/compaction.md",sourceDirName:"user_manual/user_best_practices/operation_maintenance/common_sql",slug:"/user_manual/user_best_practices/operation_maintenance/common_sql/compaction",permalink:"/docs/user_manual/user_best_practices/operation_maintenance/common_sql/compaction",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/user_best_practices/operation_maintenance/common_sql/compaction.md",tags:[],version:"current",frontMatter:{title:"\u5408\u5e76\u8f6c\u50a8\u76f8\u5173SQL",weight:1},sidebar:"legacySidebar",previous:{title:"\u96c6\u7fa4\u8d44\u6e90\u5e38\u7528SQL",permalink:"/docs/user_manual/user_best_practices/operation_maintenance/common_sql/cluster_resource"},next:{title:"\u5206\u533a\u76f8\u5173SQL",permalink:"/docs/user_manual/user_best_practices/operation_maintenance/common_sql/partitions"}},o={},l=[];function m(e){const n={code:"code",h1:"h1",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"\u5408\u5e76\u8f6c\u50a8\u76f8\u5173-sql",children:(0,t.jsx)(n.strong,{children:"\u5408\u5e76\u8f6c\u50a8\u76f8\u5173 SQL"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u67e5\u770b\u5168\u5c40\u5408\u5e76\u662f\u5426\u5f00\u542f"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SHOW PARAMETERS LIKE 'enable_major_freeze';\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u624b\u52a8\u53d1\u8d77\u6240\u6709\u79df\u6237\u5408\u5e76"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"ALTER SYSTEM MAJOR FREEZE TENANT=ALL;\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u624b\u52a8\u53d1\u8d77\u5355\u4e2a\u79df\u6237\u5408\u5e76\uff0c\u4ee5\u79df\u6237\u540d\u4e3a obtest \u4e3a\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"ALTER SYSTEM MAJOR FREEZE TENANT=obtest;\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u67e5\u770b\u6240\u6709\u79df\u6237\u5408\u5e76\u60c5\u51b5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM oceanbase.CDB_OB_ZONE_MAJOR_COMPACTION;\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2023/png/65656351/1684814629058-117ce5cb-441f-4d9b-9fc8-1dc089113d79.png#clientId=u0f7d1ad4-4356-4&from=paste&height=441&id=uab8c9c6f&originHeight=882&originWidth=1918&originalType=binary&ratio=2&rotation=0&showTitle=false&size=245583&status=done&style=none&taskId=u651af399-c2f5-4af0-a7f4-9eaf99b57f7&title=&width=959",alt:"image.png"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u67e5\u770b\u5408\u5e76\u5269\u4f59\u8868\u6570\u91cf"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"select * from GV$OB_COMPACTION_PROGRESS \nwhere UNFINISHED_TABLET_COUNT != 0;\n"})}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var t=s(6540);const c={},a=t.createContext(c);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);
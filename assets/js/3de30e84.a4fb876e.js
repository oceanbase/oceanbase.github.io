"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[463],{47209:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});var a=t(74848),n=t(28453);const i={slug:"Yunji",title:"Slashing Costs by 87.5%: Yunji`s Cost-cutting Adventure with OceanBase Database",tags:["User Case"]},o="Slashing Costs by 87.5%: Yunji`s Cost-cutting Adventure with OceanBase Database",r={id:"blogs/users/Yunji",title:"Slashing Costs by 87.5%: Yunji`s Cost-cutting Adventure with OceanBase Database",description:'Yunji Sharing Technology Co., Ltd. (Yunji) is an e-commerce firm like Taobao and JD.com, except that its business is more driven by social networks. Yunji offers members killer deals by cherry-picking high-quality, value-for-money goods, helping millions of shoppers snag reliable goods at "wholesale prices". With recent market rollercoasters, we\'re on a mission to pinch every penny, especially when it comes to server and labor costs. Right now, our servers are eating up over 85% of our budget, so trimming costs is high on our to-do list.\ufe0f',source:"@site/docs/blogs/users/Yunji.md",sourceDirName:"blogs/users",slug:"/blogs/users/Yunji",permalink:"/docs/blogs/users/Yunji",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/blogs/users/Yunji.md",tags:[{inline:!0,label:"User Case",permalink:"/docs/tags/user-case"}],version:"current",frontMatter:{slug:"Yunji",title:"Slashing Costs by 87.5%: Yunji`s Cost-cutting Adventure with OceanBase Database",tags:["User Case"]},sidebar:"blogsSidebar",previous:{title:"Yonyou Replaces MySQL with OceanBase Database to Reduce O&M Costs and Achieve High Availability",permalink:"/docs/blogs/users/Yonyou"},next:{title:"Zhongyuan Bank\u2018s Practice: 70+ Tests Performed to Verify OceanBase Database, 30+ Systems Upgraded to New Database",permalink:"/docs/blogs/users/Zhongyuan-Bank"}},c={},d=[];function l(e){const s={h1:"h1",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"slashing-costs-by-875-yunjis-cost-cutting-adventure-with-oceanbase-database",children:"Slashing Costs by 87.5%: Yunji`s Cost-cutting Adventure with OceanBase Database"})}),"\n",(0,a.jsx)(s.p,{children:'Yunji Sharing Technology Co., Ltd. (Yunji) is an e-commerce firm like Taobao and JD.com, except that its business is more driven by social networks. Yunji offers members killer deals by cherry-picking high-quality, value-for-money goods, helping millions of shoppers snag reliable goods at "wholesale prices". With recent market rollercoasters, we\'re on a mission to pinch every penny, especially when it comes to server and labor costs. Right now, our servers are eating up over 85% of our budget, so trimming costs is high on our to-do list.\ufe0f'}),"\n",(0,a.jsx)(s.p,{children:"For companies, cost optimization is about cutting expenses and enhancing efficiency. In today's cutthroat environment, many companies are confronted with such challenges. For developers, cost optimization is a kick in the pants, requiring them to clean up clunky code and boost the company\u2019s tech game. And for us database administrators, supporting the company\u2019s operations on a shoestring budget is a badge of honor. Plus, it\u2019s a great chance to learn knowledge and methods, from cost analysis and assessment to server improvement and manpower optimization."}),"\n",(0,a.jsx)(s.h1,{id:"business-challenges",children:"Business Challenges"}),"\n",(0,a.jsx)(s.p,{children:"Before making any decisions, we got the measure of our business. Like many other Internet companies, Yunji also hit bumps in the road with its original IT architecture, which is shown in the following figure. The application layer on top runs on microservices, with a cache provided to handle fast write operations during flash sales."}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"1701329029",src:t(35409).A+"",width:"904",height:"456"})}),"\n",(0,a.jsx)(s.p,{children:"The database layer consisted of database instances on Tencent Cloud. We created numerous database instances due to the architecture of microservices. In general, each system was empowered by a microservice that was supported by the following three database instances: a primary database, a standby database, and a user-dedicated standby database."}),"\n",(0,a.jsx)(s.p,{children:"Business data was pumped through components such as Flink and Canal to the big data module, where the data was crunched to generate T+0 and T+1 reports. Some of the crunched data was synchronized back to the business database to support user queries. That process formed a data loop."}),"\n",(0,a.jsx)(s.p,{children:"A link was built for OceanBase Migration Service (OMS) to migrate data from Tencent Cloud database instances to an OceanBase cluster. Why? For example, we created 32 database instances to support an order system, which needed to handle aggregation queries involving all its instances. As such system-wide queries were beyond the original sharded architecture, we had to synchronize the data to the OceanBase cluster and did the job there."}),"\n",(0,a.jsx)(s.p,{children:"So, what\u2019s the hitch with this architecture? Well, here's the scoop:"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Data silos"}),": Technically, one query should do the trick with one execution. However, to meet different business needs, multiple replicas were generated for the same data set and were stored in multiple storage systems, increasing the request volume and number of executions. A large number of data replicas also pushed up the storage costs."]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Database and table sharding"}),": Database and table sharding depended on middleware that had their respective features, and therefore caused troubles to the business and O&M teams:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"We must design a variety of tables for different queries, and all queries were based on partitioning keys. This increased the business complexity."}),"\n",(0,a.jsx)(s.li,{children:"Cross-shard aggregation queries and join queries turned into a nightmare because data had to be collected for processing at the application layer."}),"\n",(0,a.jsx)(s.li,{children:"O&M was painful. Database scaling required tons of operations and data migration, and the backup and restore processes were complicated."}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Higher operational costs"}),": Horizontal or vertical decomposition of microservices resulted in increasing instance count and resource costs. In addition, instance resources were inefficiently used. CPU utilization rarely hit 20% and, when it did, any business spikes would overwhelm servers. We had to reserve some hardware resources."]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Data safety"}),": To meet the requirements of Multi-Level Protection Scheme (MLPS), our system must be deployed in at least three IDCs across two regions for disaster recovery, which jacked up costs. We created on-premises and remote backups on Tencent Cloud for our production environment, and suffered O&M headaches during a remote backup, such as time-consuming data pulls and frequent failures. The tremendous data volume also incurred sky-high traffic costs."]}),"\n",(0,a.jsx)(s.h1,{id:"costs-optimization-strategies",children:"Costs Optimization Strategies"}),"\n",(0,a.jsx)(s.p,{children:"To address those architectural challenges, we came up with a few cost optimization strategies:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Replace the complex sharded architecture that involves data loops and lengthy workflows, and is prone to faults."}),"\n",(0,a.jsx)(s.li,{children:"Move archived data to OceanBase Database, which supports a high compression ratio. This saves storage costs and improves capacity limits."}),"\n",(0,a.jsx)(s.li,{children:"Merge business instances, aiming for lower server resource consumption to increase resource usage during off-peak hours. For example, more resources can be allocated to handle e-commerce business requests during the day, and to generate T+0 and T+1 reports at night."}),"\n",(0,a.jsx)(s.li,{children:"Consider replacing conventional databases with distributed ones that support hybrid transaction and analytical processing (HTAP), and executing online and analytical tasks within the same cluster. This simplifies data links, reduces the complexity of the business architecture, and brings down O&M workload. Plus, distributed databases can achieve higher performance with fewer machine resources under the same workload. This also saves costs."}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"What about the hurdles?"}),"\n",(0,a.jsx)(s.p,{children:"Switching to a new architecture takes time to prove it can carry our business growth. Convincing the development team to ramp up their workload is tough, too \u2014 it\u2019s about selling the benefits of architecture transformation and a new learning curve. So, human resources and technological adaptation were major hurdles."}),"\n",(0,a.jsx)(s.h1,{id:"a-budget-saving-solution-based-on-oceanbase-database",children:"A Budget-saving Solution based on OceanBase Database"}),"\n",(0,a.jsx)(s.p,{children:"We designed a cost optimization solution in line with the following rules:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Strong system stability and zero business interruptions."}),"\n",(0,a.jsx)(s.li,{children:"High compatibility and simplified deployment with a short learning curve."}),"\n",(0,a.jsx)(s.li,{children:"No over-engineering, which may cripple the business system's adaptability to business fluctuations in the name of savings."}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"OceanBase Database got the nod for its:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Compatibility with MySQL, which means less development work and stable version iterations."}),"\n",(0,a.jsx)(s.li,{children:"High throughput and solid ecosystem backing."}),"\n",(0,a.jsx)(s.li,{children:"HTAP capabilities and horizontal scaling, which are well suited for our transaction processing (TP) and analytical processing (AP) needs."}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"1701329130",src:t(22876).A+"",width:"920",height:"458"})}),"\n",(0,a.jsx)(s.p,{children:"Using OceanBase Database, we transformed the original architecture, which consisted of a cloud database layer, an extract, transform, and load (ETL) layer, and a big data module, into a streamlined OceanBase cluster supporting HTAP tasks. The new architecture hits our cost optimization goals because it works with fewer intermediate data links, reduces the development work, and provides a recovery time objective (RTO) within 8 seconds and a recovery point objective (RPO) of 0, meeting the MLPS requirements."}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"1701329144",src:t(70150).A+"",width:"904",height:"436"})}),"\n",(0,a.jsx)(s.h1,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(s.p,{children:"This article delves into the reasons for cost optimization in today\u2019s market environment, our original database architecture and its vulnerabilities, and the new solution that we adopted to achieve cost optimization. Not only the distributed architecture of OceanBase Database suffices for our business scenarios, its high performance, high compression ratio, high reliability, and HTAP features also help reduce the hardware, manpower, and O&M costs. Amid the recent market changes, we have slashed the monthly server cost from more than 8 million Chinese yuan at the peak to less than 1 million Chinese yuan."}),"\n",(0,a.jsx)(s.p,{children:"The result of cost optimization is remarkable, and the improvement of technology and system adaptability has played a significant role. Other companies may find our solution inspiring in making their cost optimization strategies. We have proved that technical tweaks amid shifting sands can cut costs, boost efficiency, and bring more financial benefits."}),"\n",(0,a.jsx)(s.p,{children:"Moving forward, we will try out new features of OceanBase Database. We are testing OceanBase Database V4.2.1, the first long-term support (LTS) version, hoping that it will pack a punch."})]})}function h(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},35409:(e,s,t)=>{t.d(s,{A:()=>a});const a=t.p+"assets/images/1701329029113-5f5298cd1e587416341564e43b30b790.png"},22876:(e,s,t)=>{t.d(s,{A:()=>a});const a=t.p+"assets/images/1701329130162-d99b6f9d0bb1f9816345f0b7352d86ac.png"},70150:(e,s,t)=>{t.d(s,{A:()=>a});const a=t.p+"assets/images/1701329144538-848c231906d668bb158cdb9e6fa7ef77.png"},28453:(e,s,t)=>{t.d(s,{R:()=>o,x:()=>r});var a=t(96540);const n={},i=a.createContext(n);function o(e){const s=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),a.createElement(i.Provider,{value:s},e.children)}}}]);
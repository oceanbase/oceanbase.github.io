"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[4046],{61414:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>i,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>c,toc:()=>u});var r=t(74848),n=t(28453);const s={},a="Upgrade a cluster",c={id:"ob-operator/ob-operator-user-guide/cluster-management-of-ob-operator/upgrade-cluster-of-ob-operator",title:"Upgrade a cluster",description:"This topic describes how to upgrade an OceanBase cluster that is deployed by using ob-operator.",source:"@site/docs/ob-operator/500.ob-operator-user-guide/100.cluster-management-of-ob-operator/500.upgrade-cluster-of-ob-operator.md",sourceDirName:"ob-operator/500.ob-operator-user-guide/100.cluster-management-of-ob-operator",slug:"/ob-operator/ob-operator-user-guide/cluster-management-of-ob-operator/upgrade-cluster-of-ob-operator",permalink:"/docs/ob-operator/ob-operator-user-guide/cluster-management-of-ob-operator/upgrade-cluster-of-ob-operator",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/ob-operator/500.ob-operator-user-guide/100.cluster-management-of-ob-operator/500.upgrade-cluster-of-ob-operator.md",tags:[],version:"current",sidebarPosition:500,frontMatter:{}},i={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Procedure",id:"procedure",level:2},{value:"Modify the tag setting in <code>spec</code>",id:"modify-the-tag-setting-in-spec",level:3}];function l(e){const o={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.h1,{id:"upgrade-a-cluster",children:"Upgrade a cluster"}),"\n",(0,r.jsx)(o.p,{children:"This topic describes how to upgrade an OceanBase cluster that is deployed by using ob-operator."}),"\n",(0,r.jsx)(o.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(o.p,{children:["Before you upgrade a cluster, make sure that the cluster is in the ",(0,r.jsx)(o.code,{children:"Running"})," state."]}),"\n",(0,r.jsx)(o.h2,{id:"procedure",children:"Procedure"}),"\n",(0,r.jsxs)(o.h3,{id:"modify-the-tag-setting-in-spec",children:["Modify the tag setting in ",(0,r.jsx)(o.code,{children:"spec"})]}),"\n",(0,r.jsxs)(o.ol,{children:["\n",(0,r.jsxs)(o.li,{children:["\n",(0,r.jsxs)(o.p,{children:["Modify the configuration file of the OceanBase cluster. For more information about the complete configuration file, see ",(0,r.jsx)(o.a,{href:"/docs/ob-operator/ob-operator-user-guide/cluster-management-of-ob-operator/create-cluster",children:"Create a cluster"}),". Change the value of the ",(0,r.jsx)(o.code,{children:"spec.observer.image"})," parameter to the target image."]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-yaml",children:"# Before modification\nspec:\n  observer:\n    image: oceanbase/oceanbase-cloud-native:4.2.0.0-101000032023091319\n\n# After modification\nspec:\n  observer:\n    image: oceanbase/oceanbase-cloud-native:4.2.1.1-101000062023110109\n"})}),"\n"]}),"\n",(0,r.jsxs)(o.li,{children:["\n",(0,r.jsx)(o.p,{children:"Run the following command for the modification to take effect:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-yaml",children:"kubectl apply -f obcluster.yaml\n"})}),"\n"]}),"\n",(0,r.jsxs)(o.li,{children:["\n",(0,r.jsxs)(o.p,{children:["Query the status of custom resources in the OceanBase cluster to check whether the operation succeeds.\nRun the following command to query the status of custom resources in the OceanBase cluster. If the cluster is in the ",(0,r.jsx)(o.code,{children:"Running"})," state and the value of the ",(0,r.jsx)(o.code,{children:"image"})," parameter is the target image, the cluster is upgraded."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-shell",children:"kubectl get obclusters.oceanbase.oceanbase.com test -n oceanbase -o yaml\n\n# desired output, only displays status here\nstatus:\n  image: oceanbase/oceanbase-cloud-native:4.2.1.1-101000062023110109\n  obzones:\n  - status: running\n    zone: obcluster-1-zone1\n  - status: running\n    zone: obcluster-1-zone2\n  - status: running\n    zone: obcluster-1-zone3\n  parameters: []\n  status: running\n"})})]})}function d(e={}){const{wrapper:o}={...(0,n.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,o,t)=>{t.d(o,{R:()=>a,x:()=>c});var r=t(96540);const n={},s=r.createContext(n);function a(e){const o=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(s.Provider,{value:o},e.children)}}}]);
"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[2974],{97234:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>m,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var s=t(74848),o=t(28453);const i={title:"\u5408\u5e76\u8f6c\u50a8\u76f8\u5173SQL",weight:1},c="\u5408\u5e76\u8f6c\u50a8\u76f8\u5173 SQL",a={id:"operation_maintenance/common_sql/compaction",title:"\u5408\u5e76\u8f6c\u50a8\u76f8\u5173SQL",description:"- \u67e5\u770b\u5168\u5c40\u5408\u5e76\u662f\u5426\u5f00\u542f",source:"@site/docs/operation_maintenance/common_sql/compaction.md",sourceDirName:"operation_maintenance/common_sql",slug:"/operation_maintenance/common_sql/compaction",permalink:"/docs/operation_maintenance/common_sql/compaction",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/operation_maintenance/common_sql/compaction.md",tags:[],version:"current",frontMatter:{title:"\u5408\u5e76\u8f6c\u50a8\u76f8\u5173SQL",weight:1},sidebar:"legacySidebar",previous:{title:"\u96c6\u7fa4\u8d44\u6e90\u5e38\u7528SQL",permalink:"/docs/operation_maintenance/common_sql/cluster_resource"},next:{title:"\u5206\u533a\u76f8\u5173SQL",permalink:"/docs/operation_maintenance/common_sql/partitions"}},r={},l=[];function d(e){const n={code:"code",h1:"h1",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"\u5408\u5e76\u8f6c\u50a8\u76f8\u5173-sql",children:(0,s.jsx)(n.strong,{children:"\u5408\u5e76\u8f6c\u50a8\u76f8\u5173 SQL"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u67e5\u770b\u5168\u5c40\u5408\u5e76\u662f\u5426\u5f00\u542f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SHOW PARAMETERS LIKE 'enable_major_freeze';\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u624b\u52a8\u53d1\u8d77\u6240\u6709\u79df\u6237\u5408\u5e76"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"ALTER SYSTEM MAJOR FREEZE TENANT=ALL;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u624b\u52a8\u53d1\u8d77\u5355\u4e2a\u79df\u6237\u5408\u5e76\uff0c\u4ee5\u79df\u6237\u540d\u4e3a obtest \u4e3a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"ALTER SYSTEM MAJOR FREEZE TENANT=obtest;\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u67e5\u770b\u6240\u6709\u79df\u6237\u5408\u5e76\u60c5\u51b5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM oceanbase.CDB_OB_ZONE_MAJOR_COMPACTION;\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://intranetproxy.alipay.com/skylark/lark/0/2023/png/65656351/1684814629058-117ce5cb-441f-4d9b-9fc8-1dc089113d79.png#clientId=u0f7d1ad4-4356-4&from=paste&height=441&id=uab8c9c6f&originHeight=882&originWidth=1918&originalType=binary&ratio=2&rotation=0&showTitle=false&size=245583&status=done&style=none&taskId=u651af399-c2f5-4af0-a7f4-9eaf99b57f7&title=&width=959",alt:"image.png"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u67e5\u770b\u5408\u5e76\u5269\u4f59\u8868\u6570\u91cf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"select * from GV$OB_COMPACTION_PROGRESS \nwhere UNFINISHED_TABLET_COUNT != 0;\n"})}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>a});var s=t(96540);const o={},i=s.createContext(o);function c(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);
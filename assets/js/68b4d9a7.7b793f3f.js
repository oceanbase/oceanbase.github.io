"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[8362],{66137:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>n,metadata:()=>o,toc:()=>d});var i=a(74848),r=a(28453);const n={title:"Common Deployment Solutions for Disaster Recovery",weight:4},t=void 0,o={id:"user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/common_disaster_recovery_deployment_models",title:"Common Deployment Solutions for Disaster Recovery",description:"Common Deployment Solutions for Disaster Recovery",source:"@site/docs/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/04_common_disaster_recovery_deployment_models.md",sourceDirName:"user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design",slug:"/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/common_disaster_recovery_deployment_models",permalink:"/docs/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/common_disaster_recovery_deployment_models",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/04_common_disaster_recovery_deployment_models.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Common Deployment Solutions for Disaster Recovery",weight:4},sidebar:"operation_and_maintenanceEnglishSidebar",previous:{title:"Physical Standby Database Solution Based on Asynchronous Log Replication",permalink:"/docs/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/primary_standby_database_solution"},next:{title:"Version Upgrade Path",permalink:"/docs/user_manual/operation_and_maintenance/en-US/operations_and_maintenance/version_upgrade_path"}},c={},d=[{value:"Common Deployment Solutions for Disaster Recovery",id:"common-deployment-solutions-for-disaster-recovery",level:2},{value:"Three replicas in an IDC",id:"three-replicas-in-an-idc",level:3},{value:"Physical standby databases for two IDCs in the same region",id:"physical-standby-databases-for-two-idcs-in-the-same-region",level:3},{value:"Three replicas across three IDCs in the same region",id:"three-replicas-across-three-idcs-in-the-same-region",level:3},{value:"Physical standby databases for two IDCs across two regions",id:"physical-standby-databases-for-two-idcs-across-two-regions",level:3},{value:"Physical standby databases for three IDCs across two regions",id:"physical-standby-databases-for-three-idcs-across-two-regions",level:3},{value:"Five replicas in three IDCs across three regions",id:"five-replicas-in-three-idcs-across-three-regions",level:3},{value:"Five replicas in five IDCs across three regions",id:"five-replicas-in-five-idcs-across-three-regions",level:3}];function l(e){const s={h2:"h2",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"common-deployment-solutions-for-disaster-recovery",children:"Common Deployment Solutions for Disaster Recovery"}),"\n",(0,i.jsx)(s.p,{children:"You can use different high-availability solutions in combination. The following table lists the deployment solutions that we recommend for OceanBase Database. You can flexibly choose a deployment solution based on the Internet data center (IDC) configuration and your performance and availability requirements."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Deployment solution"}),(0,i.jsx)(s.th,{children:"Disaster recovery capability"}),(0,i.jsx)(s.th,{children:"RTO"}),(0,i.jsx)(s.th,{children:"RPO"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Three replicas in an IDC"}),(0,i.jsx)(s.td,{children:"Lossless disaster recovery at the server or rack level (when a minority of replicas fail)"}),(0,i.jsx)(s.td,{children:"< 8 seconds"}),(0,i.jsx)(s.td,{children:"0"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Physical standby databases for two IDCs in the same region"}),(0,i.jsx)(s.td,{children:"Lossy disaster recovery at the IDC level (when the primary IDC fails)"}),(0,i.jsx)(s.td,{children:"Within seconds"}),(0,i.jsx)(s.td,{children:"> 0"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Three replicas across three IDCs in the same region"}),(0,i.jsx)(s.td,{children:"Lossless disaster recovery at the IDC level (when a minority of replicas fail)"}),(0,i.jsx)(s.td,{children:"< 8 seconds"}),(0,i.jsx)(s.td,{children:"0"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Physical standby databases for two IDCs across two regions"}),(0,i.jsx)(s.td,{children:"Lossy disaster recovery (when a region fails)"}),(0,i.jsx)(s.td,{children:"Within seconds"}),(0,i.jsx)(s.td,{children:"> 0"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Physical standby databases for three IDCs across two regions"}),(0,i.jsx)(s.td,{children:"Lossless disaster recovery (when an IDC fails) or lossy disaster recovery (when a region fails)"}),(0,i.jsx)(s.td,{children:"Within seconds"}),(0,i.jsx)(s.td,{children:"When an IDC fails, the RPO is 0. When a region fails, the RPO is greater than 0."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Five replicas in three IDCs across three regions"}),(0,i.jsx)(s.td,{children:"Lossless disaster recovery (when a region fails)"}),(0,i.jsx)(s.td,{children:"< 8 seconds"}),(0,i.jsx)(s.td,{children:"0"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Five replicas in five IDCs across three regions"}),(0,i.jsx)(s.td,{children:"Lossless disaster recovery (when a region fails)"}),(0,i.jsx)(s.td,{children:"< 8 seconds"}),(0,i.jsx)(s.td,{children:"0"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"three-replicas-in-an-idc",children:"Three replicas in an IDC"}),"\n",(0,i.jsx)(s.p,{children:"If you use only one IDC, you can deploy three or more replicas to achieve lossless disaster recovery at the OBServer node level. If an OBServer node or a minority of OBServer nodes fails, services remain available without data loss. If the IDC contains multiple racks, you can deploy a zone for each rack to achieve lossless disaster recovery at the rack level."}),"\n",(0,i.jsx)(s.h3,{id:"physical-standby-databases-for-two-idcs-in-the-same-region",children:"Physical standby databases for two IDCs in the same region"}),"\n",(0,i.jsx)(s.p,{children:"To achieve disaster recovery at the IDC level with two IDCs in the same region, you can use a physical standby database and deploy a cluster in each IDC. If one of the IDCs is unavailable, another IDC can take over the services. If the standby IDC is unavailable, business data is not affected and services remain available. If the primary IDC is unavailable, the standby database takes over business services. In the second case, data loss may occur because data in the primary database may not be fully synchronized to the standby database."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Characteristics"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"An OceanBase cluster is deployed in each IDC. One serves as the primary database and the other serves as the standby database. Each cluster has a separate Paxos group to maintain data consistency across multiple replicas."}),"\n",(0,i.jsx)(s.li,{children:"Data is synchronized between clusters by using redo logs, which is similar to the leader-follower replication of conventional databases. Data can be synchronized in asynchronous mode, which is similar to Maximum Performance mode of Oracle Data Guard."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Solution diagram"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"3",src:a(66045).A+"",width:"2000",height:"778"})}),"\n",(0,i.jsx)(s.h3,{id:"three-replicas-across-three-idcs-in-the-same-region",children:"Three replicas across three IDCs in the same region"}),"\n",(0,i.jsx)(s.p,{children:"If three IDCs are available in the same region, you can deploy a zone in each IDC to achieve lossless disaster recovery at the IDC level. If one of the IDCs is unavailable, the other two IDCs can continue to provide services without data loss. This deployment architecture does not rely on physical standby databases, but cannot provide disaster recovery capabilities at the region level."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Characteristics"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Three IDCs in the same region form a cluster. Each IDC is a zone, with network latency ranging from 0.5 ms to 2 ms."}),"\n",(0,i.jsx)(s.li,{children:"If an IDC fails, the remaining two replicas are still in the majority. They can enable redo log synchronization and guarantee a recovery point objective (RPO) of 0."}),"\n",(0,i.jsx)(s.li,{children:"This deployment solution cannot cope with city-wide disasters."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Solution diagram"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"1",src:a(39008).A+"",width:"1208",height:"610"})}),"\n",(0,i.jsx)(s.h3,{id:"physical-standby-databases-for-two-idcs-across-two-regions",children:"Physical standby databases for two IDCs across two regions"}),"\n",(0,i.jsx)(s.p,{children:"If you want to achieve region-level disaster recovery but have only one IDC in each region, you can use the physical standby database architecture. Specifically, you can specify one region as the primary region to deploy the primary database, and specify the other region as the standby region to deploy the standby database. When the standby region is unavailable, business services in the primary region are not affected. When the primary region is unavailable, the standby database becomes the new primary database to continue to provide services. In this case, business data loss may occur."}),"\n",(0,i.jsx)(s.p,{children:"Furthermore, you can use two IDCs in two regions to implement the dual-active architecture and deploy two sets of physical standby databases. In this case, the two regions are in primary/standby mode. This allows you to manage resources in an efficient manner and achieve higher disaster recovery performance."}),"\n",(0,i.jsx)(s.h3,{id:"physical-standby-databases-for-three-idcs-across-two-regions",children:"Physical standby databases for three IDCs across two regions"}),"\n",(0,i.jsx)(s.p,{children:'If you have three IDCs in two regions, you can use the "physical standby databases for three IDCs across two regions" solution to provide disaster recovery at the region level.'}),"\n",(0,i.jsx)(s.p,{children:"The region with two IDCs serves as the primary region. Each IDC in the primary region is deployed with one or two full-featured replicas. The primary region provides the database read and write services. The arbitration service and physical standby database are deployed in the IDC in the standby region to provide disaster recovery services."}),"\n",(0,i.jsx)(s.p,{children:"If a fault occurs in an IDC in the primary region, the arbitration service performs automatic downgrade to restore services within seconds without data loss. If both IDCs in the primary region fail at the same time, the physical standby database takes over the services of the primary database. In this case, the RPO is greater than 0 with data loss."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Characteristics"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Five replicas in the primary and standby regions form a cluster. When an IDC in the primary region fails, at most two replicas become unavailable, and the remaining three replicas are still in the majority."}),"\n",(0,i.jsx)(s.li,{children:"An independent three-replica cluster is deployed in the standby region and serves as a standby database. Data is asynchronously synchronized from the primary database to the standby database."}),"\n",(0,i.jsx)(s.li,{children:"When the primary region encounters a disaster, the standby region can take over its services."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Solution diagram"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"4",src:a(40379).A+"",width:"1520",height:"696"})}),"\n",(0,i.jsx)(s.h3,{id:"five-replicas-in-three-idcs-across-three-regions",children:"Five replicas in three IDCs across three regions"}),"\n",(0,i.jsx)(s.p,{children:'To support lossless disaster recovery at the region level, you need to use at least three regions based on the Paxos protocol. This solution involves three regions, each with one IDC. The IDCs in the first two regions have two replicas each, whereas the third IDC has only one replica. Compared with the "three IDCs across two regions" solution, this solution requires each transaction to be synchronized to at least two regions. Business applications must be tolerant of the latency introduced by cross-region replication.'}),"\n",(0,i.jsx)(s.h3,{id:"five-replicas-in-five-idcs-across-three-regions",children:"Five replicas in five IDCs across three regions"}),"\n",(0,i.jsx)(s.p,{children:'This deployment solution is similar to the "five replicas in three IDCs across three regions" solution. The difference is that with five replicas in five IDCs across three regions, each replica is deployed in a different IDC to further enhance the disaster recovery capabilities at the IDC level.'}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Characteristics"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Five IDCs across three regions form a cluster with five replicas."}),"\n",(0,i.jsx)(s.li,{children:"In the case of an IDC-level or city-wide failure, the remaining replicas are still in the majority and can guarantee an RPO of 0."}),"\n",(0,i.jsx)(s.li,{children:"The majority must contain at least three replicas. However, each region has at most two replicas. To reduce the latency for synchronizing redo logs, Region 1 and Region 2 must be close to each other."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Solution diagram"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"2",src:a(43062).A+"",width:"1904",height:"698"})})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},39008:(e,s,a)=>{a.d(s,{A:()=>i});const i=a.p+"assets/images/04(1)-83e8027824162aa08fbf9fc3c96d1fde.png"},66045:(e,s,a)=>{a.d(s,{A:()=>i});const i=a.p+"assets/images/04(2)-b50a9d059e47d000ecde5bc9426d1f03.png"},43062:(e,s,a)=>{a.d(s,{A:()=>i});const i=a.p+"assets/images/04(3)-43133c670d1e2b067e992d700eaa8212.png"},40379:(e,s,a)=>{a.d(s,{A:()=>i});const i=a.p+"assets/images/04(4)-56ad2af0443316fb00564721f636703d.png"},28453:(e,s,a)=>{a.d(s,{R:()=>t,x:()=>o});var i=a(96540);const r={},n=i.createContext(r);function t(e){const s=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(n.Provider,{value:s},e.children)}}}]);
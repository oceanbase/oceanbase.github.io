"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[8749],{1688:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var i=t(74848),o=t(28453);const s={title:"Background Knowledge of the SQL Engine",weight:2},r=void 0,a={id:"user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_03_htap/background_knowledge",title:"Background Knowledge of the SQL Engine",description:"In the process of collecting suggestions for this advanced tutorial, many users hope to learn more about the background knowledge and the implementation principles of key technologies. Therefore, this topic is added here to brief the SQL engine of OceanBase Database.",source:"@site/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_03_htap/02_background_knowledge.md",sourceDirName:"user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_03_htap",slug:"/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_03_htap/background_knowledge",permalink:"/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_03_htap/background_knowledge",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_03_htap/02_background_knowledge.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Background Knowledge of the SQL Engine",weight:2},sidebar:"operation_and_maintenanceEnglishSidebar",previous:{title:"Introduction",permalink:"/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_03_htap/introduction"},next:{title:"Read/Write Splitting Strategy and Architecture",permalink:"/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/chapter_03_htap/read_write_separation_best_practices"}},l={},c=[{value:"Overview of the SQL Engine",id:"overview-of-the-sql-engine",level:2},{value:"Basic Knowledge",id:"basic-knowledge",level:2},{value:"Optimizer",id:"optimizer",level:3},{value:"Executor",id:"executor",level:3},{value:"Others",id:"others",level:3},{value:"Advanced Knowledge",id:"advanced-knowledge",level:2},{value:"Optimizer",id:"optimizer-1",level:3},{value:"Executor",id:"executor-1",level:3},{value:"Others",id:"others-1",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"In the process of collecting suggestions for this advanced tutorial, many users hope to learn more about the background knowledge and the implementation principles of key technologies. Therefore, this topic is added here to brief the SQL engine of OceanBase Database."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"overview-of-the-sql-engine",children:"Overview of the SQL Engine"}),"\n",(0,i.jsx)(n.p,{children:"After a query is initiated in OceanBase Database:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"It first enters into the parser/resolver, a module where the kernel figures out the purpose and requirement of the query."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Then, the query enters into the optimizer, which will select the best among a variety of implementation methods for the executor."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The executor contains all details for executing the selected method. It will faithfully execute the query based on the plan recommended by the optimizer and return the result to the user."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The following figure shows the overall framework of the SQL engine of OceanBase Database."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image.png",src:t(40150).A+"",width:"2116",height:"1288"})}),"\n",(0,i.jsx)(n.p,{children:"The preceding figure compares the features of the optimizer and executor in a business trip. The optimizer will enumerate all plans of traveling to the destination, evaluate the costs of these plans, and select the best one. Then, the executor will execute the selected plan."}),"\n",(0,i.jsx)(n.p,{children:"As shown in the figure, the SQL engine involves a lot of content. However, you only need to delve into a few of the content."}),"\n",(0,i.jsx)(n.h2,{id:"basic-knowledge",children:"Basic Knowledge"}),"\n",(0,i.jsx)(n.p,{children:"OceanBase Database users need to know the basic knowledge about the SQL engine, which is only a very small proportion of all related knowledge."}),"\n",(0,i.jsx)(n.p,{children:"After understanding the basic knowledge, you can spend less time troubleshooting."}),"\n",(0,i.jsx)(n.h3,{id:"optimizer",children:"Optimizer"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"You need to understand the following basic knowledge about the optimizer:"})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"Statistics and plan cache"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"Execution plan reading and management"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"Common SQL tuning methods"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"Typical scenarios and general troubleshooting logic for SQL performance issues"})})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"executor",children:"Executor"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"You need to understand the following basic knowledge about the executor:"})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"Parallel execution"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"Tools for analyzing SQL performance issues"})})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"others",children:"Others"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"You need to understand the following basic knowledge related to analytical processing (AP):"})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"Columnar storage"})})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"advanced-knowledge",children:"Advanced Knowledge"}),"\n",(0,i.jsx)(n.p,{children:"During the communication with users, many users expressed their hope to have a deeper understanding of the key technical implementation principles of the SQL engine."}),"\n",(0,i.jsx)(n.p,{children:"Here, I'll recommend some knowledge that I personally think is very valuable for learning, but I will not review them one by one."}),"\n",(0,i.jsx)(n.p,{children:"If you can master both the basic and advanced knowledge, you will be an expert in the SQL engine."}),"\n",(0,i.jsx)(n.h3,{id:"optimizer-1",children:"Optimizer"}),"\n",(0,i.jsxs)(n.p,{children:["For advanced knowledge about the optimizer, see ",(0,i.jsx)(n.a,{href:"https://open.oceanbase.com/blog/10900289",children:"Rewrite SQL Statements"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"The content in this blog is demanding for users and is applicable to those who hope to deeply understand SQL query rewrite. Before you read this blog, we recommend that you first learn how to read and manage execution plans."}),"\n",(0,i.jsx)(n.h3,{id:"executor-1",children:"Executor"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Vectorized execution"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Recommended blog: ",(0,i.jsx)(n.a,{href:"https://open.oceanbase.com/blog/12082655296",children:"Evolution Path of Database Engines: From Row Engine to Vectorized Engine"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"This blog is merely intended for popularization. All code in this article is pseudocode. We recommend this blog for all OceanBase Database users."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["By the way, to ",(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"achieve the optimal performance of vectorized execution"})}),", we recommend you enable vectorized execution and do not change the default value of ",(0,i.jsx)(n.code,{children:"rowset"})," (which can be adaptively modified)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Parallel execution"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Recommended blog: ",(0,i.jsx)(n.a,{href:"https://open.oceanbase.com/blog/7083583808",children:"Mastering Parallel Execution in OceanBase Database"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The content in this blog is a little bit demanding and is ",(0,i.jsx)(n.strong,{children:(0,i.jsx)("font",{color:"red",children:"applicable to users who want to know about AP"})}),". Before you read this blog, we recommend that you first learn how to read and manage execution plans."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Data access service (DAS)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Recommended blog: ",(0,i.jsx)(n.a,{href:"https://open.oceanbase.com/blog/12134198082#%E7%AC%AC%E4%BA%8C%E4%B8%AA%E9%97%AE%E9%A2%98",children:"Practices of SQL Tuning in OceanBase Database: Execution Plan Instability Caused by Dynamic Sampling"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"With DAS, OceanBase Database does not need to use the REMOTE or EXCHANGE operator to transfer complex SQL queries or subplans among nodes, but directly interacts with the storage layer to pull remote storage-layer data through remote procedural calls (RPCs) in proper scenarios. This is to simplify remote and distributed execution plans into local plans."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Before you read this blog, we recommend that you first learn how to read and manage execution plans."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Distributed pushdown"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Recommended blog: ",(0,i.jsx)(n.a,{href:"https://open.oceanbase.com/blog/5382203648",children:"Pushdown Techniques in OceanBase Database"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Simply put, to better utilize parallel execution capabilities and reduce CPU and network overheads during distributed execution, the optimizer often pushes down some operators to lower-layer computing nodes when it generates execution plans. This is to make full use of the computing resources of the cluster to improve the execution efficiency."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Before you read this blog, we recommend that you first learn how to read and manage execution plans."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Adaptive techniques of the execution engine"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Recommended blog: ",(0,i.jsx)(n.a,{href:"https://open.oceanbase.com/blog/5250647552",children:"Adaptive Techniques in the OceanBase Database Execution Engine"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Simply put, adaptive techniques enable the execution engine to dynamically adjust the execution strategy based on actual data characteristics (for example, uneven data distribution), thereby improving the execution performance."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Before you read this blog, we recommend that you first learn how to read and manage execution plans."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"others-1",children:"Others"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Columnar storage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Recommended blog: ",(0,i.jsx)(n.a,{href:"https://open.oceanbase.com/blog/11547010336",children:"Columnstore Engine: Your Ticket to OLAP"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["We strongly recommend that you watch the following video made by Xifeng: ",(0,i.jsx)(n.a,{href:"https://www.oceanbase.com/video/9000963",children:"Technical Mechanism and Practices of the HTAP Technology of OceanBase Database"}),"."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},40150:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/001-9fc721950c8e3c869e02b6539dd90e72.png"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(96540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);
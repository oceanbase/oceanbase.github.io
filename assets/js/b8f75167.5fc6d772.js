"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[9847],{63173:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var s=o(74848),i=o(28453);const a={title:"Use OBLogProxy for incremental log proxying",weight:5},t="4.4 Use OBLogProxy for incremental log proxying",r={id:"user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/incremental_log_proxy_service_through_oblogproxy",title:"Use OBLogProxy for incremental log proxying",description:"OBLogProxy is the incremental log proxy service of OceanBase Database. It establishes connections with OceanBase Database to read incremental logs and provides downstream services with change data capture (CDC) capabilities.",source:"@site/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/04_incremental_log_proxy_service_through_oblogproxy.md",sourceDirName:"user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase",slug:"/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/incremental_log_proxy_service_through_oblogproxy",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/incremental_log_proxy_service_through_oblogproxy",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/04_incremental_log_proxy_service_through_oblogproxy.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Use OBLogProxy for incremental log proxying",weight:5},sidebar:"quick_starts_and_hands_on_practices_in_englishSidebar",previous:{title:"Use OMS for data migration and synchronization",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/migration_and_synchronization_through_oms"},next:{title:"Use OBLOADER & OBDUMPER for data migration",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/use-obdumper_and_obloader"}},c={},l=[{value:"Overview",id:"overview",level:2},{value:"Install OBLogProxy",id:"install-oblogproxy",level:2},{value:"Synchronize logs in binlog mode",id:"synchronize-logs-in-binlog-mode",level:2},{value:"Limitations",id:"limitations",level:3},{value:"Synchronize logs in CDC mode",id:"synchronize-logs-in-cdc-mode",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"44-use-oblogproxy-for-incremental-log-proxying",children:"4.4 Use OBLogProxy for incremental log proxying"})}),"\n",(0,s.jsx)(n.p,{children:"OBLogProxy is the incremental log proxy service of OceanBase Database. It establishes connections with OceanBase Database to read incremental logs and provides downstream services with change data capture (CDC) capabilities."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Note"})}),"\n",(0,s.jsx)(n.p,{children:"The official documents referenced in this tutorial are of the latest version available at the time of writing. You can switch to another version as needed in the upper-left corner of the document page."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"OBLogProxy supports two modes: binlog mode and CDC mode."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The binlog mode of OBLogProxy is designed for compatibility with MySQL binlogs. It allows you to use MySQL binlog incremental parsing tools to synchronize OceanBase Database logs in real time. Thereby, you can smoothly use MySQL binlog tools with OceanBase Database."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"OBLogProxy in CDC mode subscribes to data changes in OceanBase Database and synchronizes these data changes to downstream services in real time for real-time or quasi-realtime data replication and synchronization."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"install-oblogproxy",children:"Install OBLogProxy"}),"\n",(0,s.jsx)(n.p,{children:"You can install OBLogProxy by downloading the installation package or using the source code. This section describes how to install OBLogProxy by downloading the installation package."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Notice"})}),"\n",(0,s.jsx)(n.p,{children:"OBLogProxy occupies resources separately. We recommend that you deploy OBLogProxy and OceanBase Database separately to avoid affecting the performance of OceanBase Database."}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Download the installation package of OBLogProxy from ",(0,s.jsx)(n.a,{href:"https://en.oceanbase.com/softwarecenter",children:"OceanBase Download Center"})," or ",(0,s.jsx)(n.a,{href:"https://github.com/oceanbase/oblogproxy/releases",children:"GitHub"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Run the following command to install OBLogProxy:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"rpm -i oblogproxy-{version}.{arch}.rpm\n"})}),"\n",(0,s.jsxs)(n.p,{children:["By default, OBLogProxy is installed in the ",(0,s.jsx)(n.code,{children:"/usr/local/oblogproxy"})," directory."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["By default, the configuration file ",(0,s.jsx)(n.code,{children:"conf.json"})," of OBLogProxy is stored in the ",(0,s.jsx)(n.code,{children:"/conf"})," directory. We recommend that you do not make changes without fully understanding the parameters."]}),"\n",(0,s.jsx)(n.h2,{id:"synchronize-logs-in-binlog-mode",children:"Synchronize logs in binlog mode"}),"\n",(0,s.jsx)(n.p,{children:"The binlog mode of OBLogProxy is designed for compatibility with MySQL binlogs. It allows you to synchronize OceanBase Database logs by using MySQL binlog tools. Thereby, you can smoothly use MySQL binlog tools with OceanBase Database."}),"\n",(0,s.jsx)(n.p,{children:"The binlog mode of OBLogProxy provides the same features as MySQL 5.7:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Position-based subscription. In position-based mode, the subscriber locates and reads change logs based on the binlog position, that is, the binlog file name and offset. Subscription in this mode is based on physical locations."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"GTID-based subscription. Global transaction identifiers (GTIDs) uniquely identify and track transactions in a distributed environment. In GTID-based mode, each transaction has a unique GTID, which is immune to binlog file changes and offsets. Subscription in this mode is based on logical locations."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"limitations",children:"Limitations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The binlog mode does not support the extended semantics of enum and set. For example, set supports more than 64 definitions and duplication, and enum supports the insertion of undefined data (such as ",(0,s.jsx)(n.code,{children:"''"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The binlog mode does not support varchar(65536) definitions."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The binlog mode does not support the gis type."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"synchronize-logs-in-cdc-mode",children:"Synchronize logs in CDC mode"}),"\n",(0,s.jsxs)(n.p,{children:["The CDC mode is used for real-time data synchronization. OBLogProxy in CDC mode subscribes to data changes in OceanBase Database (with the help of ",(0,s.jsx)(n.a,{href:"https://github.com/oceanbase/oblogclient",children:"OBLogClient"}),") and synchronizes these data changes to downstream services in real time for real-time or quasi-realtime data replication and synchronization. Synchronization in CDC mode involves the following steps:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"After OBLogClient is started, it sends a message to OBLogProxy, specifying the username, password, database tables, incremental link timestamp, and other information about the OceanBase database to subscribe to. OBLogProxy itself is stateless, and all the subscription information is passed by OBLogClient."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"After receiving the request from OBLogClient, OBLogProxy authenticates the subscribed OceanBase database. If the authentication fails, it returns the reason for the failure to OBLogClient. If the authentication succeeds, OBLogProxy starts an oblogreader subprocess and passes the connection and other related information to the oblogreader subprocess at startup."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The oblogreader subprocess pulls and parses clogs and sends them to the downstream in a certain data format to complete data subscription."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>r});var s=o(96540);const i={},a=s.createContext(i);function t(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[1208],{37370:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>y,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var a=t(74848),s=t(28453);const r={title:"Physical Standby Database Solution Based on Asynchronous Log Replication",weight:3},i=void 0,o={id:"user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/primary_standby_database_solution",title:"Physical Standby Database Solution Based on Asynchronous Log Replication",description:"This solution is similar to the primary/standby replication solution of traditional databases. Redo logs are replicated among tenants in two or more clusters to form a tenant-level primary/standby relationship. This provides two types of disaster recovery capabilities: switchover and failover.",source:"@site/docs/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/03_primary_standby_database_solution.md",sourceDirName:"user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design",slug:"/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/primary_standby_database_solution",permalink:"/docs/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/primary_standby_database_solution",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/03_primary_standby_database_solution.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Physical Standby Database Solution Based on Asynchronous Log Replication",weight:3},sidebar:"operation_and_maintenanceEnglishSidebar",previous:{title:"Multi-replica High Availability Solution",permalink:"/docs/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/multi_replica_solution"},next:{title:"Common Deployment Solutions for Disaster Recovery",permalink:"/docs/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/common_disaster_recovery_deployment_models"}},d={},c=[{value:"Disaster Recovery with the Physical Standby Database Solution",id:"disaster-recovery-with-the-physical-standby-database-solution",level:2},{value:"A cluster contains only primary or standby tenants",id:"a-cluster-contains-only-primary-or-standby-tenants",level:3},{value:"A cluster contains both primary and standby tenants",id:"a-cluster-contains-both-primary-and-standby-tenants",level:3},{value:"Primary and standby tenants belong to one cluster",id:"primary-and-standby-tenants-belong-to-one-cluster",level:3}];function l(e){const n={h2:"h2",h3:"h3",img:"img",p:"p",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"This solution is similar to the primary/standby replication solution of traditional databases. Redo logs are replicated among tenants in two or more clusters to form a tenant-level primary/standby relationship. This provides two types of disaster recovery capabilities: switchover and failover."}),"\n",(0,a.jsx)(n.p,{children:"This solution is mainly designed for disaster recovery purposes in dual-IDC or dual-region scenarios. The primary tenant provides read and write capabilities, whereas the standby tenants provide read-only and disaster recovery capabilities. When a switchover is performed, the roles of the primary and standby tenants are switched without data loss (RPO = 0) within seconds (RTO within seconds)."}),"\n",(0,a.jsx)(n.p,{children:"If the cluster of the primary tenant fails, you can perform a failover to make a standby tenant the new primary tenant. In this case, data loss may occur (RPO > 0), and the failover occurs within seconds (RTO within seconds)."}),"\n",(0,a.jsx)(n.h2,{id:"disaster-recovery-with-the-physical-standby-database-solution",children:"Disaster Recovery with the Physical Standby Database Solution"}),"\n",(0,a.jsx)(n.p,{children:"The Physical Standby Database solution allows you to deploy one primary tenant and one or more standby tenants. The primary tenant provides read and write services for your business. The standby tenants synchronize business data written in the primary tenant from redo logs in real time."}),"\n",(0,a.jsx)(n.p,{children:"You can deploy a primary tenant and its standby tenants in multiple OceanBase clusters that are close to each other or far apart, or in the same OceanBase cluster. In other words, an OceanBase cluster can contain only primary tenants or standby tenants, or both. Tenant names, resource specifications, configurations, and locality of the primary and standby tenants can be different."}),"\n",(0,a.jsx)(n.p,{children:"In addition, the primary and standby tenants can be single-replica tenants, multi-replica tenants, or tenants with arbitration-based high availability. Different deployment modes provide different levels of replica-based disaster recovery for tenants."}),"\n",(0,a.jsx)(n.p,{children:"The tenant-level Physical Standby Database solution is highly flexible. You can deploy the solution in the following typical modes:"}),"\n",(0,a.jsx)(n.h3,{id:"a-cluster-contains-only-primary-or-standby-tenants",children:"A cluster contains only primary or standby tenants"}),"\n",(0,a.jsx)(n.p,{children:"In this deployment mode, you deploy multiple OceanBase clusters, and each OceanBase cluster contains primary or standby tenants."}),"\n",(0,a.jsx)(n.p,{children:"This deployment mode allows you to use the Physical Standby Database solution for remote disaster recovery."}),"\n",(0,a.jsx)(n.p,{children:"The following figure shows the architecture of this deployment mode."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.1/manage/only-primary-tenants-or-standby-tenants-in-a-cluster.png",alt:"A cluster contains only primary or standby tenants"})}),"\n",(0,a.jsx)(n.h3,{id:"a-cluster-contains-both-primary-and-standby-tenants",children:"A cluster contains both primary and standby tenants"}),"\n",(0,a.jsx)(n.p,{children:"In this deployment mode, you deploy multiple OceanBase clusters, and each cluster contains both primary and standby tenants or only primary tenants."}),"\n",(0,a.jsx)(n.p,{children:"You can use this deployment mode in the following typical scenario:"}),"\n",(0,a.jsx)(n.p,{children:"Your business requires read/write and geo-disaster recovery in two different regions. Therefore, you must deploy both primary and standby databases in each region. In a database using other primary/standby solutions, you must deploy two or more clusters in each of the two regions, and clusters across regions work in primary/standby mode."}),"\n",(0,a.jsx)(n.p,{children:"If you use OceanBase Database, you need to only deploy one cluster in each of the two regions, and deploy primary and standby tenants in the two clusters to meet your business requirements. This greatly simplifies management of database clusters. The following figure shows the architecture of this deployment mode."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.1/manage/both-primary-tenants-and-standby-tenants-in-a-cluster.png",alt:"A cluster contains both primary and standby tenants"})}),"\n",(0,a.jsx)(n.h3,{id:"primary-and-standby-tenants-belong-to-one-cluster",children:"Primary and standby tenants belong to one cluster"}),"\n",(0,a.jsx)(n.p,{children:"In this deployment mode, you deploy only one OceanBase cluster, and the primary tenant and one or more standby tenants belong to the same OceanBase cluster."}),"\n",(0,a.jsx)(n.p,{children:"You can use this deployment mode in the following scenario:"}),"\n",(0,a.jsx)(n.p,{children:"You need to retain a database snapshot in a business tenant before a business upgrade. You can create a standby tenant for real-time synchronization in the same cluster of the business tenant and suspend the synchronization to the standby tenant before the business upgrade. Then, you can perform any read/write operations, such as starting a business upgrade, in the primary tenant, without affecting the standby tenant. If the business upgrade fails, you can delete the primary tenant and set the standby tenant to a new primary tenant. You can change the name of the new primary tenant to that of the original primary tenant so that access to the proxy remains unchanged."}),"\n",(0,a.jsx)(n.p,{children:"The following figure shows the architecture of this deployment mode."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.2.1/manage/the-primary-tenant-and-the-standby-tenant-in-the-same-cluster.png",alt:"Primary and standby tenants belong to one cluster"})})]})}function y(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var a=t(96540);const s={},r=a.createContext(s);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);
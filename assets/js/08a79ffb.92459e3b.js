"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[598],{89336:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var i=n(74848),t=n(28453);const r={title:"Manage OceanBase Database connections",weight:4},c="7.3 Manage OceanBase Database connections",o={id:"user_manual/quick_starts_and_hands_on_practices_in_english/chapter_07_diagnosis_and_tuning/manage_connections",title:"Manage OceanBase Database connections",description:"This topic contains three parts: principles, client sessions, and server sessions. A client session is established between a client and OceanBase Database Proxy (ODP). A server session is established between ODP and an OBServer node.",source:"@site/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_07_diagnosis_and_tuning/03_manage_connections.md",sourceDirName:"user_manual/quick_starts_and_hands_on_practices_in_english/chapter_07_diagnosis_and_tuning",slug:"/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_07_diagnosis_and_tuning/manage_connections",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_07_diagnosis_and_tuning/manage_connections",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_07_diagnosis_and_tuning/03_manage_connections.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Manage OceanBase Database connections",weight:4},sidebar:"quick_starts_and_hands_on_practices_in_englishSidebar",previous:{title:"Principles of ODP SQL routing",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_07_diagnosis_and_tuning/odp_sql_route"},next:{title:"Perform analysis based on SQL monitoring views",permalink:"/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_07_diagnosis_and_tuning/analyze_sql_monitoring_view"}},a={},l=[{value:"Principles",id:"principles",level:2},{value:"Background information",id:"background-information",level:3},{value:"Features",id:"features",level:3},{value:"Connection mapping",id:"connection-mapping",level:3},{value:"Connection features",id:"connection-features",level:3},{value:"Client sessions",id:"client-sessions",level:2},{value:"View client sessions",id:"view-client-sessions",level:3},{value:"View the details of a client session",id:"view-the-details-of-a-client-session",level:3},{value:"View the variables of a client session",id:"view-the-variables-of-a-client-session",level:3},{value:"Terminate a client session",id:"terminate-a-client-session",level:3},{value:"Terminate a session by specifying the client session ID",id:"terminate-a-session-by-specifying-the-client-session-id",level:4},{value:"Terminate a session by specifying the connection ID",id:"terminate-a-session-by-specifying-the-connection-id",level:4},{value:"Server sessions",id:"server-sessions",level:2},{value:"View server sessions",id:"view-server-sessions",level:3},{value:"Terminate a server session",id:"terminate-a-server-session",level:3}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"73-manage-oceanbase-database-connections",children:"7.3 Manage OceanBase Database connections"})}),"\n",(0,i.jsx)(s.p,{children:"This topic contains three parts: principles, client sessions, and server sessions. A client session is established between a client and OceanBase Database Proxy (ODP). A server session is established between ODP and an OBServer node."}),"\n",(0,i.jsx)(s.h2,{id:"principles",children:"Principles"}),"\n",(0,i.jsx)(s.h3,{id:"background-information",children:"Background information"}),"\n",(0,i.jsx)(s.p,{children:"ODP provides database access and routing features for you to connect to and use OceanBase Database. When you use database features, ODP interacts with OBServer nodes in a transparent way. Connection management is crucial to the interaction process."}),"\n",(0,i.jsx)(s.h3,{id:"features",children:"Features"}),"\n",(0,i.jsx)(s.p,{children:"ODP provides the following connection management features:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Proxy: ODP serves both as a client and as a server. It also ensures that the interaction behavior conforms to the MySQL protocol."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Connection: ODP provides a wide range of connection features. For example, it allows you to access different clusters and tenants. It also supports physical standby databases, prepared statements in the distributed architecture, and the ",(0,i.jsx)(s.code,{children:"kill"})," and ",(0,i.jsx)(s.code,{children:"show processlist"})," statements."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"High availability: ODP can handle issues such as timeouts, server status changes, and network status changes and shield backend exceptions to ensure that users are not distracted by such issues."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"connection-mapping",children:"Connection mapping"}),"\n",(0,i.jsx)(s.p,{children:"When you connect to a standalone database from a client, only one physical connection exists between your client and the database, as shown in the following figure."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Standalone mapping",src:n(2498).A+"",width:"457",height:"104"})}),"\n",(0,i.jsx)(s.p,{children:"When you use ODP to connect to OceanBase Database, one physical connection exists between your client and ODP, and multiple physical connections can exist between ODP and OBServer nodes, as shown in the following figure. The connection between your client and ODP is called a client session, and those between ODP and OBServer nodes are called server sessions."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Server session mapping",src:n(16505).A+"",width:"712",height:"226"})}),"\n",(0,i.jsx)(s.p,{children:"If the data accessed by your client is stored on different OBServer nodes, ODP will create multiple physical connections to OceanBase Database. It will also manage and reuse these connections. However, your client perceives only one logical connection. This allows ODP to provide a wide range of features, such as primary/standby cluster separation, read/write splitting, data access request routing for partitioned tables, prepared statements in a distributed architecture, and backend exception shielding."}),"\n",(0,i.jsx)(s.h3,{id:"connection-features",children:"Connection features"}),"\n",(0,i.jsxs)(s.p,{children:["ODP changes the mapping of database connections to M-to-N. Therefore, some connection features require additional treatment. For example, when you execute the ",(0,i.jsx)(s.code,{children:"show processlist"})," statement to query the number of connections, you can view the number of connections between your client and ODP, but not the number of connections between ODP and OceanBase Database."]}),"\n",(0,i.jsx)(s.p,{children:"The following describes common connection features:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Connection stickiness: ODP has not implemented status synchronization for all features, such as transactions, temporary tables, and cursors. For these features, ODP sends follow-up requests to the node where the status starts, so that status synchronization is not required. However, this does not fully utilize the advantages of distributed systems. Therefore, ODP will gradually support the distributed implementation of related features in the sequence of significance."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Combined use of the ",(0,i.jsx)(s.code,{children:"show processlist"})," and ",(0,i.jsx)(s.code,{children:"kill"})," statements: The ",(0,i.jsx)(s.code,{children:"show processlist"})," statement shows the connections between your client and servers. For ODP, this statement shows only the connection between your client and ODP, and does not show the connections between ODP and OBServer nodes. The ",(0,i.jsx)(s.code,{children:"kill"})," statement closes a client session. After the client session is closed, ODP closes the corresponding server sessions. Before you execute the ",(0,i.jsx)(s.code,{children:"kill"})," statement, you must obtain the connection ID by using the ",(0,i.jsx)(s.code,{children:"show processlist"})," statement."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Impact on load balancing: The ",(0,i.jsx)(s.code,{children:"show processlist"})," and ",(0,i.jsx)(s.code,{children:"kill"})," statements are specially treated. Therefore, they can work properly only when they are sent to the same ODP node. In scenarios that require load balancing, such as a public cloud, multiple ODP nodes are mounted to a load balancer. In this case, if the ",(0,i.jsx)(s.code,{children:"show processlist"})," and ",(0,i.jsx)(s.code,{children:"kill"})," statements are sent over two different connections, the load balancer may forward the requests to different ODP nodes. Therefore, we recommend that you do not use these statements in such scenarios."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"client-sessions",children:"Client sessions"}),"\n",(0,i.jsx)(s.p,{children:"This section describes general operations performed on a client session, which is established between a client and ODP."}),"\n",(0,i.jsx)(s.h3,{id:"view-client-sessions",children:"View client sessions"}),"\n",(0,i.jsxs)(s.p,{children:["When you use ODP to connect to OceanBase Database, you can execute the ",(0,i.jsx)(s.code,{children:"SHOW PROXYSESSION"})," statement in the ",(0,i.jsx)(s.code,{children:"sys"})," tenant to query all client sessions of all tenants in ODP. You can also execute this statement in a user tenant to query the current client session. The SQL syntax is as follows:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> show proxysession;\n"})}),"\n",(0,i.jsx)(s.p,{children:"The output is as follows:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"+--------------------+---------+-------------------------------+--------+------+--------------------+-----------+-------------+-------------------+-------------------+-------+-------+-----------+\n| proxy_sessid       | Id      | Cluster                       | Tenant | User | Host               | db        | trans_count | svr_session_count | state             | tid   | pid   | using_ssl |\n+--------------------+---------+-------------------------------+--------+------+--------------------+-----------+-------------+-------------------+-------------------+-------+-------+-----------+\n| 838175694068187151 | 1048577 | obn.xiaofeng.lby.123.456.78.9 | sys    | root | 123.456.78.9:39012 | oceanbase |           0 |                 1 | MCS_ACTIVE_READER | 73180 | 73104 |         0 |\n| 838175694068187149 |       5 | obn.xiaofeng.lby.123.456.78.9 | mysql  | root | 123.456.78.9:38027 | test      |           0 |                 1 | MCS_ACTIVE_READER | 73104 | 73104 |         0 |\n| 838175694068187150 |  524297 | obn.xiaofeng.lby.123.456.78.9 | mysql  | root | 123.456.78.9:38270 | oceanbase |           0 |                 1 | MCS_ACTIVE_READER | 73179 | 73104 |         0 |\n+--------------------+---------+-------------------------------+--------+------+--------------------+-----------+-------------+-------------------+-------------------+-------+-------+-----------+\n3 rows in set\n"})}),"\n",(0,i.jsx)(s.p,{children:"The following table describes the fields in the return result."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Field"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"proxy_sessid"}),(0,i.jsx)(s.td,{children:"The ID of the client session allocated by OceanBase Database."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Id"}),(0,i.jsxs)(s.td,{children:["The ID of the client session allocated by ODP. It is equivalent to ",(0,i.jsx)(s.code,{children:"cs_id"})," mentioned later."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Cluster"}),(0,i.jsx)(s.td,{children:"The name of the OceanBase cluster to which the client session belongs."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Tenant"}),(0,i.jsx)(s.td,{children:"The tenant account for connecting to the OceanBase cluster."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"User"}),(0,i.jsx)(s.td,{children:"The username for connecting to the OceanBase cluster."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Host"}),(0,i.jsx)(s.td,{children:"The IP address and port number of the client."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"db"}),(0,i.jsx)(s.td,{children:"The database in which the statement is executed."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"trans_count"}),(0,i.jsx)(s.td,{children:"The number of transactions completed in the client session."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"svr_session_count"}),(0,i.jsx)(s.td,{children:"The total number of sessions held between ODP and OceanBase Database."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"state"}),(0,i.jsxs)(s.td,{children:["The status of the client session. Valid values: ",(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:(0,i.jsx)(s.code,{children:"MCS_INIT"})}),(0,i.jsx)("li",{children:(0,i.jsx)(s.code,{children:"MCS_ACTIVE_READER"})}),(0,i.jsx)("li",{children:(0,i.jsx)(s.code,{children:"MCS_KEEP_ALIVE"})}),(0,i.jsx)("li",{children:(0,i.jsx)(s.code,{children:"MCS_HALF_CLOSE"})}),(0,i.jsx)("li",{children:(0,i.jsx)(s.code,{children:"MCS_CLOSED"})})]})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"tid"}),(0,i.jsx)(s.td,{children:"The thread ID."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pid"}),(0,i.jsx)(s.td,{children:"The process ID."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"using_ssl"}),(0,i.jsx)(s.td,{children:"Indicates whether the client session uses the Secure Sockets Layer (SSL) protocol for transmission."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"view-the-details-of-a-client-session",children:"View the details of a client session"}),"\n",(0,i.jsxs)(s.p,{children:["When you use ODP to connect to OceanBase Database, you can execute the ",(0,i.jsx)(s.code,{children:"SHOW PROXYSESSION ATTRIBUTE"})," statement in the ",(0,i.jsx)(s.code,{children:"sys"})," tenant to query the details of a specified client session in ODP, including server sessions involved in the client session. You can also execute this statement in a user tenant to query the details of the current session."]}),"\n",(0,i.jsx)(s.p,{children:"The SQL syntax is as follows:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"SHOW PROXYSESSION ATTRIBUTE [id [like 'xxx']]\n"})}),"\n",(0,i.jsx)(s.p,{children:"The fields are described as follows:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["If ",(0,i.jsx)(s.code,{children:"id"})," is not specified, the details of the current session are returned (supported since ODP V1.1.0). Fuzzy search is supported for retrieving the value of a specified attribute in the current session (supported since ODP V1.1.2)."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["If ",(0,i.jsx)(s.code,{children:"id"})," is specified, fuzzy search is supported for retrieving the value of a specified attribute (supported since ODP V1.1.0)."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Here, you can set ",(0,i.jsx)(s.code,{children:"id"})," to the value of ",(0,i.jsx)(s.code,{children:"cs_id"})," or ",(0,i.jsx)(s.code,{children:"CONNECTION_ID"}),", and the same results are returned."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"cs_id"})," indicates the ID of a client session in ODP. ",(0,i.jsx)(s.code,{children:"CONNECTION_ID"})," indicates the ID of a client session in OceanBase Database. In MySQL mode, you can execute ",(0,i.jsx)(s.code,{children:"SELECT CONNECTION_ID();"})," statement to query ",(0,i.jsx)(s.code,{children:"CONNECTION_ID"}),". For more information about ",(0,i.jsx)(s.code,{children:"CONNECTION_ID"}),", see ",(0,i.jsx)(s.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001032377",children:"CONNECTION_ID"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"like"})," clause supports fuzzy search. Supported wildcard characters are the percent sign (",(0,i.jsx)(s.code,{children:"%"}),") and the underscore (",(0,i.jsx)(s.code,{children:"_"}),")."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Here is an example:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> SHOW PROXYSESSION;\n+--------------------+------+---------+--------+------+-----------------+------+-------------+-------------------+-------------------+---------+---------+\n| proxy_sessid       | Id   | Cluster | Tenant | User | Host            | db   | trans_count | svr_session_count | state             | tid     | pid     |\n+--------------------+------+---------+--------+------+-----------------+------+-------------+-------------------+-------------------+---------+---------+\n| 756006681247547396 |    2 |  ob1.cc | sys    | root | 127.0.0.1:22540 | NULL |           0 |                 1 | MCS_ACTIVE_READER | 2230520 | 2230520 |\n+--------------------+------+---------+--------+------+-----------------+------+-------------+-------------------+-------------------+---------+---------+\n1 row in set\n\nobclient> SHOW PROXYSESSION ATTRIBUTE;\n+----------------------------------+----------------------+----------------+\n| attribute_name                   | value                | info           |\n+----------------------------------+----------------------+----------------+\n| proxy_sessid                     | 756006681247547396   | cs common      |\n| cs_id                            | 2                    | cs common      |\n| cluster                          | ob1.cc               | cs common      |\n| tenant                           | sys                  | cs common      |\n| user                             | root                 | cs common      |\n| host_ip                          | 127.0.0.1            | cs common      |\n| host_port                        | 22540                | cs common      |\n| db                               | NULL                 | cs common      |\n| total_trans_cnt                  | 0                    | cs common      |\n| svr_session_cnt                  | 1                    | cs common      |\n| active                           | true                 | cs common      |\n| read_state                       | MCS_ACTIVE_READER    | cs common      |\n\xb7\xb7\xb7\xb7\xb7\xb7\n# Subsequent outputs omitted\n39 rows in set\n\nobclient> SHOW PROXYSESSION ATTRIBUTE 2 like '%id%';\n+------------------------+--------------------+----------------+\n| attribute_name         | value              | info           |\n+------------------------+--------------------+----------------+\n| proxy_sessid           | 756006681247547396 | cs common      |\n| cs_id                  | 2                  | cs common      |\n| tid                    | 2230520            | cs common      |\n| pid                    | 2230520            | cs common      |\n| last_insert_id_version | 0                  | cs var version |\n| server_sessid          | 2147549201         | last used ss   |\n| ss_id                  | 4                  | last used ss   |\n| last_insert_id_version | 0                  | last used ss   |\n+------------------------+--------------------+----------------+\n8 rows in set\n\nobclient> SHOW PROXYSESSION ATTRIBUTE 2147549201 like '%id%';\n+------------------------+--------------------+----------------+\n| attribute_name         | value              | info           |\n+------------------------+--------------------+----------------+\n| proxy_sessid           | 756006681247547396 | cs common      |\n| cs_id                  | 2                  | cs common      |\n| tid                    | 2230520            | cs common      |\n| pid                    | 2230520            | cs common      |\n| last_insert_id_version | 0                  | cs var version |\n| server_sessid          | 2147549201         | last used ss   |\n| ss_id                  | 4                  | last used ss   |\n| last_insert_id_version | 0                  | last used ss   |\n+------------------------+--------------------+----------------+\n8 rows in set\n"})}),"\n",(0,i.jsx)(s.p,{children:"The following table describes the fields in the return result."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Field"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"attribute_name"}),(0,i.jsx)(s.td,{children:"The attribute name."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"value"}),(0,i.jsx)(s.td,{children:"The attribute value."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"info"}),(0,i.jsx)(s.td,{children:"The basic information."})]})]})]}),"\n",(0,i.jsx)(s.p,{children:"The following table describes the general attributes."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Attribute"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"proxy_sessid"}),(0,i.jsx)(s.td,{children:"The ID of the client session allocated by OceanBase Database."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"cs_id"}),(0,i.jsxs)(s.td,{children:["The ID of the client session allocated by ODP. It is equivalent to ",(0,i.jsx)(s.code,{children:"Id"})," mentioned earlier."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"cluster"}),(0,i.jsx)(s.td,{children:"The name of the OceanBase cluster to which the client session belongs."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"tenant"}),(0,i.jsx)(s.td,{children:"The tenant account for connecting to the OceanBase cluster."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"user"}),(0,i.jsx)(s.td,{children:"The username for connecting to the OceanBase cluster."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"host_ip"}),(0,i.jsx)(s.td,{children:"The IP address of the client."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"host_port"}),(0,i.jsx)(s.td,{children:"The port number of the client."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"db"}),(0,i.jsx)(s.td,{children:"The database in which the statement is executed."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"total_trans_cnt"}),(0,i.jsx)(s.td,{children:"The total number of transactions transmitted by ODP."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"svr_session_cnt"}),(0,i.jsx)(s.td,{children:"The total number of sessions held between ODP and OceanBase Database."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"active"}),(0,i.jsx)(s.td,{children:"Indicates whether the session is active."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"read_state"}),(0,i.jsxs)(s.td,{children:["The status of the client session. Valid values: ",(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:(0,i.jsx)(s.code,{children:"MCS_INIT"})}),(0,i.jsx)("li",{children:(0,i.jsx)(s.code,{children:"MCS_ACTIVE_READER"})}),(0,i.jsx)("li",{children:(0,i.jsx)(s.code,{children:"MCS_KEEP_ALIVE"})}),(0,i.jsx)("li",{children:(0,i.jsx)(s.code,{children:"MCS_HALF_CLOSE"})}),(0,i.jsx)("li",{children:(0,i.jsx)(s.code,{children:"MCS_CLOSED"})})]})]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"tid"}),(0,i.jsx)(s.td,{children:"The thread ID."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pid"}),(0,i.jsx)(s.td,{children:"The process ID."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"modified_time"}),(0,i.jsx)(s.td,{children:"The time when the session was last modified."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"reported_time"}),(0,i.jsx)(s.td,{children:"The time when the session was reported."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"hot_sys_var_version"}),(0,i.jsx)(s.td,{children:"The target system variable version in real-time updates."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"sys_var_version"}),(0,i.jsx)(s.td,{children:"The system variable version."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"user_var_version"}),(0,i.jsx)(s.td,{children:"The user variable version."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"last_insert_id_version"}),(0,i.jsx)(s.td,{children:"The last inserted ID version."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"db_name_version"}),(0,i.jsx)(s.td,{children:"The database name version."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"server_ip"}),(0,i.jsx)(s.td,{children:"The IP address of the OBServer node."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"server_port"}),(0,i.jsx)(s.td,{children:"The port number of the OBServer node."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"server_sessid"}),(0,i.jsx)(s.td,{children:"The session ID of the OBServer node."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"ss_id"}),(0,i.jsx)(s.td,{children:"The ID of the server session in ODP."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"view-the-variables-of-a-client-session",children:"View the variables of a client session"}),"\n",(0,i.jsxs)(s.p,{children:["You can use the ",(0,i.jsx)(s.code,{children:"SHOW PROXYSESSION VARIABLES [all] id [like 'xx']"})," statement to query the variables of a client session."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["If ",(0,i.jsx)(s.code,{children:"all"})," is not specified, the local session variables of the specified client session, including modified system and user variables, are returned."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["If ",(0,i.jsx)(s.code,{children:"all"})," is specified, all session variables of the specified client session, including all system and user variables, are returned."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"The fields are described as follows:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Here, you can set ",(0,i.jsx)(s.code,{children:"id"})," to the value of ",(0,i.jsx)(s.code,{children:"cs_id"})," or ",(0,i.jsx)(s.code,{children:"CONNECTION_ID"}),", and the same results are returned."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"cs_id"})," indicates the ID of a client session in ODP. ",(0,i.jsx)(s.code,{children:"CONNECTION_ID"})," indicates the ID of a client session in OceanBase Database. In MySQL mode, you can execute ",(0,i.jsx)(s.code,{children:"SELECT CONNECTION_ID();"})," statement to query ",(0,i.jsx)(s.code,{children:"CONNECTION_ID"}),". For more information about ",(0,i.jsx)(s.code,{children:"CONNECTION_ID"}),", see ",(0,i.jsx)(s.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001032377",children:"CONNECTION_ID"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"like"})," clause supports fuzzy search. Supported wildcard characters are the percent sign (",(0,i.jsx)(s.code,{children:"%"}),") and the underscore (",(0,i.jsx)(s.code,{children:"_"}),")."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Here are some examples:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Query session variables by ",(0,i.jsx)(s.code,{children:"cs_id"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> SHOW PROXYSESSION VARIABLES 3;\n"})}),"\n",(0,i.jsx)(s.p,{children:"The output is as follows:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"+-----------------------------------+------------------+-----------------+--------------------+--------------------------------------------+\n| variable_name                     | value            | info            | modified_type      | sys_variable_flag                          |\n+-----------------------------------+------------------+-----------------+--------------------+--------------------------------------------+\n| ob_proxy_global_variables_version | 1461742173142100 | changed sys var | cold modified vars |  && invisible && session_scope && readonly |\n| ob_proxy_user_privilege           | 65534            | changed sys var | cold modified vars |  && invisible && session_scope && readonly |\n| ob_capability_flag                | 654159           | changed sys var | cold modified vars |  && invisible && session_scope && readonly |\n| ob_enable_transmission_checksum   | 1                | changed sys var | cold modified vars |  && global_scope && session_scope          |\n| _min_cluster_version              | '4.1.0.1'        | user var        | cold modified vars |                                            |\n+-----------------------------------+------------------+-----------------+--------------------+--------------------------------------------+\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Query session variables by ",(0,i.jsx)(s.code,{children:"CONNECTION_ID"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> SELECT CONNECTION_ID();\n+-----------------+\n| CONNECTION_ID() |\n+-----------------+\n|      2147549231 |\n+-----------------+\n1 row in set\n\nobclient> SHOW PROXYSESSION VARIABLES 2147549231;\n+-----------------------------------+------------------+-----------------+--------------------+--------------------------------------------+\n| variable_name                     | value            | info            | modified_type      | sys_variable_flag                          |\n+-----------------------------------+------------------+-----------------+--------------------+--------------------------------------------+\n| ob_proxy_global_variables_version | 1461742173142100 | changed sys var | cold modified vars |  && invisible && session_scope && readonly |\n| ob_proxy_user_privilege           | 65534            | changed sys var | cold modified vars |  && invisible && session_scope && readonly |\n| ob_capability_flag                | 654159           | changed sys var | cold modified vars |  && invisible && session_scope && readonly |\n| ob_enable_transmission_checksum   | 1                | changed sys var | cold modified vars |  && global_scope && session_scope          |\n| _min_cluster_version              | '4.1.0.1'        | user var        | cold modified vars |                                            |\n+-----------------------------------+------------------+-----------------+--------------------+--------------------------------------------+\n5 rows in set\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Query session variables with ",(0,i.jsx)(s.code,{children:"all"})," specified."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> SHOW PROXYSESSION VARIABLES all 3;\n"})}),"\n",(0,i.jsx)(s.p,{children:"The output is as follows:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"+-----------------------------------+-----------------------+---------+------------------------------+-----------------------------------------------+\n| variable_name                     | value                 | info    | modified_type                | sys_variable_flag                             |\n+-----------------------------------+-----------------------+---------+------------------------------+-----------------------------------------------+\n| ob_proxy_global_variables_version | 1461742173142100      | sys var | cold modified vars           |  && invisible && session_scope && readonly    |\n| ob_proxy_user_privilege           | 65534                 | sys var | cold modified vars           |  && invisible && session_scope && readonly    |\n| ob_capability_flag                | 654159                | sys var | cold modified vars           |  && invisible && session_scope && readonly    |\n| ob_enable_transmission_checksum   | 1                     | sys var | cold modified vars           |  && global_scope && session_scope             |\n| auto_increment_increment          | 1                     | sys var | cold modified vars           |  && global_scope && session_scope             |\n| auto_increment_offset             | 1                     | sys var | cold modified vars           |  && global_scope && session_scope             |\n\xb7\xb7\xb7\xb7\xb7\xb7\n# Subsequent outputs omitted\n"})}),"\n",(0,i.jsx)(s.p,{children:"The following table describes the fields in the return result."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Field"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"variable_name"}),(0,i.jsx)(s.td,{children:"The name of the variable."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"value"}),(0,i.jsx)(s.td,{children:"The value of the variable."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"info"}),(0,i.jsx)(s.td,{children:"The type of the variable, which can be system variable or user variable."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"modified_type"}),(0,i.jsx)(s.td,{children:"The modification type of the variable, which is identified based on the modification frequency."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"sys_variable_flag"}),(0,i.jsx)(s.td,{children:"The scope of the system variable."})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:["For more information about system variables, see ",(0,i.jsx)(s.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001029272",children:"System variables"}),". For more information about user variables, see ",(0,i.jsx)(s.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001031759",children:"SET"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"terminate-a-client-session",children:"Terminate a client session"}),"\n",(0,i.jsxs)(s.p,{children:["You can use the ",(0,i.jsx)(s.code,{children:"KILL (cs_id | connection_id)"})," statement to terminate a client session. The following sections describe how to terminate a client session based on the client session ID or connection ID."]}),"\n",(0,i.jsxs)(s.p,{children:["If you perform a ",(0,i.jsx)(s.code,{children:"KILL"})," operation on a session by specifying its ",(0,i.jsx)(s.code,{children:"cs_id"})," or ",(0,i.jsx)(s.code,{children:"CONNECTION_ID"})," and the session is terminated, the operation is successful. When you execute the ",(0,i.jsx)(s.code,{children:"SHOW PROXYSESSION"})," statement, the client will re-establish a session, send the SQL statement to ODP for execution, and display the execution result."]}),"\n",(0,i.jsx)(s.h4,{id:"terminate-a-session-by-specifying-the-client-session-id",children:"Terminate a session by specifying the client session ID"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Execute the ",(0,i.jsx)(s.code,{children:"SHOW PROXYSESSION"})," statement to query the ID of the client session (",(0,i.jsx)(s.code,{children:"cs_id"}),") to be terminated."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> show proxysession;\n"})}),"\n",(0,i.jsxs)(s.p,{children:["The output is as follows, where the value in the second column (",(0,i.jsx)(s.code,{children:"Id"}),") indicates the client session ID."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"+---------------------+--------+---------+--------+------+-----------------+------+-------------+-------------------+-------------------+------+------+-----------+\n| proxy_sessid        | Id     | Cluster | Tenant | User | Host            | db   | trans_count | svr_session_count | state             | tid  | pid  | using_ssl |\n+---------------------+--------+---------+--------+------+-----------------+------+-------------+-------------------+-------------------+------+------+-----------+\n| 7230691418559283266 |     68 |  ob1.cc | sys    | root | 127.0.0.1:50260 | NULL |           0 |                 1 | MCS_ACTIVE_READER | 8728 | 8728 |         0 |\n+---------------------+--------+---------+--------+------+-----------------+------+-------------+-------------------+-------------------+------+------+-----------+\n1 rows in set\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Execute the following statement to terminate the session:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> kill 68;\nERROR 1317 (70100): Query execution was interrupted\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Execute the following statement to verify whether the session is terminated:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> select 88;\n"})}),"\n",(0,i.jsx)(s.p,{children:"The following output shows that the connection is lost."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"ERROR 2013 (HY000): Lost connection to MySQL server during query\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"terminate-a-session-by-specifying-the-connection-id",children:"Terminate a session by specifying the connection ID"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Execute the following statement to query the connection ID of the current session:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> select CONNECTION_ID();\n"})}),"\n",(0,i.jsx)(s.p,{children:"The output is as follows:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"+-----------------+\n| CONNECTION_ID() |\n+-----------------+\n|      3221766868 |\n+-----------------+\n1 row in set\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Execute the following statement to terminate the session:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> kill 3221766868;\nERROR 1317 (70100): Query execution was interrupted\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Execute the following statement to verify whether the session is terminated:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> select 88;\n"})}),"\n",(0,i.jsx)(s.p,{children:"The following output shows that the connection is lost."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"ERROR 2013 (HY000): Lost connection to MySQL server during query\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"server-sessions",children:"Server sessions"}),"\n",(0,i.jsx)(s.p,{children:"This section describes general operations performed on a server session, which is established between ODP and an OBServer node."}),"\n",(0,i.jsx)(s.h3,{id:"view-server-sessions",children:"View server sessions"}),"\n",(0,i.jsxs)(s.p,{children:["At present, you cannot use ODP to view server sessions. You can log on to the ",(0,i.jsx)(s.code,{children:"sys"})," tenant of OceanBase Database as the ",(0,i.jsx)(s.code,{children:"root"})," user and view all OBServer nodes in the cluster. Then, you can directly connect to the target OBServer node and view the server sessions."]}),"\n",(0,i.jsxs)(s.p,{children:["This section provides only one method for you to view server sessions. For more information about the operations and output, see ",(0,i.jsx)(s.a,{href:"https://en.oceanbase.com/docs/common-oceanbase-database-10000000001166444",children:"View tenant sessions"}),"."]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Log on to the ",(0,i.jsx)(s.code,{children:"sys"})," tenant of OceanBase Database as the ",(0,i.jsx)(s.code,{children:"root"})," user and view all OBServer nodes in the cluster."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> select * from oceanbase. __all_server;\n"})}),"\n",(0,i.jsx)(s.p,{children:"The output is as follows:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"+----------------------------+----------------------------+------------+----------+----+------+------------+-----------------+--------+-----------------------+--------------------------------------------------------------------------+-----------+--------------------+--------------+----------------+\n| gmt_create                 | gmt_modified               | svr_ip     | svr_port | id | zone | inner_port | with_rootserver | status | block_migrate_in_time | build_version                                                            | stop_time | start_service_time | first_sessid | with_partition |\n+----------------------------+----------------------------+------------+----------+----+------+------------+-----------------+--------+-----------------------+--------------------------------------------------------------------------+-----------+--------------------+--------------+----------------+\n| 2023-02-28 15:45:53.230044 | 2023-02-28 15:46:25.577180 | 10.10.10.1 |     2882 |  3 | z3   |       2881 |               1 | ACTIVE |                     0 | 4.1.0.0_1-703037f0b023c8ffa880258463b25b1735cf27b3(Feb 28 2023 13:21:21) |         0 |   1677570376568330 |            0 |              1 |\n| 2023-02-28 15:45:53.197477 | 2023-02-28 15:46:25.534448 | 10.10.10.2 |     2882 |  2 | z2   |       2881 |               0 | ACTIVE |                     0 | 4.1.0.0_1-703037f0b023c8ffa880258463b25b1735cf27b3(Feb 28 2023 13:21:21) |         0 |   1677570376522994 |            0 |              1 |\n| 2023-02-28 15:45:53.113870 | 2023-02-28 15:46:25.098607 | 10.10.10.3 |     2882 |  1 | z1   |       2881 |               0 | ACTIVE |                     0 | 4.1.0.0_1-703037f0b023c8ffa880258463b25b1735cf27b3(Feb 28 2023 13:21:21) |         0 |   1677570378084150 |            0 |              1 |\n+----------------------------+----------------------------+------------+----------+----+------+------------+-----------------+--------+-----------------------+--------------------------------------------------------------------------+-----------+--------------------+--------------+----------------+\n3 rows in set\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Select the target OBServer node and directly connect to it."}),"\n",(0,i.jsxs)(s.p,{children:["The following sample code directly connects to the OBServer node with the IP address ",(0,i.jsx)(s.code,{children:"10.10.10.1"})," and the SQL port ",(0,i.jsx)(s.code,{children:"2881"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"[admin@test001 ~]$ obclient -h 10.10.10.1 -P2881 -uroot@sys -p -Doceanbase -A\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Execute the ",(0,i.jsx)(s.code,{children:"show processlist;"})," statement to query all sessions of the current OBServer node."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"obclient> show processlist;\n"})}),"\n",(0,i.jsx)(s.p,{children:"The output is as follows:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"+------------+---------+------------------+-----------+---------+------+--------+------------------+\n| Id         | User    | Host             | db        | Command | Time | State  | Info             |\n+------------+---------+------------------+-----------+---------+------+--------+------------------+\n| 3221812197 | root    | 10.10.10.1:48563 | oceanbase | Query   |    0 | ACTIVE | show processlist |\n| 3222117829 | proxyro | 10.10.10.1:37876 | oceanbase | Sleep   |    6 | SLEEP  | NULL             |\n| 3221709618 | root    | 10.10.10.1:51390 | oceanbase | Sleep   |  831 | SLEEP  | NULL             |\n+------------+---------+------------------+-----------+---------+------+--------+------------------+\n3 rows in set\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"terminate-a-server-session",children:"Terminate a server session"}),"\n",(0,i.jsx)(s.p,{children:"At present, you cannot use ODP to terminate server sessions. To terminate a server session, you can directly connect to the OBServer node."}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Log on to the ",(0,i.jsx)(s.code,{children:"sys"})," tenant of OceanBase Database as the ",(0,i.jsx)(s.code,{children:"root"})," user and view all OBServer nodes in the cluster."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> select * from oceanbase. __all_server;\n"})}),"\n",(0,i.jsx)(s.p,{children:"The output is as follows:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"+----------------------------+----------------------------+------------+----------+----+------+------------+-----------------+--------+-----------------------+--------------------------------------------------------------------------+-----------+--------------------+--------------+----------------+\n| gmt_create                 | gmt_modified               | svr_ip     | svr_port | id | zone | inner_port | with_rootserver | status | block_migrate_in_time | build_version                                                            | stop_time | start_service_time | first_sessid | with_partition |\n+----------------------------+----------------------------+------------+----------+----+------+------------+-----------------+--------+-----------------------+--------------------------------------------------------------------------+-----------+--------------------+--------------+----------------+\n| 2023-02-28 15:45:53.230044 | 2023-02-28 15:46:25.577180 | 10.10.10.1 |     2882 |  3 | z3   |       2881 |               1 | ACTIVE |                     0 | 4.1.0.0_1-703037f0b023c8ffa880258463b25b1735cf27b3(Feb 28 2023 13:21:21) |         0 |   1677570376568330 |            0 |              1 |\n| 2023-02-28 15:45:53.197477 | 2023-02-28 15:46:25.534448 | 10.10.10.2 |     2882 |  2 | z2   |       2881 |               0 | ACTIVE |                     0 | 4.1.0.0_1-703037f0b023c8ffa880258463b25b1735cf27b3(Feb 28 2023 13:21:21) |         0 |   1677570376522994 |            0 |              1 |\n| 2023-02-28 15:45:53.113870 | 2023-02-28 15:46:25.098607 | 10.10.10.3 |     2882 |  1 | z1   |       2881 |               0 | ACTIVE |                     0 | 4.1.0.0_1-703037f0b023c8ffa880258463b25b1735cf27b3(Feb 28 2023 13:21:21) |         0 |   1677570378084150 |            0 |              1 |\n+----------------------------+----------------------------+------------+----------+----+------+------------+-----------------+--------+-----------------------+--------------------------------------------------------------------------+-----------+--------------------+--------------+----------------+\n3 rows in set\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Directly connect to the target OBServer node."}),"\n",(0,i.jsxs)(s.p,{children:["The following sample code directly connects to the OBServer node with the IP address ",(0,i.jsx)(s.code,{children:"10.10.10.1"})," and the SQL port ",(0,i.jsx)(s.code,{children:"2881"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"[admin@test001 ~]$ obclient -h10.10.10.1 -P2881 -uroot@sys -p -Doceanbase -A\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Execute the ",(0,i.jsx)(s.code,{children:"show processlist;"})," statement to query all sessions of the current OBServer node."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> show processlist;\n"})}),"\n",(0,i.jsx)(s.p,{children:"The output is as follows:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"+------------+---------+------------------+-----------+---------+------+--------+------------------+\n| Id         | User    | Host             | db        | Command | Time | State  | Info             |\n+------------+---------+------------------+-----------+---------+------+--------+------------------+\n| 3221812197 | root    | 10.10.10.1:48563 | NULL      | Query   |    0 | ACTIVE | show processlist |\n| 3222117829 | proxyro | 10.10.10.1:37876 | oceanbase | Sleep   |    6 | SLEEP  | NULL             |\n| 3221709618 | root    | 10.10.10.1:51390 | NULL      | Sleep   |  831 | SLEEP  | NULL             |\n+------------+---------+------------------+-----------+---------+------+--------+------------------+\n3 rows in set\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Execute the ",(0,i.jsx)(s.code,{children:"kill <id>"})," statement to terminate the current session whose ",(0,i.jsx)(s.code,{children:"Id"})," is ",(0,i.jsx)(s.code,{children:"3221812197"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"obclient> kill 3221812197;\nERROR 2013 (HY000): Lost connection to MySQL server during query\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},2498:(e,s,n)=>{n.d(s,{A:()=>i});const i="data:image/png;base64,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"},16505:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/002-3d64857fe92942999aef2bc3c6c708e4.png"},28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>o});var i=n(96540);const t={},r=i.createContext(t);function c(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);
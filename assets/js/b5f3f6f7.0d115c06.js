"use strict";(self.webpackChunkmy_docs_website=self.webpackChunkmy_docs_website||[]).push([[6339],{599:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var s=t(74848),n=t(28453);const i={slug:"Yonyou",title:"Yonyou Replaces MySQL with OceanBase Database to Reduce O&M Costs and Achieve High Availability",tags:["User Case"]},o=void 0,r={id:"blogs/users/Yonyou",title:"Yonyou Replaces MySQL with OceanBase Database to Reduce O&M Costs and Achieve High Availability",description:"Introduction: As Yonyou Network Technology (Yonyou) grows, it uses XXL-JOB as the task scheduling platform and Nacos as the configuration management center to standardize and automate IT O&M. However, the underlying MySQL system seemed to be increasingly overburdened in coping with more and more clusters built for XXL-JOB and Nacos. To relieve its O&M workload, the company started looking for a database that can manage all its clusters with high availability in a unified way. In this article, Yonyou's database administrators shared their story of database selection.",source:"@site/docs/blogs/users/Yonyou.md",sourceDirName:"blogs/users",slug:"/blogs/users/Yonyou",permalink:"/docs/blogs/users/Yonyou",draft:!1,unlisted:!1,editUrl:"https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/blogs/users/Yonyou.md",tags:[{inline:!0,label:"User Case",permalink:"/docs/tags/user-case"}],version:"current",frontMatter:{slug:"Yonyou",title:"Yonyou Replaces MySQL with OceanBase Database to Reduce O&M Costs and Achieve High Availability",tags:["User Case"]},sidebar:"blogsSidebar",previous:{title:"TAL\u2018s Multitenancy Practice: Solving Resource Isolation and Fragmentation in the Next-gen Data Architecture",permalink:"/docs/blogs/users/TAL"},next:{title:"Slashing Costs by 87.5%: Yunji`s Cost-cutting Adventure with OceanBase Database",permalink:"/docs/blogs/users/Yunji"}},l={},c=[{value:"Business Challenges",id:"business-challenges",level:2},{value:"Database Selection and Results",id:"database-selection-and-results",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const a={a:"a",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.p,{children:"Introduction: As Yonyou Network Technology (Yonyou) grows, it uses XXL-JOB as the task scheduling platform and Nacos as the configuration management center to standardize and automate IT O&M. However, the underlying MySQL system seemed to be increasingly overburdened in coping with more and more clusters built for XXL-JOB and Nacos. To relieve its O&M workload, the company started looking for a database that can manage all its clusters with high availability in a unified way. In this article, Yonyou's database administrators shared their story of database selection."}),"\n",(0,s.jsx)(a.h2,{id:"business-challenges",children:"Business Challenges"}),"\n",(0,s.jsx)(a.p,{children:"Facing the growing team and IT system, we had to invest more efforts into routine O&M and use automation tools for help. We deployed a scheduling platform and a configuration management center to implement standardized and automated IT O&M."}),"\n",(0,s.jsx)(a.p,{children:"Our task scheduling platform relies largely on the distributed XXL-JOB framework, which is lightweight and scalable, and allows fast development with a short learning curve."}),"\n",(0,s.jsx)(a.p,{children:"We also introduced Nacos as both a registration center and configuration management center. With Nacos, we can perform service discovery and registration, and also standardize configuration and unify configuration formats. Configuration changes take effect in real time without restarting the server, and are synchronized to programs for quick response. We can adjust the business in real time or quasi-real time simply by dynamically modifying parameters in the configuration management center. In addition, its audit feature makes it possible to track system issues."}),"\n",(0,s.jsx)(a.p,{children:"However, the increasing number of XXL-JOB and Nacos clusters brought about other challenges. On one hand, we spent time and efforts managing these clusters. On the other hand, they were supported on standalone MySQL databases, which required us to create additional MySQL instances that lacked high availability. When an instance failed, the entire scheduling platform or configuration management center became unavailable. Of course, we could simply create highly available MySQL clusters, but the daunting management and hardware costs were far too high. So we started looking for a database that provides high availability and supports unified cluster management to reduce the workload at affordable O&M costs."}),"\n",(0,s.jsx)(a.h2,{id:"database-selection-and-results",children:"Database Selection and Results"}),"\n",(0,s.jsx)(a.p,{children:"After studying various databases on the market, we shortlisted two distributed databases. Both provide high availability natively and automatically switch business from faulty nodes to healthy ones, and we could deploy them without business modification."}),"\n",(0,s.jsx)(a.p,{children:"We eventually chose OceanBase Database for our scheduling platform and configuration management center, largely because it supports multitenancy. This feature allows us to host databases of multiple platforms in one OceanBase cluster. This greatly reduces the workload of operating and maintaining multiple databases, and allows us to quickly scale out a tenant by flexibly configuring its resources when platform traffic surges."}),"\n",(0,s.jsx)(a.p,{children:"By reading the official documentation of OceanBase Database, browsing its online community Q&A pages, talking with its engineers, and testing it, we found that OceanBase Database also provides four key capabilities."}),"\n",(0,s.jsxs)(a.ol,{children:["\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"High scalability"}),". The performance of our MySQL database degraded as the data volume increased, causing lags of our business platforms. With its distributed architecture, OceanBase Database provides linear scalability, allowing us to achieve linear performance improvement by adding servers to handle the increasing data volume."]}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"High availability"}),". OceanBase Database natively supports high availability. It uses the Paxos protocol to achieve high availability at the partition level, and still provides services when a minority of nodes fail. We do not need to install other components to guarantee high availability or automatic failover."]}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"High compression ratio"}),". OceanBase Database organizes data based on the log-structured merge-tree (LSM-tree) architecture, where the full data consists of baseline data and incremental data. The baseline data is static and will only change at a major compaction. Therefore, aggressive algorithms can be applied to achieve a pretty high compression ratio. After the migration from MySQL to OceanBase Database, the disk usage is only about one-third of what it was before."]}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"High compatibility"}),". OceanBase Database is compatible with most MySQL syntax. However, Nacos and XXL-JOB require SQL initialization in the database, and the ENGINE=InnoDB clause must be specified in the table creation statement, which is not supported by OceanBase Database. The solution is to remove this clause when creating a table in OceanBase Database."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(a.p,{children:"In fact, OceanBase Database did a great job in our test environment."}),"\n",(0,s.jsx)(a.p,{children:"XXL-JOB task scheduling platform: After the SQL initialization was completed, the platform ran smoothly and was highly compatible with OceanBase Database. No exceptions were found."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.img,{alt:"1",src:t(37114).A+"",width:"1274",height:"397"})}),"\n",(0,s.jsx)(a.p,{children:"Nacos configuration management center: After the SQL initialization was completed, the center operated satisfactorily."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.img,{alt:"2",src:t(43557).A+"",width:"1274",height:"351"})}),"\n",(0,s.jsx)(a.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(a.p,{children:"The test results showed that OceanBase Database is highly compatible and integrated with XXL-JOB and Nacos. So, we deployed our XXL-JOB task scheduling platform and Nacos configuration management center based on the multitenancy feature of OceanBase Database. This feature has helped reduce the number of MySQL instances, simplifying database O&M significantly. The following figure shows the architecture of our cluster in use."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.img,{src:"https://gw.alipayobjects.com/zos/oceanbase/2add4cd8-0d66-4bb3-948f-78d46bbb7098/image/2022-12-08/8f9d1c01-62a6-4046-be46-a68b3709dfb7.jpeg",alt:""})}),"\n",(0,s.jsx)(a.p,{children:"We considered our initial attempt at database replacement a very smooth experience. Thanks to its DaaS capabilities, OceanBase Database provides better support for tools that depend on MySQL, such as XXL-JOB and Nacos. It simplifies our database management, and allows us to spare more time for optimizing other tools."}),"\n",(0,s.jsxs)(a.p,{children:["Follow us in the ",(0,s.jsx)(a.a,{href:"https://open.oceanbase.com/blog",children:"OceanBase community"}),". We aspire to regularly contribute technical information so we can all move forward together."]}),"\n",(0,s.jsx)(a.p,{children:"Search \ud83d\udd0d DingTalk group 33254054 or scan the QR code below to join the OceanBase technical Q&A group. You can find answers to all your technical questions there."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.img,{src:"https://gw.alipayobjects.com/zos/oceanbase/f4d95b17-3494-4004-8295-09ab4e649b68/image/2022-08-29/00ff7894-c260-446d-939d-f98aa6648760.png",alt:""})})]})}function h(e={}){const{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},37114:(e,a,t)=>{t.d(a,{A:()=>s});const s=t.p+"assets/images/7ad8457c-8ff5-484b-b79a-a7d49f6cedd2-d58c8fd893ea9584a73c63603fe79be5.png"},43557:(e,a,t)=>{t.d(a,{A:()=>s});const s=t.p+"assets/images/c6e62f0c-e92e-43ac-aa43-0206067bd918-005b94eb94aa6ea8c89988807844ad4e.png"},28453:(e,a,t)=>{t.d(a,{R:()=>o,x:()=>r});var s=t(96540);const n={},i=s.createContext(n);function o(e){const a=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),s.createElement(i.Provider,{value:a},e.children)}}}]);
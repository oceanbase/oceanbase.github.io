<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Flink CDC + OceanBase integration solution for full and incremental synchronization | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/blog/flink-cdc"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Flink CDC + OceanBase integration solution for full and incremental synchronization | OceanBase"><meta data-rh="true" name="description" content="This article introduces OceanBase and explains the application scenarios of Flink CDC and OceanBase."><meta data-rh="true" property="og:description" content="This article introduces OceanBase and explains the application scenarios of Flink CDC and OceanBase."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-06-04T13:18:36.000Z"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/blog/flink-cdc"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/blog/flink-cdc" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/blog/flink-cdc" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6JQM9QDU5V-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://oceanbase.github.io/blog/flink-cdc","mainEntityOfPage":"https://oceanbase.github.io/blog/flink-cdc","url":"https://oceanbase.github.io/blog/flink-cdc","headline":"Flink CDC + OceanBase integration solution for full and incremental synchronization","name":"Flink CDC + OceanBase integration solution for full and incremental synchronization","description":"This article introduces OceanBase and explains the application scenarios of Flink CDC and OceanBase.","datePublished":"2024-06-04T13:18:36.000Z","author":[],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://oceanbase.github.io/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OceanBase RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OceanBase Atom Feed"><link rel="stylesheet" href="/assets/css/styles.8d7d8da1.css">
<script src="/assets/js/runtime~main.2db9bf9b.js" defer="defer"></script>
<script src="/assets/js/main.dbffa235.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/blog/flink-cdc">Docs</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Product Docs</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">User Manual</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Developer Manual</a></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/blog/flink-cdc">Community</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Special Interest Group(SIG)</a><span><li><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="dropdown__link">Slack<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum (in Chinese)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/architectural-evolution">The architectural evolution of OceanBase Database</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/compression-ratio">Data Compression Technology Explained Balance between Costs &amp; Performance</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/flink-cdc">Flink CDC + OceanBase integration solution for full and incremental synchronization</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/integrated-architecture">Integrated Architecture of OceanBase Database</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/integrated-sql-engine">Integrated SQL Engine in OceanBase Database</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/vectorized-engine">Implementing a Vectorized Engine in a Distributed Database</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/boss-zhipin">BOSS Zhipin —— How to save 70% storage cost through OceanBase with an archive database of 1 billion rows per day?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/dmall">DMALL —— a summary of database selection experience in SaaS scenarios</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/sichuan-hwadee">Sichuan Hwadee —— The practice of lightweight data warehouse construction of health big data based on OceanBase</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/kuayue-express">KUAYUE EXPRESS —— In the real-time warehouse scenario, utilizing OceanBase to make up for the shortcomings of MySQL and StarRocks</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/momo">Momo —— Exploration and practice of persistent cache based on OceanBase KV storage</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/all-in-one">Work with developers to create an all-in-one database</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/io-isolation">OceanBase provides users with sufficiently flexible and simple I/O resource isolation experiences.</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/miniaturization">OceanBase 4.0 interpretation: Reduce the threshold of distributed database use, talk about our thinking on small specifications</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/ob-430">OceanBase 4.3 - Milestone release for real-time AP analysis</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/resource-isolation">Why is resource isolation important for HTAP?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/flink-and-ob">Flink CDC + OceanBase integration solution for full and incremental synchronization</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/hello-oceanbase">Hello OceanBase! The first lesson for becoming an OceanBase contributor</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/obcloud">How OB Cloud Achieves Cost Reduction and Efficiency Improvement in Replacing MySQL Scenarios ？</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/adaptive-sql-execution-engine">Adaptive Techniques in the OceanBase SQL Execution Engine</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/distributed-push-down">OceanBase Distributed Pushdown Technology</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/high-concurrency">OceanBase Technical Insights for High-Concurrency Scenarios</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/refine-performance">How We Approach Improving Distributed Query Performance</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tp-to-ap">From OLTP to OLAP: Exploration and practice of the OceanBase SQL engine</a></li></ul></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Flink CDC + OceanBase integration solution for full and incremental synchronization</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-06-04T13:18:36.000Z">June 4, 2024</time> · <!-- -->10 min read</div></header><div id="__blog-post-container" class="markdown"><p>This article introduces OceanBase and explains the application scenarios of Flink CDC and OceanBase.</p>
<p>This article was compiled from the speech by Wang He (Chuanfen) (OceanBase Technical Expert) at the Flink CDC Meetup on May 21. The main contents include:</p>
<ol>
<li>An Introduction to OceanBase</li>
<li>The Implementation Principle of Flink CDC OceanBase Connector</li>
<li>The Application Scenarios of Flink CDC + OceanBase</li>
<li>The Future Outlook of Flink CDC OceanBase Connector</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-an-introduction-to-oceanbase">1. An Introduction to OceanBase<a class="hash-link" aria-label="Direct link to 1. An Introduction to OceanBase" title="Direct link to 1. An Introduction to OceanBase" href="/blog/flink-cdc#1-an-introduction-to-oceanbase">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/ob-history-57a56856ceaf728f1bc12868cdc347f6.png" width="1280" height="720" class="img_ev3q"></p>
<p>OceanBase is a distributed database developed by Ant Group. The project was established in 2010 and developed iteratively. Its earliest application is to Taobao&#x27;s favorites. In 2014, the OceanBase R&amp;D Team moved from Taobao to Ant Group, mainly responsible for Alipay&#x27;s internal de-IOE work. It means replacing the Oracle database used by Alipay. Currently, all the data in Ant Group databases have been migrated to OceanBase. On June 1, 2021, OceanBase was officially opened source to the public, and a MySQL-compatible version was launched.</p>
<p>OceanBase has undergone three generations of architecture upgrades, including a distributed storage system initially applied to e-commerce companies, a general-purpose distributed database, and an enterprise-level distributed database.</p>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/2551bf4e7b277e5a3af59a91d93ec311b2bb5253.png" alt="" class="img_ev3q"></p>
<p>The preceding figure shows the architecture of OceanBase.</p>
<p>The top-level app accesses the server side of the OceanBase database through the OBProxy (SLB proxy). The data on the server side has multiple replicas. The relationship between the replicas is similar to the primary-secondary relationship in the database architecture, but it is table-level. The partition of the partition table is divided into multiple replicas at the table level and then scattered on multiple servers.</p>
<p>The architecture of OceanBase has the following features:</p>
<ul>
<li><strong>No Shared Architecture:</strong> Each node has its complete SQL engines, storage engines, and transaction processing logic. All nodes are completely peer-to-peer, and there are no layered structures.</li>
<li><strong>Partition-Level Availability:</strong> It provides partition-level availability. The partition is the basic unit for implementing reliability and scalability, achieving access routing, SLB, and automatic fault recovery in the OceanBase database.</li>
<li><strong>High Availability and Strong Consistency:</strong> There are multiple data replicas. The consistency protocol of Paxos is used to provide high reliability between multiple replicas and ensure the Persistent Event Log (PEL) is successful at the majority of nodes.</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/1ad5f7ab919762810f62c4df3af5e7fa98073068.png" alt="" class="img_ev3q"></p>
<p>The core features of OceanBase:</p>
<ol>
<li><strong>High Availability:</strong> It is based on the Paxos protocol, with strong consistency. A few copies are faulty, but data is not lost, and services are not stopped.</li>
<li><strong>High Scalability:</strong> It supports online horizontal scale-out and capacity reduction. Nodes can automatically achieve SLB.</li>
<li><strong>High Compatibility:</strong> The Community Edition is compatible with MySQL protocols and syntax.</li>
<li><strong>Low Cost:</strong> OceanBase database costs about one-third of MySQL. The <strong>storage compression ratio</strong> is extremely high because of its low hardware quality requirements and a lot of optimization of storage.</li>
<li><strong>Multi-Tenancy:</strong> Resources are completely isolated between tenants. Different service parties only need to manage data in their tenants, which can save costs.</li>
<li><strong>HTAP:</strong> It implements both OLTP and OLAP in one set of engines.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-the-implementation-principle-of-flink-cdc-oceanbase-connector">2. The Implementation Principle of Flink CDC OceanBase Connector<a class="hash-link" aria-label="Direct link to 2. The Implementation Principle of Flink CDC OceanBase Connector" title="Direct link to 2. The Implementation Principle of Flink CDC OceanBase Connector" href="/blog/flink-cdc#2-the-implementation-principle-of-flink-cdc-oceanbase-connector">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/23dd7319f3dd972de1ba223fa81c271bb194650c.png" alt="" class="img_ev3q"></p>
<p>The current mainstream CDC mainly relies on the logs of the database. After capturing the incremental logs of the database, it is necessary to ensure their orderliness and integrity, process the logs, and write them to the destination, such as a data warehouse or query engine.</p>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/44b0297d17d2126dd13e890b4a3726efadd953a5.png" alt="" class="img_ev3q"></p>
<p>OceanBase provides some components for capturing incremental data. It is a distributed database, so its data is scattered when it falls into the log. It provides an obcdc component for capturing database logs. It interacts with the OceanBase Server through RPC to capture the original log information. After processing, an orderly log flow can be spit out, and the downstream can consume the orderly log flow by accessing the obcdc component.</p>
<p>There are currently three major downstream consumers:</p>
<ul>
<li><strong>Oblogproxy:</strong> An open-source component that is used to consume log flows. Flink CDC relies on this component to capture incremental data.</li>
<li><strong>OMS Store:</strong> The data migration service provided by OceanBase. The commercial version of OMS has been upgraded in many iterations and supports many data sources. Last year, OMS supported the community edition of the two data sources, OceanBase and MySQL.</li>
<li><strong>JNI Client:</strong> You can directly use obcdc to interact with OBSserver to capture incremental logs. This downstream consumer is under an open-source plan.</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/328e4a928e5085a8cec7788caf02dd0270c92724.png" alt="" class="img_ev3q"></p>
<p>Currently, there are two OceanBase CDC components provided by the Open-Source Community:</p>
<ul>
<li><strong>OceanBase Canal:</strong> Canal is an open-source tool of Alibaba for capturing MySQL incremental logs. OceanBase community strengthens the ability to capture and parse incremental logs based on the latest code of Canal in the open-source edition.</li>
<li><strong>Flink CDC:</strong> Flink CDC uses obcdc through oblogproxy to capture incremental logs from OceanBase and then uses another open-source component logproxy-client to consume incremental logs and process them.</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/c2e8f3a1e5be13f89433bf823ecd1e17215886a4.png" alt="" class="img_ev3q"></p>
<p>The lower-left corner of the figure above shows how to define a dynamic table. Data streams are converted into tables in Flink in the form of dynamic tables. You can only perform SQL operations if the data stream is converted into a table. After that, Continuous Query queries the growing dynamic table. The obtained data is still presented in the form of a table. Then, the Continuous Query will convert it into a data stream and send it to downstream consumers.</p>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/822e48b74147da81cce8f7445c39df9126e3a195.png" alt="" class="img_ev3q"></p>
<p>The figure above shows the implementation principle of Flink CDC.</p>
<p>Flink CDC Connector only reads the source data. It only reads the data from the data source and then inputs it to the Flink engine.</p>
<p>The current Flink CDC Connectors are mainly divided into the following three categories:</p>
<ul>
<li><strong>MySqlSource:</strong> It implements the latest source interface and achieves concurrent reads.</li>
<li><strong>DebeziumSourceFunction:</strong> It implements SourceFunction based on Debezium and supports earlier versions of MySQL, Oracle, MongoDB, SqlServer, and PostgreSQL.</li>
<li><strong>OceanBaseSourceFunction:</strong> It implements the SourceFunction interface and achieves full and incremental reads based on JDBC and logproxy-client.</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/ab26b801cb8343ff90148423812e6a7c6e6eccd8.png" alt="" class="img_ev3q"></p>
<p>The preceding figure shows the data path of the Flink CDC OceanBase Connector.</p>
<p>Incremental data is captured first through logproxy. The logproxy-client monitors the data stream of incremental logs. After Flink CDC reads the incremental logs, the data will be written to Flink in line with the processing logic of Flink CDC. Full data are captured through JDBC.</p>
<p>The functions supported by the current Flink CDC OceanBase Connector are mainly limited by logproxy. Currently, it supports capturing data at a specified time. However, since OceanBase is a distributed database, you cannot accurately find the starting point of incremental log data. However, if you specify the starting point with a timestamp, there may be some duplicate data.</p>
<p>OceanBase Community Edition does not have table locks in the process of capturing full data. Therefore, the data edge points cannot be determined by locking the full data.</p>
<p>Considering the two aspects above, currently, only the at-least-once working mode is supported, and the exactly-once mode has not been realized.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-application-scenarios-of-flink-cdc--oceanbase">3. Application Scenarios of Flink CDC + OceanBase<a class="hash-link" aria-label="Direct link to 3. Application Scenarios of Flink CDC + OceanBase" title="Direct link to 3. Application Scenarios of Flink CDC + OceanBase" href="/blog/flink-cdc#3-application-scenarios-of-flink-cdc--oceanbase">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/ee62c27fbff429d58d3ccd5aa342097b437e546c.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-scenario-1-data-integration-based-on-database-and-table-sharding">3.1 Scenario 1: Data Integration Based on Database and Table Sharding<a class="hash-link" aria-label="Direct link to 3.1 Scenario 1: Data Integration Based on Database and Table Sharding" title="Direct link to 3.1 Scenario 1: Data Integration Based on Database and Table Sharding" href="/blog/flink-cdc#31-scenario-1-data-integration-based-on-database-and-table-sharding">​</a></h3>
<p>Flink CDC supports real-time consistent synchronization and processing of full data and incremental data in tables. OceanBase Connector supports regular expression matching for reading data. For database and table sharding, the OceanBase Connector can be used to create dynamic tables to read data from data sources and write all the data into a table to realize the aggregation of table data.</p>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/7f69f6fa9b9350ec1cb117c82b7d542d1c8218fb.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-scenario-2-cross-clustertenant-data-integration">3.2 Scenario 2: Cross-Cluster/Tenant Data Integration<a class="hash-link" aria-label="Direct link to 3.2 Scenario 2: Cross-Cluster/Tenant Data Integration" title="Direct link to 3.2 Scenario 2: Cross-Cluster/Tenant Data Integration" href="/blog/flink-cdc#32-scenario-2-cross-clustertenant-data-integration">​</a></h3>
<p>OceanBase is a multi-tenant system. Currently, cross-tenant access is not available for the tenants of the community edition of MySQL. Therefore, if you need to read data across tenants, you must connect with multiple databases to read data separately. Flink CDC is naturally suitable for cross-tenant data reading, in which each tenant corresponds to a dynamic table for data source reading, and then the data converges in Flink.</p>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/8cb06edf87b1a326c4574193d6b0deacc8327f2e.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-scenario-3-data-integration-of-multiple-data-sources">3.3 Scenario 3: Data Integration of Multiple Data Sources<a class="hash-link" aria-label="Direct link to 3.3 Scenario 3: Data Integration of Multiple Data Sources" title="Direct link to 3.3 Scenario 3: Data Integration of Multiple Data Sources" href="/blog/flink-cdc#33-scenario-3-data-integration-of-multiple-data-sources">​</a></h3>
<p>You can aggregate data from different types of data sources. There is no change in cost for the integration of MySQL, TiDB, and other data sources compatible with the MySQL protocol since the data format is the same.</p>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/7c9962ae45c6441c135d83ec7d56a320ce7c7a53.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-scenario-4-building-an-olap-application">3.4 Scenario 4: Building an OLAP Application<a class="hash-link" aria-label="Direct link to 3.4 Scenario 4: Building an OLAP Application" title="Direct link to 3.4 Scenario 4: Building an OLAP Application" href="/blog/flink-cdc#34-scenario-4-building-an-olap-application">​</a></h3>
<p>OceanBase is an HTAP database that has a strong TP capability and can be used as a data warehouse. The JDBC connector in Flink allows you to write data to databases compatible with the MySQL protocol. Therefore, you can use Flink CDC to read source data and write this data to OceanBase through the Flink JDBC connector. OceanBase is used as a destination.</p>
<p>OceanBase provides three data processing methods: SQL, Table API, and HBase API. All required components are open-source.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-the-future-of-oceanbase-connector">4. The Future of OceanBase Connector<a class="hash-link" aria-label="Direct link to 4. The Future of OceanBase Connector" title="Direct link to 4. The Future of OceanBase Connector" href="/blog/flink-cdc#4-the-future-of-oceanbase-connector">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/5ec8f36591abb9ae66d52d3cb8c9bdbc2afe5e99.png" alt="" class="img_ev3q"></p>
<p>The preceding figure lists the current status of the OceanBase CDC solution.</p>
<p><strong>OMS Community Edition:</strong> It is a functional subset of OMS Commercial Edition, but it is not open-source. As a white screen tool, its operation is friendly, and it supports real-time consistent synchronization and processing of full data and incremental data, with data checksum and O&amp;M capabilities. Its disadvantage is that the deployment process is a bit cumbersome. It only supports two data sources, MySQL and OceanBase Community Edition, and does not support incremental DDL.</p>
<p><strong>DataX + Canal/Otter:</strong> It is an open-source solution for data migration. Otter is the parent project of Canal. It is mainly aimed at multi-site high availability and supports two-way data synchronization. Its incremental data reading is based on Canal. The advantage of this solution is that it supports a variety of targets and supports HBase, ES, and RDB. The disadvantage is that Canal and Otter do incremental, DataX do full, incremental and full are separated, and data redundancy will occur in the connection part.</p>
<p><strong>Flink CDC:</strong> It is a pure open-source solution. The community is active, and the users are growing rapidly. It supports multiple sources and targets as well as real-time consistent synchronization and processing of full data and incremental data. At the same time, as an excellent big data processing engine, Flink can be used for ETL. The downside is that OceanBase Connector currently does not support incremental DDL and exactly-once. Therefore, there may be data redundancy in the overlap between incremental and full data.</p>
<p><img decoding="async" loading="lazy" src="https://yqintl.alicdn.com/1b6e0bd4ebf2229a950f47f0327a6891f917ecc8.png" alt="" class="img_ev3q"></p>
<p>We will optimize data reading in the future. Parallelize the full data part and use the new parallel processing framework of the source interface. In the incremental data part, skip the logproxy service and directly capture incremental data from the OceanBase database. Use the obcdc component through the JNI client to directly capture data.</p>
<p>Secondly, enrich the functional features. Currently, Flink CDC only supports OceanBase Community Edition, which uses the same components for incremental log reading as the OceanBase Enterprise Edition. Therefore, OceanBase Enterprise Edition can support incremental log reading, incremental DDL, exactly-once mode, and rate limiting, with only minor changes.</p>
<p>Finally, improve code quality. First, we will operate end-to-end testing. As for format conversion, use runtime converter instead of JdbcValueConverters to improve performance. Implement support for the new source interface (parallel processing framework).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="qa">Q&amp;A<a class="hash-link" aria-label="Direct link to Q&amp;A" title="Direct link to Q&amp;A" href="/blog/flink-cdc#qa">​</a></h2>
<p><strong>Q: How about the usability and stability after Flink CDC OceanBase Connector is open-source?</strong></p>
<p>A: In terms of usability, we have successively developed many open-source components with the support of non-open-source community editions (such as OMS and OCP). In terms of stability, OceanBase has been widely used in Ant Group, and the MySQL-compatible version has been put into large-scale applications in more than 20 enterprises. Therefore, there is no need to worry about its stability.</p>
<p><strong>Q: Where is metadata (such as the shard information and the index information) stored in OceanBase?</strong></p>
<p>A: They are stored in the OB server and can be directly queried through SQL.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/blog/blog/showcase-flink.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/compression-ratio"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Data Compression Technology Explained Balance between Costs &amp; Performance</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/integrated-architecture"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Integrated Architecture of OceanBase Database</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/blog/flink-cdc#1-an-introduction-to-oceanbase">1. An Introduction to OceanBase</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/flink-cdc#2-the-implementation-principle-of-flink-cdc-oceanbase-connector">2. The Implementation Principle of Flink CDC OceanBase Connector</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/flink-cdc#3-application-scenarios-of-flink-cdc--oceanbase">3. Application Scenarios of Flink CDC + OceanBase</a><ul><li><a class="table-of-contents__link toc-highlight" href="/blog/flink-cdc#31-scenario-1-data-integration-based-on-database-and-table-sharding">3.1 Scenario 1: Data Integration Based on Database and Table Sharding</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/flink-cdc#32-scenario-2-cross-clustertenant-data-integration">3.2 Scenario 2: Cross-Cluster/Tenant Data Integration</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/flink-cdc#33-scenario-3-data-integration-of-multiple-data-sources">3.3 Scenario 3: Data Integration of Multiple Data Sources</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/flink-cdc#34-scenario-4-building-an-olap-application">3.4 Scenario 4: Building an OLAP Application</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/blog/flink-cdc#4-the-future-of-oceanbase-connector">4. The Future of OceanBase Connector</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/flink-cdc#qa">Q&amp;A</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">SIG</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sig/AI/sig_intro">AI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/cloud-native/sig_intro">cloud-native</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/develop-tools/sig_intro">develop-tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/miniob/sig_intro">MiniOB</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/obdiag/sig_intro">obdiag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/operation/sig_intro">operation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://en.oceanbase.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About OceanBase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/oceanbase/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-blogs/tech/vector-search" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Vector capabilities of OceanBase Database: find similar images in a blink | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/docs/blogs/tech/vector-search"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Vector capabilities of OceanBase Database: find similar images in a blink | OceanBase"><meta data-rh="true" name="description" content="Basic capabilities of a vector database"><meta data-rh="true" property="og:description" content="Basic capabilities of a vector database"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/docs/blogs/tech/vector-search"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/blogs/tech/vector-search" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/blogs/tech/vector-search" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6JQM9QDU5V-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7e3a93fe.css">
<script src="/assets/js/runtime~main.063975e3.js" defer="defer"></script>
<script src="/assets/js/main.55b600f0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a class="navbar__item navbar__link" href="/docs/blogs/arch/all-in-one">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Product Docs</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">User Manual</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Developer Manual</a></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Special Interest Group(SIG)</a><span><li><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="dropdown__link">Slack<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum (in Chinese)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Data + AI</a><ul class="dropdown__menu"><span><li><a href="https://oceanbase-devhub.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Devhub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><div style="padding: 0.25rem 0.5rem; font-size: 14px; color: #4e7ff1;">AI Workshops</div></li></span><span><li><a href="https://oceanbase-devhub.github.io/ai-workshop-2024" target="_blank" rel="noopener noreferrer" class="dropdown__link">RAG Bot<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/dify/dify@oceanbase-workshop" target="_blank" rel="noopener noreferrer" class="dropdown__link">Dify (MySQL Compatible)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/DB-GPT/docker/compose_examples/ob_dbgpt_tutorial" target="_blank" rel="noopener noreferrer" class="dropdown__link">DB-GPT<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/arch/all-in-one">Architectural Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/feat/io-isolation">Features Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/blogs/tech/adaptive-sql-execution-engine">Technical Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/adaptive-sql-execution-engine">Adaptive Techniques in the OceanBase SQL Execution Engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/alter-table">Principles of ALTER TABLE in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/distributed-push-down">OceanBase Distributed Pushdown Technology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/high-concurrency">OceanBase Technical Insights for High-Concurrency Scenarios</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/ob-schema">What Is a Schema in OceanBase Database?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/query-engines">Evolution of Database Query Engines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/refine-performance">How We Approach Improving Distributed Query Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/tp-to-ap">From OLTP to OLAP: Exploration and practice of the OceanBase SQL engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/trans-recovery">Principles and Practices of Transaction Recovery in Distributed Databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/blogs/tech/vector-search">Vector capabilities of OceanBase Database: find similar images in a blink</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/users/AXA">Corporate Cases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/showcases/architectural-evolution">Highlights</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/others/flink-and-ob">Others</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Technical Introduction</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Vector capabilities of OceanBase Database: find similar images in a blink</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Vector capabilities of OceanBase Database: find similar images in a blink</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-capabilities-of-a-vector-database">Basic capabilities of a vector database<a href="#basic-capabilities-of-a-vector-database" class="hash-link" aria-label="Direct link to Basic capabilities of a vector database" title="Direct link to Basic capabilities of a vector database">​</a></h2>
<p>Generally, AI technologies are applied in a database storage system for the following two purposes:</p>
<p><strong>First, approximate search.</strong> In this application architecture, unstructured data is transformed into vectors and stored in a database with the help of Large Language Model (LLM) embeddings. This way, the database can perform vector operations and similarity search, and supports search recommendations and queries of unstructured data.</p>
<p><strong>Second, retrieval-augmented generation (RAG).</strong> It&#x27;s true that LLMs provide general capabilities such as natural language conversation, text summarization, agents, and coding assistants. However, they are trained using limited knowledge and often perform awkwardly in dealing with the humongous amount of fresh knowledge generated online. A common solution, for example, is to build a database to host a Q&amp;A corpus and provide a corpus-based information retrieval service for LLMs. This process is called RAG.</p>
<p><img decoding="async" loading="lazy" alt="1715577106" src="/assets/images/1715577106-e75163527ae16267a39dadb3e8c8d131.png" width="870" height="736" class="img_ev3q"></p>
<p>OceanBase Database Community Edition supports the following basic capabilities of a vector database. For more information, see the <a href="https://github.com/oceanbase/oceanbase/tree/vector_search" target="_blank" rel="noopener noreferrer">vector_search</a> branch on GitHub.</p>
<ul>
<li>Definition and storage of the VECTOR data type.</li>
<li>Creation of an approximate nearest neighbor (ANN) index on a vector column. Supported indexing algorithms include Inverted File with Flat Compression (IVFFlat) and Hierarchical Navigable Small World (HNSW).</li>
<li>Parallel creation of ANN indexes on partitions.</li>
<li>Parallel execution of ANN search on partitions.</li>
</ul>
<p>These capabilities enable OceanBase Database to support the aforesaid two AI application architectures as the underlying storage system. In the following example, a reverse image search application is used to demonstrate the vector storage capability of OceanBase Database based on the approximate search architecture.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vector-storage-capability-of-oceanbase-database">Vector storage capability of OceanBase Database<a href="#vector-storage-capability-of-oceanbase-database" class="hash-link" aria-label="Direct link to Vector storage capability of OceanBase Database" title="Direct link to Vector storage capability of OceanBase Database">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-deploy-an-oceanbase-vector-database-in-docker">1. Deploy an OceanBase vector database in Docker<a href="#1-deploy-an-oceanbase-vector-database-in-docker" class="hash-link" aria-label="Direct link to 1. Deploy an OceanBase vector database in Docker" title="Direct link to 1. Deploy an OceanBase vector database in Docker">​</a></h3>
<p>Run the following command to install the vector database:</p>
<p>docker run -p 2881:2881 --name obvec -d oceanbase/oceanbase-ce<!-- -->:vector</p>
<p>The database is ready to work when the docker container returns the <code>boot success!</code> message. You can test the vector processing capability of OceanBase Database using its SQL APIs based on the following example. Run the following command to open a shell on the docker container:</p>
<p>docker exec -it obvec bash</p>
<p>Connect to OceanBase Database:</p>
<p><img decoding="async" loading="lazy" alt="10" src="/assets/images/10-163614c1be3f1955c4bc19d99394de86.png" width="2560" height="2240" class="img_ev3q"></p>
<ul>
<li>A vector data table named <code>t1</code> is created. It contains a vector column <code>c1</code>.</li>
<li>Vector data is into the table. Note how vector data is defined by constant values in OceanBase Database.</li>
<li>An <code>HNSW</code> vector index is created on this vector data table. An <code>IVFFlat</code> index is also supported.</li>
<li>A full table scan is performed on the vector data table.</li>
<li>Typical ANN search is performed by the following statement: <code>select XXX from XX order by XXX limit XX</code>.</li>
<li>&lt;-&gt;: specifies to calculate the Euclidean distance between two vectors.</li>
<li>&lt;@&gt;: specifies to calculate the inner product between two vectors.</li>
<li>&lt;~&gt;: specifies to calculate the cosine distance between two vectors.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-process-image-data">2. Process image data<a href="#2-process-image-data" class="hash-link" aria-label="Direct link to 2. Process image data" title="Direct link to 2. Process image data">​</a></h3>
<p>You can use any categorized image library as the dataset. In this example, an image library is downloaded from the following link:</p>
<p><a href="https://www.cvmart.net/dataSets/detail/529?channel_id=op10&amp;utm_source=cvmartmp&amp;utm_campaign=datasets&amp;utm_medium=article" target="_blank" rel="noopener noreferrer">https://www.cvmart.net/dataSets/detail/529?channel_id=op10&amp;utm_source=cvmartmp&amp;utm_campaign=datasets&amp;utm_medium=article</a></p>
<p>This library contains images of different sizes, which makes it unsuitable for conventional machine learning applications that require uniform image sizes. This is not a problem here, as an embedding model is used for vector search. However, it is necessary to move all the images from their respective categorized directories to a single directory:</p>
<p><img decoding="async" loading="lazy" alt="2" src="/assets/images/2-0bab3893fd087bce32f569ce4a906a49.png" width="2560" height="968" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-connect-to-oceanbase-database-by-using-a-python-library">3. Connect to OceanBase Database by using a Python library<a href="#3-connect-to-oceanbase-database-by-using-a-python-library" class="hash-link" aria-label="Direct link to 3. Connect to OceanBase Database by using a Python library" title="Direct link to 3. Connect to OceanBase Database by using a Python library">​</a></h3>
<p>The following example connects to OceanBase Database by using the <code>sqlalchemy</code> library. The VECTOR type is not supported in the MySQL dialect, so a custom Vector class is defined to implement a method that converts the VECTOR type to a Python list type, and then to constants supported by the OceanBase vector database:</p>
<p><img decoding="async" loading="lazy" alt="3" src="/assets/images/3-2a63920bb50d00a88685cb87a4728c18.png" width="2560" height="2606" class="img_ev3q"></p>
<p>When the docker image of OceanBase Database starts, it automatically creates a <code>test</code> tenant and enables port 2881 for MySQL services. You can construct a connection string to create a connection.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-define-a-vector-processing-interface">4. Define a vector processing interface<a href="#4-define-a-vector-processing-interface" class="hash-link" aria-label="Direct link to 4. Define a vector processing interface" title="Direct link to 4. Define a vector processing interface">​</a></h3>
<p>Define a Python interface for processing vectors in OceanBase Database:</p>
<p><img decoding="async" loading="lazy" alt="1" src="/assets/images/1-20938cebb83987fa007fe0a59c5ae1bc.png" width="2560" height="3016" class="img_ev3q"></p>
<ul>
<li>
<p><code>ob_create_img2img</code>: Creates a vector data table. You need to pass in the vector dimension. OceanBase Database allows you to insert only vectors with the fixed dimension to a vector data table. For the reverse image search application, the table schema is defined as follows:</p>
</li>
<li>
<p><code>id</code>: the unique id number that is assigned to an image, and is used as the primary key of the vector data.</p>
</li>
<li>
<p><code>embedding</code>: stores the vector data embedded in an image for ANN search.</p>
</li>
<li>
<p><code>path</code>: the path of an image. After similar vectors are found based on the <code>embedding</code> field, the <code>path</code> field is used to display the images.</p>
</li>
<li>
<p><code>ob_insert_img2img</code>: inserts vector data into the vector data table.</p>
</li>
<li>
<p><code>ob_ann_search</code>: executes ANN search and calculates the time consumed in the search.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-import-images-into-oceanbase-database">5. Import images into OceanBase Database<a href="#5-import-images-into-oceanbase-database" class="hash-link" aria-label="Direct link to 5. Import images into OceanBase Database" title="Direct link to 5. Import images into OceanBase Database">​</a></h3>
<p>We use the Contrastive Language-Image Pretraining (CLIP) model to convert images to vectors. You can download the CLIP model from Towhee as follows:</p>
<p><img decoding="async" loading="lazy" alt="4" src="/assets/images/4-c9fbf856fa1a977cb2e4fbd1dbfbcab1.png" width="2560" height="558" class="img_ev3q"></p>
<p>You can run the following command to obtain vectors:</p>
<p><img decoding="async" loading="lazy" alt="5" src="/assets/images/5-cf6643a8ee9b1d4f46e416ae804a5276.png" width="2560" height="446" class="img_ev3q"></p>
<p>Then, you can use the following commands to combine the whole pipeline, convert all images in the image library to vectors, and then insert the vectors into OceanBase Database. Note that you need to run the vector data table creation command for the first insertion:</p>
<p><img decoding="async" loading="lazy" alt="6" src="/assets/images/6-2f44e7eb842ecfa007fe7118455044e1.png" width="2560" height="1192" class="img_ev3q"></p>
<p>Create a MySQL connection and query the number of vectors. In this example, 5,399 vectors with 512 dimensions are imported:</p>
<p><img decoding="async" loading="lazy" alt="7" src="/assets/images/7-880a618af3efc71fce60a2929dc094a0.png" width="2560" height="1116" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-perform-reverse-image-search">6. Perform reverse image search<a href="#6-perform-reverse-image-search" class="hash-link" aria-label="Direct link to 6. Perform reverse image search" title="Direct link to 6. Perform reverse image search">​</a></h3>
<p>We use Gradio to create a simple web UI that provides the following two inputs:</p>
<ul>
<li><code>Image upload component</code>: uploads the image to be queried.</li>
<li><code>topK slider</code>: sets the top K values for ANN search.</li>
</ul>
<p>During the search, the uploaded image is written to a temporary directory and converted to a vector. Then, the pre-defined <code>ob_ann_search</code> function is called to obtain paths of the nearest images. At last, similar images are displayed by the gallery component:</p>
<p><img decoding="async" loading="lazy" alt="8" src="/assets/images/8-d1c1ae647846238a2bb5ddcd139915d9.png" width="2560" height="1452" class="img_ev3q"></p>
<p>Upload an image for a test. The results are as follows:</p>
<p><img decoding="async" loading="lazy" src="https://obcommunityprod.oss-cn-shanghai.aliyuncs.com/prod/blog/2024-05/1715577126624.png" alt="1715577126" class="img_ev3q"></p>
<p>Images in the results are all about seals.</p>
<p><img decoding="async" loading="lazy" src="https://obcommunityprod.oss-cn-shanghai.aliyuncs.com/prod/blog/2024-05/1715577132902.png" alt="1715577132" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-create-a-vector-index">7. Create a vector index<a href="#7-create-a-vector-index" class="hash-link" aria-label="Direct link to 7. Create a vector index" title="Direct link to 7. Create a vector index">​</a></h3>
<p>Create a MySQL connection and then create an IVFFlat index:</p>
<p><img decoding="async" loading="lazy" alt="9" src="/assets/images/9-329497babc463ef63f5e798eca834ac1.png" width="2560" height="446" class="img_ev3q"></p>
<p>Optimized by the vector index, the time required to obtain the top 9 results is shortened from 39 ms to 7.6 ms:</p>
<p><img decoding="async" loading="lazy" src="https://obcommunityprod.oss-cn-shanghai.aliyuncs.com/prod/blog/2024-05/1715577147216.png" alt="1715577147" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://obcommunityprod.oss-cn-shanghai.aliyuncs.com/prod/blog/2024-05/1715577153205.png" alt="1715577153" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-ai-technologies-to-empower-vector-capabilities">Use AI technologies to empower vector capabilities<a href="#use-ai-technologies-to-empower-vector-capabilities" class="hash-link" aria-label="Direct link to Use AI technologies to empower vector capabilities" title="Direct link to Use AI technologies to empower vector capabilities">​</a></h2>
<p>OceanBase Database adopts a native distributed architecture and stores data with a high compression ratio. Leveraging AI technologies, OceanBase Database will gain stronger storage and retrieval capabilities:</p>
<ul>
<li>The distributed storage engine of OceanBase Database will be able to store massive amounts of vector data.</li>
<li>Parallel query execution on partitions can be enhanced to provide efficient vector-based approximate retrieval.</li>
</ul>
<p>In other words, OceanBase users will enjoy lower storage costs, faster query speed, and more accurate query results.</p>
<p>Moreover, compared to storing unstructured data directly, converting unstructured data into vector data through embeddings and storing vector data brings two benefits to AI applications: First, unstructured data is not directly presented to database administrators, which means higher data security. Second, it is easier for a database system to understand semantics. Vector-based approximate retrieval works on semantics. Vector values of similar text, image, and video information are close, which means that users can get accurate results with similar keywords, saving search costs and improving search efficiency.</p>
<p>OceanBase Database now supports the approximate search and RAG application architectures.</p>
<p>Approximate search is applicable to many scenarios, such as:</p>
<ul>
<li>Search recommendations</li>
<li>Data classification and deduplication</li>
<li>Vector input for generative models, such as a style transfer model</li>
<li>...</li>
</ul>
<p>RAG is also applicable to a range of scenarios, for example:</p>
<ul>
<li>Q&amp;A based on a private knowledge base</li>
<li>Text2SQL</li>
<li>...</li>
</ul>
<p>We will continue to optimize the vector capabilities of OceanBase Database, including but not limited to simplifying the SQL syntax of ANN search, supporting GPU acceleration and more vector operation functions and vector retrieval algorithms, improving hybrid scalar/vector query performance, and providing more AI interfaces to support, for example, Matrix, which allows you to perform image transformation operations using SQL interfaces.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/blogs/tech/vector-search.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/blogs/tech/trans-recovery"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Principles and Practices of Transaction Recovery in Distributed Databases</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/blogs/users/AXA"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How Did AXA SPDB Select a Database Service to Meet Both OLTP and OLAP Requirements?</div></a></nav><div>Loading...</div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basic-capabilities-of-a-vector-database" class="table-of-contents__link toc-highlight">Basic capabilities of a vector database</a></li><li><a href="#vector-storage-capability-of-oceanbase-database" class="table-of-contents__link toc-highlight">Vector storage capability of OceanBase Database</a><ul><li><a href="#1-deploy-an-oceanbase-vector-database-in-docker" class="table-of-contents__link toc-highlight">1. Deploy an OceanBase vector database in Docker</a></li><li><a href="#2-process-image-data" class="table-of-contents__link toc-highlight">2. Process image data</a></li><li><a href="#3-connect-to-oceanbase-database-by-using-a-python-library" class="table-of-contents__link toc-highlight">3. Connect to OceanBase Database by using a Python library</a></li><li><a href="#4-define-a-vector-processing-interface" class="table-of-contents__link toc-highlight">4. Define a vector processing interface</a></li><li><a href="#5-import-images-into-oceanbase-database" class="table-of-contents__link toc-highlight">5. Import images into OceanBase Database</a></li><li><a href="#6-perform-reverse-image-search" class="table-of-contents__link toc-highlight">6. Perform reverse image search</a></li><li><a href="#7-create-a-vector-index" class="table-of-contents__link toc-highlight">7. Create a vector index</a></li></ul></li><li><a href="#use-ai-technologies-to-empower-vector-capabilities" class="table-of-contents__link toc-highlight">Use AI technologies to empower vector capabilities</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">SIG</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sig/AI/sig_intro">AI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/cloud-native/sig_intro">cloud-native</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/compilation/sig_intro">compilation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/develop-tools/sig_intro">develop-tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/miniob/sig_intro">MiniOB</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/obdiag/sig_intro">obdiag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/operation/sig_intro">operation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://en.oceanbase.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About OceanBase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blogs/arch/all-in-one">Blogs</a></li><li class="footer__item"><a href="https://github.com/oceanbase/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
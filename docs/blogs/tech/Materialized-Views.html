<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-blogs/tech/Materialized-Views" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Explore Data Warehouses with Columnar Storage and Materialized Views of OceanBase Database | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/docs/blogs/tech/Materialized-Views"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Explore Data Warehouses with Columnar Storage and Materialized Views of OceanBase Database | OceanBase"><meta data-rh="true" name="description" content="&quot;Making Technology Visible | The OceanBase Preacher Program&quot; is a yearly technical writing contest hosted by OceanBase, and co-sponsored by Modb\.pro, ITPUB, and CSDN, three major tech media platforms. Four rounds are organized to assess articles quarterly. Each year, we award the best writer, or preacher. This article, by Zhang Xiao, is among the most outstanding pieces of round 1."><meta data-rh="true" property="og:description" content="&quot;Making Technology Visible | The OceanBase Preacher Program&quot; is a yearly technical writing contest hosted by OceanBase, and co-sponsored by Modb\.pro, ITPUB, and CSDN, three major tech media platforms. Four rounds are organized to assess articles quarterly. Each year, we award the best writer, or preacher. This article, by Zhang Xiao, is among the most outstanding pieces of round 1."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/docs/blogs/tech/Materialized-Views"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/blogs/tech/Materialized-Views" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/blogs/tech/Materialized-Views" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6JQM9QDU5V-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H4XM2M50RX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-H4XM2M50RX",{})</script><link rel="stylesheet" href="/assets/css/styles.7e3a93fe.css">
<script src="/assets/js/runtime~main.a50e5b58.js" defer="defer"></script>
<script src="/assets/js/main.589ef4b9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a class="navbar__item navbar__link" href="/docs/blogs/arch/all-in-one">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Product Docs</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">User Manual</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Developer Manual</a></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><span><li><a class="dropdown__link" href="/docs/sig/overview/list">Special Interest Group(SIG)</a></li></span><span><li><a class="dropdown__link" href="/docs/honor/overview">Community Honors</a></li></span><span><li><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://discord.gg/74cF8vbNEs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum (in Chinese)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Data + AI</a><ul class="dropdown__menu"><span><li><a href="https://oceanbase-devhub.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">AI Workshops<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/ai-workshop-2024" target="_blank" rel="noopener noreferrer" class="dropdown__link">RAG Bot<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/dify/dify@oceanbase-workshop" target="_blank" rel="noopener noreferrer" class="dropdown__link">Dify (MySQL Compatible)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/DB-GPT/docker/compose_examples/ob_dbgpt_tutorial" target="_blank" rel="noopener noreferrer" class="dropdown__link">DB-GPT<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/arch/all-in-one">Architectural Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/feat/io-isolation">Features Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/blogs/tech/DDL-Execution-Efficient">Technical Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/DDL-Execution-Efficient">Insights into OceanBase Database 4.0: How to Make DDL Execution Efficient and Transparent in a Distributed Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/blogs/tech/Materialized-Views">Explore Data Warehouses with Columnar Storage and Materialized Views of OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/Modern-HBase-Arch">Simplistic Yet Not Simple: The Upgrade to a Modern HBase Architecture with OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/Real-time-AP">OceanBase Database 4.3 - Milestone Release for Real-time AP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/Zabbix">Zabbix and OceanBase Database Completed Product Compatibility and Mutual Certification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/adaptive-sql-execution-engine">Adaptive Techniques in the OceanBase SQL Execution Engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/alter-table">Principles of ALTER TABLE in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/analysis-column">OceanBase Database V4.3 Feature Breakdown: In-depth Analysis of Columnar Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/binlog-service">OceanBase Binlog Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/column-store">The Present and Future of Columnar Storage in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/core-tech-ob">Decoding the Core Technologies of OceanBase Community Edition 4.x</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/distributed-push-down">OceanBase Distributed Pushdown Technology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/end-to-end-tracing">Insights into OceanBase Database 4.0: Issues Addressed by End-to-end Tracing, Starting with a Slow SQL Query</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/failure-by-collation">SQL Tuning Practices - Index Failure Caused by Collations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/flashback-query">Practice of Flashback Queries in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/high-concurrency">OceanBase Technical Insights for High-Concurrency Scenarios</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/image-search-vector-search">[OceanBase Practices] Building an Image Search Application Based on the Vector Search Technology of OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/legacy-monitoring-system">Using OceanBase Database to Store Data of a traditional Monitoring System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/native-distributed">Treat the Symptoms and the Root Cause! OceanBase Native Distributed + Single-machine Distributed Integration Solves the Problem of Sharding from the Root</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/ob-db-transform">OceanBase Helps Enterprises Cope with the Challenges of Database Transformation in the Deep Waters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/ob-schema">What Is a Schema in OceanBase Database?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/obd-error">Troubleshoot obd Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-I">Mastering Parallel Execution in OceanBase Database: Part 1 - Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-II">Mastering Parallel Execution in OceanBase Database: Part 2 - Set the DOP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-III">Mastering Parallel Execution in OceanBase Database: Part 3 - Concurrency Control and Queuing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-IV">Mastering Parallel Execution in OceanBase Database: Part 4 - Parallel Execution Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/pushdown-tech">Distributed Pushdown Techniques in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/query-engines">Evolution of Database Query Engines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/query-perf">Insights into OceanBase Database 4.0: Distributed Query Performance Optimization in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/real-time-analytics">Release of OceanBase Database V4.3.3: The First GA Version for Real-time Analytics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/refine-performance">How We Approach Improving Distributed Query Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/small-specification-deployment">Insights into OceanBase Database 4.0: Support for Small-Specification Deployment to Make Distributed Databases More Accessible</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/storage-engine">Storage Engine of OceanBase Database V4.x Cuts Historical Database Costs by over 50%</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/tablet">What Is a Tablet in OceanBase Database V4.0? Why Is It Introduced?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/tp-to-ap">From OLTP to OLAP: Exploration and practice of the OceanBase SQL engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/trans-recovery">Principles and Practices of Transaction Recovery in Distributed Databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/troubleshoot">Five Steps to Troubleshoot Process Crashes Based on Logs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/truncated-table">Why Truncated Tables Cannot Be Recycled in OceanBase Database V4.x?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/vector-search">Vector capabilities of OceanBase Database: find similar images in a blink</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/users/1st-financial">Corporate Cases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/showcases/architectural-evolution">Highlights</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/others/flink-and-ob">Others</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Technical Introduction</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Explore Data Warehouses with Columnar Storage and Materialized Views of OceanBase Database</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Explore Data Warehouses with Columnar Storage and Materialized Views of OceanBase Database</h1></header><blockquote>
<p>&quot;Making Technology Visible | The OceanBase Preacher Program&quot; is a yearly technical writing contest hosted by OceanBase, and co-sponsored by Modb.pro, ITPUB, and CSDN, three major tech media platforms. Four rounds are organized to assess articles quarterly. Each year, we award the best writer, or preacher. This article, by Zhang Xiao, is among the most outstanding pieces of round 1.</p>
</blockquote>
<p>Starting from V4.3, OceanBase Database supports row-based storage, columnar storage, and refreshable materialized views. These features extend the versatility and potential of OceanBase Database. After a year of working with data warehouses, I have recently tested and explored these features. With these features, you can build data warehouses based on OceanBase Database in both stream processing and batch processing scenarios.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-feature-comparison">1 Feature Comparison<a href="#1-feature-comparison" class="hash-link" aria-label="Direct link to 1 Feature Comparison" title="Direct link to 1 Feature Comparison">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-row-based-storage-versus-columnar-storage">1.1 Row-based storage versus columnar storage<a href="#11-row-based-storage-versus-columnar-storage" class="hash-link" aria-label="Direct link to 1.1 Row-based storage versus columnar storage" title="Direct link to 1.1 Row-based storage versus columnar storage">​</a></h3>
<p>The classic databases that we are familiar with, such as InnoDB of MySQL and the native storage engine of Oracle, all adopt row-based storage. When I first started in the field, I never imagined that databases with columnstore engines would become necessary. As data volumes grew and large-scale report queries became more complex, the query performance of a database without hardware upgrades began to decline.</p>
<p>Columnar storage is the solution. While row-based storage is designed for transactions, columnar storage is ideal for scenarios where only some columns are read, especially for queries that require just a few columns. Columnar storage also offers a higher compression ratio, incurring less costs when processing larger amounts of business data. Unlike row-based storage, which relies on high-performance storage, columnar storage can work with regular storage, making it an ideal fit for data warehouses.</p>
<p>Instead of simply supporting columnar storage, OceanBase Database V4.3 combines both row-based storage and columnar storage into an integrated architecture, balancing query performance for transaction processing (TP) and analytical processing (AP). This feature caught my attention at the launch event and had me thinking for months about how to apply it to my current work and testing efforts.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-materialized-view-versus-table">1.2 Materialized view versus table<a href="#12-materialized-view-versus-table" class="hash-link" aria-label="Direct link to 1.2 Materialized view versus table" title="Direct link to 1.2 Materialized view versus table">​</a></h3>
<p>Oracle was the first mainstream database to use materialized views. Unlike regular views, materialized views store a physical copy of the query results. This enables fast access to the results of complex queries. Materialized views have continued to evolve, all the way to Oracle Database 23ai.</p>
<p>OceanBase Database V4.3.3 has also made significant progress in its materialized view feature. Some may ask, with columnar storage available, is there still a need for materialized views? Or rather, what are the advantages of materialized views and columnstore tables, and how do their applicable scenarios differ?</p>
<p>I&#x27;ve had the same question, and the answer lies in the storage engine: log-structured merge-tree (LSM-tree).</p>
<p>With the LSM-tree-based storage engine, columnstore tables in OceanBase Database support transactions. This enables streaming writes while ensuring atomicity, consistency, isolation, and durability (ACID), making OceanBase Database an ideal choice for serving as a real-time data warehouse. OceanBase Database also delivers high execution efficiency by supporting parallel queries and multiple replicas. Data warehouses process more reads than writes. In such scenarios, especially when data of only a few columns in wide tables is read, columnar storage provides obvious benefits.</p>
<p>Materialized views, with their refresh mechanism, are ideal for tasks such as aggregation, distribution, and multi-table joins to store the results of common queries on disks. Compared to columnar storage, materialized views, due to their periodic refresh mechanism, are more suited for batch processing. Batch processing is less time-sensitive than stream processing but requires efficient handling of large datasets. Sometimes, batch processing also involves extract, transform, load (ETL) tasks.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-build-a-real-time-data-warehouse-by-using-oceanbase-database">2 Build a Real-time Data Warehouse by Using OceanBase Database<a href="#2-build-a-real-time-data-warehouse-by-using-oceanbase-database" class="hash-link" aria-label="Direct link to 2 Build a Real-time Data Warehouse by Using OceanBase Database" title="Direct link to 2 Build a Real-time Data Warehouse by Using OceanBase Database">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-technical-requirements-for-building-a-real-time-data-warehouse">2.1 Technical requirements for building a real-time data warehouse<a href="#21-technical-requirements-for-building-a-real-time-data-warehouse" class="hash-link" aria-label="Direct link to 2.1 Technical requirements for building a real-time data warehouse" title="Direct link to 2.1 Technical requirements for building a real-time data warehouse">​</a></h3>
<p>As its name suggests, a real-time data warehouse differs from a conventional offline data warehouse in timeliness. In the past, data warehouses usually had a one-day delay in data timeliness (T+1). This is inflexible for metrics requiring real-time computation and immediate results. If a logic issue with the data warehouse occurs, it might not be discovered until the next day, leading to untimely adjustments and reruns of tasks. However, a company has many business metrics that need real-time computation and fast feedback to relevant departments.</p>
<p>To build a real-time data warehouse, the following technical requirements must be met:</p>
<p><strong>(1) High performance</strong>: The prerequisite to timeliness is high performance. A product suitable for serving as a real-time data warehouse must have extremely low latency, typically ranging from milliseconds to seconds, to ensure timely data processing.</p>
<p><strong>(2) Data integration</strong>: The upstream of a data warehouse may include databases from various production systems or even offline data files. A product suitable for serving as a real-time data warehouse must offer rich data integration interfaces to meet diverse needs.</p>
<p><strong>(3) Scalability</strong>: In addition to processing data in real time, a real-time data warehouse must also support instant scaling. An offline data warehouse does not require high scalability because batch jobs are run at night. In contrast, a real-time data warehouse needs high scalability to handle resource bottlenecks and, therefore, ensure timeliness.</p>
<p><strong>(4) Security</strong>: Timeliness brings higher security requirements, because real-time computation often involves crucial data. This imposes greater security and privacy demands, requiring measures such as data encryption and access control to ensure data security and reliability.</p>
<p><strong>(5) Flexible querying and analysis</strong>: A real-time data warehouse is used in diverse scenarios, requiring the database to offer rich query and analysis tools that support complex query statements and data analysis models.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-capabilities-of-oceanbase-database">2.2 Capabilities of OceanBase Database<a href="#22-capabilities-of-oceanbase-database" class="hash-link" aria-label="Direct link to 2.2 Capabilities of OceanBase Database" title="Direct link to 2.2 Capabilities of OceanBase Database">​</a></h3>
<p>Timeliness: OceanBase Database V4.3 supports real-time (T+0) writes, allowing data to be imported quickly for real-time analysis.</p>
<p><strong>(1) High performance</strong>: As mentioned earlier, the columnstore and vectorized engines in OceanBase Database V4.3 significantly boost query performance, especially in wide table scenarios. In my test, OceanBase Database V4.3 is comparable with mainstream columnstore databases in the industry in wide table queries, enabling real-time analysis in seconds. Despite additional overheads incurred by support for transactions, OceanBase Database delivers sufficient performance in columnar storage.</p>
<p><strong>(2) Data integration</strong>: OceanBase Database V4.3 and later support integration with MySQL and Oracle, as well as integration with other mainstream open source databases such as PostgreSQL and ClickHouse through tools in the Flink ecosystem. Additionally, the direct load feature of OceanBase Database has been enhanced, providing the integration capabilities required for serving as a real-time data warehouse.</p>
<p><strong>(3) Scalability</strong>: The cloud-native distributed architecture of OceanBase Database supports high-concurrency reads and writes and horizontal scaling based on business needs to handle increasing data volumes and user requests. In my test, replicas and OBServer nodes can be scaled out in minutes. However, the time increases as data and business grow.</p>
<p><strong>(4) Security</strong>: OceanBase Database V4.3.3 offers enhanced security features such as resource and permission isolation between tenants, database security auditing, data encryption for storage and transmission, network-based access control, and password complexity restrictions, meeting the Level 3 requirements of Multi-Level Protection Scheme (MLPS).</p>
<p><strong>(5) Flexible querying and analysis</strong>: OceanBase Database V4.3.3 supports most common data types, including <code>ARRAY</code>. The database also supports both the rule-based optimizer (RBO) and the cost-based optimizer (CBO). With additional features such as full-text index, vector retrieval, columnar storage, and materialized views, OceanBase Database is well-suited for flexible querying and analysis.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-demo-for-building-a-real-time-data-warehouse">2.3 Demo for building a real-time data warehouse<a href="#23-demo-for-building-a-real-time-data-warehouse" class="hash-link" aria-label="Direct link to 2.3 Demo for building a real-time data warehouse" title="Direct link to 2.3 Demo for building a real-time data warehouse">​</a></h3>
<p>Here is a demo for building a real-time data warehouse by using OceanBase Database based on its columnar storage.</p>
<p>Data source 1: MySQL 8<br>
<!-- -->Data source 2: PostgreSQL 14<br>
<!-- -->Real-time data warehouse: OceanBase Database Community Edition V4.3.3<br>
<!-- -->Data synchronization tool: Flink CDC</p>
<p>a. Create a MySQL table and insert data into it.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE orders (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        order_id INT AUTO_INCREMENT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        customer_name VARCHAR(100),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        price DECIMAL(10, 2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        product_id INT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        order_status BOOLEAN,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PRIMARY KEY (order_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INSERT INTO orders (customer_name, price, product_id, order_status) VALUES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (&#x27;Alice&#x27;, 19.99, 101, TRUE),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (&#x27;Bob&#x27;, 29.99, 102, FALSE),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (&#x27;Charlie&#x27;, 39.99, 103, TRUE),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (&#x27;David&#x27;, 49.99, 104, TRUE);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>b. Create a table in Flink CDC for synchronizing data from the MySQL table.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE mysql_source (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        order_id INT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        order_date TIMESTAMP(0),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        customer_name STRING,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        price DECIMAL(10, 5),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        product_id INT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        order_status BOOLEAN,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PRIMARY KEY (order_id) NOT ENFORCED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ) WITH (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;connector&#x27; = &#x27;mysql-cdc&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;hostname&#x27; = &#x27;192.16.1.10&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;port&#x27; = &#x27;3306&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;username&#x27; = &#x27;test&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;password&#x27; = &#x27;password&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;database-name&#x27; = &#x27;test&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;table-name&#x27; = &#x27;orders&#x27; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>c. Create a PostgreSQL table and insert data into it.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE products (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        product_id INT PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        product_name VARCHAR(100),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        product_description TEXT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INSERT INTO products (product_id, product_name, product_description) VALUES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (101, &#x27;Laptop&#x27;, &#x27;High performance laptop&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (102, &#x27;Smartphone&#x27;, &#x27;Latest model smartphone&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (103, &#x27;Tablet&#x27;, &#x27;Portable and lightweight tablet&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (104, &#x27;Headphones&#x27;, &#x27;Noise-cancelling headphones&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>d. Create a table in Flink CDC for synchronizing data from the PostgreSQL table.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE postgres_source (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        product_id INT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        product_name STRING,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        product_description STRING,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PRIMARY KEY (product_id) NOT ENFORCED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ) WITH (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;connector&#x27; = &#x27;postgres-cdc&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;hostname&#x27; = &#x27;192.168.10.11&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;port&#x27; = &#x27;5432&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;username&#x27; = &#x27;test&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;password&#x27; = &#x27;password&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;database-name&#x27; = &#x27;test&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;schema-name&#x27; = &#x27;public&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;table-name&#x27; = &#x27;products&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>e. Create a target columnstore table in OceanBase Database.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE joined_orders (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        order_id INT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        order_date TIMESTAMP,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        customer_name VARCHAR(100),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        price DECIMAL(10, 2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        product_name VARCHAR(100),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        product_description TEXT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        order_status BOOLEAN,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PRIMARY KEY (order_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ) WITH COLUMN GROUP (each column);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>f. Create a join view in Flink based on the fields of the target table in OceanBase Database.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE VIEW joined_orders AS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        o.order_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        o.order_date,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        o.customer_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        o.price,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        p.product_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        p.product_description,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        o.order_status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FROM mysql_source AS o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JOIN postgres_source AS p ON o.product_id = p.product_id;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>g. Configure a write task for Flink CDC.<br>
<em>The steps are not described here.</em></p>
<p>f. Verify the result.<br>
<!-- -->If all previous steps are successful, you can find the following query result:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT * FROM joined_orders;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +----------+---------------------+---------------+-------+--------------+---------------------------------+--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | order_id | order_date          | customer_name | price | product_name | product_description             | order_status |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +----------+---------------------+---------------+-------+--------------+---------------------------------+--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |        1 | 2024-11-19 00:00:00 | Alice         | 19.99 | Laptop       | High performance laptop         |            1 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |        2 | 2024-11-19 00:00:01 | Bob           | 29.99 | Smartphone   | Latest model smartphone         |            0 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |        3 | 2024-11-19 00:00:02 | Charlie       | 39.99 | Tablet       | Portable and lightweight tablet |            1 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |        4 | 2024-11-19 00:00:03 | David         | 49.99 | Headphones   | Noise-cancelling headphones     |            1 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +----------+---------------------+---------------+-------+--------------+---------------------------------+--------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Insert data into the source tables.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    INSERT INTO orders (customer_name, price, product_id, order_status) VALUES (&#x27;Eve&#x27;, 59.99, 105, TRUE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ---- the MySQL table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INSERT INTO products (product_id, product_name, product_description) VALUES (105, &#x27;Smartwatch&#x27;, &#x27;Advanced smartwatch with health tracking features&#x27;); ---- the PostgreSQL table</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After committing data, you can query the latest result from the target table in OceanBase Database in real time.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT * FROM joined_orders;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +----------+---------------------+---------------+-------+--------------+---------------------------------------------------+--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | order_id | order_date          | customer_name | price | product_name | product_description                               | order_status |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +----------+---------------------+---------------+-------+--------------+---------------------------------------------------+--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |        1 | 2024-11-19 00:00:00 | Alice         | 19.99 | Laptop       | High performance laptop                           |            1 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |        2 | 2024-11-19 00:00:01 | Bob           | 29.99 | Smartphone   | Latest model smartphone                           |            0 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |        3 | 2024-11-19 00:00:02 | Charlie       | 39.99 | Tablet       | Portable and lightweight tablet                   |            1 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |        4 | 2024-11-19 00:00:03 | David         | 49.99 | Headphones   | Noise-cancelling headphones                       |            1 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |        5 | 2024-11-19 00:00:05 | Eve           | 59.99 | Smartwatch   | Advanced smartwatch with health tracking features |            1 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +----------+---------------------+---------------+-------+--------------+---------------------------------------------------+--------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-summary">2.4 Summary<a href="#24-summary" class="hash-link" aria-label="Direct link to 2.4 Summary" title="Direct link to 2.4 Summary">​</a></h3>
<p>The preceding demo, where two tables are joined to output results, is simple and mainly aims to verify timeliness. In essence, OceanBase Database, with its high performance in columnar storage and its read/write splitting feature based on multiple replicas, works as a simplified real-time data warehouse. In this demo, OceanBase Database works with Flink CDC to serve as a real-time data warehouse, ensuring latency within seconds.</p>
<p>Due to limited resources and time, this demo does not cover larger data volumes or more complex calculations and is intended only as a reference. Given the opportunity, I&#x27;ll provide a more detailed version in the future.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-build-a-batch-processing-data-warehouse-by-using-oceanbase-database">3 Build a Batch Processing Data Warehouse by Using OceanBase Database<a href="#3-build-a-batch-processing-data-warehouse-by-using-oceanbase-database" class="hash-link" aria-label="Direct link to 3 Build a Batch Processing Data Warehouse by Using OceanBase Database" title="Direct link to 3 Build a Batch Processing Data Warehouse by Using OceanBase Database">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-technical-requirements-for-building-a-batch-processing-data-warehouse">3.1 Technical requirements for building a batch processing data warehouse<a href="#31-technical-requirements-for-building-a-batch-processing-data-warehouse" class="hash-link" aria-label="Direct link to 3.1 Technical requirements for building a batch processing data warehouse" title="Direct link to 3.1 Technical requirements for building a batch processing data warehouse">​</a></h3>
<p>A batch processing data warehouse is a conventional data warehouse that relies on batch processing technologies. Typically, ETL tasks are run at scheduled times to extract data from the source system, transform and cleanse it, and then load it into the data warehouse. A batch processing data warehouse has low timeliness demands but imposes other requirements on the database:</p>
<p><strong>(1) Storage capability</strong>: A batch processing data warehouse processes and stores far more data than a real-time data warehouse and thus requires higher throughput and more efficient data compression.</p>
<p><strong>(2) Data processing capability</strong>: A batch processing data warehouse has broader data processing requirements than a real-time data warehouse. In addition to support for common object types and SQL, large-scale parallel computing is required to process hundreds of gigabytes of data every day. For complex reports, techniques such as index acceleration are needed to maximize performance.</p>
<p><strong>(3) Data consistency</strong>: Transaction support is often required during the execution of multiple complex ETL tasks to load, transform, compute, and persist data. In addition, constraints such as primary keys, unique keys, and non-null keys are needed to ensure data consistency and quality.</p>
<p><strong>(4) Security and data integration</strong>: The requirements are similar to those of a real-time data warehouse.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-capabilities-of-oceanbase-database">3.2 Capabilities of OceanBase Database<a href="#32-capabilities-of-oceanbase-database" class="hash-link" aria-label="Direct link to 3.2 Capabilities of OceanBase Database" title="Direct link to 3.2 Capabilities of OceanBase Database">​</a></h3>
<p><strong>(1) Storage capability</strong>: In various customer cases and my test with hundreds of gigabytes of data imported, OceanBase Database meets the requirements of a batch processing data warehouse for high throughput and storage capabilities. Additionally, columnar storage optimizes performance, minimizes storage space usage, and supports efficient data compression for large data volumes.</p>
<p><strong>(2) Data processing capability</strong>: OceanBase Database V4.3 has introduced column-based vectorized engine 2.0, which significantly boosts query performance in AP scenarios. This equips OceanBase Database with large-scale parallel computing capabilities, enabling it to process hundreds of gigabytes of data every day as long as enough resources are allocated. The materialized view feature pre-calculates and stores query results in materialized views to improve real-time query performance, which is especially useful for querying complex reports.</p>
<p><strong>(3) Data consistency</strong>: As mentioned earlier, OceanBase Database supports transactions during the execution of multiple complex ETL tasks. This ensures data consistency during data loading, transformation, computation, and persistence. Constraints such as primary keys, unique keys, and not-null keys are supported in both row-based storage and columnar storage, which alleviates my concerns about data consistency.</p>
<p><strong>(4) Security and data integration</strong>: The capabilities are similar to those provided for building a real-time data warehouse.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-demo-for-building-a-batch-processing-data-warehouse-based-on-materialized-views">3.3 Demo for building a batch processing data warehouse based on materialized views<a href="#33-demo-for-building-a-batch-processing-data-warehouse-based-on-materialized-views" class="hash-link" aria-label="Direct link to 3.3 Demo for building a batch processing data warehouse based on materialized views" title="Direct link to 3.3 Demo for building a batch processing data warehouse based on materialized views">​</a></h3>
<p>My exploration of batch processing data warehouses is primarily based on the materialized views of OceanBase Database. Here, I simulate a batch processing data warehouse scenario to verify how materialized views speed up data queries.</p>
<blockquote>
<p>Test data: TPC-H 10 GB/20 GB</p>
<p>Test statements: Multi-table queries and direct materialized view queries</p>
<p>Test version: OceanBase Database Community Edition V4.3.3</p>
</blockquote>
<p>a. Create TPC-H tables.</p>
<p>Create eight <strong>columnstore</strong> tables based on TPC-H requirements.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE NATION  ( N_NATIONKEY  INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            N_NAME       VARCHAR(25) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            N_REGIONKEY  INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            N_COMMENT    VARCHAR(152),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            PRIMARY KEY (N_NATIONKEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        )WITH COLUMN GROUP (each column);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE REGION  ( R_REGIONKEY  INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            R_NAME       VARCHAR(25) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            R_COMMENT    VARCHAR(152),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            PRIMARY KEY (R_REGIONKEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        )WITH COLUMN GROUP (each column);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE PART  ( P_PARTKEY     INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              P_NAME        VARCHAR(55) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              P_MFGR        VARCHAR(25)  NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              P_BRAND       VARCHAR(10)  NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              P_TYPE        VARCHAR(25) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              P_SIZE        INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              P_CONTAINER   VARCHAR(10) /*CHAR(10)*/ NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              P_RETAILPRICE DECIMAL(15,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              P_COMMENT     VARCHAR(23) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            PRIMARY KEY (P_PARTKEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        )WITH COLUMN GROUP (each column);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE SUPPLIER ( S_SUPPKEY     INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 S_NAME        VARCHAR(25) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 S_ADDRESS     VARCHAR(40) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 S_NATIONKEY   INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 S_PHONE       VARCHAR(15) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 S_ACCTBAL     DECIMAL(15,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 S_COMMENT     VARCHAR(101) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            PRIMARY KEY (S_SUPPKEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            )WITH COLUMN GROUP (each column);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE PARTSUPP ( PS_PARTKEY     INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 PS_SUPPKEY     INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 PS_AVAILQTY    INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 PS_SUPPLYCOST  DECIMAL(15,2)  NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 PS_COMMENT     VARCHAR(199) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             PRIMARY KEY (PS_PARTKEY, PS_SUPPKEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            )WITH COLUMN GROUP (each column);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE CUSTOMER ( C_CUSTKEY     INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 C_NAME        VARCHAR(25) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 C_ADDRESS     VARCHAR(40) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 C_NATIONKEY   INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 C_PHONE       VARCHAR(15)  NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 C_ACCTBAL     DECIMAL(15,2)   NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 C_MKTSEGMENT  VARCHAR(10)  NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 C_COMMENT     VARCHAR(117) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            PRIMARY KEY (C_CUSTKEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            )WITH COLUMN GROUP (each column);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE ORDERS  ( O_ORDERKEY       BIGINT NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               O_CUSTKEY        INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               O_ORDERSTATUS    VARCHAR(1) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               O_TOTALPRICE     DECIMAL(15,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               O_ORDERDATE      DATE NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               O_ORDERPRIORITY  VARCHAR(15)  NOT NULL,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               O_CLERK          VARCHAR(15)  NOT NULL, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               O_SHIPPRIORITY   INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               O_COMMENT        VARCHAR(79) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            PRIMARY KEY (O_ORDERKEY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            )WITH COLUMN GROUP (each column);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE TABLE LINEITEM ( L_ORDERKEY    BIGINT NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_PARTKEY     INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_SUPPKEY     INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_LINENUMBER  INTEGER NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_QUANTITY    INTEGER  NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_EXTENDEDPRICE  DECIMAL(15,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_DISCOUNT    DECIMAL(15,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_TAX         DECIMAL(15,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_RETURNFLAG  VARCHAR(1) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_LINESTATUS  VARCHAR(1) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_SHIPDATE    DATE NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_COMMITDATE  DATE NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_RECEIPTDATE DATE NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_SHIPINSTRUCT VARCHAR(25)  NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_SHIPMODE     VARCHAR(10) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 L_COMMENT      VARCHAR(44) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             PRIMARY KEY (L_ORDERKEY, L_LINENUMBER)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            )WITH COLUMN GROUP (each column);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>b. Use the data generation tool to generate a 10 GB dataset.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ./dbgen -s 10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>c. Import the 10 GB dataset after configuring <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001715689" target="_blank" rel="noopener noreferrer">secure_file_priv</a>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    SET SESSION ob_query_timeout = 1000000000000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>d. Execute a TPC-H query and record the execution time. Here, I execute Q11 and record an execution time of 3.33 seconds.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    select</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps_partkey,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sum(ps_supplycost * ps_availqty) as value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        partsupp,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        supplier,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps_suppkey = s_suppkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        and s_nationkey = n_nationkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        and n_name = &#x27;GERMANY&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    group by</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps_partkey having</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sum(ps_supplycost * ps_availqty) &gt; (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            select</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sum(ps_supplycost * ps_availqty) * 0.000002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                partsupp,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                supplier,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                nation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ps_suppkey = s_suppkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                and s_nationkey = n_nationkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                and n_name = &#x27;GERMANY&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order by</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value desc;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>e. Create a materialized view based on Q11.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE MATERIALIZED VIEW mv_q11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    REFRESH COMPLETE ON DEMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    select</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps_partkey,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sum(ps_supplycost * ps_availqty) as value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        partsupp,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        supplier,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps_suppkey = s_suppkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        and s_nationkey = n_nationkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        and n_name = &#x27;GERMANY&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    group by</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps_partkey having</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sum(ps_supplycost * ps_availqty) &gt; (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            select</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sum(ps_supplycost * ps_availqty) * 0.000002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                partsupp,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                supplier,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                nation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ps_suppkey = s_suppkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                and s_nationkey = n_nationkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                and n_name = &#x27;GERMANY&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order by</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value desc;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>f. Clear the cache, query the materialized view, and record the execution time. Here, the execution time is 0.46 seconds, achieving a 7 times performance boost.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    select * from mv_q11;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As the data volume grows, the performance gains from the materialized view become more evident. For example, in a production environment where tens of gigabytes of data are generated daily, incremental refreshes, such as those at a 6-hour interval, of the materialized views in OceanBase Database deliver better performance.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE MATERIALIZED VIEW mv_q11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    REFRESH FORCE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    START WITH SYSDATE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NEXT SYSDATE + 6/24  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    select</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps_partkey,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sum(ps_supplycost * ps_availqty) as value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        partsupp,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        supplier,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        nation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps_suppkey = s_suppkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        and s_nationkey = n_nationkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        and n_name = &#x27;GERMANY&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    group by</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps_partkey having</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sum(ps_supplycost * ps_availqty) &gt; (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            select</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sum(ps_supplycost * ps_availqty) * 0.000002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                partsupp,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                supplier,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                nation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ps_suppkey = s_suppkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                and s_nationkey = n_nationkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                and n_name = &#x27;GERMANY&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order by</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value desc;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-summary">3.4 Summary<a href="#34-summary" class="hash-link" aria-label="Direct link to 3.4 Summary" title="Direct link to 3.4 Summary">​</a></h3>
<p>It is evident that the query efficiency of columnstore tables still lags significantly behind that of materialized views stored on disks. In data warehouses with fixed queries or common reports involving a large amount of data, materialized views that are periodically refreshed can greatly reduce the system overhead.</p>
<p>In fact, materialized views are at the top layer of a data warehouse, which is often referred to as the data mart or report layer. Below the top layer are the summary, foundation, and operational data store (ODS) layers, which can be transformed into columnstore tables in OceanBase Database through batch ETL tasks to deliver higher performance than rowstore tables.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-afterword">4 Afterword<a href="#4-afterword" class="hash-link" aria-label="Direct link to 4 Afterword" title="Direct link to 4 Afterword">​</a></h2>
<p>OceanBase Database, known for its row-based storage and transaction processing (TP) capabilities, surprised me with its excellence in columnar storage, especially after I verified the performance disparity between row-based and columnar storage. The columnar storage technology is well suited for data warehouses. In columnar storage mode, the data of each column is stored as an independent SSTable, and the SSTables of all columns are combined into a virtual SSTable as baseline data in columnar storage. This design allows you to perform transactional operations on columnstore tables as on rowstore tables, improving both performance and the compression ratio. In the future, OceanBase Database may offer more new features for enhancement.</p>
<p>In batch processing data warehouses, the materialized view feature of OceanBase Database pre-processes complex queries and stores the results, which speeds up queries while reducing reliance on external ETL tools. What I haven&#x27;t covered in this article is that the materialized views of OceanBase Database support flexible refresh strategies, including full refresh and on-demand refresh, allowing you to choose the one that best suits your needs. From my personal experience, I have observed that materialized views in OceanBase Database outperform those in other Chinese databases.</p>
<p>To keep the article concise, I haven&#x27;t covered how to build the ODS, data warehouse detail (DWD), data warehouse service (DWS), and application layers. The new columnstore engine can significantly improve the efficiency of these layers. I&#x27;ve moved the test data at these layers to columnstore tables in OceanBase Database and conducted numerous tests. The test result shows that ETL tasks that used to take hours are now at least twice as fast due to the acceleration based on columnar storage. If the computation logic is adapted to columnar storage, the speed will improve even further.</p>
<p>Thanks to Modb.pro for reminding me to finish this article before the deadline.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/blogs/tech/Materialized-Views.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/blogs/tech/DDL-Execution-Efficient"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Insights into OceanBase Database 4.0: How to Make DDL Execution Efficient and Transparent in a Distributed Database</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/blogs/tech/Modern-HBase-Arch"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Simplistic Yet Not Simple: The Upgrade to a Modern HBase Architecture with OceanBase Database</div></a></nav><div>Loading...</div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-feature-comparison" class="table-of-contents__link toc-highlight">1 Feature Comparison</a><ul><li><a href="#11-row-based-storage-versus-columnar-storage" class="table-of-contents__link toc-highlight">1.1 Row-based storage versus columnar storage</a></li><li><a href="#12-materialized-view-versus-table" class="table-of-contents__link toc-highlight">1.2 Materialized view versus table</a></li></ul></li><li><a href="#2-build-a-real-time-data-warehouse-by-using-oceanbase-database" class="table-of-contents__link toc-highlight">2 Build a Real-time Data Warehouse by Using OceanBase Database</a><ul><li><a href="#21-technical-requirements-for-building-a-real-time-data-warehouse" class="table-of-contents__link toc-highlight">2.1 Technical requirements for building a real-time data warehouse</a></li><li><a href="#22-capabilities-of-oceanbase-database" class="table-of-contents__link toc-highlight">2.2 Capabilities of OceanBase Database</a></li><li><a href="#23-demo-for-building-a-real-time-data-warehouse" class="table-of-contents__link toc-highlight">2.3 Demo for building a real-time data warehouse</a></li><li><a href="#24-summary" class="table-of-contents__link toc-highlight">2.4 Summary</a></li></ul></li><li><a href="#3-build-a-batch-processing-data-warehouse-by-using-oceanbase-database" class="table-of-contents__link toc-highlight">3 Build a Batch Processing Data Warehouse by Using OceanBase Database</a><ul><li><a href="#31-technical-requirements-for-building-a-batch-processing-data-warehouse" class="table-of-contents__link toc-highlight">3.1 Technical requirements for building a batch processing data warehouse</a></li><li><a href="#32-capabilities-of-oceanbase-database" class="table-of-contents__link toc-highlight">3.2 Capabilities of OceanBase Database</a></li><li><a href="#33-demo-for-building-a-batch-processing-data-warehouse-based-on-materialized-views" class="table-of-contents__link toc-highlight">3.3 Demo for building a batch processing data warehouse based on materialized views</a></li><li><a href="#34-summary" class="table-of-contents__link toc-highlight">3.4 Summary</a></li></ul></li><li><a href="#4-afterword" class="table-of-contents__link toc-highlight">4 Afterword</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">SIG</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sig/AI/sig_intro">AI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/cloud-native/sig_intro">cloud-native</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/compilation/sig_intro">compilation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/develop-tools/sig_intro">develop-tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/miniob/sig_intro">MiniOB</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/obdiag/sig_intro">obdiag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/operation/sig_intro">operation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://en.oceanbase.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About OceanBase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blogs/arch/all-in-one">Blogs</a></li><li class="footer__item"><a href="https://github.com/oceanbase/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
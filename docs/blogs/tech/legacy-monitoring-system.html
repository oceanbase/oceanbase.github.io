<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-blogs/tech/legacy-monitoring-system" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Using OceanBase Database to Store Data of a traditional Monitoring System | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/docs/blogs/tech/legacy-monitoring-system"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Using OceanBase Database to Store Data of a traditional Monitoring System | OceanBase"><meta data-rh="true" name="description" content="I work for a leading new energy company headquartered in Ningbo, specializing in the development, manufacturing, and sales of photovoltaic products."><meta data-rh="true" property="og:description" content="I work for a leading new energy company headquartered in Ningbo, specializing in the development, manufacturing, and sales of photovoltaic products."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/docs/blogs/tech/legacy-monitoring-system"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/blogs/tech/legacy-monitoring-system" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/blogs/tech/legacy-monitoring-system" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6JQM9QDU5V-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H4XM2M50RX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-H4XM2M50RX",{})</script><link rel="stylesheet" href="/assets/css/styles.7e3a93fe.css">
<script src="/assets/js/runtime~main.3af16586.js" defer="defer"></script>
<script src="/assets/js/main.f609a655.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a class="navbar__item navbar__link" href="/docs/blogs/arch/all-in-one">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Product Docs</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">User Manual</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Developer Manual</a></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><span><li><a class="dropdown__link" href="/docs/sig/overview/list">Special Interest Group(SIG)</a></li></span><span><li><a class="dropdown__link" href="/docs/honor/overview">Community Honors</a></li></span><span><li><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://discord.gg/74cF8vbNEs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum (in Chinese)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Data + AI</a><ul class="dropdown__menu"><span><li><a href="https://oceanbase-devhub.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">AI Workshops<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/ai-workshop-2024" target="_blank" rel="noopener noreferrer" class="dropdown__link">RAG Bot<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/dify/dify@oceanbase-workshop" target="_blank" rel="noopener noreferrer" class="dropdown__link">Dify (MySQL Compatible)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/DB-GPT/docker/compose_examples/ob_dbgpt_tutorial" target="_blank" rel="noopener noreferrer" class="dropdown__link">DB-GPT<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/arch/all-in-one">Architectural Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/feat/io-isolation">Features Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/blogs/tech/DDL-Execution-Efficient">Technical Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/DDL-Execution-Efficient">Insights into OceanBase Database 4.0: How to Make DDL Execution Efficient and Transparent in a Distributed Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/Materialized-Views">Explore Data Warehouses with Columnar Storage and Materialized Views of OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/Modern-HBase-Arch">Simplistic Yet Not Simple: The Upgrade to a Modern HBase Architecture with OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/OpenStack-ob">OpenStack: Partnering with OceanBase Database to Build a Highly Available and Scalable Infrastructure Platform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/Real-time-AP">OceanBase Database 4.3 - Milestone Release for Real-time AP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/Standalone-distributed">Thoughts on the Integrated Architecture of OceanBase Database for Standalone and Distributed Modes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/Zabbix">Zabbix and OceanBase Database Completed Product Compatibility and Mutual Certification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/adaptive-sql-execution-engine">Adaptive Techniques in the OceanBase SQL Execution Engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/alter-table">Principles of ALTER TABLE in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/analysis-column">OceanBase Database V4.3 Feature Breakdown: In-depth Analysis of Columnar Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/binlog-service">OceanBase Binlog Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/column-store">The Present and Future of Columnar Storage in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/core-tech-ob">Decoding the Core Technologies of OceanBase Community Edition 4.x</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/distributed-push-down">OceanBase Distributed Pushdown Technology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/end-to-end-tracing">Insights into OceanBase Database 4.0: Issues Addressed by End-to-end Tracing, Starting with a Slow SQL Query</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/failure-by-collation">SQL Tuning Practices - Index Failure Caused by Collations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/flashback-query">Practice of Flashback Queries in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/high-concurrency">OceanBase Technical Insights for High-Concurrency Scenarios</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/hive-to-ob">From Hive to OceanBase Database: Building an Efficient Real-Time Data Warehouse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/image-search-vector-search">[OceanBase Practices] Building an Image Search Application Based on the Vector Search Technology of OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/blogs/tech/legacy-monitoring-system">Using OceanBase Database to Store Data of a traditional Monitoring System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/native-distributed">Treat the Symptoms and the Root Cause! OceanBase Native Distributed + Single-machine Distributed Integration Solves the Problem of Sharding from the Root</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/ob-db-transform">OceanBase Helps Enterprises Cope with the Challenges of Database Transformation in the Deep Waters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/ob-openai">Build Your Own Document Q&amp;A App with OceanBase and OpenAI in 30 mins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/ob-schema">What Is a Schema in OceanBase Database?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/obd-error">Troubleshoot obd Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-I">Mastering Parallel Execution in OceanBase Database: Part 1 - Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-II">Mastering Parallel Execution in OceanBase Database: Part 2 - Set the DOP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-III">Mastering Parallel Execution in OceanBase Database: Part 3 - Concurrency Control and Queuing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-IV">Mastering Parallel Execution in OceanBase Database: Part 4 - Parallel Execution Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-V">Mastering Parallel Execution in OceanBase Database: Part 5 - Parallel Execution Parameters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-VI">Mastering Parallel Execution in OceanBase Database: Part 6 - Troubleshooting and Tuning Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/parallel-execution-VII">Mastering Parallel Execution in OceanBase Database: Part 7 - Get Started with a PoC Test</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/partition-create">A Brief Analysis of Frequently Asked Questions about Partition Creation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/practices-binlog">Practices of OceanBase Binlog Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/pushdown-tech">Distributed Pushdown Techniques in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/query-engines">Evolution of Database Query Engines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/query-perf">Insights into OceanBase Database 4.0: Distributed Query Performance Optimization in OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/real-time-analytics">Release of OceanBase Database V4.3.3: The First GA Version for Real-time Analytics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/refine-performance">How We Approach Improving Distributed Query Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/row-to-vector">From Rows to Vectors: The Evolution of the Execution Engine of OceanBase Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/small-specification-deployment">Insights into OceanBase Database 4.0: Support for Small-Specification Deployment to Make Distributed Databases More Accessible</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/storage-engine">Storage Engine of OceanBase Database V4.x Cuts Historical Database Costs by over 50%</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/tablet">What Is a Tablet in OceanBase Database V4.0? Why Is It Introduced?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/ticket-olap">Columnar Storage Engine: Your Ticket to OLAP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/tp-to-ap">From OLTP to OLAP: Exploration and practice of the OceanBase SQL engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/trans-recovery">Principles and Practices of Transaction Recovery in Distributed Databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/troubleshoot">Five Steps to Troubleshoot Process Crashes Based on Logs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/truncated-table">Why Truncated Tables Cannot Be Recycled in OceanBase Database V4.x?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/blogs/tech/vector-search">Vector capabilities of OceanBase Database: find similar images in a blink</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/users/1st-financial">Corporate Cases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/showcases/architectural-evolution">Highlights</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/blogs/others/flink-and-ob">Others</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Technical Introduction</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Using OceanBase Database to Store Data of a traditional Monitoring System</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Using OceanBase Database to Store Data of a traditional Monitoring System</h1></header><p>I work for a leading new energy company headquartered in Ningbo, specializing in the development, manufacturing, and sales of photovoltaic products.</p>
<p>As a company with billions in revenue, our monitoring system is one of the most critical IT management tools, playing a vital role in ensuring business continuity and risk forecasting. In 2022, we chose Zabbix as our monitoring system to track metrics for servers, operating systems, middleware, databases, and network equipment deployed around the globe. It also provides early warnings for our business systems, ensuring accurate alerting for anomalies. Additionally, it provides metrics for IT facility inspections and event sourcing, enabling IT managers to quickly access historical data for various system components.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-of-our-monitoring-system">Architecture of Our Monitoring System<a href="#architecture-of-our-monitoring-system" class="hash-link" aria-label="Direct link to Architecture of Our Monitoring System" title="Direct link to Architecture of Our Monitoring System">​</a></h2>
<p>We chose Zabbix because it&#x27;s open-source, and has a stable architecture and the capabilities to &quot;monitor everything&quot;. It&#x27;s a great fit for our company, which primarily relies on conventional architectures with minimal cloud-native infrastructure. Plus, our IT team already had experience with Zabbix, so the learning curve was low.</p>
<p>When I joined the company, I was tasked with continuously optimizing and improving the newly implemented Zabbix monitoring system to enhance its timeliness and accuracy. However, since the monitoring system worked with a MySQL 8.0 database, it soon ran into issues due to limitations of the MySQL architecture.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pain-points-of-our-mysql-based-monitoring-architecture">Pain Points of Our MySQL-Based Monitoring Architecture<a href="#pain-points-of-our-mysql-based-monitoring-architecture" class="hash-link" aria-label="Direct link to Pain Points of Our MySQL-Based Monitoring Architecture" title="Direct link to Pain Points of Our MySQL-Based Monitoring Architecture">​</a></h2>
<p>First of all, high availability bottlenecks of different architectures we tried.</p>
<ul>
<li>
<p>Master-slave architecture:</p>
<ul>
<li>Without read-write splitting, the performance was no better than a standalone system with only one node. If the master node failed, we had to shut it down for a failover and validate data consistency between master and slave nodes. I don&#x27;t recommend this solution.</li>
<li>We could implement read-write splitting in two ways: modifying the DAL code (not recommended because it would hinder feature iterations), or introducing middleware like ProxySQL (which added complexity and reduced reliability).</li>
</ul>
</li>
<li>
<p>Dual-master architecture:</p>
<ul>
<li>We adopted a single-write approach with Keepalived to provide virtual IP addresses for easy failover.</li>
<li>A dual-write approach would require controlling row IDs to avoid primary key conflicts and data redundancy. It also required code modifications. I don&#x27;t recommend this solution.</li>
</ul>
</li>
<li>
<p>MySQL Group Replication (MGR)-based architecture:</p>
<ul>
<li>While it offered strong consistency, it required middleware like ProxySQL for read-write splitting. In our tests, MGR was prone to an &quot;avalanche effect,&quot; where the failure of one node could crash the entire cluster.</li>
<li>The biggest vulnerability of a replication-based architecture is that it cannot retain the disk-consuming binlogs for long due to the high write volume of Zabbix. If replication breaks for too long, it is impossible to resynchronize master and slave nodes.</li>
</ul>
</li>
</ul>
<p>Secondly, read-write conflict. Zabbix wrote a massive amount of data, which often led to read-write conflicts (optimistic locks) if O&amp;M and business teams perform operations such as querying monitoring data, converting historical data to trend data, and comparing alerts during peak hours. Additionally, Zabbix&#x27;s housekeeper service would periodically clear expired monitoring data, which could cause pessimistic locks, drastically reducing database performance. As the data volume grew, the conflict became more pronounced.</p>
<p>Thirdly, capacity issues. Despite extensive optimizations to reduce the number of monitoring items and data retention period, we still needed to store a huge amount of data. After just over a year, Zabbix&#x27;s database exceeded 1 TB, with the largest table holding over 700 million records. In addition to business data, binlogs of InnoDB also occupied significant storage space.</p>
<p>Here are my thoughts on architecture optimization based on our specific business scenarios.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optimizing-mysql-a-temporary-fix">Optimizing MySQL: A Temporary Fix<a href="#optimizing-mysql-a-temporary-fix" class="hash-link" aria-label="Direct link to Optimizing MySQL: A Temporary Fix" title="Direct link to Optimizing MySQL: A Temporary Fix">​</a></h2>
<p>Among so many optimization cases, I&#x27;ll talk about a typical one.</p>
<p>Zabbix provided monitoring templates. The Linux monitoring template alone contained over 100 monitoring items. Given our 2,000 plus production servers, we got 200,000 monitoring items. If we collected data once every 5 minutes, the database would write 2.4 million records per hour to the <code>history</code> table.</p>
<p>A 5-minute collection interval was just theoretical, as longer intervals would reduce data accuracy. The values of some monitoring items, like metrics for traffic, and CPU, memory, and I/O usage, were often collected once every 1 minute or so for higher accuracy. This would result in even more monitoring data.</p>
<p>Additionally, Zabbix would extract a full hour of data of a monitoring item from the <code>history</code> and <code>history_unit</code> tables on an hourly basis, performing calculations to get its minimum, average, and maximum values, and then insert them into the <code>trends</code> and <code>trends_unit</code> tables.</p>
<p><img decoding="async" loading="lazy" src="https://obcommunityprod.oss-cn-shanghai.aliyuncs.com/prod/blog/2024-09/1727347612203.png" alt="1727347610" class="img_ev3q"></p>
<p>This process involved large result sets, heavy calculation workload, and significant caching, often leading to issues like rapid creation of temporary tables, excessive disk I/O load, high swap usage, and large transactions.</p>
<p>As the pessimistic locks mentioned earlier would cause historical data cleanup tasks to fail, more and more data would be built up. Table locks also made it impossible to use the dump method for backups, forcing the use of physical backups. However, since the <code>DELETE</code> statement was used to clear historical data, it left fragmented space in primary business tables, requiring defragmentation before creating backups, which was quite cumbersome.</p>
<p>Highly frequent <code>INSERT</code> and <code>DELETE</code> operations also generated massive amounts of binlogs, taking up large storage space. Reducing the binlog retention period would cause fast synchronization point override. If the master node and a slave node were disconnected, you might need to restore the slave node from scratch.</p>
<p>To address these issues, we optimized the following tables.</p>
<table><thead><tr><th>Table name</th><th>Description</th><th>Data type</th></tr></thead><tbody><tr><td>history</td><td>Stores the raw historical data.</td><td>Floating-point numbers</td></tr><tr><td>history_uint</td><td>Stores the raw historical data.</td><td>Unsigned numbers</td></tr><tr><td>history_str</td><td>Stores the raw short strings.</td><td>Characters</td></tr><tr><td>history_text</td><td>Stores the raw long strings.</td><td>Text</td></tr><tr><td>history_log</td><td>Stores the raw log strings.</td><td>Logs</td></tr><tr><td>trends</td><td>Stores the hourly statistics.</td><td>Floating-point numbers</td></tr><tr><td>trends_uint</td><td>Stores the hourly statistics.</td><td>Unsigned numbers</td></tr><tr><td>auditlog</td><td>Stores the audit logs.</td><td>Logs</td></tr></tbody></table>
<p>Zabbix stores historical data in tables with a name starting with <code>history</code>, and trend data in those with a name starting with <code>trends</code>.</p>
<ul>
<li>
<p>History tables store different types of raw data of all monitoring items collected from clients, and have similar schemas. If the data of a monitoring item is collected once a minute, 86,400 records are generated for this monitoring item on a daily basis.</p>
</li>
<li>
<p>The <code>history</code> table stores numeric data in the following columns: <code>itemid</code> of the BIGINT(20) type, <code>clock</code> of the INT(11) type, <code>value</code> of the BIGINT(20) type, and <code>ns</code> of the INT(11) type. Each record consumes approximately 24 bytes (8 ＋ 4 ＋ 8 ＋ 4), resulting in about 2 MB of data per day.</p>
</li>
<li>
<p>The <code>history_str</code> and <code>history_text</code> tables store string and text data in the <code>value</code> column of the VARCHAR(255) type in utf8mb4_bin and <code>value</code> column of the TEXT type in utf8mb4_bin, respectively. A VARCHAR(255) column in utf8mb4 can store up to 1,020 bytes, while a TEXT column can store up to 65,535 bytes. If, in extreme cases, the data of a text- or string-type item is collected once a minute, approximately 85 MB or 5 GB of data can be generated each day.</p>
</li>
<li>
<p>The size of historical data depends on factors like the number of monitoring items, retention periods, data types, and collection intervals.</p>
</li>
<li>
<p>Trends tables store aggregated hourly data, including the minimum, average, and maximum values for each monitoring item. Essentially, trends tables are compressed versions of history tables, reducing resource demands.</p>
</li>
<li>
<p>Trends tables only use the data of numeric history tables. The <code>history_str</code>, <code>history_log</code>, and <code>history_text</code> tables do not have corresponding trends tables.</p>
</li>
<li>
<p>The data of trends tables are converted from history tables by Zabbix&#x27;s housekeeper service, which is similar to a scheduled task. The conversion process inevitably compromises the database performance.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="starting-with-indexes">Starting with Indexes<a href="#starting-with-indexes" class="hash-link" aria-label="Direct link to Starting with Indexes" title="Direct link to Starting with Indexes">​</a></h2>
<p>The <code>history</code> table stores the supra-second part of the timestamp of a monitoring item in the <code>clock</code> column (in seconds), and the sub-second part in the <code>ns</code> column (in nanoseconds).</p>
<p>The sub-second part is usually not a concern. Zabbix often uses both columns in its internal statistical queries. However, the <code>ns</code> column is not indexed, leading to full table scans. To address this issue, we optimized the <code>history</code> table like this:</p>
<p>CREATE TABLE <code>history_old</code> (
<code>itemid</code> bigint(20) unsigned NOT NULL,
<code>clock</code> int(11) NOT NULL DEFAULT &#x27;0&#x27;,
<code>value</code> double NOT NULL DEFAULT &#x27;0&#x27;,
<code>ns</code> int(11) NOT NULL DEFAULT &#x27;0&#x27;,
KEY <code>history_1</code> (<code>itemid</code>, <code>clock</code>) BLOCK_SIZE 16384 LOCAL
) DEFAULT CHARSET = utf8mb4</p>
<p>CREATE TABLE <code>history</code> (
<code>itemid</code> bigint(20) unsigned NOT NULL,
<code>clock</code> int(11) NOT NULL DEFAULT &#x27;0&#x27;,
<code>value</code> double NOT NULL DEFAULT &#x27;0&#x27;,
<code>ns</code> int(11) NOT NULL DEFAULT &#x27;0&#x27;,
PRIMARY KEY (<code>itemid</code>, <code>clock</code>, <code>ns</code>)
) DEFAULT CHARSET = utf8mb4</p>
<blockquote>
<p>Other history tables were optimized similarly.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-partitioning">Table partitioning<a href="#table-partitioning" class="hash-link" aria-label="Direct link to Table partitioning" title="Direct link to Table partitioning">​</a></h2>
<p>We partitioned history and trends tables, creating and dropping partitions periodically. This approach posed some challenges:</p>
<p>First, given the huge table size, directly operating on tables would be risky and inefficient. So, we would create a table and insert data from the source table using the <code>insert  /*+ ENABLE_PARALLEL_DML PARALLEL(2) */ … select …</code> statement, which was made possible by the <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001973796" target="_blank" rel="noopener noreferrer">parallel DML</a> feature of OceanBase Database. While this worked for smaller tables, it failed for larger, busier tables.</p>
<p>Second, using the dump method for backups required significant downtime.</p>
<p>Third, when using DataX for data synchronization, it was difficult to determine the last synchronization point if the process was interrupted, making it hard to resume synchronization.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-parameter-optimization">MySQL Parameter Optimization<a href="#mysql-parameter-optimization" class="hash-link" aria-label="Direct link to MySQL Parameter Optimization" title="Direct link to MySQL Parameter Optimization">​</a></h2>
<p>The most frequent operations in Zabbix were writing new data to the database, converting history data to trends, deleting expired data, and querying monitoring data or generating reports (using Grafana). These operations—especially queries involving sorting, aggregation, and calculations, as well as large INSERT and DELETE transactions—put immense pressure on MySQL, prolonging the processing time. The simplest way to speed up processing was to adjust the following MySQL parameters to keep as much data in memory as possible: <code>innodb_buffer_pool_size</code>, <code>query_cache_size</code>, <code>tmp_table_size</code>, <code>innodb_log_buffer_size</code>, <code>sort_buffer_size</code>, <code>read_buffer_size</code>, <code>join_buffer_size</code>, and <code>binlog_cache_size</code>.</p>
<p>However, we just couldn&#x27;t endlessly add more memory once it hits the physical limits, and large transactions would excessively consume disk I/O resources when, for example, dirty pages were flushed to a disk. Besides, scaling up hardware would involve downtime, causing additional costs.</p>
<p>My point is, performance bottlenecks are inevitable as long as we keep using those MySQL and OS optimization and scaling methods. We need something new.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="seeking-a-new-solution">Seeking a New Solution<a href="#seeking-a-new-solution" class="hash-link" aria-label="Direct link to Seeking a New Solution" title="Direct link to Seeking a New Solution">​</a></h2>
<p>We needed a new data storage solution that could not only address our architectural bottlenecks and business pain points, but meet three requirements:</p>
<p>1.     The solution must support the syntax, functions, expressions, data types, table partitioning methods, character sets, and collations of MySQL.</p>
<p>2.     It provides hybrid transaction and analytical processing (HTAP) capabilities, and has a data engine that efficiently handles both transaction processing (TP) and analytical processing (AP) workloads in a relational architecture.</p>
<p>3.     It provides high availability and multi-active capabilities without relying on additional technologies.</p>
<p>Zabbix Server supports both <strong>MySQL</strong> and <strong>PostgreSQL</strong>. However, on the one hand, our team lacked expertise in <strong>PostgreSQL</strong>, and on the other hand, we had already developed numerous applications and reports based on MySQL databases. Switching the database system to <strong>PostgreSQL</strong> would require redevelopment. Therefore, we gave up <strong>PostgreSQL</strong> and narrowed our selection down to MySQL-compatible databases.</p>
<p>I mentioned earlier that we also deployed the InnoDB engine. So, we considered TokuDB, an optimized version of InnoDB.</p>
<p>We were also interested in emerging databases like <strong>TiDB, Huawei GaussDB, openGauss, OceanBase Database, and Dameng Database</strong>.</p>
<ul>
<li><strong>TiDB</strong> was ruled out due to its lack of support for MySQL stored procedures and foreign keys.</li>
<li><strong>openGauss</strong>, based on <strong>PostgreSQL</strong>, was a secondary option.</li>
<li><strong>Huawei GaussDB</strong> required paid licenses.</li>
<li><strong>Dameng Database</strong> also required paid licenses.</li>
</ul>
<p>OceanBase Database passed our first screening for its MySQL compatibility, distributed architecture, and open-source.</p>
<p>Based on compatibility considerations, <strong>TokuDB</strong> and <strong>OceanBase Database</strong> were shortlisted for our new solution.</p>
<table><thead><tr><th>Comparison item</th><th>TokuDB</th><th>OceanBase Database</th></tr></thead><tbody><tr><td>Deployment</td><td>Easy</td><td>Easy</td></tr><tr><td>Disaster recovery architecture</td><td>Master-slave</td><td>Distributed</td></tr><tr><td>Data compression ratio</td><td>Medium</td><td>High</td></tr><tr><td>Support for domestic products</td><td>No</td><td>Yes</td></tr><tr><td>Performance</td><td>Data write performance was optimized, lacking evidence for data read performance.</td><td>To be tested</td></tr></tbody></table>
<p>The data read performance of TokuDB didn&#x27;t meet our expectations. OceanBase Database, on the other hand, stood out with its support for HTAP, multi-active high availability, and a vibrant community with plenty of resources to help us get started. So, we decided on OceanBase Database.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-oceanbase-database">Deploying OceanBase Database<a href="#deploying-oceanbase-database" class="hash-link" aria-label="Direct link to Deploying OceanBase Database" title="Direct link to Deploying OceanBase Database">​</a></h2>
<p>Following the official documentation, we began the deployment process. Along the way, we encountered a few minor hiccups, which were resolved with the help of the official documentation and some advice from the community. I&#x27;ll share the details in a future post for your reference.</p>
<p>Overall, the migration from MySQL to OceanBase Database was surprisingly smooth. Since we deployed OceanBase Database Community Edition, we couldn&#x27;t leverage the OceanBase Migration Assessment (OMA) tool to evaluate the migration process beforehand. Instead, we relied on experience and some helpful tips from the community. We performed the following checks before the migration:</p>
<ul>
<li>Character set check. OceanBase Database doesn&#x27;t support all MySQL character sets or collations, so a pre-migration evaluation is crucial.</li>
<li>OceanBase Database doesn&#x27;t have an event scheduler. If your original database uses events, you&#x27;ll need to find alternative solutions (more on this later).</li>
<li>Unlike some other MySQL-compatible databases, OceanBase Database is case-insensitive by default. Make sure to check the <code>lower_case_table_names</code> setting in your original database.</li>
<li>If you plan to enable reverse synchronization, ensure that the necessary accounts are created and authorized in the original database, and that the <code>omstxndb</code> database is ready.</li>
<li>If your database has foreign key constraints, remember to disable them before migration using the <strong>SET FOREIGN_KEY_CHECKS=0;</strong> statement.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="1727348341" src="/assets/images/1727348343480-0e792e24ce3fe2a069c7a483e146b9d9.png" width="920" height="182" class="img_ev3q"></p>
<p>For more details on these steps, refer to the <a href="https://en.oceanbase.com/docs/community-oms-en-10000000001836496" target="_blank" rel="noopener noreferrer">official documentation</a>. One particular challenge we faced was with Zabbix&#x27;s history and trends tables, which should be partitioned. Partitions should be managed by scheduled tasks; otherwise the workload would be overwhelming for administrators. In MySQL, we automated this using events and stored procedures. However, as I said earlier, OceanBase Database doesn&#x27;t support events. Would it be a dead end? No, God has opened a window, and handed in OceanBase Developer Center (ODC), an open-source, enterprise-grade database collaboration platform. ODC&#x27;s partitioning plan module served as a more advanced alternative to the combination of events and stored procedures in MySQL. I&#x27;ve posted <a href="https://open.oceanbase.com/blog/12521093139" target="_blank" rel="noopener noreferrer">an article on this</a> if you&#x27;re interested in the details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-new-chapter-with-oceanbase-database">A New Chapter with OceanBase Database<a href="#a-new-chapter-with-oceanbase-database" class="hash-link" aria-label="Direct link to A New Chapter with OceanBase Database" title="Direct link to A New Chapter with OceanBase Database">​</a></h2>
<p>Six months into running OceanBase Database with Zabbix, we&#x27;ve achieved the same performance with significantly fewer hardware resources, compared to our previous MySQL-based architecture.</p>
<p><img decoding="async" loading="lazy" alt="1727348390" src="/assets/images/1727348392419-199d42828e3b1bb34cc52c3b34c512f9.png" width="904" height="426" class="img_ev3q"></p>
<p>Our developers and system administrators were not against the migration given the fact that OceanBase Database is MySQL-compatible. The high reliability and HTAP capabilities of OceanBase Database also made it easier to communicate the migration plan with the operations team. After the migration, the performance improvements and an 80% reduction in storage space left the business team thoroughly impressed.</p>
<p>The performance boost is immediately noticeable. Queries that used to take at least 4 seconds to render historical data (spanning weeks or months) now load almost instantly. Additionally, the frequency of performance alerts from Zabbix has dropped significantly since the migration.</p>
<p>In short, OceanBase Database has met our expectations, and we&#x27;re continually exploring its new features. Here&#x27;s a quick summary of how OceanBase Database aligns with our business needs:</p>
<ul>
<li>Parallel processing: For operations involving a large amount of data, we can enable parallel processing to significantly boost efficiency.</li>
<li>Hot scaling: Thanks to OceanBase Cloud Platform (OCP), we can scale CPU, memory, and other database resources, and modify zones and parameters while the database is running, which minimizes the downtime.</li>
<li>High compression ratio: When importing data to our Zabbix database, we noticed that the size was compressed from 1.2 TB in MySQL to just 260 GB in OceanBase Database—an 80% reduction in storage space.</li>
<li>Inherent scalability and distributed capabilities: OceanBase supports both horizontal scaling by adding zones and vertical scaling by increasing resource specifications, with data synchronization handled automatically in the backend. This provides robust data redundancy. We tested an MGR-based architecture, which, while ensuring consistency, was a nightmare to maintain. Any node failure risked bringing down the entire cluster.</li>
<li>Slow query isolation: Slow queries are placed in a separate queue, so that they don&#x27;t interfere with smaller, faster queries or cause congestion.</li>
</ul>
<p>OceanBase Database provides a suite of tools that has made database management more automated and convenient.</p>
<p>OCP has been a lifesaver, offering a range of practical features:</p>
<ul>
<li>Cloud-native and multitenancy: OCP allows unified management of databases, simplifying their creation and O&amp;M. The multitenancy feature ensures resource isolation between tenants.</li>
<li>SQL diagnostics: Integrated SQL diagnostics make it easy to monitor top, slow, and parallel SQL statements. We can quickly diagnose and optimize SQL execution on a GUI-based interface.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="1727348486" src="/assets/images/1727348487990-38720e087c5d2823c8798e35966b0b83.png" width="920" height="304" class="img_ev3q"></p>
<ul>
<li>Backup: OCP natively supports physical and log backups.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="1727348516" src="/assets/images/1727348518029-3b3d2c86c60017be7d3ecc247caf4605.png" width="920" height="492" class="img_ev3q"></p>
<p>OceanBase Migration Service (OMS) Community Edition supports real-time data migration between OceanBase Database Community Edition and different types of data sources like MySQL, PostgreSQL, TiDB, Kafka, and RocketMQ. It also supports data migration between MySQL tenants of OceanBase Database Community Edition. Key features of OMS are as follows:</p>
<ul>
<li>Streamlines the migration process with automatic operations.</li>
<li>Supports schema synchronization, data synchronization, incremental synchronization, and reverse synchronization in one task, reducing the workload of O&amp;M engineers.</li>
<li>Allows synchronization of specific tables and table data based on rules.</li>
</ul>
<p>ODC is packed with handy features. For example:</p>
<ul>
<li>Provides an integrated SQL development environment, which supports SQL auditing and double confirmation for high-risk operations.</li>
<li>Supports workflows and allows data source access authorization, enhancing collaboration efficiency.</li>
<li>Supports integration with Active Directory of your enterprise for secure account management. ODC also doubles as a database access management platform, much like a bastion host. The best part? It&#x27;s free!</li>
<li>Works with OceanBase Database in MySQL mode, MySQL databases, and Oracle databases, making it a great cost-effective tool for database development.</li>
<li>Supports scheduled tasks:<!-- -->
<ul>
<li>SQL scheduling: Executes SQL statements as scheduled, similar to MySQL event scheduler.</li>
<li>Partitioning plans: Supports partition creation and dropping. For more information, see <a href="https://open.oceanbase.com/blog/12521093139" target="_blank" rel="noopener noreferrer">this article</a>.</li>
<li>Data archiving: Migrates historical data from one table or database to another based on predefined rules.</li>
<li>Data cleanup: Schedules data cleanup tasks based on specific rules.</li>
</ul>
</li>
<li>Tracks the status of all tasks, facilitating O&amp;M.</li>
<li>Provides all these features out of the box, saving time and effort.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="looking-ahead">Looking Ahead<a href="#looking-ahead" class="hash-link" aria-label="Direct link to Looking Ahead" title="Direct link to Looking Ahead">​</a></h2>
<p>Given features of OceanBase Database and our business scenarios, we&#x27;re planning to migrate more systems to OceanBase Database. Currently, we&#x27;re working on migrating our production device data collection system and reporting system.</p>
<p>Similar to Zabbix, this data collection system has the following characteristics:</p>
<ul>
<li>Large data amount. Production device data is collected once a few seconds, leading to high concurrency and a tremendous data size.</li>
<li>Time series of data. We designed some wide tables with time series columns, requiring complex queries to transform them into long tables. We&#x27;ve used window functions to compare collected results within the time series. In OceanBase Database of a later version, we can do that by making use of the columnar storage.</li>
<li>Regular archiving and cleanup. This can be handled using the data archiving and cleanup features of ODC. You can enable parallel execution of cleanup tasks to speed things up.</li>
<li>Table partitioning. Large tables are partitioned for easier management.</li>
</ul>
<p>The reporting system has the following characteristics:</p>
<ul>
<li>It requires HTAP capabilities. OceanBase Database puts slow queries in a separate queue, minimizing the impact of large transactions and queries on the execution of smaller, faster ones.</li>
</ul>
<p>While OceanBase Database has been a game-changer for us, it&#x27;s not flawless. Execution plans can be difficult to read and sometimes get performance jitters or deteriorate, leading to unstable SQL execution. System logs can be hard to understand. Additionally, the support for Chinese language can be better. In our obdumper test, the backup of tables with names in Chinese failed. The community is working on a fix, and we temporarily resolved it by rolling the database back to an older version.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>OceanBase Database is a powerful database platform. From trial to production, we&#x27;ve encountered both challenges and surprises. When issues arise, we will first try to figure out a solution on our own based on the documentation. If that doesn&#x27;t work, we can always reach out to the OceanBase community, which has been incredibly responsive, offering timely and accurate support—much better than other open-source communities.</p>
<p>As OceanBase Database continues to evolve, we&#x27;re excited to explore new features like columnar storage and materialized views in V4.3. The journey may be long, but with OceanBase, we&#x27;ll eventually reach our destination.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/blogs/tech/legacy-monitoring-system.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/blogs/tech/image-search-vector-search"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">[OceanBase Practices] Building an Image Search Application Based on the Vector Search Technology of OceanBase Database</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/blogs/tech/native-distributed"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Treat the Symptoms and the Root Cause! OceanBase Native Distributed + Single-machine Distributed Integration Solves the Problem of Sharding from the Root</div></a></nav><div>Loading...</div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#architecture-of-our-monitoring-system" class="table-of-contents__link toc-highlight">Architecture of Our Monitoring System</a></li><li><a href="#pain-points-of-our-mysql-based-monitoring-architecture" class="table-of-contents__link toc-highlight">Pain Points of Our MySQL-Based Monitoring Architecture</a></li><li><a href="#optimizing-mysql-a-temporary-fix" class="table-of-contents__link toc-highlight">Optimizing MySQL: A Temporary Fix</a></li><li><a href="#starting-with-indexes" class="table-of-contents__link toc-highlight">Starting with Indexes</a></li><li><a href="#table-partitioning" class="table-of-contents__link toc-highlight">Table partitioning</a></li><li><a href="#mysql-parameter-optimization" class="table-of-contents__link toc-highlight">MySQL Parameter Optimization</a></li><li><a href="#seeking-a-new-solution" class="table-of-contents__link toc-highlight">Seeking a New Solution</a></li><li><a href="#deploying-oceanbase-database" class="table-of-contents__link toc-highlight">Deploying OceanBase Database</a></li><li><a href="#a-new-chapter-with-oceanbase-database" class="table-of-contents__link toc-highlight">A New Chapter with OceanBase Database</a></li><li><a href="#looking-ahead" class="table-of-contents__link toc-highlight">Looking Ahead</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">SIG</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sig/AI/sig_intro">AI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/cloud-native/sig_intro">cloud-native</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/compilation/sig_intro">compilation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/develop-tools/sig_intro">develop-tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/miniob/sig_intro">MiniOB</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/obdiag/sig_intro">obdiag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/operation/sig_intro">operation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://en.oceanbase.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About OceanBase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blogs/arch/all-in-one">Blogs</a></li><li class="footer__item"><a href="https://github.com/oceanbase/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
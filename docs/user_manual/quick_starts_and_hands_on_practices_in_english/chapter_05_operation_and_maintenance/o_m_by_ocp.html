<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/o_m_by_ocp" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Perform O&amp;M by using OCP | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/o_m_by_ocp"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Perform O&amp;M by using OCP | OceanBase"><meta data-rh="true" name="description" content="OceanBase Cloud Platform (OCP) Community Edition is an enterprise-grade management platform designed for OceanBase Database. In the console of OCP Community Edition, you can manage a database cluster throughout its entire lifecycle, including installation, O&amp;M, performance monitoring, configuration, upgrade, as well as adding and deleting hosts. OCP also provides comprehensive management features for tenants, including creation, topology display, performance monitoring, session management, and parameter management. The monitoring and alerting feature of OCP allows you to set monitoring rules for clusters, tenants, and hosts. You can also configure to send alert notifications through HTTP or scripts. In terms of system management, OCP allows you to view and manage tasks, as well as customize parameter settings. In terms of security, OCP supports user and role management to ensure secure access to the database."><meta data-rh="true" property="og:description" content="OceanBase Cloud Platform (OCP) Community Edition is an enterprise-grade management platform designed for OceanBase Database. In the console of OCP Community Edition, you can manage a database cluster throughout its entire lifecycle, including installation, O&amp;M, performance monitoring, configuration, upgrade, as well as adding and deleting hosts. OCP also provides comprehensive management features for tenants, including creation, topology display, performance monitoring, session management, and parameter management. The monitoring and alerting feature of OCP allows you to set monitoring rules for clusters, tenants, and hosts. You can also configure to send alert notifications through HTTP or scripts. In terms of system management, OCP allows you to view and manage tasks, as well as customize parameter settings. In terms of security, OCP supports user and role management to ensure secure access to the database."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/o_m_by_ocp"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/o_m_by_ocp" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/o_m_by_ocp" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6JQM9QDU5V-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7e3a93fe.css">
<script src="/assets/js/runtime~main.ae9eefe4.js" defer="defer"></script>
<script src="/assets/js/main.2e7b64bf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a class="navbar__item navbar__link" href="/docs/blogs/arch/all-in-one">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Product Docs</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">User Manual</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Developer Manual</a></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><span><li><a class="dropdown__link" href="/docs/sig/overview/list">Special Interest Group(SIG)</a></li></span><span><li><a class="dropdown__link" href="/docs/honor/overview">Community Honors</a></li></span><span><li><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="dropdown__link">Slack<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum (in Chinese)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Data + AI</a><ul class="dropdown__menu"><span><li><a href="https://oceanbase-devhub.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Devhub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><div style="padding: 0.25rem 0.5rem; font-size: 14px; color: #4e7ff1;">AI Workshops</div></li></span><span><li><a href="https://oceanbase-devhub.github.io/ai-workshop-2024" target="_blank" rel="noopener noreferrer" class="dropdown__link">RAG Bot<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/dify/dify@oceanbase-workshop" target="_blank" rel="noopener noreferrer" class="dropdown__link">Dify (MySQL Compatible)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/DB-GPT/docker/compose_examples/ob_dbgpt_tutorial" target="_blank" rel="noopener noreferrer" class="dropdown__link">DB-GPT<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_01_overview_of_the_oceanbase_database/introduction">Overview of the Oceanbase database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_02_deploy_oceanbase_database/introduction">Deploy Oceanbase database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_03_test_oceanbase_database/introduction">Test Oceanbase database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_04_migration_and_synchronization_oceanbase/introduction">Migrate and synchronize data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/introduction">Operation and maintenance</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/o_m_by_ocp">Perform O&amp;M by using OCP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/o_m_by_obd">Perform O&amp;M by using OBD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/o_m_by_ob-operator">Perform O&amp;M by using ob-operator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/o_m_by_sql">Perform O&amp;M by using SQL statements</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_06_using_ob_for_business_development/introduction">Using Oceanbase for business development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_07_diagnosis_and_tuning/introduction">Diagnosis_and_tuning</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Operation and maintenance</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Perform O&amp;M by using OCP</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>5.1 Perform O&amp;M by using OCP</h1></header>
<p>OceanBase Cloud Platform (OCP) Community Edition is an enterprise-grade management platform designed for OceanBase Database. In the console of OCP Community Edition, you can manage a database cluster throughout its entire lifecycle, including installation, O&amp;M, performance monitoring, configuration, upgrade, as well as adding and deleting hosts. OCP also provides comprehensive management features for tenants, including creation, topology display, performance monitoring, session management, and parameter management. The monitoring and alerting feature of OCP allows you to set monitoring rules for clusters, tenants, and hosts. You can also configure to send alert notifications through HTTP or scripts. In terms of system management, OCP allows you to view and manage tasks, as well as customize parameter settings. In terms of security, OCP supports user and role management to ensure secure access to the database.</p>
<p>For more information about the basic management and O&amp;M features of OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001187441" target="_blank" rel="noopener noreferrer">Cluster Management</a> and <a href="https://en.oceanbase.com/docs/common-ocp-10000000001265200" target="_blank" rel="noopener noreferrer">O&amp;M Best practices</a>.</p>
<p>This topic describes the common O&amp;M features of OCP.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>The official documents referenced in this tutorial are of the latest version available at the time of writing or the Long-Term Support (LTS) version. You can switch to another version as needed in the upper-left corner of the document page.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="take-over-a-cluster">Take over a cluster<a href="#take-over-a-cluster" class="hash-link" aria-label="Direct link to Take over a cluster" title="Direct link to Take over a cluster">​</a></h2>
<p>You can take over an external cluster that is deployed in another OCP to the current OCP. After the cluster is taken over, you can manage, monitor, and maintain it in the same way as clusters deployed in the current OCP.</p>
<blockquote>
<p><strong>Note</strong></p>
<ul>
<li>
<p>All newly released OCP versions support taking over OceanBase clusters and OceanBase Database Proxy (ODP) clusters. ODP is also known as OBProxy.</p>
</li>
<li>
<p>OCP V4.2.1 and later support taking over only ODP clusters that are deployed by using OCP. This limitation does not apply to OceanBase clusters.</p>
</li>
</ul>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="take-over-an-oceanbase-cluster">Take over an OceanBase cluster<a href="#take-over-an-oceanbase-cluster" class="hash-link" aria-label="Direct link to Take over an OceanBase cluster" title="Direct link to Take over an OceanBase cluster">​</a></h3>
<p>You can take over an OceanBase cluster deployed by using OceanBase Deployer (OBD) or another OCP to the current OCP and then maintain and manage it in the current OCP. At present, you can take over an OceanBase cluster that is manually created, created in OBD, or created in another OCP.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>You can take over a manually created OceanBase cluster that passes the takeover check. Generally, we recommend that you take over a cluster that is deployed by using OBD or another OCP.</p>
</li>
<li>
<p>By default, OCP takes over its own MetaDB. However, functional O&amp;M operations, such as cluster restart and tenant deletion, are not supported. This is why we recommend that you do not mix MetaDB with the business cluster.</p>
<p>Log on to the <code>ocp_meta</code> tenant of OceanBase Database as the <code>root</code> user, and run the following command in the <code>meta_database</code> database to update the metadata:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> meta_database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config_properties </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;ocp.ob.cluster.ops.blacklist&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Before you take over an OceanBase cluster that is deployed in another OCP, you must first move out the cluster. If an OceanBase cluster is managed by two OCPs, their OCP-Agent configurations may overwrite each other, affecting normal operations. For more information about how to move out a cluster, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483755" target="_blank" rel="noopener noreferrer">Migrate a cluster</a>.</p>
</li>
<li>
<p>After you take over an OceanBase cluster deployed by using OBD to the current OCP, we recommend that you no longer maintain or manage the cluster by using OBD. To prevent configuration conflicts caused by OCP and OBD jointly managing the same cluster, you can perform the following steps to delete the management information of the cluster from OBD:</p>
<ol>
<li>
<p>View the name of the deployed cluster.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obd cluster list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                         Cluster List                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------+-------------------------------------+-----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Name | Configuration Path                  | Status (Cached) |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------+-------------------------------------+-----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| demo | /home/admin/.obd/cluster/demo       | running         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| test | /home/admin/.obd/cluster/test       | running         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------+-------------------------------------+-----------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Delete the management information of the cluster.</p>
<p>In this example, the cluster is named <code>test</code>. You must replace the cluster name with the actual one.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf /home/admin/.obd/cluster/test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Verify the result.</p>
<p>Run the <code>obd cluster list</code> command again to view the clusters managed by OBD. If the target cluster is not included in the output, the management information of the cluster is successfully deleted.</p>
</li>
</ol>
</li>
<li>
<p>If you forget the password of the <code>proxyro@sys</code> account when you configure takeover information, you can change the password by referring to <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483852" target="_blank" rel="noopener noreferrer">Manage the proxyro account</a>.</p>
</li>
<li>
<p>If the hosts of the cluster to be taken over have been added to OCP, make sure that the IDC and region of the hosts are consistent with those of the cluster. You can query the <code>DBA_OB_ZONES</code> view for the IDC and region of the cluster.</p>
<p>If the information is inconsistent, perform the following steps to modify the IDC and region of the cluster to be taken over:</p>
<ol>
<li>
<p>Log on to the sys tenant of the cluster to be taken over as the <code>root</code> user.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obclient -h10.10.10.1 -uroot@sys -P2883 -p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For information about how to connect to an OceanBase Database tenant by using OBClient, see <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001104073" target="_blank" rel="noopener noreferrer">Connect to an OceanBase tenant by using OBClient</a>.</p>
</li>
<li>
<p>Modify the IDC and region of the cluster to be taken over.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> SYSTEM </span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> ZONE zone1 </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> REGION </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">IDC </span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You need to execute the preceding statement for all zones.</p>
</li>
<li>
<p>View the IDC and region of the cluster to be taken over.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM oceanbase.DBA_OB_ZONES;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For more information about the <code>DBA_OB_ZONES</code> view, see <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001104331" target="_blank" rel="noopener noreferrer">oceanbase.DBA_OB_ZONES</a>.</p>
</li>
</ol>
</li>
<li>
<p>By default, SQL collection is disabled for the taken-over MetaDB. In other words, it is normal that the SQL diagnostics module has no data. You can enable SQL collection by setting <code>ocp.perf.collect.metadb.enabled</code> to <code>true</code> in the system parameter management module. For more information, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483714" target="_blank" rel="noopener noreferrer">Modify system parameters</a>.</p>
</li>
</ul>
<p>For more information about how to take over an OceanBase cluster by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483752" target="_blank" rel="noopener noreferrer">Take over a cluster</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="take-over-an-odp-cluster">Take over an ODP cluster<a href="#take-over-an-odp-cluster" class="hash-link" aria-label="Direct link to Take over an ODP cluster" title="Direct link to Take over an ODP cluster">​</a></h3>
<p>You can take over ODPs in an ODP cluster deployed in another OCP to an existing ODP cluster (referred to as the destination ODP cluster) in the current OCP, and then maintain and manage the newly formed ODP cluster in the current OCP.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>Before the takeover, make sure that at least one ODP cluster is available in the current OCP. If not, deploy an ODP cluster, which can be a single-node cluster, in the current OCP.</p>
</li>
<li>
<p>Before the takeover, we recommend that you first move out the ODP cluster to which the ODPs to be taken over belong from the original OCP. For more information, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483849" target="_blank" rel="noopener noreferrer">Migrate an OBProxy cluster</a> or <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483602" target="_blank" rel="noopener noreferrer">Move out an OBProxy cluster</a>.</p>
<blockquote>
<p><strong>Notice</strong></p>
<p>When you take over ODPs, the password of the <code>root@proxysys</code> account is required. If you forget the password, you need to reset the password before you move out the ODP cluster. For more information about how to reset the password of the <code>root@proxysys</code> account, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483857" target="_blank" rel="noopener noreferrer">Change the password of the proxysys user</a>.</p>
</blockquote>
</li>
<li>
<p>You can take over only ODPs deployed in another OCP, rather than ODPs deployed by using OBD.</p>
</li>
<li>
<p>The obproxy process running on the host of an ODP to be taken over is checked during the takeover. Make sure that the status of the ODP is normal and that only one obproxy process runs on the host.</p>
</li>
<li>
<p>You must first associate the destination ODP cluster with the connectable OceanBase clusters of the ODPs to be taken over. In other words, the list of connectable OceanBase clusters of the destination ODP cluster must include the connectable OceanBase clusters of the ODPs to be taken over.</p>
</li>
<li>
<p>The version of the ODPs to be taken over must be close to that of the destination ODP cluster. We recommend that they share the same major version, such as V4.1.x. The third digit x in the version number can differ.</p>
</li>
</ul>
<p>For more information about how to take over an ODP by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483860" target="_blank" rel="noopener noreferrer">Take over an OBProxy</a> or <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483585" target="_blank" rel="noopener noreferrer">Take over OBProxies</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="move-out-a-cluster">Move out a cluster<a href="#move-out-a-cluster" class="hash-link" aria-label="Direct link to Move out a cluster" title="Direct link to Move out a cluster">​</a></h2>
<p>You can move out an OceanBase cluster or ODP cluster from the current OCP. A moved-out cluster can be taken over to and managed by another OCP.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="move-out-an-oceanbase-cluster">Move out an OceanBase cluster<a href="#move-out-an-oceanbase-cluster" class="hash-link" aria-label="Direct link to Move out an OceanBase cluster" title="Direct link to Move out an OceanBase cluster">​</a></h3>
<p>To manage an OceanBase cluster in a new OCP, you can move out the cluster from its current OCP and take it over to the new OCP. This process does not affect the business operations or data of the cluster.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>OCP Community Edition supports moving out clusters since V4.2.2.</p>
</li>
<li>
<p>An OceanBase cluster that is being maintained or upgraded cannot be moved out. You can move out only a cluster in the <code>STOPPED</code>, <code>RUNNING</code>, or <code>UNAVAILABLE</code> state. For more information about how to view the status of a cluster, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001484158" target="_blank" rel="noopener noreferrer">Query clusters</a>.</p>
</li>
<li>
<p>If no other services run on the hosts of the moved-out OceanBase cluster, we recommend that you delete the hosts after the cluster is moved out. For more information about how to delete a host, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483634" target="_blank" rel="noopener noreferrer">Remove a host</a>.</p>
</li>
</ul>
<p>For more information about how to move out an OceanBase cluster, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483755" target="_blank" rel="noopener noreferrer">Migrate a cluster</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="move-out-an-odp-cluster">Move out an ODP cluster<a href="#move-out-an-odp-cluster" class="hash-link" aria-label="Direct link to Move out an ODP cluster" title="Direct link to Move out an ODP cluster">​</a></h3>
<p>After moving out an OceanBase cluster, you can also move out the corresponding ODP cluster from OCP without affecting the business of the OceanBase cluster. The moved-out ODP cluster can be taken over to and managed by OCP again.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>OCP Community Edition supports moving out clusters since V4.2.2.</p>
</li>
<li>
<p>You can move out only an ODP cluster in the online state.</p>
</li>
<li>
<p>If no other services run on the hosts of the moved-out ODP cluster, we recommend that you delete the hosts after the cluster is moved out.</p>
</li>
</ul>
<p>For more information about how to move out an ODP cluster by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483849" target="_blank" rel="noopener noreferrer">Migrate an OBProxy cluster</a> or <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483602" target="_blank" rel="noopener noreferrer">Move out an OBProxy cluster</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="back-up-and-restore-data">Back up and restore data<a href="#back-up-and-restore-data" class="hash-link" aria-label="Direct link to Back up and restore data" title="Direct link to Back up and restore data">​</a></h2>
<p>The backup and restore service is a common disaster recovery solution of OceanBase Database. The service can implement tenant-level or cluster-level remote physical backup by using Network File system (NFS), Alibaba Cloud Object Storage Service (OSS), or Tencent Cloud Object Storage (COS) as the backup media, thereby ensuring data security. You can perform restore based on backups.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="backup-media">Backup media<a href="#backup-media" class="hash-link" aria-label="Direct link to Backup media" title="Direct link to Backup media">​</a></h3>
<p>Before backup, you first need to deploy the backup media. At present, OceanBase Database supports three types of backup media: NFS, OSS, and COS. We recommend that you use OSS as the backup destination. This is because OSS is stateless and more stable than the stateful NFS4. To use NFS as the backup destination, we recommend that you use the dedicated NFS hardware device.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>If you want to use NFS as the backup media, you need to use NFS4.1 or later. NFS3 has poor stability.</p>
</li>
<li>
<p>In a multi-node cluster environment, you must use backup media. Otherwise, you cannot perform backup. In a single-node test environment, you can perform local backup, but this brings security risks.</p>
</li>
<li>
<p>To use OSS as the backup media, make sure that OceanBase Database is of V4.1.0 or later. To use COS as the backup media, make sure that OceanBase Database is of V4.2.1 or later.</p>
</li>
<li>
<p>To use NFS as the backup media, you must deploy the NFS client on each node of the OceanBase cluster.</p>
</li>
<li>
<p>The user of the observer process must have the read and write permissions on the directories of the NFS client and server.</p>
</li>
</ul>
<p>For more information about how to deploy NFS, see <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001103535" target="_blank" rel="noopener noreferrer">Deploy NFS</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="backup">Backup<a href="#backup" class="hash-link" aria-label="Direct link to Backup" title="Direct link to Backup">​</a></h3>
<p>After you deploy the backup media, choose <strong>Backup &amp; Recovery</strong> &gt; <strong>Backup</strong> in the left-side navigation pane of the OCP console, and create a tenant-level or cluster-level backup strategy. A cluster-level backup strategy applies to all user tenants that do not have tenant-level backup strategies in the cluster. After a backup strategy is created, backup is triggered by default at 04:00 a.m. every day, rather than immediately. You can also manually initiate an immediate backup.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>If you want to manually initiate an immediate backup but <strong>Automatic Major Compaction</strong> was not selected in the backup strategy, we recommend that you manually initiate a major compaction before the backup. For more information about how to perform a major compaction, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483790" target="_blank" rel="noopener noreferrer">Perform a major compaction</a> or <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483726" target="_blank" rel="noopener noreferrer">Perform a major compaction</a>.</p>
</blockquote>
<p>The following figure shows the physical backup architecture of OceanBase Database.</p>
<p><img decoding="async" loading="lazy" alt="Data backup" src="/assets/images/001-3482397459e72f87f4990b22b3daa653.png" width="878" height="422" class="img_ev3q"></p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>Backup is supported only for user tenants, rather than the sys tenant or meta tenants.</p>
<p>For more information about meta tenants, see the <strong>Meta tenant</strong> section in <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001103752" target="_blank" rel="noopener noreferrer">Tenants</a>.</p>
</li>
<li>
<p>Backup comprises archive log backup and data backup. To back up data, you must first enable archive log backup. In other words, you cannot perform data backup only.</p>
</li>
<li>
<p>You cannot perform backup for a cluster that is being upgraded. To view the status of a cluster, click <strong>Clusters</strong> in the left-side navigation pane and then view the status of the cluster in the cluster list.</p>
</li>
<li>
<p>By default, second backup is disabled for OceanBase Database V4.x. To enable this feature, you need to change the value of the <code>ocp.backup.advanced-secondary-backup.enable</code> parameter to <code>true</code> in <strong>System Parameters</strong>.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>At present, second backup is supported only when OSS is used as the backup media.</p>
</blockquote>
<p>For more information about how to modify system parameters, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483714" target="_blank" rel="noopener noreferrer">Modify system parameters</a>.</p>
</li>
<li>
<p>After you create a backup strategy, if you want to manually initiate a backup before the automatic backup is triggered, you must select the full backup method.</p>
</li>
<li>
<p>A full data copy and an incremental data copy together constitute the complete dataset. If only one backup of the full data copy exists, the backup will not be deleted even if its retention period elapses.</p>
</li>
<li>
<p>It is prohibited to manually run the <code>rm</code> command to delete the data files that are being backed up. Doing so may cause issues such as archive log backup failures and data backup failures.</p>
</li>
<li>
<p>After you delete the backup strategy from OCP, existing files of backup data will not be deleted. If you want to delete backup data, you can manually run the <code>rm</code> command to delete the backup directory.</p>
</li>
<li>
<p>If the restorable time point is empty or you cannot specify the source tenant on the backup and restore page, it may be because that the <code>ob_admin</code> file is absent from the <code>bin</code> directory under the installation path of OceanBase Database deployed by using OBD. In this case, download <strong>OceanBase Utils</strong> from <a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer">OceanBase Download Center</a> and run the following command to decompress the package. Then, copy the <code>ob_admin</code> file in the <code>usr/bin/</code> directory to the <code>bin</code> directory under the installation path of OceanBase Database.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rpm2cpio oceanbase-ce-utils-&lt;version&gt; | cpio -idmv ./usr/bin/ob_admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>For more information about how to perform data backup, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483547" target="_blank" rel="noopener noreferrer">Backup and Recovery</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="restore">Restore<a href="#restore" class="hash-link" aria-label="Direct link to Restore" title="Direct link to Restore">​</a></h3>
<p>OceanBase Database supports tenant-level restore, which allows you to create a tenant based on the existing data backups. The restore process consists of the restore and recovery of the system tables and user tables of the tenant. Restore returns the required baseline data to the OBServer nodes of the destination tenant. Recovery returns the incremental logs generated during the backup of the baseline data to the OBServer nodes.</p>
<p>The following figure shows the physical restore architecture of OceanBase Database.</p>
<p><img decoding="async" loading="lazy" alt="Data restore" src="/assets/images/002-b61849480eb19226a1abda134ce3b1f1.png" width="876" height="420" class="img_ev3q"></p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>We recommend that the destination and source clusters be of the same database version.</p>
</li>
<li>
<p>At present, OceanBase Database allows you to restore backup data only to OceanBase Database of the same version or a later version. You cannot restore backup data from V3.x to V4.x.</p>
</li>
<li>
<p>You cannot restore backup data of a special version such as V4.0.x to V4.1.x or later. In addition, you cannot restore backup data of V4.2.x to V4.3.x.</p>
</li>
<li>
<p>If the restorable time point is empty or you cannot specify the source tenant on the restore page, it may be because that the <code>ob_admin</code> file is absent from the <code>bin</code> directory under the installation path of OceanBase Database deployed by using OBD. In this case, download <strong>OceanBase Utils</strong> from <a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer">OceanBase Download Center</a> and run the following command to decompress the package. Then, copy the <code>ob_admin</code> file in the <code>usr/bin/</code> directory to the <code>bin</code> directory under the installation path of OceanBase Database.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rpm2cpio oceanbase-ce-utils-&lt;version&gt; | cpio -idmv ./usr/bin/ob_admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>You can perform data restore in the following two ways:</p>
<ul>
<li>
<p>If you create a standby tenant to restore data, the new tenant and the source tenant, by default, form a primary/standby relationship, and data is synchronized between them. To stop synchronization, you can decouple the standby tenant from the primary tenant. For more information about how to create a standby tenant and how to decouple a standby tenant from its primary tenant, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483724" target="_blank" rel="noopener noreferrer">Create a standby tenant</a> and <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483820" target="_blank" rel="noopener noreferrer">Decouple a standby tenant from its primary tenant</a>.</p>
</li>
<li>
<p>If you choose to directly use backup files to restore data, you need to specify the restore point in time for the destination tenant, and data is not synchronized.</p>
</li>
</ul>
</li>
</ul>
<p>For more information about how to perform data restore, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483547" target="_blank" rel="noopener noreferrer">Backup and Recovery</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-a-cluster">Upgrade a cluster<a href="#upgrade-a-cluster" class="hash-link" aria-label="Direct link to Upgrade a cluster" title="Direct link to Upgrade a cluster">​</a></h2>
<p>You can upgrade the OceanBase clusters and ODP clusters managed by OCP.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-ocp">Upgrade OCP<a href="#upgrade-ocp" class="hash-link" aria-label="Direct link to Upgrade OCP" title="Direct link to Upgrade OCP">​</a></h3>
<p>Before you upgrade a cluster by using OCP, you first need to confirm whether OCP itself needs to be upgraded. Starting from OCP V4.2.0, the version of the OCP service is aligned with the version of OceanBase Database. The OCP service version must be consistent with the target version of the cluster to be upgraded. We recommend that you use the latest OCP version. You can also learn about the version upgrade dependencies based on the release notes of OCP.</p>
<p>At present, you can deploy OCP on the GUI of OBD or in a Docker container. The upgrade procedure varies depending on the deployment method.</p>
<ul>
<li>
<p>Upgrade OCP by using OBD</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>You can upgrade only OCP V4.0.3 and later by using OBD.</p>
</li>
<li>
<p>You must install a Java environment on the OCP node by using JDK 1.8, and the build version is at least 161.</p>
</li>
<li>
<p>You can use OBD to upgrade an OCP that is deployed in a Docker container. However, the container is closed during the upgrade and the OCP service is deployed again by using the RPM package. After the new OCP service is enabled, we recommend that you no longer use the Docker container to manage the OCP.</p>
</li>
<li>
<p>After you obtain the target OCP software package, we recommend that you run the <code>obd web upgrade</code> command for upgrade on the GUI of OBD.</p>
</li>
</ul>
</li>
<li>
<p>Upgrade OCP by using a Docker container</p>
<p>You can use this method to upgrade an OCP deployed either in a Docker container or with an RPM package. After the upgrade, the OCP initially deployed with RPM will transition to a container deployment. Take note the following considerations:</p>
<ul>
<li>
<p>You must first stop the Docker container before the upgrade.</p>
</li>
<li>
<p>The name of the new OCP container after the upgrade cannot be the same as that before the upgrade. Otherwise, the container cannot start.</p>
</li>
<li>
<p>To upgrade an OCP deployed with an RPM package, you first need to terminate the OCP-Server process. Then, pull the OCP image of the target version and configure the connection based on the tenant information of the original MetaDB to complete the upgrade.</p>
</li>
</ul>
</li>
</ul>
<p>For more information about how to upgrade OCP by using OBD and upgrade OCP by using a Docker container, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483962" target="_blank" rel="noopener noreferrer">Upgrade OCP on the GUI</a> and <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483963" target="_blank" rel="noopener noreferrer">Upgrade OCP using Docker containers</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-an-oceanbase-cluster">Upgrade an OceanBase cluster<a href="#upgrade-an-oceanbase-cluster" class="hash-link" aria-label="Direct link to Upgrade an OceanBase cluster" title="Direct link to Upgrade an OceanBase cluster">​</a></h3>
<p>Scenarios: Bugs in the source version need to be fixed, or new features in the target version are required.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>Before you upgrade an OceanBase cluster, you need to upload three software packages: OceanBase Database package (oceanbase-ce-*.rpm), dependency package (oceanbase-ce-libs-*.rpm), and tool integration package (oceanbase-ce-utils-*.rpm).</p>
</li>
<li>
<p>Before the upgrade, you need to verify whether the current version can be upgraded to the target version. For more information, see the upgrade notes section in the release notes of the target version. For the release notes of OceanBase Database, visit the <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001376050" target="_blank" rel="noopener noreferrer">link</a>.</p>
</li>
<li>
<p>Before the upgrade, make sure that the cluster runs properly. You can click <strong>Clusters</strong> in the left-side navigation pane of the OCP console and then view the status of the cluster in the cluster list.</p>
</li>
<li>
<p>If the cluster to be upgraded has three or more zones, we recommend that you perform a rolling upgrade, which is an online upgrade mode. Before you perform a rolling upgrade, make sure that all tenants have at least three replicas to ensure that the majority of replicas are available during the upgrade. Otherwise, the pre-upgrade check will fail.</p>
</li>
<li>
<p>Rolling upgrade is not supported for a single-zone cluster. This is because the database service is stopped during the upgrade, which affects the business. You need to apply for an upgrade window before the upgrade.</p>
</li>
<li>
<p>Note that the upgrade task cannot be rolled back after the <strong>Pre check for upgrade</strong> phase is completed. If the upgrade task fails, it is prohibited to skip or roll back the task, or change the task status to successful. This is because such operations may cause irreversible damage to the cluster and jeopardize business production. We recommend that you submit a question in the <a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer">Q&amp;A</a> section of the official website for assistance.</p>
</li>
</ul>
<p>For more information about how to upgrade an OceanBase cluster by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483529" target="_blank" rel="noopener noreferrer">Upgrade an OceanBase cluster</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-an-odp-cluster">Upgrade an ODP cluster<a href="#upgrade-an-odp-cluster" class="hash-link" aria-label="Direct link to Upgrade an ODP cluster" title="Direct link to Upgrade an ODP cluster">​</a></h3>
<p>Scenarios: Bugs in the source version need to be fixed, new features in the target version are required, or the target version is necessary for compatibility.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>When you upgrade an ODP cluster, all ODPs in the cluster are upgraded. Therefore, the cluster will stop providing services. If the current ODP cluster is providing services, we recommend that you upgrade ODPs in the cluster in batches based on the load balancing strategy.</p>
</li>
<li>
<p>When you upgrade an ODP cluster that contains ODPs with different CPU architectures, if the selected installation package version is unavailable in any of those CPU architectures, the upgrade will fail.</p>
</li>
</ul>
<p>For more information about how to upgrade an ODP cluster by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483848" target="_blank" rel="noopener noreferrer">Upgrade an OBProxy cluster</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="scale-oceanbase-database">Scale OceanBase Database<a href="#scale-oceanbase-database" class="hash-link" aria-label="Direct link to Scale OceanBase Database" title="Direct link to Scale OceanBase Database">​</a></h2>
<p>You can scale OceanBase Database horizontally or vertically. Horizontal scaling, including scale-out and scale-in, increases or decreases the number of zones to control the number of tenant replicas. Vertical scaling, including scale-up and scale-down, increases or decreases the number of OBServer nodes to control the upper limits of tenant resources. Therefore, you can perform scaling to meet the requirements for disaster recovery, performance, and O&amp;M in different business scenarios.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scale-out-or-scale-up-oceanbase-database">Scale out or scale up OceanBase Database<a href="#scale-out-or-scale-up-oceanbase-database" class="hash-link" aria-label="Direct link to Scale out or scale up OceanBase Database" title="Direct link to Scale out or scale up OceanBase Database">​</a></h3>
<p>This feature allows you to add more IDCs for OceanBase Database by using OCP, thereby providing more reliable high availability or implementing business migration. It also allows you to add OBServer nodes to existing IDCs without affecting business access.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scale-out">Scale-out<a href="#scale-out" class="hash-link" aria-label="Direct link to Scale-out" title="Direct link to Scale-out">​</a></h4>
<p>Scale-out involves adding zones. When a zone is added, OBServer nodes are assigned to it. This increases the number of replicas in the cluster but does not raise the upper limits for usage of resources, including CPU, memory, and disk capacity. For example, the maximum size of data stored on the data disk will not increase, nor will the amount of overall resources in a single zone.</p>
<p>Scenarios: A standalone cluster needs to be transformed into a distributed one, or more zones need to be added for a cluster to provide higher disaster recovery capability.</p>
<ol>
<li>
<p>Add a zone</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>Before you add a zone, verify whether the following three installation packages are displayed on the <strong>Packages</strong> page: OceanBase Database package (oceanbase-ce-*.rpm), dependency package (oceanbase-ce-libs-*.rpm), and tool integration package (oceanbase-ce-utils-*.rpm).</p>
</li>
<li>
<p>Before you add a zone, you must first add hosts. We recommend that you perform server initialization for the hosts. For more information, see &#x27;<strong>Deploy OceanBase database - Preparations before deployment</strong>&#x27;.</p>
</li>
<li>
<p>Before you add a zone, make sure that the cluster is in the <strong>Running</strong> state. You can click <strong>Clusters</strong> in the left-side navigation pane and then view the status of the cluster in the cluster list.</p>
</li>
<li>
<p>If the scale-out task fails, you can roll back the task. If the rollback fails, we recommend that you do not skip the task or change the task status to successful. We recommend that you seek help in the <a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer">Q&amp;A</a> section on the official website.</p>
</li>
<li>
<p>After a zone is added, if the primary zone is selected based on the configured priority sequence, the computing performance of the cluster will not improve. If the primary zone is randomly selected, the performance of partitioned tables may be compromised depending on the business scenario. For example, after the scale-out, the partitions of a partitioned table will be distributed across more nodes. This means the number of partitions per node decreases, which increases computing speed. However, the network I/O may rise due to access across more nodes.</p>
</li>
</ul>
<p>For more information about how to add a zone by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483770" target="_blank" rel="noopener noreferrer">Add a zone</a>.</p>
</li>
<li>
<p>Add a tenant replica</p>
<p>After a zone is added, a replica will not be automatically added for the tenant. You need to go to the <strong>Tenants</strong> page, select the tenant, and add a replica for the tenant. For more information, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483744" target="_blank" rel="noopener noreferrer">Add a replica</a>.</p>
<p>Take note of the following considerations:</p>
<ol>
<li>
<p>If the cluster version is OceanBase Database V4.0.0 or later but earlier than V4.2.0, you can add only full-featured replicas.</p>
</li>
<li>
<p>If the cluster version is OceanBase Database V4.2.0 or later, you can add only full-featured replicas and read-only replicas.</p>
</li>
<li>
<p>When you upgrade the unit config, make sure that the log disk size is three to four times the memory size.</p>
</li>
</ol>
</li>
</ol>
<p>For more information about how to perform a scale-out by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483599" target="_blank" rel="noopener noreferrer">Expand the high availability of OceanBase clusters and tenants</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scale-up">Scale-up<a href="#scale-up" class="hash-link" aria-label="Direct link to Scale-up" title="Direct link to Scale-up">​</a></h4>
<p>Scale-up involves adding OBServer nodes to existing zones. This can increase the upper limits for usage of zone resources, including CPU, memory, and disk capacity, and improve the computing capability of the cluster. For example, if you scale up a cluster deployed with the 1-1-1 architecture to the 2-2-2 architecture, the amount of overall resources in a single zone will increase, and the computing capability will also improve.</p>
<p>Scenarios: The cluster performance reaches a bottleneck or the size of stored data reaches the threshold.</p>
<ol>
<li>
<p>Add an OBServer node</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>Before you add an OBServer node, make sure that the host of the node uses the same hardware architecture as the cluster, such as the CPU architecture.</p>
</li>
<li>
<p>Before you add an OBServer node, you must first add a host. We recommend that you perform server initialization for the host and make sure that the node to be added uses the same resource configurations as existing nodes in the cluster. For more information, see &#x27;<strong>Deploy OceanBase database - Preparations before deployment</strong>&#x27;.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>When you add an OBServer node to an OceanBase cluster in the OCP console, the node will be initialized. We recommend that you manually configure the node based on the configurations of existing nodes in the cluster to avoid errors.</p>
</blockquote>
</li>
<li>
<p>Before you add an OBServer node, verify whether the following three installation packages are displayed on the <strong>Packages</strong> page: OceanBase Database package (oceanbase-ce-*.rpm), dependency package (oceanbase-ce-libs-*.rpm), and tool integration package (oceanbase-ce-utils-*.rpm).</p>
</li>
<li>
<p>Before you add an OBServer node, make sure that the cluster is in the <strong>Running</strong> state. You can click <strong>Clusters</strong> in the left-side navigation pane and then view the status of the cluster in the cluster list.</p>
</li>
<li>
<p>If the task for adding an OBServer node fails, you can roll back the task. If the rollback fails, we recommend that you do not skip the task or change the task status to successful. We recommend that you submit a question in the <a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer">Q&amp;A</a> section of the official website for assistance.</p>
</li>
</ul>
<p>For more information about how to add an OBServer node by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483766" target="_blank" rel="noopener noreferrer">Add an OBServer node</a>.</p>
</li>
<li>
<p>Increase the number of resource units of a tenant</p>
<p>After an OBServer node is added, data in the tenant will not be automatically distributed to the new node. You need to go to the <strong>Tenants</strong> page, select the tenant, and modify the number of units. For more information, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483743" target="_blank" rel="noopener noreferrer">Edit a tenant replica in a zone</a>. After the number of units is increased, the tenant can use more OBServer nodes in the same zone. In this case, a resource pool with the same configuration as the existing nodes in the zone is created on the newly added OBServer node. Then, data in the tenant can be distributed to the new node.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>In OceanBase Database V4.0 and later, the number of units in each zone of a tenant must be the same. For example, for a cluster deployed with the 2-2-1 or 2-1-1 architecture, you cannot set the number of units of the tenant to <code>2</code>. You can set the number of units to <code>2</code> only in the 2-2-2 architecture.</p>
</li>
<li>
<p>If the version of the cluster of a user tenant is OceanBase Database V4.2.0 or later and the tenant parameter <code>enable_rebalance</code> is set to <code>false</code>, you cannot change the number of units for zones.</p>
</li>
<li>
<p>The number of units in a zone cannot be larger than that of OBServer nodes in the same zone.</p>
</li>
<li>
<p>Before you increase the number of units for a tenant, make sure that both the cluster and tenant are in the <strong>Running</strong> state. You can click <strong>Clusters</strong> in the left-side navigation pane and then view the status of the cluster in the cluster list. You can click <strong>Tenants</strong> in the left-side navigation pane and then view the status of the tenant in the tenant list.</p>
</li>
<li>
<p>If the task for increasing the number of units fails, we recommend that you do not roll back the task, as this will not automatically restore the tenant to the original unit specifications. Additionally, do not skip the task or change the task status to successful. Instead, we recommend that you submit a question in the <a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer">Q&amp;A</a> section of the official website for assistance.</p>
</li>
</ul>
</li>
</ol>
<p>For more information about how to perform a scale-up by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483594" target="_blank" rel="noopener noreferrer">Scale out an OceanBase cluster and scale up an OceanBase Database tenant</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scale-in-or-scale-down-oceanbase-database">Scale in or scale down OceanBase Database<a href="#scale-in-or-scale-down-oceanbase-database" class="hash-link" aria-label="Direct link to Scale in or scale down OceanBase Database" title="Direct link to Scale in or scale down OceanBase Database">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scale-in">Scale-in<a href="#scale-in" class="hash-link" aria-label="Direct link to Scale-in" title="Direct link to Scale-in">​</a></h4>
<p>Scale-in involves reducing the number of tenant replicas and deleting corresponding zones and OBServer nodes in these zones. When you need to release hardware resources or reduce zones of a cluster for maintenance purposes, you can perform a scale-in.</p>
<ol>
<li>
<p>Delete a replica</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>Before you delete a replica of a tenant, make sure that the tenant and its OceanBase cluster are in the <strong>Running</strong> state. You can click <strong>Clusters</strong> in the left-side navigation pane and then view the status of the cluster in the cluster list. You can click <strong>Tenants</strong> in the left-side navigation pane and then view the status of the tenant in the tenant list.</p>
</li>
<li>
<p>Before you delete a replica of a tenant, make sure that the remaining replicas after the deletion are still the majority. In other words, you can delete only one replica of a tenant with three replicas.</p>
</li>
<li>
<p>Before you delete a replica of a tenant, we recommend that you switch the leader role to another replica by modifying the primary zone of the tenant to ensure that the business is not affected after the replica is deleted. For more information about how to modify the primary zone of a tenant, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483521" target="_blank" rel="noopener noreferrer">Modify zone priorities</a>.</p>
</li>
</ul>
<p>For more information about how to delete a replica by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483745" target="_blank" rel="noopener noreferrer">Delete a tenant replica from a zone</a>.</p>
</li>
<li>
<p>Delete a zone</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>Before you delete a zone, make sure that the cluster is in the <strong>Running</strong> state. You can click <strong>Clusters</strong> in the left-side navigation pane and then view the status of the cluster in the cluster list.</p>
</li>
<li>
<p>Before you delete a zone, make sure that the zone does not contain any tenant replicas.</p>
</li>
<li>
<p>If the task for deleting a zone fails, you can roll back the task. If the rollback fails, we recommend that you do not skip the task or change the task status to successful. We recommend that you submit a question in the <a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer">Q&amp;A</a> section of the official website for assistance.</p>
</li>
</ul>
<p>For more information about how to delete a zone by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483771" target="_blank" rel="noopener noreferrer">Delete a zone</a>.</p>
</li>
</ol>
<p>For more information about how to perform a scale-in by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483593" target="_blank" rel="noopener noreferrer">Reduce the high availability of OceanBase clusters and tenants</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scale-down">Scale-down<a href="#scale-down" class="hash-link" aria-label="Direct link to Scale-down" title="Direct link to Scale-down">​</a></h4>
<p>Scale-down involves deleting OBServer nodes from existing zones. You must first reduce the number of units of the tenant and then delete the corresponding OBServer nodes.</p>
<ol>
<li>
<p>Reduce the number of units of a tenant</p>
<p>When you need to reduce the number of OBServer nodes in a cluster or release cluster resources for other tenants, you can reduce the number of units of a tenant, allowing the tenant to use fewer OBServer nodes in the same zone. This process will randomly select an OBServer node in a zone, migrate the data on this node to another node in the same zone, and delete the resource pool on the node to be removed to release resources such as the CPU and memory. The space for the data disk and transaction log disk is preallocated and is not affected.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>Before you reduce the number of units for a tenant, make sure that both the cluster and tenant are in the <strong>Running</strong> state. You can click <strong>Clusters</strong> in the left-side navigation pane and then view the status of the cluster in the cluster list. You can click <strong>Tenants</strong> in the left-side navigation pane and then view the status of the tenant in the tenant list.</p>
</li>
<li>
<p>Before you reduce the number of units for a tenant, we recommend that you perform a major compaction to release the occupied memory resources, thereby improving the scale-down efficiency. For more information about how to perform a major compaction, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483790" target="_blank" rel="noopener noreferrer">Perform a major compaction</a>.</p>
</li>
<li>
<p>Before you reduce the number of units for a tenant, make sure that the available disk resources on the remaining OBServer nodes are sufficient for storing data in the tenant.</p>
</li>
<li>
<p>If you want to delete a specified OBServer node, you first need to migrate units on this node to another node. For more information, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483785" target="_blank" rel="noopener noreferrer">View the unit distribution</a>.</p>
</li>
<li>
<p>If the version of the cluster of a user tenant is OceanBase Database V4.2.0 or later and the tenant parameter <code>enable_rebalance</code> is set to <code>false</code>, you cannot change the number of units for zones.</p>
</li>
<li>
<p>For a multi-zone cluster, if the cluster version is OceanBase Database V4.0.0 or later, you cannot reduce the number of units for a single zone, and only full-featured replicas are supported. For example, you can scale down a cluster or tenant with the 2-2-2 architecture only to the 1-1-1 architecture, rather than the 2-1-1 or 2-2-1 architecture.</p>
</li>
<li>
<p>If the task for reducing the number of units fails, we recommend that you do not roll back the task, skip the task, or change the task status to successful. We recommend that you submit a question in the <a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer">Q&amp;A</a> section of the official website for assistance.</p>
</li>
</ul>
<p>For more information about how to reduce the number of units for a tenant by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483743" target="_blank" rel="noopener noreferrer">Edit a tenant replica in a zone</a>.</p>
</li>
<li>
<p>Delete an OBServer node</p>
<p>You can delete an OBServer node from an existing zone to release server resources. For example, you can scale down a cluster with the 2-2-2 architecture to the 1-1-1, 2-1-1, or 2-2-1 architecture. We recommend that you delete the same number of OBServer nodes from each zone to ensure that resources are equally distributed among zones. Specifically, we recommend that you scale down a cluster to the N-N-N architecture.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>Before you delete an OBServer node, make sure that the cluster is in the <strong>Running</strong> state. You can click <strong>Clusters</strong> in the left-side navigation pane and then view the status of the cluster in the cluster list.</p>
</li>
<li>
<p>Before you delete an OBServer node, make sure that the units on the OBServer node to be deleted have been migrated. You can view the corresponding unit migration task for confirmation.</p>
</li>
<li>
<p>If the task for deleting an OBServer node fails, we recommend that you do not skip the task or change the task status to successful. We recommend that you submit a question in the <a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer">Q&amp;A</a> section of the official website for assistance.</p>
</li>
</ul>
<p>For more information about how to delete an OBServer node by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483763" target="_blank" rel="noopener noreferrer">Delete an OBServer</a>.</p>
</li>
</ol>
<p>For more information about how to perform a scale-down by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483597" target="_blank" rel="noopener noreferrer">Scale in an OceanBase cluster and scale down an OceanBase Database tenant</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="replace-an-observer-node">Replace an OBServer node<a href="#replace-an-observer-node" class="hash-link" aria-label="Direct link to Replace an OBServer node" title="Direct link to Replace an OBServer node">​</a></h2>
<p>You can use this feature when an OBServer node in cluster with three or more replicas encounters a fault such as a server startup failure or hardware fault, or when parameters are improperly set for a cluster with three or more replicas but you cannot reinstall the cluster. For example, if the space preallocated to the data disk is excessively large, you can replace the OBServer node to avoid potential risks caused by node faults, thereby implementing high cluster availability, business stability, and high O&amp;M efficiency.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="idle-servers-available">Idle servers available<a href="#idle-servers-available" class="hash-link" aria-label="Direct link to Idle servers available" title="Direct link to Idle servers available">​</a></h3>
<p>Scenarios: An OBServer node in a cluster becomes faulty due to external factors and cannot resume within a short period of time, while an idle server is available.</p>
<p>Take note of the following considerations:</p>
<ul>
<li>
<p>Make sure that the cluster is available. In other words, you can properly access tenants in the cluster.</p>
</li>
<li>
<p>The idle server must use the same hardware architecture as the current cluster, and the host must be in the same IDC as the original host.</p>
</li>
<li>
<p>The software and hardware resources of the idle server, such as the CPU, memory, and disk capacity, must be equal to or greater than those of the faulty node, especially the disk capacity.</p>
</li>
<li>
<p>Before you replace an OBServer node, you must first add a host. We recommend that you perform server initialization for the host. For more information, see &#x27;<strong>Deploy OceanBase database - Preparations before deployment</strong>&#x27;.</p>
</li>
<li>
<p>Before you replace an OBServer node, make sure that the software packages of OceanBase Database and OCP-Agent are displayed on the <strong>Packages</strong> page, and that the versions are consistent with those of the source cluster.</p>
</li>
<li>
<p>During the replacement, if the faulty OBServer node is offline, you need to choose to skip the host maintenance step as prompted.</p>
</li>
<li>
<p>If the replacement task fails, we recommend that you do not skip the task or change the task status to successful. We recommend that you submit a question in the <a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer">Q&amp;A</a> section of the official website for assistance.</p>
</li>
<li>
<p>If both the OceanBase Database service and the ODP service are deployed on the faulty node, you need to re-deploy the ODP service on the new node. For more information about how to add an ODP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483600" target="_blank" rel="noopener noreferrer">Scale out an OBProxy cluster</a>.</p>
</li>
</ul>
<p>For more information about how to replace an OBServer node by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483582" target="_blank" rel="noopener noreferrer">Troubleshoot host issues in an OceanBase cluster</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="idle-servers-unavailable">Idle servers unavailable<a href="#idle-servers-unavailable" class="hash-link" aria-label="Direct link to Idle servers unavailable" title="Direct link to Idle servers unavailable">​</a></h3>
<p>If no idle server is available, a faulty OBServer node may pose hidden risks. For example, the cluster may enter the maintaining state. In this case, some O&amp;M operations performed by OCP on the cluster may fail. If you must perform such O&amp;M operations, such as cluster upgrade, certain risks may arise after emergency recovery. For example, after the emergency recovery process removes the faulty node, high availability may not be ensured or cluster performance may degrade.</p>
<p>Scenarios: The observer process on the faulty node is online, and the risks to business performance or cluster high availability are acceptable.</p>
<p>When an OBServer node becomes faulty and no idle server is available, troubleshoot the issue as follows:</p>
<ul>
<li>
<p>If the server fault can be resolved within a short period of time, modify the <code>server_permanent_offline_time</code> parameter and then stop the observer process. Evaluate the parameter value based on the time required to resolve the server fault.</p>
</li>
<li>
<p>If the server fault cannot be resolved within a short period of time and the cluster contains multiple zones, each with multiple OBServer nodes (for example, in a 2-2-2 architecture), you can manually migrate the units from the faulty node to other nodes in the same zone and then delete the faulty OBServer node, provided that the remaining OBServer nodes have sufficient resources to accommodate the migrated units.</p>
</li>
<li>
<p>If the server fault cannot be resolved within a short period of time and the cluster contains multiple zones, each with only one OBServer node, you can scale in the cluster.</p>
</li>
</ul>
<p>For more information about how to replace an OBServer node by using OCP, see <a href="https://en.oceanbase.com/docs/common-ocp-10000000001483582" target="_blank" rel="noopener noreferrer">Troubleshoot host issues in an OceanBase cluster</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/01_o_m_by_ocp.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/user_manual/quick_starts_and_hands_on_practices_in_english/chapter_05_operation_and_maintenance/o_m_by_obd"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Perform O&amp;M by using OBD</div></a></nav><div>Loading...</div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#take-over-a-cluster" class="table-of-contents__link toc-highlight">Take over a cluster</a><ul><li><a href="#take-over-an-oceanbase-cluster" class="table-of-contents__link toc-highlight">Take over an OceanBase cluster</a></li><li><a href="#take-over-an-odp-cluster" class="table-of-contents__link toc-highlight">Take over an ODP cluster</a></li></ul></li><li><a href="#move-out-a-cluster" class="table-of-contents__link toc-highlight">Move out a cluster</a><ul><li><a href="#move-out-an-oceanbase-cluster" class="table-of-contents__link toc-highlight">Move out an OceanBase cluster</a></li><li><a href="#move-out-an-odp-cluster" class="table-of-contents__link toc-highlight">Move out an ODP cluster</a></li></ul></li><li><a href="#back-up-and-restore-data" class="table-of-contents__link toc-highlight">Back up and restore data</a><ul><li><a href="#backup-media" class="table-of-contents__link toc-highlight">Backup media</a></li><li><a href="#backup" class="table-of-contents__link toc-highlight">Backup</a></li><li><a href="#restore" class="table-of-contents__link toc-highlight">Restore</a></li></ul></li><li><a href="#upgrade-a-cluster" class="table-of-contents__link toc-highlight">Upgrade a cluster</a><ul><li><a href="#upgrade-ocp" class="table-of-contents__link toc-highlight">Upgrade OCP</a></li><li><a href="#upgrade-an-oceanbase-cluster" class="table-of-contents__link toc-highlight">Upgrade an OceanBase cluster</a></li><li><a href="#upgrade-an-odp-cluster" class="table-of-contents__link toc-highlight">Upgrade an ODP cluster</a></li></ul></li><li><a href="#scale-oceanbase-database" class="table-of-contents__link toc-highlight">Scale OceanBase Database</a><ul><li><a href="#scale-out-or-scale-up-oceanbase-database" class="table-of-contents__link toc-highlight">Scale out or scale up OceanBase Database</a></li><li><a href="#scale-in-or-scale-down-oceanbase-database" class="table-of-contents__link toc-highlight">Scale in or scale down OceanBase Database</a></li></ul></li><li><a href="#replace-an-observer-node" class="table-of-contents__link toc-highlight">Replace an OBServer node</a><ul><li><a href="#idle-servers-available" class="table-of-contents__link toc-highlight">Idle servers available</a></li><li><a href="#idle-servers-unavailable" class="table-of-contents__link toc-highlight">Idle servers unavailable</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">SIG</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sig/AI/sig_intro">AI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/cloud-native/sig_intro">cloud-native</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/compilation/sig_intro">compilation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/develop-tools/sig_intro">develop-tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/miniob/sig_intro">MiniOB</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/obdiag/sig_intro">obdiag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/operation/sig_intro">operation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://en.oceanbase.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About OceanBase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blogs/arch/all-in-one">Blogs</a></li><li class="footer__item"><a href="https://github.com/oceanbase/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-user_manual/user_best_practices/performance_tuning/index_optimize" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">SQL 性能调优 —— 索引调优 | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/docs/user_manual/user_best_practices/performance_tuning/index_optimize"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="SQL 性能调优 —— 索引调优 | OceanBase"><meta data-rh="true" name="description" content="&amp;emsp;&amp;emsp;调优相关的内容主要分为三个部分：索引调优、连接（join）方式调优、综合调优实践。这篇内容是最简单、最基础，同时也最常用的“索引调优”。"><meta data-rh="true" property="og:description" content="&amp;emsp;&amp;emsp;调优相关的内容主要分为三个部分：索引调优、连接（join）方式调优、综合调优实践。这篇内容是最简单、最基础，同时也最常用的“索引调优”。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/docs/user_manual/user_best_practices/performance_tuning/index_optimize"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/user_best_practices/performance_tuning/index_optimize" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/user_best_practices/performance_tuning/index_optimize" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6JQM9QDU5V-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7e3a93fe.css">
<script src="/assets/js/runtime~main.8496619a.js" defer="defer"></script>
<script src="/assets/js/main.2e7b64bf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a class="navbar__item navbar__link" href="/docs/blogs/arch/all-in-one">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Product Docs</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">User Manual</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Developer Manual</a></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><span><li><a class="dropdown__link" href="/docs/sig/overview/list">Special Interest Group(SIG)</a></li></span><span><li><a class="dropdown__link" href="/docs/honor/overview">Community Honors</a></li></span><span><li><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="dropdown__link">Slack<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum (in Chinese)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Data + AI</a><ul class="dropdown__menu"><span><li><a href="https://oceanbase-devhub.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Devhub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><div style="padding: 0.25rem 0.5rem; font-size: 14px; color: #4e7ff1;">AI Workshops</div></li></span><span><li><a href="https://oceanbase-devhub.github.io/ai-workshop-2024" target="_blank" rel="noopener noreferrer" class="dropdown__link">RAG Bot<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/dify/dify@oceanbase-workshop" target="_blank" rel="noopener noreferrer" class="dropdown__link">Dify (MySQL Compatible)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/DB-GPT/docker/compose_examples/ob_dbgpt_tutorial" target="_blank" rel="noopener noreferrer" class="dropdown__link">DB-GPT<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/user_best_practices/about_oceanbase/overall_architecture">About OceanBase</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/user_best_practices/deploy_oceanbase/deploy_method">Deploy Oceanbase</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/user_best_practices/deploy_tools/deploy_obd">Deploy Tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/user_best_practices/data_migration/canal">Data Migration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/user_best_practices/operation_maintenance/cluster_resource_upgrade">Operation Maintenance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/user_manual/user_best_practices/performance_tuning/comprehensive_sql_optimize">Performance Tuning</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/user_best_practices/performance_tuning/comprehensive_sql_optimize">SQL 性能调优 —— 调优综合实践</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/user_best_practices/performance_tuning/explain">执行计划</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/user_manual/user_best_practices/performance_tuning/index_optimize">SQL 性能调优 —— 索引调优</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/user_best_practices/performance_tuning/join_optimize">SQL 性能调优 —— 连接（JOIN）方式调优</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/user_best_practices/performance_tuning/sql_audit">SQL 审计视图</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/user_best_practices/trouble_shooting/collection_stack">Trouble Shooting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/user_best_practices/development_practice/development_specification">Development Practice</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/user_best_practices/solutions/high_availability_scenario">Solutions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/user_best_practices/FAQ/all_faq">FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/user_best_practices/appendix/obtest_config">Appendix</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Performance Tuning</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">SQL 性能调优 —— 索引调优</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><p>  调优相关的内容主要分为三个部分：索引调优、连接（join）方式调优、综合调优实践。这篇内容是最简单、最基础，同时也最常用的“索引调优”。</p>
<p>  这篇文章不涉及 OceanBase 改写、优化和执行的内核代码实现，也不涉及一条 SQL 从 parser、resolver 到计算出最终结果的相关原理。<strong>只有数据库使用者最为关心的调优实践内容。</strong></p>
<p>  阅读前建议先去了解一下在 OB 中如何通过 explain 阅读执行计划，例如可以先阅读一下庆涛写的这一系列博客：<a href="https://open.oceanbase.com/blog/1100214" target="_blank" rel="noopener noreferrer">https://open.oceanbase.com/blog/1100214</a>。因为本篇博客涉及到的计划都超级简单，靠猜也能猜个八九不离十，所以如果实在懒得去了解 explain，也是 OK 的。</p>
<a name="YCtcI"></a>
<header><h1>索引调优</h1></header>
<p>  当我们发现某一条 SQL 存在性能问题时，我们可以通过很多方式对这条 SQL 进行优化，其中最常见的是索引调优。索引调优通过为数据表创建合适的索引来达到减少数据扫描量，消除排序等目的。索引调优是一种比较简单的调优方式，也是 SQL 出现性能问题时通常在第一时间考虑的优化方式。在单表扫描场景下创建一个合适的索引往往可以极大地提高 SQL 的执行性能。<br>  所以在建索引前，我们需要考虑是否有必要建索引、应该在哪些列  上建索引、索引列的顺序应该怎样安排。接下来就会记录下 OceanBase 中索引的一些基础知识，以及创建合适的索引的方法。</p>
<a name="ABZf2"></a>
<h1>OceanBase 索引的基础知识</h1>
<p>  <strong>OceanBase 的索引中除了有索引键，还会包含主表的主键。</strong>因为在使用索引的时候，需要通过主表的主键去关联索引中的某一行与主表中的某一行。也就意味着索引表中需要包含主表的主键才能去反向查找定位主表中的具体某一行（OceanBase 中常把这个操作叫做索引回表），因此需要把主表的主键加到索引表里面。<br>  我们可以简单做一个实验看下，创建一个索引叫 idx_b。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create table test(a int primary key, b int, c int, key idx_b(b));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  再去 oceanbase.__all_column 中查询一下这个索引有哪些列，可以看到虽然这个索引创建在 b 列上，但是这个索引中还包含了主表的主键列 a 列。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">select</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  column_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  column_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rowkey_position,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  index_position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  oceanbase.__all_column</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  table_id = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    select</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      table_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      oceanbase.__all_table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      data_table_id = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        select</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          table_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          oceanbase.__all_table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        where</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          table_name = &#x27;test&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------+-------------+-----------------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| column_id | column_name | rowkey_position | index_position |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------+-------------+-----------------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        16 | a           |               2 |              0 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        17 | b           |               1 |              1 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------+-------------+-----------------+----------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 rows in set (0.045 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="QFWl5"></a>
<h1>索引的几个作用</h1>
<p>查询时走索引相对于走主表有三个优势：</p>
<ol>
<li>可以根据索引列的条件去快速定位数据，来减少数据的扫描量。</li>
<li>索引列是有序的，可以利用此特性消掉一些排序操作。</li>
<li>索引一般比主表小，如果过滤条件的过滤性好或者查询的列数较少，可以少扫描一些数据。</li>
</ol>
<a name="VqjuI"></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="快速定位数据">快速定位数据<a href="#快速定位数据" class="hash-link" aria-label="Direct link to 快速定位数据" title="Direct link to 快速定位数据">​</a></h2>
<p>  索引的第一个优势是快速定位数据。可以将索引列上的过滤条件转化成索引扫描的开始位置和结束位置。在实际扫描的时候，只需要从开始位置一直扫描到结束位置，两个位置之间的数据就是满足索引列上的过滤条件的数据。扫描的开始位置到结束位置称为 query range。<strong>这里需要记住的一个重要规则就是：索引可以从开头匹配多个等值谓词，直到匹配到第一个范围谓词为止。</strong><br>  举个例子，在 test 表上有个索引 b、c， 按照前文提到的内容，其实它是 b、c、a 的索引，因为 a 是主键。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create table test(a int primary key, b int, c int, d int, key idx_b_c(b, c));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  接下来执行几条 SQL，看看这些 SQL 能否充分利用这个索引。<br>  下面这条 SQL 有一个 b=1 的过滤条件，对应的 query range 是 (1,MIN,MIN ; 1,MAX,MAX)。即要从 b=1，c=min，a=min 向量点开始，一直扫到 b=1， c=max，a=max 向量点。这两个向量点之间所有数据都满足 b=1条件，不需要再使用 b=1 过滤条件去过滤。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test idx_b_c)*/ * from test where b = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =========================================================                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR        |NAME         |EST.ROWS|EST.TIME(us)|                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ---------------------------------------------------------                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |TABLE RANGE SCAN|test(idx_b_c)|1       |5           |                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =========================================================                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.a], [test.b], [test.c], [test.d]), filter(nil), rowset=256 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.a], [test.b], [test.c], [test.d]), partitions(p0)          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=true, is_global_index=false,                              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.c], [test.a]), range(1,MIN,MIN ; 1,MAX,MAX),  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_cond([test.b = 1])                                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  下面这条 SQL 有一个 b &gt; 1 的过滤条件，和上面那条 SQL 类似，不赘述。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test idx_b_c)*/ * from test where b &gt; 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =========================================================                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR        |NAME         |EST.ROWS|EST.TIME(us)|                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ---------------------------------------------------------                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |TABLE RANGE SCAN|test(idx_b_c)|1       |5           |                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =========================================================                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.a], [test.b], [test.c], [test.d]), filter(nil), rowset=256   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.a], [test.b], [test.c], [test.d]), partitions(p0)            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=true, is_global_index=false,                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.c], [test.a]), range(1,MAX,MAX ; MAX,MAX,MAX),  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_cond([test.b &gt; 1])                                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  下面这条 SQL 的过滤条件是 b=1，c&gt;1，对应的 query range 是 (1,1,MAX ; 1,MAX,MAX)，range_cond 是 ([test.b = 1], [test.c &gt; 1])，因为第一个谓词是等值条件 b = 1，所以索引还会继续向后匹配，直到出现第一个范围条件 c &gt; 1。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select/*+index(test idx_b_c)*/ * from test where b = 1 and c &gt; 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =========================================================                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR        |NAME         |EST.ROWS|EST.TIME(us)|                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ---------------------------------------------------------                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |TABLE RANGE SCAN|test(idx_b_c)|1       |5           |                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =========================================================                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.a], [test.b], [test.c], [test.d]), filter(nil), rowset=256 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.a], [test.b], [test.c], [test.d]), partitions(p0)          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=true, is_global_index=false,                              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.c], [test.a]), range(1,1,MAX ; 1,MAX,MAX),    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_cond([test.b = 1], [test.c &gt; 1])                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12 rows in set (0.041 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  下面这条 SQL 的过滤条件是 b&gt;1，c&gt;1。<strong>query range 在索引上抽 range 的时候，只能抽到第一个范围谓词为止。</strong>比如说这里 b&gt;1,c&gt;1，发现索引的第一列就被用来当范围谓词了，那么往后再出现任何的等值条件或范围条件，都不能再抽取 range。因此，此 SQL 对应的 query range 是 (1,MAX,MAX ; MAX,MAX,MAX)，因为这里是用两个向量点去描述起始和结束位置，然而两个向量点是无法精确地描述出多个范围条件的。看下面计划中 range_cond 是 ([test.b &gt; 1])，表明这条 SQL 在索引上也只完成了 b &gt; 1 这个条件的过滤，索引回表（is_index_back=true）之后，还需要再对 c &gt; 1 进行一次过滤（filter([test.c &gt; 1])）。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test idx_b_c)*/ * from test where b &gt; 1 and c &gt; 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =========================================================                              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR        |NAME         |EST.ROWS|EST.TIME(us)|                              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ---------------------------------------------------------                              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |TABLE RANGE SCAN|test(idx_b_c)|1       |3           |                              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =========================================================                              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.a], [test.b], [test.c], [test.d]), filter([test.c &gt; 1]), rowset=256 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.a], [test.b], [test.c], [test.d]), partitions(p0)                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=true, is_global_index=false, filter_before_indexback[true],        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.c], [test.a]), range(1,MAX,MAX ; MAX,MAX,MAX),         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_cond([test.b &gt; 1])                                                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="KTz7c"></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="消除排序的开销">消除排序的开销<a href="#消除排序的开销" class="hash-link" aria-label="Direct link to 消除排序的开销" title="Direct link to 消除排序的开销">​</a></h2>
<p><strong>索引本身是有序的，可以利用此特性来消除排序的开销。</strong><br>  下面举几个简单的例子：<br>  还 是先创建一张表。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create table test(a int primary key, b int, c int, d int, key idx_b_c_d(b, c, d));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  下面这条 SQL 是 b=1 order by c。 这条 SQL 用到了索引 idx_b_c_d，在计划中可以看到只有 table scan 算子而没有 sort 算子，说明索引回表后不需要再对 c 列进行排序。因为索引是按照 b、c、d、a 有序，但在扫描结果中，b 是一个常量 1，那么返回数据本身就是按照 c、d、a 有序的， order by c 自然也就不需要通过 sort 算子进行排序了。注意这里 is_index_back=false 说明索引扫描完成之后不需要回表，直接就可以输出结果，因为索引里已经包含了所查询的所有列。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test idx_b_c_d)*/ * from test where b = 1 order by c;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ===========================================================                                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR        |NAME           |EST.ROWS|EST.TIME(us)|                                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -----------------------------------------------------------                                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |TABLE RANGE SCAN|test(idx_b_c_d)|1       |2           |                                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ===========================================================                                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                                              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                                           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.a], [test.b], [test.c], [test.d]), filter(nil), rowset=256                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.a], [test.b], [test.c], [test.d]), partitions(p0)                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false,                                               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.c], [test.d], [test.a]), range(1,MIN,MIN,MIN ; 1,MAX,MAX,MAX),  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_cond([test.b = 1])                                                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  下面这条 SQL 就需要排序了。这里多了一个 or，看计划会通过索引去扫描出两批数据（因为 range 有两个 (1,MIN,MIN,MIN ; 1,MAX,MAX,MAX) 和 (2,MIN,MIN,MIN ; 2,MAX,MAX,MAX)），虽然两批数据内部都是有序的，但是两批数据之间却是无序的，所以在 table scan 上层还会再分配一个 sort 算子用于对 c 列进行排序。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test idx_b_c_d)*/ * from test where b = 1 or b = 2 order by c;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------------------------------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                                                                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------------------------------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =============================================================                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR          |NAME           |EST.ROWS|EST.TIME(us)|                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------------------------------                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |SORT              |               |1       |2           |                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |1 |└─TABLE RANGE SCAN|test(idx_b_c_d)|1       |2           |                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =============================================================                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                                                                               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                                                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.a], [test.b], [test.c], [test.d]), filter(nil), rowset=256                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       sort_keys([test.c, ASC])                                                                                                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   1 - output([test.a], [test.b], [test.c], [test.d]), filter(nil), rowset=256                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.a], [test.b], [test.c], [test.d]), partitions(p0)                                                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false,                                                                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.c], [test.d], [test.a]), range(1,MIN,MIN,MIN ; 1,MAX,MAX,MAX), (2,MIN,MIN,MIN ; 2,MAX,MAX,MAX),  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_cond([test.b = 1 OR test.b = 2])                                                                                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------------------------------------------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  这条 SQL 与第一条类似，同理，也不需要排序。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test idx_b_c_d)*/ * from test where b = 1 and c = 2 order by c;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ===========================================================                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR        |NAME           |EST.ROWS|EST.TIME(us)|                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -----------------------------------------------------------                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |TABLE RANGE SCAN|test(idx_b_c_d)|1       |2           |                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ===========================================================                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                                          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.a], [test.b], [test.c], [test.d]), filter(nil), rowset=256               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.a], [test.b], [test.c], [test.d]), partitions(p0)                        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false,                                           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.c], [test.d], [test.a]), range(1,2,MIN,MIN ; 1,2,MAX,MAX),  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_cond([test.b = 1], [test.c = 2])                                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  下面这条 SQL 里的 c 是一个常量，索引是按照 b、c、d、a 有序的。因此，如果要求按照 b、d 去排序，直接在索引表上利用 c = 1 这个过滤条件（filter([test.c = 1])）查询就好了。<br>  例如索引中 b 列有两个不同的值 1 和 2，那么利用 c = 1 这个过滤条件过滤之后，会返回索引上两批离散的数据，一批数据是 b = 1，c = 1，d、a，另一批数据是 b = 2，c = 1，d、a，这两批数据虽然在索引上可能是离散的，但是各批数据内，以及各批数据间，都是有序的，所以 就不需要通过再分配 sort 算子去进行排序了。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test idx_b_c_d)*/ * from test where c = 1 order by b, d;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                                                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ==========================================================                                                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR       |NAME           |EST.ROWS|EST.TIME(us)|                                                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ----------------------------------------------------------                                                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |TABLE FULL SCAN|test(idx_b_c_d)|1       |2           |                                                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ==========================================================                                                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                                                           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                                                        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.a], [test.b], [test.c], [test.d]), filter([test.c = 1]), rowset=256                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.a], [test.c], [test.b], [test.d]), partitions(p0)                                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false, filter_before_indexback[false],                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.c], [test.d], [test.a]), range(MIN,MIN,MIN,MIN ; MAX,MAX,MAX,MAX)always true |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------------------------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="QUbNn"></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="查询指定列时相比主表可以扫描更少的数据">查询指定列时，相比主表可以扫描更少的数据<a href="#查询指定列时相比主表可以扫描更少的数据" class="hash-link" aria-label="Direct link to 查询指定列时，相比主表可以扫描更少的数据" title="Direct link to 查询指定列时，相比主表可以扫描更少的数据">​</a></h2>
<p>  这点比较好理解，例如一张大宽表，有 100 个列，OB 目前（截止到 2023.10.16）还只有行存（列存预计在 4.3 版本会支持）。如果经常要查询其中一个列，最好在这个列上创建索引，索引一般只会包含少数的几个列，可以有效避免每次都进行全表扫描。<br>  例如下面这条 SQL，计划中的 NAME 中显示 test(idx_b)，说明查询用到了索引 idx_b，避免了扫描多余列 a、c、d 的数据。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create table test(a int, b int, c int, d int, key idx_b(b));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">explain select b from test;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ======================================================                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR       |NAME       |EST.ROWS|EST.TIME(us)|                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ------------------------------------------------------                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |TABLE FULL SCAN|test(idx_b)|1       |2           |                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ======================================================                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.b]), filter(nil), rowset=256                                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.b]), partitions(p0)                                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false,                                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.__pk_increment]), range(MIN,MIN ; MAX,MAX)always true |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11 rows in set (0.041 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  又例如下面这条 SQL，优化器会选择列数最少的索引 idx_b（或者说数据量最小的索引）进行扫描。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create table test(a int, b int, c int, d int, key idx_b(b));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">explain select count(*) from test;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ========================================================                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR         |NAME       |EST.ROWS|EST.TIME(us)|                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| --------------------------------------------------------                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |SCALAR GROUP BY  |           |1       |2           |                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |1 |└─TABLE FULL SCAN|test(idx_b)|1       |2           |                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ========================================================                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([T_FUN_COUNT_SUM(T_FUN_COUNT(*))]), filter(nil), rowset=256                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       group(nil), agg_func([T_FUN_COUNT_SUM(T_FUN_COUNT(*))])                           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   1 - output([T_FUN_COUNT(*)]), filter(nil), rowset=256                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access(nil), partitions(p0)                                                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false,                                       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.__pk_increment]), range(MIN,MIN ; MAX,MAX)always true,  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       pushdown_aggregation([T_FUN_COUNT(*)])                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里也有一个劣势，就是如果查询的列比较多时，如果 走了索引，就需要拿着从索引上得到的主表的主键列回到主表查询其余列（索引回表）。<strong>索引回表的代价是很高的，一般索引回表的性能只有直接全表扫的十分之一，如果过滤条件的过滤很差但是依然走了索引，索引回表的代价就无法被忽略了。</strong><br>  例如下面几条 SQL，索引建在 b 上，查询 a、b 的所有行，如果不走索引直接全表扫，优化器估计的代价 EST.TIME 是 2us。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create table test(a int, b int, c int, d int, key idx_b(b));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">explain select a, b from test;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ===============================================                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR       |NAME|EST.ROWS|EST.TIME(us)|                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -----------------------------------------------                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |TABLE FULL SCAN|test|1       |2           |                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ===============================================                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.a], [test.b]), filter(nil), rowset=256           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.a], [test.b]), partitions(p0)                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false,                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.__pk_increment]), range(MIN ; MAX)always true |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  如果通过指定 hint 强制走索引，优化器估计的代价 EST.TIME 是 5us，反倒比不走索引更慢了，这就是索引回表（is_index_back=true）带来的额外开销。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test idx_b)*/ a, b from test;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ======================================================                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR       |NAME       |EST.ROWS|EST.TIME(us)|                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ------------------------------------------------------                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |TABLE FULL SCAN|test(idx_b)|1       |5           |                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ======================================================                                |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([test.a], [test.b]), filter(nil), rowset=256                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([test.__pk_increment], [test.a], [test.b]), partitions(p0)               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=true, is_global_index=false,                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([test.b], [test.__pk_increment]), range(MIN,MIN ; MAX,MAX)always true |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="LgEmY"></a>
<h1>如何衡量走索引的耗时时间</h1>
<p>走索引的耗时时间由两部分构成：</p>
<ol>
<li>扫描索引的时间（由扫描的数据行数决定）</li>
<li>索引回表的时间（由需要回表的数据行数决定）</li>
</ol>
<p>  假设这张表有 10000 行数据，扫描索引的时间是 1 ms 1000 行，索引回表的时间是 1 ms 100 行（大概是十倍的关系）。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create table test(a int primary key, b int, c int, d int, e int, key idx_b_e_c(b, e, c));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>用 b = 1 这个过滤条件进行过滤，会返回 1000 行数据；</li>
<li>用 b = 1 and c = 1 这个过滤条件进行过滤，会返回 100 行数据；</li>
</ul>
<p>  如果我们执行 select * from test where b = 1; 这条 SQL，走索引的话，开销就是：在索引上扫描 1000 行的数据，大概是 1 ms。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test idx_b_c_d)*/ * from test where b = 1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  不走索引的话，开销就是：在主表上扫描 10000 行的数据，大概是 10 ms。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test primary)*/ * from test where b = 1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  所以在这种场景下，还是走索引更快，如果生成的计划没有走索引，就可以自己指定个 hint /*+index(test idx_b_c_d)*/ 强制让它走索引。<br>  如果我们执行 select * from test where b = 1 and c = 1; 这条 SQL，走 idx_b_c_d 这个索引的开销就是：在索引上扫描 1000 行的数据 + 索引回表 1000 行的数据，大概是 1 ms + 10 ms = 11 ms。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test idx_b_c_d)*/ * from test where b = 1 and c = 1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  这条 SQL 不走索引的开销就是：在主表示索引上 10000 行的数据，耗时大概是 10 ms。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select /*+index(test primary)*/ * from test where b = 1 and c = 1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>  所以在这种场景下，不走索引而走主表反倒更快，如果生成的计划走了索引，就可以自己指定个 hint /<em>+index(test primary)</em>/ 强制让它走主表。<br>  如何获取类似于 “用 b = 1 and c = 1 这个过滤条件进行过滤，会返回 100 行数据” 这种信息？执行一条 SQL 看下 count 就好了。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">select count(*) from test where b = 1 and c = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| count(*) |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       100|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="w199p"></a>
<h1>创建索引的策略</h1>
<p>大体可以用下面两句话总结：</p>
<ul>
<li><strong>将存在等值条件的列放在索引的前面，将存在范围条件的列放在索引的后面。</strong></li>
<li><strong>有多个列上存在范围条件时过滤性强的列放在前面。</strong></li>
</ul>
<p>  例如一条 SQL 中存在三个过滤条件，分别是 a = 1、b &gt; 0、c between 1 and 12。其中 b &gt; 0 可以过滤掉 30% 的数据，c between 1 and 12 可以过滤掉 90% 的数据，那么按照我们的基础策略，对于这条 SQL 可以在 (a, c, b) 上建一个索引进行优化。<br>  大家可以思考下为什么要这么创建索引？索引中前两列是 a 和 c 很好理解，最后在索引中加上 b 列的原因我个人理解是为了在 select b 的时候，可以消除回表的开销。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/user_best_practices/performance_tuning/index_optimize.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/user_manual/user_best_practices/performance_tuning/explain"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">执行计划</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/user_manual/user_best_practices/performance_tuning/join_optimize"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SQL 性能调优 —— 连接（JOIN）方式调优</div></a></nav><div>Loading...</div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#快速定位数据" class="table-of-contents__link toc-highlight">快速定位数据</a></li><li><a href="#消除排序的开销" class="table-of-contents__link toc-highlight">消除排序的开销</a></li><li><a href="#查询指定列时相比主表可以扫描更少的数据" class="table-of-contents__link toc-highlight">查询指定列时，相比主表可以扫描更少的数据</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">SIG</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sig/AI/sig_intro">AI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/cloud-native/sig_intro">cloud-native</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/compilation/sig_intro">compilation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/develop-tools/sig_intro">develop-tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/miniob/sig_intro">MiniOB</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/obdiag/sig_intro">obdiag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/operation/sig_intro">operation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://en.oceanbase.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About OceanBase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blogs/arch/all-in-one">Blogs</a></li><li class="footer__item"><a href="https://github.com/oceanbase/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
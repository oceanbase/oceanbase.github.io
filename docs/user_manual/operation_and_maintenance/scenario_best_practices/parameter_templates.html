<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-user_manual/operation_and_maintenance/scenario_best_practices/parameter_templates" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">参数模板 | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/docs/user_manual/operation_and_maintenance/scenario_best_practices/parameter_templates"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="参数模板 | OceanBase"><meta data-rh="true" name="description" content="参数模板这个需求源自于一些做微服务的客户。客户的业务场景是 SaaS 平台，集群中会有大量相同业务的租户，但是每创建一个租户都需要单独设置一批租户参数。在 SaaS 业务中，尤其是在存在大量租户的场景下，设置租户参数的工作量会非常大。"><meta data-rh="true" property="og:description" content="参数模板这个需求源自于一些做微服务的客户。客户的业务场景是 SaaS 平台，集群中会有大量相同业务的租户，但是每创建一个租户都需要单独设置一批租户参数。在 SaaS 业务中，尤其是在存在大量租户的场景下，设置租户参数的工作量会非常大。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/docs/user_manual/operation_and_maintenance/scenario_best_practices/parameter_templates"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/operation_and_maintenance/scenario_best_practices/parameter_templates" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/operation_and_maintenance/scenario_best_practices/parameter_templates" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6JQM9QDU5V-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7e3a93fe.css">
<script src="/assets/js/runtime~main.2e18a516.js" defer="defer"></script>
<script src="/assets/js/main.58981e08.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a class="navbar__item navbar__link" href="/docs/blogs/arch/all-in-one">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Product Docs</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">User Manual</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Developer Manual</a></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Special Interest Group(SIG)</a><span><li><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="dropdown__link">Slack<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum (in Chinese)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/about_this_manual/overview">关于 《DBA 进阶教程》</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/disaster_recovery_architecture_design/high_availability_architecture_overview">容灾架构设计</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/operations_and_maintenance/version_upgrade_path">运维管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/user_manual/operation_and_maintenance/scenario_best_practices/parameter_templates">场景最佳实践</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/user_manual/operation_and_maintenance/scenario_best_practices/parameter_templates">参数模板</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/user_manual/operation_and_maintenance/scenario_best_practices/chapter_01_multi_tenants/introduction">SaaS 多租户资源整合场景</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/user_manual/operation_and_maintenance/scenario_best_practices/chapter_02_archive_database/introduction">历史数据归档场景</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/user_manual/operation_and_maintenance/scenario_best_practices/chapter_03_htap/introduction">HTAP 混合负载场景</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/development_specification/object_specification">数据库开发规范</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/emergency_handbook/emergency_overview">故障应急手册</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">场景最佳实践</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">参数模板</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>参数模板</h1></header><blockquote>
<p>参数模板这个需求源自于一些做微服务的客户。客户的业务场景是 SaaS 平台，集群中会有大量相同业务的租户，但是每创建一个租户都需要单独设置一批租户参数。在 SaaS 业务中，尤其是在存在大量租户的场景下，设置租户参数的工作量会非常大。</p>
<p>同时，我们也不断收到很多其他用户提出的类似诉求，用户普遍希望 OceanBase 能够根据不同的业务场景，提供一个一键适配的 best practice 参数配置。用户只需设置集群或者租户的业务场景，系统就会自动对各种参数进行调优，以适配不同的场景。</p>
<p>OceanBase 最近根据用户提出的这两类需求，为大家提供了一个 “参数模板” 的功能。通过 OCP 或 OBD 创建集群和租户时，会针对不同的业务场景，做出不同参数优化，提供更加合适的 默认参数。</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a href="#背景" class="hash-link" aria-label="Direct link to 背景" title="Direct link to 背景">​</a></h2>
<p>最近一段时间接触了一些 OceanBase 社区版的用户，发现大家的使用场景多种多样，但 OceanBase 的默认参数/配置项并不是适用所有场景，不同的使用场景往往有不同的参数设置最佳实践。例如 ob_query_timeout 默认是 10s，对于简单 OLTP 场景可能没问题，但对于 OLAP 类业务，尤其是耗时极长的复杂查询来说，可能并不合适。</p>
<p>为了能够对不同使用场景的集群和租户，提供更加合适的默认参数，OceanBase 近期提供了一个 “参数模板” 的功能，这两天试用了下，在这里简单做一个记录，供大家参考。</p>
<p>我自己测试过程中使用的 OBServer 社区版版本号是 4.3.2.1， OCP 社区版版本号是 4.3.1。<strong>推荐大家使用的 OCP 社区版版本号是 4.3.2 及以上版本，修复了一些已知问题，参数模板功能会更加完善。</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="检查参数模板的配置文件">检查参数模板的配置文件<a href="#检查参数模板的配置文件" class="hash-link" aria-label="Direct link to 检查参数模板的配置文件" title="Direct link to 检查参数模板的配置文件">​</a></h2>
<p>在 OceanBase 的 OBServer 源码中，会维护若干种场景的配置项和参数默认值，并通过 RPM 包输出。用户在 OCP 中上传 OB 4.3 及以上版本的软件包时，OCP 后台会自动解析软件包中的配置文件，保存到集群/租户参数模板中。</p>
<p><img decoding="async" loading="lazy" alt="image.png" src="/assets/images/001-6caf962c4a588a043695dccee3ec165e.png" width="1412" height="705" class="img_ev3q"></p>
<p>解析配置文件并保存到特定的 meta 表中，可能需要一分钟左右，大家如果在 OCP 界面一直看不到参数模板的各种选项，可以确认 OCP 是否完成参数模板配置解析。步骤如下：</p>
<ol>
<li>在 OCP 的 <strong>租户 - 租户管理</strong> 中复制 ocp_meta 租户的登录连接串</li>
</ol>
<p><img decoding="async" loading="lazy" alt="image.png" src="/assets/images/002-58d27ff844f2037bf445f081ad2cddf0.png" width="2698" height="1050" class="img_ev3q"></p>
<ol start="2">
<li>通过刚刚复制的连接串，登录相应的 OBServer 节点中的 ocp_meta 租户。</li>
</ol>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">xiaofeng</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lby</span><span class="token variable" style="color:#36acaa">@obvos</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">dev</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">d3 </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">home</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">xiaofeng</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lby</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$mysql </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">h1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">2.3</span><span class="token number" style="color:#36acaa">.4</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">P2881 </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">u root</span><span class="token variable" style="color:#36acaa">@ocp_meta</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">p YourPassword</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> the MariaDB monitor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">  Commands </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">or</span><span class="token plain"> \g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your MySQL connection id </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3221740061</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server version: </span><span class="token number" style="color:#36acaa">5.7</span><span class="token number" style="color:#36acaa">.25</span><span class="token plain"> OceanBase_CE </span><span class="token number" style="color:#36acaa">4.2</span><span class="token number" style="color:#36acaa">.1</span><span class="token number" style="color:#36acaa">.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Copyright </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2018</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Oracle</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> MariaDB Corporation Ab </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> others</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">Type</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;help;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">or</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\h&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> help</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Type</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\c&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> clear the </span><span class="token keyword" style="color:#00009f">current</span><span class="token plain"> input statement</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>场景参数模板属于后台参数模板，虽然直接在参数模板页面看不到，但可以从 metadb 中确认是否存在。</li>
</ol>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MySQL </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">none</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> meta_database</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reading </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> information </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> completion </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">column</span><span class="token plain"> names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You can turn </span><span class="token keyword" style="color:#00009f">off</span><span class="token plain"> this feature </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> get a quicker startup </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">Database</span><span class="token plain"> changed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 查看集群级别的参数模板种类。这里只是示例，大家可以删除 limit 1 后执行。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MySQL </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">meta_database</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> meta_database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ob_cluster_parameter_template </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">group</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;scenario&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">limit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> \G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             id: </span><span class="token number" style="color:#36acaa">1001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    create_time: </span><span class="token number" style="color:#36acaa">2024</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">28</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">09</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    update_time: </span><span class="token number" style="color:#36acaa">2024</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">28</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">09</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           name: cluster parameter template </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> scenario HTAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> version </span><span class="token number" style="color:#36acaa">4.3</span><span class="token number" style="color:#36acaa">.2</span><span class="token number" style="color:#36acaa">.1</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">100000102024081217</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     creator_id: </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    modifier_id: </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description: cluster parameter template </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> scenario HTAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> version </span><span class="token number" style="color:#36acaa">4.3</span><span class="token number" style="color:#36acaa">.2</span><span class="token number" style="color:#36acaa">.1</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">100000102024081217</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       built_in: </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">extra_data_json: {</span><span class="token string" style="color:#e3116c">&quot;fullVersion&quot;</span><span class="token plain">:</span><span class="token string" style="color:#e3116c">&quot;4.3.2.1-100000102024081217&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;scenario&quot;</span><span class="token plain">:</span><span class="token string" style="color:#e3116c">&quot;HTAP&quot;</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain">: scenario</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.04</span><span class="token plain"> sec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- 查看租户级别的参数模板种类。这里只是示例，大家可以删除 limit 1 后执行。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MySQL </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">meta_database</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> meta_database</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ob_tenant_parameter_template </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">group</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;scenario&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">limit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> \G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             id: </span><span class="token number" style="color:#36acaa">1001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    create_time: </span><span class="token number" style="color:#36acaa">2024</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">28</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">09</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    update_time: </span><span class="token number" style="color:#36acaa">2024</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">09</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">28</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">09</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           name: tenant parameter template </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> scenario HTAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> version </span><span class="token number" style="color:#36acaa">4.3</span><span class="token number" style="color:#36acaa">.2</span><span class="token number" style="color:#36acaa">.1</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">100000102024081217</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     creator_id: </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    modifier_id: </span><span class="token number" style="color:#36acaa">200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description: tenant parameter template </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> scenario HTAP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> version </span><span class="token number" style="color:#36acaa">4.3</span><span class="token number" style="color:#36acaa">.2</span><span class="token number" style="color:#36acaa">.1</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">100000102024081217</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">compatible_type: </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       built_in: </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">extra_data_json: {</span><span class="token string" style="color:#e3116c">&quot;fullVersion&quot;</span><span class="token plain">:</span><span class="token string" style="color:#e3116c">&quot;4.3.2.1-100000102024081217&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;scenario&quot;</span><span class="token plain">:</span><span class="token string" style="color:#e3116c">&quot;HTAP&quot;</span><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain">: scenario</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.04</span><span class="token plain"> sec</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="设置集群级的参数模板">设置集群级的参数模板<a href="#设置集群级的参数模板" class="hash-link" aria-label="Direct link to 设置集群级的参数模板" title="Direct link to 设置集群级的参数模板">​</a></h2>
<p>用户在创建 4.3 及以上版本集群时，根据真实使用场景，可以选择以下几种场景参数模板。</p>
<p><img decoding="async" loading="lazy" alt="image.png" src="/assets/images/003-0c26dc12e4deddbae6413529a0097a78.png" width="3794" height="1872" class="img_ev3q"></p>
<p>步骤比较简单，在 OCP 中的 <strong>创建集群</strong> 页面，配置集群参数时，可以使用默认参数配置，也可以打开 <strong>参数配置</strong> 模块，并配置集群参数：</p>
<ul>
<li>可以逐个添加启动参数项并为其配置值。</li>
<li>也可以单击 <strong>参数模板</strong>，然后选择一个参数模板，系统会将模板中的参数连同配置自动填充到此处。</li>
</ul>
<p>测试使用的 OBServer 社区版 4.3.2.1 目前提供了 5 种内置参数模板，官网上的具体说明如下：</p>
<table><thead><tr><th>模板</th><th>说明</th></tr></thead><tbody><tr><td>HTAP 默认参数模板</td><td>适用于混合 OLAP 和 OLTP 工作负载 。通常用于从活动运营数据、欺诈检测和个性化建议中获取即时见解。   该模板适用于 OceanBase V4.3.0 及以上版本。</td></tr><tr><td>OLAP 默认参数模板</td><td>用于实时数据仓库分析场景。   该模板适用于 OceanBase V4.3.0 及以上版本。</td></tr><tr><td>COMPLEX_OLTP 默认参数模板</td><td>适用于银行、保险系统等工作负载。他们通常具有复杂的联接、复杂的相关子查询、用 PL 编写的批处理作业，以及长事务和大事务。有时对短时间运行的查询使用并行执行。   该模板适用于 OceanBase V4.3.0 及以上版本。</td></tr><tr><td>KV 默认参数模板</td><td>用于键值工作负载和类似 hbase 的宽列工作负载，这些工作负载通常具有非常高的吞吐量并且对延迟敏感。   该模板适用于 OceanBase V4.3.0 及以上版本。</td></tr><tr><td>2.2.77 默认参数模板</td><td>OceanBase 集群 V2.2.77 版本推荐使用的参数设置，供生产环境使用。</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="设置租户级的参数模板">设置租户级的参数模板<a href="#设置租户级的参数模板" class="hash-link" aria-label="Direct link to 设置租户级的参数模板" title="Direct link to 设置租户级的参数模板">​</a></h2>
<p><img decoding="async" loading="lazy" alt="image.png" src="/assets/images/004-4c10745a6faa40f3037ac1cee93292e6.png" width="1882" height="1038" class="img_ev3q"></p>
<p>步骤同样比较简单，在 <strong>OCP 的 租户 - 新建租户</strong> 界面中，打开 <strong>参数配置</strong> 模块，并配置租户参数：</p>
<ul>
<li>可以逐个添加启动参数项并为其配置值。</li>
<li>也可以单击 <strong>参数模板</strong>，选择一个参数模板，系统会将模板中的参数连同配置自动填充到此处。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="遇到的问题及解决方法ocp-432-社区版已修复">遇到的问题及解决方法（OCP 4.3.2 社区版已修复）<a href="#遇到的问题及解决方法ocp-432-社区版已修复" class="hash-link" aria-label="Direct link to 遇到的问题及解决方法（OCP 4.3.2 社区版已修复）" title="Direct link to 遇到的问题及解决方法（OCP 4.3.2 社区版已修复）">​</a></h2>
<p>在试用过程中，遇到了一个小 BUG：在通过 OLAP 参数模板来创建租户时，由于 OCP 记录的部分元数据信息有误，导致误判断了个别参数的类型，导致租户创建失败（创建集群，以及通过除 OLAP 以外的参数模板创建租户，均不会触发这个 BUG）。报错信息如下：</p>
<p><img decoding="async" loading="lazy" alt="image.png" src="/assets/images/005-73986beb3e43390d834a5ab2984395aa.png" width="3760" height="1718" class="img_ev3q"></p>
<p>OCP 的同学表示这个是已知问题，在 OCP 4.3.2 社区版中会被修复。如果使用的是更早的版本，可以先通过在选择 OLAP 参数模板后，临时删除这几个没显示取值类型的参数（即图中的 parallel_degree_policy、_io_read_batch_size、_io_read_redundant_limit_percentage）。</p>
<p><img decoding="async" loading="lazy" alt="image.png" src="/assets/images/006-4c386568fd329ae3278f7344b7e873f5.png" width="3840" height="1868" class="img_ev3q"></p>
<p>租户创建好之后，手动去 <strong>租户 - 参数管理</strong> 中对这三个参数进行设置即可。</p>
<p><img decoding="async" loading="lazy" alt="image.png" src="/assets/images/007-7f5df2a746de18ef8cd9423ea8fed602.png" width="3832" height="1506" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image.png" src="/assets/images/008-d0203b773418bc1f2e10b77a0836453e.png" width="2972" height="718" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="不同模板参数的性能测试">不同模板参数的性能测试<a href="#不同模板参数的性能测试" class="hash-link" aria-label="Direct link to 不同模板参数的性能测试" title="Direct link to 不同模板参数的性能测试">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="典型用户生产环境介绍">典型用户生产环境介绍<a href="#典型用户生产环境介绍" class="hash-link" aria-label="Direct link to 典型用户生产环境介绍" title="Direct link to 典型用户生产环境介绍">​</a></h3>
<p>君野大佬帮忙对几种不同的模板参数，在代表不同场景的 benchmark 中进行了测试。在展示测试结果之前，先简单介绍下 OceanBase 社区版当前的 5 种典型用户生产环境：</p>
<ul>
<li>express_oltp：互联网应用，简单的 CRUD SQL，大量点查，高并发</li>
<li>complex_oltp：传统行业应用，有复杂查询，大量 PL 和批作业</li>
<li>olap：在线分析处理和数仓<!-- -->
<ul>
<li>典型负载：导入 -&gt; 转换 -&gt; 查询 -&gt; 报表<!-- -->
<ul>
<li>轻量：<!-- -->
<ul>
<li>ELT 而不是 ETL；</li>
<li>使用 SQL 做数据转换；使用物化视图做实时加速；使用 SQL 做实时查询</li>
<li>周边依赖简单轻量（无或少外部依赖）</li>
</ul>
</li>
</ul>
</li>
<li>性能指标：响应时间秒级到小时级</li>
<li>数据规模：100 TB</li>
<li>数据模型：star-schema 多表关联；宽表多维 ad-hoc 查询</li>
<li>读写模式：读多写少；写入为批量写入、update 少；查询种数少、查询并发低；查询以大范围扫描为主</li>
<li>代表 benchmark：TPC-DS, TPC-H, ClickBench, SSB</li>
<li>应用场景：实时数仓；营销分析；汇聚分析；Ad-hoc 查询；</li>
</ul>
</li>
<li>htap：TP 增强混合负载<!-- -->
<ul>
<li>实时轻量级报表<!-- -->
<ul>
<li>典型负载：在线事务写入-&gt;批作业-&gt;实时报表</li>
<li>代表 benchmark：TPC-C + TPC-H, hybench</li>
<li>分析数据规模：10TB</li>
<li>性能指标：分析型查询响应时间亚秒级</li>
<li>数据模型：大多按照关系模型范式设计</li>
<li>读写模式：读多写多、读写并发都高；数据实时写入，包括事务型小数据量高并发写入和批量大事务写入；读包括事务型短查询和分析型大查询；</li>
<li>应用场景：BI 报表；替换 “分库分表 + 汇聚库” 双库；Ad-hoc 查询；实时风控</li>
</ul>
</li>
<li>准实时决策分析<!-- -->
<ul>
<li>典型负载：高并发在线交易 + 大规模实时数据分析</li>
<li>分析数据规模：100TB</li>
<li>性能指标：分析型查询响应时间压秒级到小时级</li>
<li>数据模型：大多按照关系模型范式设计</li>
<li>读写模式：读多写多、读写并发都高；数据实时写入，包括事务型小数据量高并发写入和批量大事务写入；读包括事务型短查询和分析型大查询，可以在应用端分离开；分析型查询允许数据稍旧；</li>
<li>代表benchmark：TPC-C + TPC-DS，TPC-C + ClickBench</li>
<li>应用场景：BI 报表；替换 “分库分表 + 汇聚库” 双库；Ad-hoc 查询；</li>
</ul>
</li>
</ul>
</li>
<li>kv：OBKV 接口定义的 HBase 兼容和 Key-Value 表模型访问模式，单分区访问，无 SQL 层。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="各场景模板参数的默认值">各场景模板参数的默认值<a href="#各场景模板参数的默认值" class="hash-link" aria-label="Direct link to 各场景模板参数的默认值" title="Direct link to 各场景模板参数的默认值">​</a></h3>
<ul>
<li>系统变量：详见 <a href="https://github.com/oceanbase/oceanbase/blob/4.3.3/src/share/system_variable/default_system_variable.json" target="_blank" rel="noopener noreferrer">github 链接</a>。</li>
<li>配置项：<a href="https://github.com/oceanbase/oceanbase/blob/4.3.3/src/share/parameter/default_parameter.json" target="_blank" rel="noopener noreferrer">详见 github 链接</a>。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="测试环境">测试环境<a href="#测试环境" class="hash-link" aria-label="Direct link to 测试环境" title="Direct link to 测试环境">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="测试版本">测试版本<a href="#测试版本" class="hash-link" aria-label="Direct link to 测试版本" title="Direct link to 测试版本">​</a></h4>
<ul>
<li>observer : 4.3.2 社区版</li>
<li>obproxy : 4.2.3 社区版</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="硬件环境">硬件环境<a href="#硬件环境" class="hash-link" aria-label="Direct link to 硬件环境" title="Direct link to 硬件环境">​</a></h5>
<ul>
<li>observer 3 台 32c256g，机型为 <a href="https://help.aliyun.com/zh/ecs/user-guide/overview-of-instance-families#9e4ed29e73q6z" target="_blank" rel="noopener noreferrer">ecs.r7.8xlarge</a>，日志盘使用系统盘，clog 和 data 盘单独挂载两块云盘，磁盘性能级别为 PL1。</li>
<li>obproxy 单独部署在一台 64c128g <a href="https://help.aliyun.com/document_detail/25378.html#c7" target="_blank" rel="noopener noreferrer">ecs.c7.16xlarge</a>。</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="操作系统">操作系统<a href="#操作系统" class="hash-link" aria-label="Direct link to 操作系统" title="Direct link to 操作系统">​</a></h5>
<p>操作系统为 CentOS 7.9 64位</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;vm.max_map_count=655360&quot; &gt;&gt; /etc/sysctl.conf; sysctl -p (obd启动检查项)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo sysctl -w kernel.sched_migration_cost_ns=0 （对标公有云内核参数优化）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="租户规格">租户规格<a href="#租户规格" class="hash-link" aria-label="Direct link to 租户规格" title="Direct link to 租户规格">​</a></h5>
<p>28c180g，3F，primary_zone=RANDOM</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">## 命令中的 scenario 取值为 express_oltp、complex_oltp、olap、htap、kv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obd cluster tenant create perf --max-cpu=28 --memory-size=180G -n mysql_tenant -o ${scenario}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="部署配置文件">部署配置文件<a href="#部署配置文件" class="hash-link" aria-label="Direct link to 部署配置文件" title="Direct link to 部署配置文件">​</a></h5>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oceanbase</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">ce:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version: </span><span class="token number" style="color:#36acaa">4.3</span><span class="token number" style="color:#36acaa">.2</span><span class="token number" style="color:#36acaa">.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  servers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> name: server1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ip: 略</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> name: server2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ip: 略</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> name: server3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ip: 略</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">global</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario: ${scenario}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    home_path: </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">root</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">observer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_dir: </span><span class="token operator" style="color:#393A34">/</span><span class="token keyword" style="color:#00009f">data</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    redo_dir: </span><span class="token operator" style="color:#393A34">/</span><span class="token keyword" style="color:#00009f">data</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">2</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">redo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    devname: eth0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory_limit: </span><span class="token number" style="color:#36acaa">240</span><span class="token plain">G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log_disk_size: </span><span class="token number" style="color:#36acaa">700</span><span class="token plain">G</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    datafile_disk_percentage: </span><span class="token number" style="color:#36acaa">93</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root_password: </span><span class="token number" style="color:#36acaa">123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mysql_port: </span><span class="token number" style="color:#36acaa">2881</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rpc_port: </span><span class="token number" style="color:#36acaa">2882</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  server1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zone: zone1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  server2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zone: zone2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  server3:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zone: zone3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obproxy</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">ce:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  version: </span><span class="token number" style="color:#36acaa">4.2</span><span class="token number" style="color:#36acaa">.3</span><span class="token number" style="color:#36acaa">.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  depends:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> oceanbase</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">ce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  servers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> 略</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">global</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen_port: </span><span class="token number" style="color:#36acaa">2886</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">## External port. The default value is 2883.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    home_path: </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">root</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">obproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_cluster_checkout: </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    skip_proxy_sys_private_check: </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_strict_kernel_release: </span><span class="token boolean" style="color:#36acaa">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="调参说明">调参说明<a href="#调参说明" class="hash-link" aria-label="Direct link to 调参说明" title="Direct link to 调参说明">​</a></h3>
<p>性能数据基于各租户类型默认调参 + 各 workload 基础调参</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="workload-基础调参">workload 基础调参<a href="#workload-基础调参" class="hash-link" aria-label="Direct link to workload 基础调参" title="Direct link to workload 基础调参">​</a></h4>
<p>sysbench</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> enable_sql_audit</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> enable_perf_event</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> syslog_level</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;PERF&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">alter</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> enable_record_trace_log</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>tpcc</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#proxy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> proxyconfig </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> proxy_mem_limited</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;4G&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> proxyconfig </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> enable_compression_protocol</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#sys</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> enable_sql_audit</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> enable_perf_event</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> syslog_level</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;PERF&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">alter</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> enable_record_trace_log</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>tpch</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#sys</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> SYSTEM flush </span><span class="token keyword" style="color:#00009f">plan</span><span class="token plain"> cache </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> enable_sql_audit</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> enable_perf_event</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> syslog_level</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;PERF&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">alter</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> enable_record_trace_log</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#测试租户</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"> ob_sql_work_area_percentage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"> ob_query_timeout </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">36000000000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"> ob_trx_timeout </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">36000000000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"> max_allowed_packet </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">67108864</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## parallel_servers_target = max_cpu * server_num * 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"> parallel_servers_target </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">624</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>tpcds</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#sys</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> SYSTEM flush </span><span class="token keyword" style="color:#00009f">plan</span><span class="token plain"> cache </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> enable_sql_audit</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> enable_perf_event</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> syslog_level</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;PERF&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">alter</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> enable_record_trace_log</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#测试租户</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"> ob_sql_work_area_percentage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"> ob_query_timeout </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">36000000000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"> ob_trx_timeout </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">36000000000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"> max_allowed_packet </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">67108864</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## parallel_servers_target = max_cpu * server_num * 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"> parallel_servers_target </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">624</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="测试数据">测试数据<a href="#测试数据" class="hash-link" aria-label="Direct link to 测试数据" title="Direct link to 测试数据">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sysbench">sysbench<a href="#sysbench" class="hash-link" aria-label="Direct link to sysbench" title="Direct link to sysbench">​</a></h4>
<p><strong>调参</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET enable_sql_audit=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET enable_perf_event=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET syslog_level=&#x27;PERF&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alter system set enable_record_trace_log=false;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>测试命令</strong></p>
<p>使用 obd 封装的原生 sysbench 压测流程，obd 使用的 ob-sysbench 依赖 libobclient，这里在环境中执行 export ENABLE_PROTOCOL_OB20=0，关闭 v2 协议，与原生 sysbench 保持一致</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obd test sysbench rn </span><span class="token comment" style="color:#999988;font-style:italic">--tenant=perf --script-name=xxx.lua --table-size=1000000 --threads=xx  --report-interval=1 --rand-type=uniform --time=30 --db-ps-mode=disable </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>测试数据 (QPS/95%rt)</strong></p>
<p><strong>Point Select 性能</strong></p>
<table><thead><tr><th style="text-align:center">Threads</th><th style="text-align:center">express_oltp</th><th style="text-align:center">complex_oltp</th><th style="text-align:center">olap</th><th style="text-align:center">htap</th><th style="text-align:center">kv</th></tr></thead><tbody><tr><td style="text-align:center">32</td><td style="text-align:center">163457.60/0.22</td><td style="text-align:center">162747.70/0.22</td><td style="text-align:center">161428.80/0.23</td><td style="text-align:center">162948.95/0.20</td><td style="text-align:center">163204.29/0.20</td></tr><tr><td style="text-align:center">64</td><td style="text-align:center">296206.41/0.25</td><td style="text-align:center">291823.36/0.26</td><td style="text-align:center">291583.48/0.26</td><td style="text-align:center">293622.63/0.25</td><td style="text-align:center">295541.97/0.25</td></tr><tr><td style="text-align:center">128</td><td style="text-align:center">505203.80/0.30</td><td style="text-align:center">493859.95/0.31</td><td style="text-align:center">492135.78/0.31</td><td style="text-align:center">498132.19/0.31</td><td style="text-align:center">505266.56/0.30</td></tr><tr><td style="text-align:center">256</td><td style="text-align:center">798005.94/0.45</td><td style="text-align:center">794547.97/0.47</td><td style="text-align:center">803165.10/0.49</td><td style="text-align:center">797304.31/0.45</td><td style="text-align:center">794627.82/0.45</td></tr><tr><td style="text-align:center">512</td><td style="text-align:center">1039286.05/0.90</td><td style="text-align:center">1023822.11/1.14</td><td style="text-align:center">1022666.33/1.12</td><td style="text-align:center">1032713.76/0.90</td><td style="text-align:center">1016045.20/0.92</td></tr><tr><td style="text-align:center">1024</td><td style="text-align:center">1013992.61/2.39</td><td style="text-align:center">1011295.14/2.39</td><td style="text-align:center">997362.00/2.57</td><td style="text-align:center">1004848.34/2.48</td><td style="text-align:center">990136.68/2.52</td></tr></tbody></table>
<p><strong>Read Only 性能</strong></p>
<table><thead><tr><th style="text-align:center">Threads</th><th style="text-align:center">express_oltp</th><th style="text-align:center">complex_oltp</th><th style="text-align:center">olap</th><th style="text-align:center">htap</th><th style="text-align:center">kv</th></tr></thead><tbody><tr><td style="text-align:center">32</td><td style="text-align:center">134791.19/4.10</td><td style="text-align:center">136145.15/3.97</td><td style="text-align:center">137486.55/3.96</td><td style="text-align:center">137327.53/3.95</td><td style="text-align:center">137750.08/3.96</td></tr><tr><td style="text-align:center">64</td><td style="text-align:center">244754.37/4.49</td><td style="text-align:center">244093.17/4.57</td><td style="text-align:center">244641.01/4.57</td><td style="text-align:center">244586.46/4.57</td><td style="text-align:center">247914.45/4.49</td></tr><tr><td style="text-align:center">128</td><td style="text-align:center">416929.45/5.37</td><td style="text-align:center">420143.73/5.47</td><td style="text-align:center">419772.35/5.28</td><td style="text-align:center">420445.05/5.28</td><td style="text-align:center">421381.09/5.28</td></tr><tr><td style="text-align:center">256</td><td style="text-align:center">613453.13/7.56</td><td style="text-align:center">611436.43/8.28</td><td style="text-align:center">603989.96/8.28</td><td style="text-align:center">610998.14/7.43</td><td style="text-align:center">607015.73/8.13</td></tr><tr><td style="text-align:center">512</td><td style="text-align:center">725364.76/16.12</td><td style="text-align:center">738362.91/17.65</td><td style="text-align:center">736059.64/15.83</td><td style="text-align:center">720899.31/16.12</td><td style="text-align:center">693449.90/26.20</td></tr><tr><td style="text-align:center">1024</td><td style="text-align:center">715777.22/41.10</td><td style="text-align:center">707831.35/42.61</td><td style="text-align:center">697077.19/44.17</td><td style="text-align:center">706809.11/42.61</td><td style="text-align:center">699619.03/44.83</td></tr></tbody></table>
<p><strong>Write Only 性能</strong></p>
<table><thead><tr><th style="text-align:center">Threads</th><th style="text-align:center">express_oltp</th><th style="text-align:center">complex_oltp</th><th style="text-align:center">olap</th><th style="text-align:center">htap</th><th style="text-align:center">kv</th></tr></thead><tbody><tr><td style="text-align:center">32</td><td style="text-align:center">50914.06/5.00</td><td style="text-align:center">52894.62/4.91</td><td style="text-align:center">50589.47/5.67</td><td style="text-align:center">52088.46/4.74</td><td style="text-align:center">54033.87/4.41</td></tr><tr><td style="text-align:center">64</td><td style="text-align:center">90119.99/5.47</td><td style="text-align:center">93447.67/5.37</td><td style="text-align:center">90202.65/5.37</td><td style="text-align:center">90264.56/5.57</td><td style="text-align:center">94874.07/5.00</td></tr><tr><td style="text-align:center">128</td><td style="text-align:center">164488.33/5.77</td><td style="text-align:center">166099.69/5.57</td><td style="text-align:center">159493.96/5.99</td><td style="text-align:center">159005.24/6.09</td><td style="text-align:center">162650.65/5.57</td></tr><tr><td style="text-align:center">256</td><td style="text-align:center">242240.38/8.13</td><td style="text-align:center">241749.01/8.43</td><td style="text-align:center">232320.85/8.43</td><td style="text-align:center">230522.31/8.74</td><td style="text-align:center">238971.17/7.84</td></tr><tr><td style="text-align:center">512</td><td style="text-align:center">304060.67/13.70</td><td style="text-align:center">306416.65/13.70</td><td style="text-align:center">299155.86/13.70</td><td style="text-align:center">289147.63/13.95</td><td style="text-align:center">301695.38/13.22</td></tr><tr><td style="text-align:center">1024</td><td style="text-align:center">345068.37/23.52</td><td style="text-align:center">348929.05/26.20</td><td style="text-align:center">306096.92/29.72</td><td style="text-align:center">327905.15/27.17</td><td style="text-align:center">313276.26/30.81</td></tr></tbody></table>
<p><strong>Read Write 性能</strong></p>
<table><thead><tr><th style="text-align:center">Threads</th><th style="text-align:center">express_oltp</th><th style="text-align:center">complex_oltp</th><th style="text-align:center">olap</th><th style="text-align:center">htap</th><th style="text-align:center">kv</th></tr></thead><tbody><tr><td style="text-align:center">32</td><td style="text-align:center">90881.38/7.84</td><td style="text-align:center">88141.94/8.28</td><td style="text-align:center">88216.59/8.58</td><td style="text-align:center">89948.44/7.98</td><td style="text-align:center">90592.37/7.98</td></tr><tr><td style="text-align:center">64</td><td style="text-align:center">159748.46/8.90</td><td style="text-align:center">160695.31/9.06</td><td style="text-align:center">157714.41/10.09</td><td style="text-align:center">157230.31/9.39</td><td style="text-align:center">161391.32/8.90</td></tr><tr><td style="text-align:center">128</td><td style="text-align:center">273142.95/10.46</td><td style="text-align:center">275431.02/10.27</td><td style="text-align:center">272648.28/10.27</td><td style="text-align:center">269700.79/11.24</td><td style="text-align:center">275952.12/10.46</td></tr><tr><td style="text-align:center">256</td><td style="text-align:center">391348.85/15.27</td><td style="text-align:center">402154.83/15.00</td><td style="text-align:center">382679.53/16.71</td><td style="text-align:center">383447.47/15.27</td><td style="text-align:center">405787.34/14.46</td></tr><tr><td style="text-align:center">512</td><td style="text-align:center">465031.62/28.67</td><td style="text-align:center">462574.18/33.72</td><td style="text-align:center">466465.96/26.20</td><td style="text-align:center">461249.29/27.66</td><td style="text-align:center">464724.24/27.66</td></tr><tr><td style="text-align:center">1024</td><td style="text-align:center">525924.96/52.89</td><td style="text-align:center">535977.26/48.34</td><td style="text-align:center">510540.58/58.92</td><td style="text-align:center">522066.61/51.02</td><td style="text-align:center">521969.84/51.94</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tpcc">tpcc<a href="#tpcc" class="hash-link" aria-label="Direct link to tpcc" title="Direct link to tpcc">​</a></h4>
<p><strong>调参</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#proxy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER proxyconfig SET proxy_mem_limited=&#x27;4G&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER proxyconfig set enable_compression_protocol=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#sys</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET enable_sql_audit=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">select sleep(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET enable_perf_event=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET syslog_level=&#x27;PERF&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alter system set enable_record_trace_log=false;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p><strong>测试命令</strong></p>
<p>使用 obd 封装的 tpcc 压测流程，详细流程见官网：<a href="https://www.oceanbase.com/docs/common-oceanbase-database-0000000001954654" target="_blank" rel="noopener noreferrer">https://www.oceanbase.com/docs/common-oceanbase-database-0000000001954654</a></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obd test tpcc rn </span><span class="token comment" style="color:#999988;font-style:italic">--tenant=perf --tmp-dir=/data/2/tpcc  --warehouses=1000 --load-workers=40 --terminals=800 --run-mins=5 -v -O 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p><strong>测试数据</strong></p>
<table><thead><tr><th style="text-align:center"></th><th style="text-align:center">express_oltp</th><th style="text-align:center">complex_oltp</th><th style="text-align:center">olap</th><th style="text-align:center">htap</th><th style="text-align:center">kv</th></tr></thead><tbody><tr><td style="text-align:center">tpmC (NewOrders)</td><td style="text-align:center">292204.95</td><td style="text-align:center">302608.69</td><td style="text-align:center">264422.69</td><td style="text-align:center">294316.6</td><td style="text-align:center">286362.9</td></tr><tr><td style="text-align:center">tpmTOTAL</td><td style="text-align:center">648918.9</td><td style="text-align:center">672866.36</td><td style="text-align:center">587580.74</td><td style="text-align:center">654271.82</td><td style="text-align:center">636369.93</td></tr><tr><td style="text-align:center">Transaction Count</td><td style="text-align:center">3246324</td><td style="text-align:center">3366013</td><td style="text-align:center">2939166</td><td style="text-align:center">3272514</td><td style="text-align:center">3183132</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tpch">tpch<a href="#tpch" class="hash-link" aria-label="Direct link to tpch" title="Direct link to tpch">​</a></h4>
<p><strong>调参</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#sys</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER SYSTEM flush plan cache GLOBAL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET enable_sql_audit=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">select sleep(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET enable_perf_event=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET syslog_level=&#x27;PERF&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alter system set enable_record_trace_log=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#测试租户</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SET GLOBAL ob_sql_work_area_percentage = 80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SET GLOBAL ob_query_timeout = 36000000000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SET GLOBAL ob_trx_timeout = 36000000000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SET GLOBAL max_allowed_packet = 67108864;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## parallel_servers_target = max_cpu * server_num * 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SET GLOBAL parallel_servers_target = 624;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p><strong>测试命令</strong></p>
<p>使用 obd 封装的 tpch 压测流程，详细流程见官网：<a href="https://www.oceanbase.com/docs/common-oceanbase-database-0000000001953497" target="_blank" rel="noopener noreferrer">https://www.oceanbase.com/docs/common-oceanbase-database-0000000001953497</a></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obd test tpch rn </span><span class="token comment" style="color:#999988;font-style:italic">--user=root --test-server=server1 --tmp-dir=/data/2/ob   --tenant=perf --remote-tbl-dir=/home/admin -s 100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>测试数据（均使用列存表）</strong></p>
<table><thead><tr><th style="text-align:center"></th><th style="text-align:center">express_oltp</th><th style="text-align:center">complex_oltp</th><th style="text-align:center">olap</th><th style="text-align:center">htap</th><th style="text-align:center">kv</th></tr></thead><tbody><tr><td style="text-align:center">Q1</td><td style="text-align:center">32.33s</td><td style="text-align:center">9.86s</td><td style="text-align:center">1.83s</td><td style="text-align:center">3.03s</td><td style="text-align:center">1.90s</td></tr><tr><td style="text-align:center">Q2</td><td style="text-align:center">1.42s</td><td style="text-align:center">0.52s</td><td style="text-align:center">0.22s</td><td style="text-align:center">0.26s</td><td style="text-align:center">0.22s</td></tr><tr><td style="text-align:center">Q3</td><td style="text-align:center">7.79s</td><td style="text-align:center">2.58s</td><td style="text-align:center">0.52s</td><td style="text-align:center">0.91s</td><td style="text-align:center">0.54s</td></tr><tr><td style="text-align:center">Q4</td><td style="text-align:center">9.55s</td><td style="text-align:center">3.01s</td><td style="text-align:center">0.27s</td><td style="text-align:center">0.66s</td><td style="text-align:center">0.27s</td></tr><tr><td style="text-align:center">Q5</td><td style="text-align:center">15.77s</td><td style="text-align:center">4.59s</td><td style="text-align:center">0.73s</td><td style="text-align:center">1.29s</td><td style="text-align:center">0.70s</td></tr><tr><td style="text-align:center">Q6</td><td style="text-align:center">0.25s</td><td style="text-align:center">0.11s</td><td style="text-align:center">0.06s</td><td style="text-align:center">0.06s</td><td style="text-align:center">0.05s</td></tr><tr><td style="text-align:center">Q7</td><td style="text-align:center">9.76s</td><td style="text-align:center">3.65s</td><td style="text-align:center">1.19s</td><td style="text-align:center">1.76s</td><td style="text-align:center">1.18s</td></tr><tr><td style="text-align:center">Q8</td><td style="text-align:center">5.72s</td><td style="text-align:center">1.85s</td><td style="text-align:center">0.39s</td><td style="text-align:center">0.61s</td><td style="text-align:center">0.38s</td></tr><tr><td style="text-align:center">Q9</td><td style="text-align:center">25.26s</td><td style="text-align:center">8.93s</td><td style="text-align:center">1.88s</td><td style="text-align:center">3.28s</td><td style="text-align:center">1.88s</td></tr><tr><td style="text-align:center">Q10</td><td style="text-align:center">3.96s</td><td style="text-align:center">1.74s</td><td style="text-align:center">0.46s</td><td style="text-align:center">0.75s</td><td style="text-align:center">0.46s</td></tr><tr><td style="text-align:center">Q11</td><td style="text-align:center">2.01s</td><td style="text-align:center">0.61s</td><td style="text-align:center">0.14s</td><td style="text-align:center">0.21s</td><td style="text-align:center">0.13s</td></tr><tr><td style="text-align:center">Q12</td><td style="text-align:center">6.00s</td><td style="text-align:center">1.89s</td><td style="text-align:center">0.33s</td><td style="text-align:center">0.66s</td><td style="text-align:center">0.39s</td></tr><tr><td style="text-align:center">Q13</td><td style="text-align:center">8.40s</td><td style="text-align:center">3.43s</td><td style="text-align:center">1.64s</td><td style="text-align:center">1.94s</td><td style="text-align:center">1.64s</td></tr><tr><td style="text-align:center">Q14</td><td style="text-align:center">0.99s</td><td style="text-align:center">0.45s</td><td style="text-align:center">0.19s</td><td style="text-align:center">0.25s</td><td style="text-align:center">0.19s</td></tr><tr><td style="text-align:center">Q15</td><td style="text-align:center">1.29s</td><td style="text-align:center">0.64s</td><td style="text-align:center">0.31s</td><td style="text-align:center">0.34s</td><td style="text-align:center">0.31s</td></tr><tr><td style="text-align:center">Q16</td><td style="text-align:center">2.69s</td><td style="text-align:center">1.07s</td><td style="text-align:center">0.53s</td><td style="text-align:center">0.61s</td><td style="text-align:center">0.51s</td></tr><tr><td style="text-align:center">Q17</td><td style="text-align:center">3.85s</td><td style="text-align:center">1.15s</td><td style="text-align:center">0.21s</td><td style="text-align:center">0.31s</td><td style="text-align:center">0.20s</td></tr><tr><td style="text-align:center">Q18</td><td style="text-align:center">17.53s</td><td style="text-align:center">5.51s</td><td style="text-align:center">1.33s</td><td style="text-align:center">1.96s</td><td style="text-align:center">1.27s</td></tr><tr><td style="text-align:center">Q19</td><td style="text-align:center">1.49s</td><td style="text-align:center">0.60s</td><td style="text-align:center">0.24s</td><td style="text-align:center">0.31s</td><td style="text-align:center">0.23s</td></tr><tr><td style="text-align:center">Q20</td><td style="text-align:center">6.02s</td><td style="text-align:center">2.38s</td><td style="text-align:center">1.33s</td><td style="text-align:center">1.33s</td><td style="text-align:center">1.30s</td></tr><tr><td style="text-align:center">Q21</td><td style="text-align:center">26.01s</td><td style="text-align:center">9.11s</td><td style="text-align:center">2.70s</td><td style="text-align:center">3.60s</td><td style="text-align:center">2.74s</td></tr><tr><td style="text-align:center">Q22</td><td style="text-align:center">6.01s</td><td style="text-align:center">2.23s</td><td style="text-align:center">0.79s</td><td style="text-align:center">1.00s</td><td style="text-align:center">0.78s</td></tr><tr><td style="text-align:center">Total</td><td style="text-align:center">194.10s</td><td style="text-align:center">65.91s</td><td style="text-align:center">17.26s</td><td style="text-align:center">25.13s</td><td style="text-align:center">17.28s</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tpcds">tpcds<a href="#tpcds" class="hash-link" aria-label="Direct link to tpcds" title="Direct link to tpcds">​</a></h4>
<p><strong>调参</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#sys</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER SYSTEM flush plan cache GLOBAL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET enable_sql_audit=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">select sleep(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET enable_perf_event=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALTER system SET syslog_level=&#x27;PERF&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alter system set enable_record_trace_log=false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#测试租户</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SET GLOBAL ob_sql_work_area_percentage = 80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SET GLOBAL ob_query_timeout = 36000000000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SET GLOBAL ob_trx_timeout = 36000000000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SET GLOBAL max_allowed_packet = 67108864;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## parallel_servers_target = max_cpu * server_num * 8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SET GLOBAL parallel_servers_target = 624;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p><strong>测试命令</strong></p>
<p>数据量为 100G，测试流程详见：<a href="https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000000931730" target="_blank" rel="noopener noreferrer">https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000000931730</a></p>
<p><strong>测试数据（均使用列存表）</strong></p>
<table><thead><tr><th style="text-align:center">Query</th><th style="text-align:center">express_oltp</th><th style="text-align:center">complex_oltp</th><th style="text-align:center">olap</th><th style="text-align:center">htap</th><th style="text-align:center">kv</th></tr></thead><tbody><tr><td style="text-align:center">Q1</td><td style="text-align:center">0.62</td><td style="text-align:center">0.33</td><td style="text-align:center">0.21</td><td style="text-align:center">0.21</td><td style="text-align:center">0.20</td></tr><tr><td style="text-align:center">Q2</td><td style="text-align:center">10.19</td><td style="text-align:center">3.29</td><td style="text-align:center">0.99</td><td style="text-align:center">1.26</td><td style="text-align:center">0.99</td></tr><tr><td style="text-align:center">Q3</td><td style="text-align:center">0.20</td><td style="text-align:center">0.13</td><td style="text-align:center">0.11</td><td style="text-align:center">0.11</td><td style="text-align:center">0.11</td></tr><tr><td style="text-align:center">Q4</td><td style="text-align:center">36.42</td><td style="text-align:center">17.89</td><td style="text-align:center">11.29</td><td style="text-align:center">11.90</td><td style="text-align:center">11.39</td></tr><tr><td style="text-align:center">Q5</td><td style="text-align:center">3.95</td><td style="text-align:center">1.79</td><td style="text-align:center">0.98</td><td style="text-align:center">1.11</td><td style="text-align:center">1.00</td></tr><tr><td style="text-align:center">Q6</td><td style="text-align:center">0.55</td><td style="text-align:center">0.31</td><td style="text-align:center">0.22</td><td style="text-align:center">0.23</td><td style="text-align:center">0.32</td></tr><tr><td style="text-align:center">Q7</td><td style="text-align:center">0.81</td><td style="text-align:center">0.38</td><td style="text-align:center">0.19</td><td style="text-align:center">0.21</td><td style="text-align:center">0.29</td></tr><tr><td style="text-align:center">Q8</td><td style="text-align:center">0.55</td><td style="text-align:center">0.32</td><td style="text-align:center">0.24</td><td style="text-align:center">0.24</td><td style="text-align:center">0.22</td></tr><tr><td style="text-align:center">Q9</td><td style="text-align:center">2.15</td><td style="text-align:center">0.95</td><td style="text-align:center">0.47</td><td style="text-align:center">0.51</td><td style="text-align:center">0.48</td></tr><tr><td style="text-align:center">Q10</td><td style="text-align:center">1.81</td><td style="text-align:center">0.85</td><td style="text-align:center">0.52</td><td style="text-align:center">0.54</td><td style="text-align:center">0.50</td></tr><tr><td style="text-align:center">Q11</td><td style="text-align:center">22.09</td><td style="text-align:center">10.94</td><td style="text-align:center">7.09</td><td style="text-align:center">7.35</td><td style="text-align:center">7.13</td></tr><tr><td style="text-align:center">Q12</td><td style="text-align:center">0.47</td><td style="text-align:center">0.29</td><td style="text-align:center">0.22</td><td style="text-align:center">0.24</td><td style="text-align:center">0.23</td></tr><tr><td style="text-align:center">Q13</td><td style="text-align:center">0.53</td><td style="text-align:center">0.27</td><td style="text-align:center">0.18</td><td style="text-align:center">0.19</td><td style="text-align:center">0.19</td></tr><tr><td style="text-align:center">Q14</td><td style="text-align:center">81.19</td><td style="text-align:center">26.90</td><td style="text-align:center">7.86</td><td style="text-align:center">10.40</td><td style="text-align:center">8.01</td></tr><tr><td style="text-align:center">Q15</td><td style="text-align:center">0.71</td><td style="text-align:center">0.43</td><td style="text-align:center">0.38</td><td style="text-align:center">0.39</td><td style="text-align:center">0.39</td></tr><tr><td style="text-align:center">Q16</td><td style="text-align:center">5.18</td><td style="text-align:center">1.74</td><td style="text-align:center">0.57</td><td style="text-align:center">0.73</td><td style="text-align:center">0.57</td></tr><tr><td style="text-align:center">Q17</td><td style="text-align:center">1.26</td><td style="text-align:center">0.64</td><td style="text-align:center">0.39</td><td style="text-align:center">0.44</td><td style="text-align:center">0.41</td></tr><tr><td style="text-align:center">Q18</td><td style="text-align:center">0.71</td><td style="text-align:center">0.39</td><td style="text-align:center">0.26</td><td style="text-align:center">0.28</td><td style="text-align:center">0.37</td></tr><tr><td style="text-align:center">Q19</td><td style="text-align:center">0.30</td><td style="text-align:center">0.20</td><td style="text-align:center">0.15</td><td style="text-align:center">0.16</td><td style="text-align:center">0.16</td></tr><tr><td style="text-align:center">Q20</td><td style="text-align:center">0.39</td><td style="text-align:center">0.26</td><td style="text-align:center">0.19</td><td style="text-align:center">0.21</td><td style="text-align:center">0.20</td></tr><tr><td style="text-align:center">Q21</td><td style="text-align:center">0.99</td><td style="text-align:center">0.39</td><td style="text-align:center">0.16</td><td style="text-align:center">0.20</td><td style="text-align:center">0.17</td></tr><tr><td style="text-align:center">Q22</td><td style="text-align:center">4.93</td><td style="text-align:center">2.14</td><td style="text-align:center">1.12</td><td style="text-align:center">1.26</td><td style="text-align:center">1.14</td></tr><tr><td style="text-align:center">Q23</td><td style="text-align:center">92.37</td><td style="text-align:center">34.42</td><td style="text-align:center">13.27</td><td style="text-align:center">16.41</td><td style="text-align:center">13.41</td></tr><tr><td style="text-align:center">Q24</td><td style="text-align:center">3.47</td><td style="text-align:center">1.55</td><td style="text-align:center">0.84</td><td style="text-align:center">0.93</td><td style="text-align:center">0.85</td></tr><tr><td style="text-align:center">Q25</td><td style="text-align:center">1.14</td><td style="text-align:center">0.59</td><td style="text-align:center">0.41</td><td style="text-align:center">0.43</td><td style="text-align:center">0.40</td></tr><tr><td style="text-align:center">Q26</td><td style="text-align:center">0.49</td><td style="text-align:center">0.26</td><td style="text-align:center">0.16</td><td style="text-align:center">0.19</td><td style="text-align:center">0.16</td></tr><tr><td style="text-align:center">Q27</td><td style="text-align:center">1.14</td><td style="text-align:center">0.54</td><td style="text-align:center">0.31</td><td style="text-align:center">0.33</td><td style="text-align:center">0.31</td></tr><tr><td style="text-align:center">Q28</td><td style="text-align:center">1.37</td><td style="text-align:center">0.95</td><td style="text-align:center">0.83</td><td style="text-align:center">0.84</td><td style="text-align:center">0.86</td></tr><tr><td style="text-align:center">Q29</td><td style="text-align:center">3.94</td><td style="text-align:center">1.34</td><td style="text-align:center">0.46</td><td style="text-align:center">0.56</td><td style="text-align:center">0.45</td></tr><tr><td style="text-align:center">Q30</td><td style="text-align:center">0.40</td><td style="text-align:center">0.27</td><td style="text-align:center">0.22</td><td style="text-align:center">0.22</td><td style="text-align:center">0.22</td></tr><tr><td style="text-align:center">Q31</td><td style="text-align:center">2.37</td><td style="text-align:center">1.08</td><td style="text-align:center">0.60</td><td style="text-align:center">0.67</td><td style="text-align:center">0.59</td></tr><tr><td style="text-align:center">Q32</td><td style="text-align:center">0.12</td><td style="text-align:center">0.11</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td></tr><tr><td style="text-align:center">Q33</td><td style="text-align:center">1.21</td><td style="text-align:center">0.87</td><td style="text-align:center">0.63</td><td style="text-align:center">0.66</td><td style="text-align:center">0.62</td></tr><tr><td style="text-align:center">Q34</td><td style="text-align:center">2.22</td><td style="text-align:center">0.77</td><td style="text-align:center">0.22</td><td style="text-align:center">0.29</td><td style="text-align:center">0.20</td></tr><tr><td style="text-align:center">Q35</td><td style="text-align:center">3.57</td><td style="text-align:center">1.51</td><td style="text-align:center">0.76</td><td style="text-align:center">0.85</td><td style="text-align:center">0.72</td></tr><tr><td style="text-align:center">Q36</td><td style="text-align:center">1.98</td><td style="text-align:center">0.85</td><td style="text-align:center">0.29</td><td style="text-align:center">0.40</td><td style="text-align:center">0.29</td></tr><tr><td style="text-align:center">Q37</td><td style="text-align:center">0.52</td><td style="text-align:center">0.32</td><td style="text-align:center">0.23</td><td style="text-align:center">0.24</td><td style="text-align:center">0.23</td></tr><tr><td style="text-align:center">Q38</td><td style="text-align:center">7.00</td><td style="text-align:center">2.99</td><td style="text-align:center">1.50</td><td style="text-align:center">1.70</td><td style="text-align:center">1.52</td></tr><tr><td style="text-align:center">Q39</td><td style="text-align:center">2.98</td><td style="text-align:center">1.31</td><td style="text-align:center">0.72</td><td style="text-align:center">0.81</td><td style="text-align:center">0.71</td></tr><tr><td style="text-align:center">Q40</td><td style="text-align:center">0.29</td><td style="text-align:center">0.18</td><td style="text-align:center">0.15</td><td style="text-align:center">0.15</td><td style="text-align:center">0.14</td></tr><tr><td style="text-align:center">Q41</td><td style="text-align:center">0.04</td><td style="text-align:center">0.04</td><td style="text-align:center">0.04</td><td style="text-align:center">0.03</td><td style="text-align:center">0.04</td></tr><tr><td style="text-align:center">Q42</td><td style="text-align:center">0.18</td><td style="text-align:center">0.12</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td></tr><tr><td style="text-align:center">Q43</td><td style="text-align:center">3.89</td><td style="text-align:center">1.43</td><td style="text-align:center">0.47</td><td style="text-align:center">0.60</td><td style="text-align:center">0.47</td></tr><tr><td style="text-align:center">Q44</td><td style="text-align:center">0.50</td><td style="text-align:center">0.45</td><td style="text-align:center">0.44</td><td style="text-align:center">0.46</td><td style="text-align:center">0.45</td></tr><tr><td style="text-align:center">Q45</td><td style="text-align:center">0.47</td><td style="text-align:center">0.37</td><td style="text-align:center">0.35</td><td style="text-align:center">0.36</td><td style="text-align:center">0.35</td></tr><tr><td style="text-align:center">Q46</td><td style="text-align:center">0.97</td><td style="text-align:center">0.46</td><td style="text-align:center">0.28</td><td style="text-align:center">0.30</td><td style="text-align:center">0.27</td></tr><tr><td style="text-align:center">Q47</td><td style="text-align:center">5.12</td><td style="text-align:center">2.11</td><td style="text-align:center">0.99</td><td style="text-align:center">1.11</td><td style="text-align:center">0.98</td></tr><tr><td style="text-align:center">Q48</td><td style="text-align:center">0.54</td><td style="text-align:center">0.29</td><td style="text-align:center">0.17</td><td style="text-align:center">0.18</td><td style="text-align:center">0.16</td></tr><tr><td style="text-align:center">Q49</td><td style="text-align:center">1.25</td><td style="text-align:center">0.96</td><td style="text-align:center">0.84</td><td style="text-align:center">0.85</td><td style="text-align:center">0.82</td></tr><tr><td style="text-align:center">Q50</td><td style="text-align:center">8.07</td><td style="text-align:center">2.36</td><td style="text-align:center">0.44</td><td style="text-align:center">0.65</td><td style="text-align:center">0.44</td></tr><tr><td style="text-align:center">Q51</td><td style="text-align:center">22.35</td><td style="text-align:center">7.02</td><td style="text-align:center">2.81</td><td style="text-align:center">3.04</td><td style="text-align:center">2.83</td></tr><tr><td style="text-align:center">Q52</td><td style="text-align:center">0.17</td><td style="text-align:center">0.13</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td></tr><tr><td style="text-align:center">Q53</td><td style="text-align:center">1.56</td><td style="text-align:center">0.52</td><td style="text-align:center">0.17</td><td style="text-align:center">0.20</td><td style="text-align:center">0.16</td></tr><tr><td style="text-align:center">Q54</td><td style="text-align:center">2.24</td><td style="text-align:center">0.97</td><td style="text-align:center">0.54</td><td style="text-align:center">0.57</td><td style="text-align:center">0.52</td></tr><tr><td style="text-align:center">Q55</td><td style="text-align:center">0.14</td><td style="text-align:center">0.11</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td></tr><tr><td style="text-align:center">Q56</td><td style="text-align:center">0.67</td><td style="text-align:center">0.61</td><td style="text-align:center">0.60</td><td style="text-align:center">0.59</td><td style="text-align:center">0.57</td></tr><tr><td style="text-align:center">Q57</td><td style="text-align:center">2.88</td><td style="text-align:center">1.29</td><td style="text-align:center">0.66</td><td style="text-align:center">0.74</td><td style="text-align:center">0.67</td></tr><tr><td style="text-align:center">Q58</td><td style="text-align:center">1.15</td><td style="text-align:center">0.85</td><td style="text-align:center">0.69</td><td style="text-align:center">0.69</td><td style="text-align:center">0.68</td></tr><tr><td style="text-align:center">Q59</td><td style="text-align:center">18.73</td><td style="text-align:center">6.56</td><td style="text-align:center">2.10</td><td style="text-align:center">2.64</td><td style="text-align:center">2.04</td></tr><tr><td style="text-align:center">Q60</td><td style="text-align:center">1.16</td><td style="text-align:center">0.85</td><td style="text-align:center">0.67</td><td style="text-align:center">0.69</td><td style="text-align:center">0.66</td></tr><tr><td style="text-align:center">Q61</td><td style="text-align:center">0.41</td><td style="text-align:center">0.33</td><td style="text-align:center">0.29</td><td style="text-align:center">0.29</td><td style="text-align:center">0.29</td></tr><tr><td style="text-align:center">Q62</td><td style="text-align:center">3.00</td><td style="text-align:center">1.15</td><td style="text-align:center">0.37</td><td style="text-align:center">0.47</td><td style="text-align:center">0.36</td></tr><tr><td style="text-align:center">Q63</td><td style="text-align:center">1.57</td><td style="text-align:center">0.52</td><td style="text-align:center">0.16</td><td style="text-align:center">0.20</td><td style="text-align:center">0.16</td></tr><tr><td style="text-align:center">Q64</td><td style="text-align:center">6.74</td><td style="text-align:center">3.01</td><td style="text-align:center">1.45</td><td style="text-align:center">1.71</td><td style="text-align:center">1.42</td></tr><tr><td style="text-align:center">Q65</td><td style="text-align:center">4.18</td><td style="text-align:center">1.66</td><td style="text-align:center">0.73</td><td style="text-align:center">0.86</td><td style="text-align:center">0.70</td></tr><tr><td style="text-align:center">Q66</td><td style="text-align:center">1.00</td><td style="text-align:center">0.61</td><td style="text-align:center">0.38</td><td style="text-align:center">0.40</td><td style="text-align:center">0.37</td></tr><tr><td style="text-align:center">Q67</td><td style="text-align:center">21.56</td><td style="text-align:center">13.49</td><td style="text-align:center">10.43</td><td style="text-align:center">10.28</td><td style="text-align:center">10.44</td></tr><tr><td style="text-align:center">Q68</td><td style="text-align:center">0.37</td><td style="text-align:center">0.26</td><td style="text-align:center">0.22</td><td style="text-align:center">0.23</td><td style="text-align:center">0.22</td></tr><tr><td style="text-align:center">Q69</td><td style="text-align:center">1.23</td><td style="text-align:center">0.66</td><td style="text-align:center">0.48</td><td style="text-align:center">0.50</td><td style="text-align:center">0.47</td></tr><tr><td style="text-align:center">Q70</td><td style="text-align:center">5.39</td><td style="text-align:center">2.26</td><td style="text-align:center">1.15</td><td style="text-align:center">1.28</td><td style="text-align:center">1.16</td></tr><tr><td style="text-align:center">Q71</td><td style="text-align:center">1.20</td><td style="text-align:center">0.67</td><td style="text-align:center">0.42</td><td style="text-align:center">0.45</td><td style="text-align:center">0.40</td></tr><tr><td style="text-align:center">Q72</td><td style="text-align:center">22.39</td><td style="text-align:center">14.68</td><td style="text-align:center">10.40</td><td style="text-align:center">11.09</td><td style="text-align:center">10.44</td></tr><tr><td style="text-align:center">Q73</td><td style="text-align:center">0.63</td><td style="text-align:center">0.32</td><td style="text-align:center">0.17</td><td style="text-align:center">0.20</td><td style="text-align:center">0.17</td></tr><tr><td style="text-align:center">Q74</td><td style="text-align:center">14.22</td><td style="text-align:center">6.83</td><td style="text-align:center">3.68</td><td style="text-align:center">3.93</td><td style="text-align:center">3.59</td></tr><tr><td style="text-align:center">Q75</td><td style="text-align:center">6.72</td><td style="text-align:center">2.80</td><td style="text-align:center">1.42</td><td style="text-align:center">1.55</td><td style="text-align:center">1.39</td></tr><tr><td style="text-align:center">Q76</td><td style="text-align:center">0.39</td><td style="text-align:center">0.38</td><td style="text-align:center">0.39</td><td style="text-align:center">0.38</td><td style="text-align:center">0.38</td></tr><tr><td style="text-align:center">Q77</td><td style="text-align:center">1.39</td><td style="text-align:center">0.88</td><td style="text-align:center">0.73</td><td style="text-align:center">0.72</td><td style="text-align:center">0.70</td></tr><tr><td style="text-align:center">Q78</td><td style="text-align:center">14.46</td><td style="text-align:center">5.91</td><td style="text-align:center">2.57</td><td style="text-align:center">3.00</td><td style="text-align:center">2.56</td></tr><tr><td style="text-align:center">Q79</td><td style="text-align:center">2.66</td><td style="text-align:center">1.17</td><td style="text-align:center">0.48</td><td style="text-align:center">0.56</td><td style="text-align:center">0.48</td></tr><tr><td style="text-align:center">Q80</td><td style="text-align:center">2.94</td><td style="text-align:center">1.50</td><td style="text-align:center">0.97</td><td style="text-align:center">1.00</td><td style="text-align:center">0.95</td></tr><tr><td style="text-align:center">Q81</td><td style="text-align:center">0.63</td><td style="text-align:center">0.29</td><td style="text-align:center">0.16</td><td style="text-align:center">0.18</td><td style="text-align:center">0.16</td></tr><tr><td style="text-align:center">Q82</td><td style="text-align:center">0.78</td><td style="text-align:center">0.45</td><td style="text-align:center">0.32</td><td style="text-align:center">0.33</td><td style="text-align:center">0.37</td></tr><tr><td style="text-align:center">Q83</td><td style="text-align:center">1.14</td><td style="text-align:center">0.75</td><td style="text-align:center">0.58</td><td style="text-align:center">0.59</td><td style="text-align:center">0.58</td></tr><tr><td style="text-align:center">Q84</td><td style="text-align:center">0.58</td><td style="text-align:center">0.28</td><td style="text-align:center">0.18</td><td style="text-align:center">0.18</td><td style="text-align:center">0.18</td></tr><tr><td style="text-align:center">Q85</td><td style="text-align:center">0.71</td><td style="text-align:center">0.45</td><td style="text-align:center">0.36</td><td style="text-align:center">0.36</td><td style="text-align:center">0.36</td></tr><tr><td style="text-align:center">Q86</td><td style="text-align:center">1.14</td><td style="text-align:center">0.56</td><td style="text-align:center">0.34</td><td style="text-align:center">0.39</td><td style="text-align:center">0.35</td></tr><tr><td style="text-align:center">Q87</td><td style="text-align:center">7.29</td><td style="text-align:center">3.04</td><td style="text-align:center">1.59</td><td style="text-align:center">1.72</td><td style="text-align:center">1.57</td></tr><tr><td style="text-align:center">Q88</td><td style="text-align:center">1.83</td><td style="text-align:center">0.78</td><td style="text-align:center">0.29</td><td style="text-align:center">0.36</td><td style="text-align:center">0.29</td></tr><tr><td style="text-align:center">Q89</td><td style="text-align:center">1.78</td><td style="text-align:center">0.72</td><td style="text-align:center">0.23</td><td style="text-align:center">0.32</td><td style="text-align:center">0.24</td></tr><tr><td style="text-align:center">Q90</td><td style="text-align:center">0.44</td><td style="text-align:center">0.22</td><td style="text-align:center">0.14</td><td style="text-align:center">0.15</td><td style="text-align:center">0.14</td></tr><tr><td style="text-align:center">Q91</td><td style="text-align:center">0.14</td><td style="text-align:center">0.11</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td></tr><tr><td style="text-align:center">Q92</td><td style="text-align:center">0.11</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td><td style="text-align:center">0.10</td></tr><tr><td style="text-align:center">Q93</td><td style="text-align:center">7.68</td><td style="text-align:center">2.24</td><td style="text-align:center">0.47</td><td style="text-align:center">0.64</td><td style="text-align:center">0.47</td></tr><tr><td style="text-align:center">Q94</td><td style="text-align:center">2.74</td><td style="text-align:center">1.08</td><td style="text-align:center">0.49</td><td style="text-align:center">0.56</td><td style="text-align:center">0.49</td></tr><tr><td style="text-align:center">Q95</td><td style="text-align:center">39.75</td><td style="text-align:center">18.00</td><td style="text-align:center">6.97</td><td style="text-align:center">8.23</td><td style="text-align:center">6.72</td></tr><tr><td style="text-align:center">Q96</td><td style="text-align:center">2.43</td><td style="text-align:center">0.78</td><td style="text-align:center">0.20</td><td style="text-align:center">0.26</td><td style="text-align:center">0.20</td></tr><tr><td style="text-align:center">Q97</td><td style="text-align:center">7.34</td><td style="text-align:center">2.64</td><td style="text-align:center">1.01</td><td style="text-align:center">1.22</td><td style="text-align:center">1.04</td></tr><tr><td style="text-align:center">Q98</td><td style="text-align:center">0.64</td><td style="text-align:center">0.42</td><td style="text-align:center">0.31</td><td style="text-align:center">0.33</td><td style="text-align:center">0.31</td></tr><tr><td style="text-align:center">Q99</td><td style="text-align:center">6.00</td><td style="text-align:center">2.16</td><td style="text-align:center">0.68</td><td style="text-align:center">0.80</td><td style="text-align:center">0.65</td></tr><tr><td style="text-align:center">Total</td><td style="text-align:center">570.64s</td><td style="text-align:center">242.76s</td><td style="text-align:center">119.88s</td><td style="text-align:center">134.26s</td><td style="text-align:center">119.98s</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="Direct link to 总结" title="Direct link to 总结">​</a></h3>
<p>通过参数模板创建租户后，在代表相应场景的 benchmark 测试中性能提升效果很明显。参数模板这个功能，后续必定会在 OceanBase 的用户中逐渐普及开来，推荐大家一试~</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/operation_and_maintenance/scenario_best_practices/01_parameter_templates.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/user_manual/operation_and_maintenance/operations_and_maintenance/commonly_used_sql/ocp_monitor_ob"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">OCP 中使用的运维 SQL</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/user_manual/operation_and_maintenance/scenario_best_practices/chapter_01_multi_tenants/introduction"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">场景介绍</div></a></nav><div>Loading...</div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#背景" class="table-of-contents__link toc-highlight">背景</a></li><li><a href="#检查参数模板的配置文件" class="table-of-contents__link toc-highlight">检查参数模板的配置文件</a></li><li><a href="#设置集群级的参数模板" class="table-of-contents__link toc-highlight">设置集群级的参数模板</a></li><li><a href="#设置租户级的参数模板" class="table-of-contents__link toc-highlight">设置租户级的参数模板</a></li><li><a href="#遇到的问题及解决方法ocp-432-社区版已修复" class="table-of-contents__link toc-highlight">遇到的问题及解决方法（OCP 4.3.2 社区版已修复）</a></li><li><a href="#不同模板参数的性能测试" class="table-of-contents__link toc-highlight">不同模板参数的性能测试</a><ul><li><a href="#典型用户生产环境介绍" class="table-of-contents__link toc-highlight">典型用户生产环境介绍</a></li><li><a href="#各场景模板参数的默认值" class="table-of-contents__link toc-highlight">各场景模板参数的默认值</a></li><li><a href="#测试环境" class="table-of-contents__link toc-highlight">测试环境</a></li><li><a href="#调参说明" class="table-of-contents__link toc-highlight">调参说明</a></li><li><a href="#测试数据" class="table-of-contents__link toc-highlight">测试数据</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">SIG</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sig/AI/sig_intro">AI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/cloud-native/sig_intro">cloud-native</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/compilation/sig_intro">compilation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/develop-tools/sig_intro">develop-tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/miniob/sig_intro">MiniOB</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/obdiag/sig_intro">obdiag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/operation/sig_intro">operation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://en.oceanbase.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About OceanBase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blogs/arch/all-in-one">Blogs</a></li><li class="footer__item"><a href="https://github.com/oceanbase/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
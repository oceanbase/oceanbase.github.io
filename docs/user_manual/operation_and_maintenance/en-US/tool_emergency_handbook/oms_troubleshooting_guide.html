<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-user_manual/operation_and_maintenance/en-US/tool_emergency_handbook/oms_troubleshooting_guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">OMS Community Edition Troubleshooting Guide | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/docs/user_manual/operation_and_maintenance/en-US/tool_emergency_handbook/oms_troubleshooting_guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="OMS Community Edition Troubleshooting Guide | OceanBase"><meta data-rh="true" name="description" content="Why do we provide a troubleshooting manual for OMS Community Edition?"><meta data-rh="true" property="og:description" content="Why do we provide a troubleshooting manual for OMS Community Edition?"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/docs/user_manual/operation_and_maintenance/en-US/tool_emergency_handbook/oms_troubleshooting_guide"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/operation_and_maintenance/en-US/tool_emergency_handbook/oms_troubleshooting_guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/operation_and_maintenance/en-US/tool_emergency_handbook/oms_troubleshooting_guide" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6JQM9QDU5V-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H4XM2M50RX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-H4XM2M50RX",{})</script><link rel="stylesheet" href="/assets/css/styles.7e3a93fe.css">
<script src="/assets/js/runtime~main.fadf113a.js" defer="defer"></script>
<script src="/assets/js/main.f609a655.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a class="navbar__item navbar__link" href="/docs/blogs/arch/all-in-one">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Product Docs</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">User Manual</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Developer Manual</a></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><span><li><a class="dropdown__link" href="/docs/sig/overview/list">Special Interest Group(SIG)</a></li></span><span><li><a class="dropdown__link" href="/docs/honor/overview">Community Honors</a></li></span><span><li><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://discord.gg/74cF8vbNEs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum (in Chinese)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Data + AI</a><ul class="dropdown__menu"><span><li><a href="https://oceanbase-devhub.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">AI Workshops<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/ai-workshop-2024" target="_blank" rel="noopener noreferrer" class="dropdown__link">RAG Bot<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/dify/dify@oceanbase-workshop" target="_blank" rel="noopener noreferrer" class="dropdown__link">Dify (MySQL Compatible)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/DB-GPT/docker/compose_examples/ob_dbgpt_tutorial" target="_blank" rel="noopener noreferrer" class="dropdown__link">DB-GPT<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/en-US/about_this_manual/overview">About &quot;DBA Advanced Tutorial&quot;</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/en-US/disaster_recovery_architecture_design/high_availability_architecture_overview">Disaster Recovery Architecture Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/en-US/operations_and_maintenance/version_upgrade_path">Operation and Maintenance Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/en-US/scenario_best_practices/parameter_templates">Best Practice Scenarios</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/en-US/development_specification/object_specification">Development Specification</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/operation_and_maintenance/en-US/emergency_handbook/emergency_overview">OBServer Emergency Handbook</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/user_manual/operation_and_maintenance/en-US/tool_emergency_handbook/oms_troubleshooting_guide">Community Tools Troubleshooting Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/user_manual/operation_and_maintenance/en-US/tool_emergency_handbook/oms_troubleshooting_guide">OMS Community Edition Troubleshooting Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/user_manual/operation_and_maintenance/en-US/tool_emergency_handbook/odp_troubleshooting_guide/introduction">ODP Community Edition Troubleshooting Manual</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Community Tools Troubleshooting Guide</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">OMS Community Edition Troubleshooting Guide</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>OMS Community Edition Troubleshooting Guide</h1></header><blockquote>
<p>Why do we provide a troubleshooting manual for OMS Community Edition?</p>
<p>On the one hand, most documentation on the official website of OceanBase Database is intended for the Enterprise Edition, but the Enterprise Edition and Community Edition of OceanBase Migration Service (OMS) are totally independent of each other. Therefore, a troubleshooting manual for users of the Community Edition is required.</p>
<p>On the other hand, lightweight O&amp;M tools such as OceanBase Deployer (obd) are dedicated for OceanBase Database Community Edition, and will be supported for OceanBase Database Enterprise Edition later. However, a detailed obd troubleshooting manual is absent on the official website.</p>
<p>As for tools like OceanBase Cloud Platform (OCP) whose Enterprise Edition and Community Edition are built based on the same set of code, you can visit the official website for the troubleshooting information.</p>
</blockquote>
<blockquote>
<p>This troubleshooting manual is written personally by Liu Che, the R&amp;D director of OMS Community Edition, and is a valuable reference for troubleshooting OMS. Feel free to read through this manual and save it as a favorite.</p>
<p>Today I chatted with Xie Yun, the R&amp;D director of obd. He said that many users of OceanBase Database Community Edition are using obd for O&amp;M management of clusters. A similar troubleshooting manual for obd Community Edition will be released in December 2024.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-procedure">Troubleshooting Procedure<a href="#troubleshooting-procedure" class="hash-link" aria-label="Direct link to Troubleshooting Procedure" title="Direct link to Troubleshooting Procedure">​</a></h2>
<p>When an error occurs in OMS Community Edition, check whether the error is caused by the limitations mentioned in the official documentation.</p>
<p>The following figure shows the overall troubleshooting procedure when an error occurs in a data migration or synchronization task in OMS Community Edition.</p>
<p><img decoding="async" loading="lazy" alt="FAQ-1" src="/assets/images/001-8f4d4c8f1912097fb8febed106e9e54e.png" width="1418" height="1227" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="features-components-and-log-locations">Features, Components, and Log Locations<a href="#features-components-and-log-locations" class="hash-link" aria-label="Direct link to Features, Components, and Log Locations" title="Direct link to Features, Components, and Log Locations">​</a></h2>
<blockquote>
<p>Note:</p>
<p>All log files are automatically archived and compressed. If you want to view logs, locate the log file by time.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="schema-migration">Schema migration<a href="#schema-migration" class="hash-link" aria-label="Direct link to Schema migration" title="Direct link to Schema migration">​</a></h3>
<table><thead><tr><th>Item</th><th>Description</th></tr></thead><tbody><tr><td>Component</td><td>Ghana</td></tr><tr><td>Log directory</td><td>/home/admin/logs/ghana/Ghana</td></tr><tr><td>Schema conversion logs</td><td>dbcat.log</td></tr><tr><td>Common error logs</td><td>common-error.log</td></tr><tr><td>Common output logs</td><td>common-default.log</td></tr><tr><td>Query logs</td><td>check_query.log</td></tr><tr><td>Task logs</td><td>oms-step.log</td></tr><tr><td>Background scheduling logs</td><td>oms-scheduler.log</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="full-migration">Full migration<a href="#full-migration" class="hash-link" aria-label="Direct link to Full migration" title="Direct link to Full migration">​</a></h3>
<table><thead><tr><th>Item</th><th>Description</th></tr></thead><tbody><tr><td>Component</td><td>Connector</td></tr><tr><td>Log directory</td><td>/home/ds/run/<code>{Component ID}</code>/logs</td></tr><tr><td>Error logs</td><td>error.log</td></tr><tr><td>Operation logs</td><td>connector.log</td></tr></tbody></table>
<p>Perform the following steps to query the component ID:</p>
<ol>
<li>
<p>Log in to the console of OMS Community Edition.</p>
</li>
<li>
<p>In the left-side navigation pane, click <strong>Data Migration</strong>.</p>
</li>
<li>
<p>On the <strong>Data Migration</strong> page, click the name of the target data migration task to go to its details page.</p>
</li>
<li>
<p>Click <strong>View Component Monitoring</strong> in the upper-right corner.</p>
<p><img decoding="async" loading="lazy" alt="FAQ-2" src="/assets/images/002-145d83c22bc375568a5aa7dba11dd35d.png" width="2518" height="524" class="img_ev3q"></p>
</li>
<li>
<p>In the <strong>View Component Monitoring</strong> dialog box, check the component ID of the Full-Import component.</p>
<p><img decoding="async" loading="lazy" alt="FAQ-3" src="/assets/images/003-af19225c372ec302ca212546371c0d08.png" width="3440" height="1974" class="img_ev3q"></p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="incremental-synchronization">Incremental synchronization<a href="#incremental-synchronization" class="hash-link" aria-label="Direct link to Incremental synchronization" title="Direct link to Incremental synchronization">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="store">Store<a href="#store" class="hash-link" aria-label="Direct link to Store" title="Direct link to Store">​</a></h4>
<table><thead><tr><th>Item</th><th>Description</th></tr></thead><tbody><tr><td>Component</td><td>Store</td></tr><tr><td>Log directory</td><td>/home/ds/store/<code>store{port}</code>/log</td></tr><tr><td>obstore (source database: OceanBase Database V3.x)</td><td>liboblog.log</td></tr><tr><td>obstore (source database: OceanBase Database V4.x)</td><td>libobcdc.log</td></tr><tr><td>mysqlstore (xlog implemented by using Java)</td><td>connector/connector.log</td></tr></tbody></table>
<p>Perform the following steps to query the port number of the Store component:</p>
<ol>
<li>
<p>Log in to the console of OMS Community Edition.</p>
</li>
<li>
<p>In the left-side navigation pane, click <strong>Data Migration</strong>.</p>
</li>
<li>
<p>On the <strong>Data Migration</strong> page, click the name of the target data migration task to go to its details page.</p>
</li>
<li>
<p>Click <strong>View Component Monitoring</strong> in the upper-right corner.</p>
<p><img decoding="async" loading="lazy" alt="FAQ-2" src="/assets/images/002-145d83c22bc375568a5aa7dba11dd35d.png" width="2518" height="524" class="img_ev3q"></p>
</li>
<li>
<p>Click <strong>View Component Monitoring</strong> in the upper-right corner to view the component ID of the Store component.</p>
<p>The component ID is in the format of <code>{ip}-{port}:{subtopic}:{seq}</code>, from which you can obtain the port number of the Store component.</p>
<p><img decoding="async" loading="lazy" alt="FAQ-4" src="/assets/images/004-cb7d132b222579208e28bc4fdbaa4a99.png" width="3440" height="1974" class="img_ev3q"></p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="incr-sync">Incr-Sync<a href="#incr-sync" class="hash-link" aria-label="Direct link to Incr-Sync" title="Direct link to Incr-Sync">​</a></h4>
<table><thead><tr><th>Item</th><th>Description</th></tr></thead><tbody><tr><td>Component</td><td>Incr-Sync</td></tr><tr><td>Log directory</td><td>/home/ds/run/<code>{Component ID}</code>/logs</td></tr><tr><td>Error logs</td><td>error.log</td></tr><tr><td>Operation logs</td><td>connector.log</td></tr><tr><td>Data (which contains only the primary keys) read by Incr-Sync from the source</td><td>msg/connector_source_msg.log</td></tr><tr><td>Data (which contains only the primary keys) written by Incr-Sync to the target</td><td>msg/connector_sink_msg.log</td></tr><tr><td>Data filtered by Incr-Sync</td><td>msg/connector_filter_msg.log</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="full-verification">Full verification<a href="#full-verification" class="hash-link" aria-label="Direct link to Full verification" title="Direct link to Full verification">​</a></h3>
<table><thead><tr><th>Item</th><th>Description</th></tr></thead><tbody><tr><td>Component</td><td>Full-Verification</td></tr><tr><td>Log directory</td><td>/home/ds/run/<code>{Component ID}</code>/logs</td></tr><tr><td>Error logs</td><td>error.log</td></tr><tr><td>Operation logs</td><td>task.log</td></tr><tr><td>Verification result file</td><td>/home/ds/run/<code>{Component ID}</code>/verify/<code>{subid}</code>/</td></tr><tr><td>File of inconsistent data and inconsistency reasons</td><td>/home/ds/run/<code>{Component ID}</code>/verify/<code>{subid}</code>/<code>{schema}</code>/diff/<code>{table_name}.diff</code></td></tr><tr><td>Correction SQL file that can be executed in the target</td><td>/home/ds/run/<code>{Component ID}</code>/verify/<code>{subid}</code>/<code>{schema}</code>/sql/<code>{table_name}.sql</code></td></tr></tbody></table>
<p>The value of <code>{subid}</code> starts from 1 and increments by 1 for each reverification.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="forward-switchover">Forward switchover<a href="#forward-switchover" class="hash-link" aria-label="Direct link to Forward switchover" title="Direct link to Forward switchover">​</a></h3>
<p>Forward switchover is completed in Ghana. If you have selected <strong>Reverse Incremental Migration</strong>, a Store component and an Incr-Sync component for reverse incremental migration will be created.</p>
<table><thead><tr><th>Item</th><th>Description</th></tr></thead><tbody><tr><td>Component</td><td>Ghana</td></tr><tr><td>Log directory</td><td>/home/admin/logs/ghana/Ghana</td></tr><tr><td>Common error logs</td><td>common-error.log</td></tr><tr><td>Common output logs</td><td>common-default.log</td></tr><tr><td>Task logs</td><td>oms-step.log</td></tr><tr><td>Background scheduling logs</td><td>oms-scheduler.log</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reverse-incremental-migration">Reverse incremental migration<a href="#reverse-incremental-migration" class="hash-link" aria-label="Direct link to Reverse incremental migration" title="Direct link to Reverse incremental migration">​</a></h3>
<p>The content is consistent with that of the &quot;Incremental synchronization&quot; section, except the component ID naming format. The ID of a component for reverse incremental migration contains the <strong>reverse</strong> keyword.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="management-components">Management components<a href="#management-components" class="hash-link" aria-label="Direct link to Management components" title="Direct link to Management components">​</a></h3>
<table><thead><tr><th>Component</th><th>Description</th></tr></thead><tbody><tr><td>oms_console</td><td>The Ghana component, whose log directory is <code>/home/admin/logs/ghana/Ghana</code>.</td></tr><tr><td>oms_drc_cm</td><td>The CM component, whose log directory is <code>/home/admin/logs/cm</code>.</td></tr><tr><td>oms_drc_supervisor</td><td>The Supervisor component, whose log directory is <code>/home/admin/logs/supervisor</code>.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="issues-that-may-occur-during-oms-installation">Issues that May Occur During OMS Installation<a href="#issues-that-may-occur-during-oms-installation" class="hash-link" aria-label="Direct link to Issues that May Occur During OMS Installation" title="Direct link to Issues that May Occur During OMS Installation">​</a></h2>
<p>Log in to the container of OMS Community Edition and check whether its components are normal. If any component is abnormal, check its logs.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">supervisorctl status </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following issues often occur during installation:</p>
<ul>
<li>
<p>The port is occupied.</p>
</li>
<li>
<p>You do not have required privileges on the MetaDB of OMS Community Edition.</p>
</li>
<li>
<p>The Docker environment of some operating systems has compatibility issues. The service cannot be started due to errors related to file permissions. In this case, install OMS Community Edition in another system.</p>
</li>
<li>
<p>If the user system is cgroup v2, the status of the OMS Community Edition server is abnormal. This issue is resolved in OMS of a version later than V4.2.4.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fullincremental-migration-performance-tuning">Full/Incremental Migration Performance Tuning<a href="#fullincremental-migration-performance-tuning" class="hash-link" aria-label="Direct link to Full/Incremental Migration Performance Tuning" title="Direct link to Full/Incremental Migration Performance Tuning">​</a></h2>
<p>For more information, see <a href="https://en.oceanbase.com/docs/community-oms-en-10000000001658042" target="_blank" rel="noopener noreferrer">Incr-Sync or Full-Import tuning</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="issues-related-to-concurrency-java-virtual-machine-jvm-memory-and-number-of-records-per-slice">Issues related to concurrency, Java virtual machine (JVM) memory, and number of records per slice<a href="#issues-related-to-concurrency-java-virtual-machine-jvm-memory-and-number-of-records-per-slice" class="hash-link" aria-label="Direct link to Issues related to concurrency, Java virtual machine (JVM) memory, and number of records per slice" title="Direct link to Issues related to concurrency, Java virtual machine (JVM) memory, and number of records per slice">​</a></h3>
<p>Most performance issues can be resolved by referring to this section.</p>
<table><thead><tr><th>Issue type</th><th>Solution</th></tr></thead><tbody><tr><td>Concurrency</td><td>The degree of parallelism (DOP) for the source is specified by <code>source.workerNum</code>, and that for the target is specified by <code>sink.workerNum</code>. Generally, the same DOP is specified for the source and target during full migration. You do not need to specify a DOP for the source during incremental synchronization. <br>The DOP is subject to the number of CPU cores on the server and the maximum DOP can be four times the number of CPU cores. You also need to check whether any other migration task is running on the server.</td></tr><tr><td>JVM memory</td><td>The JVM memory is specified by <code>coordinator.connectorJvmParam</code>. You mainly need to adjust the <code>-Xms8g</code> (initial memory), <code>-Xmx8g</code> (maximum memory), and <code>-Xmn4g</code> (new memory) parameters, which must conform to the following rules: <ul><li>Initial memory = Maximum memory </li><li>New memory = Maximum memory - 4 GB </li><li>1 GB of memory is allocated to one worker thread. For example, if the DOP is set to 32, the maximum memory must be set to 32 GB. </li></ul></td></tr><tr><td>Number of records per slice</td><td>The number of records per slice is specified by the <code>source.sliceBatchSize</code> parameter, which defaults to <code>600</code>.<br>You can set the parameter to <code>10000</code> for a large table. If you set a larger value, much more memory will be consumed. You can determine whether to modify the <code>source.sliceBatchSize</code> parameter based on the <code>slice_queue</code> value in the <code>metrics.log</code> file in the <code>logs/msg/</code> directory. If the value of <code>slice_queue</code> is <code>0</code>, you need to increase the value of <code>source.sliceBatchSize</code>. The source worker thread pulls slices from the slice queue. The value of <code>slice_queue</code> being <code>0</code> indicates that no slice is available. In this case, the source worker thread will keep waiting.</td></tr></tbody></table>
<p>In full migration, post-indexing is usually required to improve the full migration efficiency. If the target is OceanBase Database, you can configure the DOP for index creation based on <code>ob.parallel</code> in the <code>struct.transfer.config</code> system parameter.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="incremental-synchronization-1">Incremental synchronization<a href="#incremental-synchronization-1" class="hash-link" aria-label="Direct link to Incremental synchronization" title="Direct link to Incremental synchronization">​</a></h3>
<p>The <code>source.splitThreshold</code> parameter specifies the transaction splitting threshold. If an incremental synchronization latency is caused by batch operations in the source, you can modify the <code>source.splitThreshold</code> parameter, which defaults to <code>128</code>. For batch <code>INSERT</code> operations, you can set the parameter to a large value no greater than <code>512</code>. For batch <code>UPDATE</code> or <code>DELETE</code> operations, you can set the parameter to a small value no less than <code>1</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="analyze-logs-in-the-metricslog-file">Analyze logs in the metrics.log file<a href="#analyze-logs-in-the-metricslog-file" class="hash-link" aria-label="Direct link to Analyze logs in the metrics.log file" title="Direct link to Analyze logs in the metrics.log file">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="identify-bottlenecks">Identify bottlenecks<a href="#identify-bottlenecks" class="hash-link" aria-label="Direct link to Identify bottlenecks" title="Direct link to Identify bottlenecks">​</a></h4>
<p>Identify bottlenecks throughout the following link: slicing &gt; reading data from the source &gt; distributing data &gt; writing data to the target.</p>
<ul>
<li>
<p>If the value of <code>slice_queue</code> is greater than <code>0</code>, no bottleneck exists in slicing. The value of <code>slice_queue</code> being <code>0</code> indicates that slicing is slow. In this case, you can increase the value of the <code>source.sliceBatchSize</code> parameter. In a multi-table scenario, you can also increase the value of the <code>source.sliceWorkerNum</code> parameter.</p>
</li>
<li>
<p>If the value of <code>source_worker_num</code> is smaller than that of <code>source_worker_num_all</code>, no bottleneck exists in reading data from the source.</p>
</li>
<li>
<p>If the value of <code>sink_worker_num</code> is smaller than that of <code>sink_worker_num_all</code>, no bottleneck exists in writing data to the target.</p>
</li>
<li>
<p>If the value of <code>dispatcher.ready_execute_batch_size</code> is <code>0</code>, no bottleneck exists in writing. If the value of <code>ready_execute_batch_size</code> is greater than <code>0</code>, writing is slow.</p>
</li>
<li>
<p>If the value of <code>dispatcher.wait_dispatch_record_size</code> is <code>0</code>, no bottleneck exists in data distribution. If the value of <code>wait_dispatch_record_size</code> is greater than <code>0</code>, a bottleneck exists in partition calculation in OMS. Partition calculation determines to which partition data is to be distributed and is time-consuming. Therefore, data records for which partition calculation is to be performed are often accumulated for a partitioned table. In a direct load scenario, you can set <code>sink.enablePartitionBucket</code> to <code>false</code> to disable partition calculation. As a result, hotspot data may exist. For more information, see <a href="https://www.oceanbase.com/knowledge-base/oms-ee-1000000000253328" target="_blank" rel="noopener noreferrer">Suspected hotspot issues</a>.</p>
</li>
<li>
<p>If the JVM memory is insufficient, full garbage collection (GC) may occur, leading to significantly compromised overall efficiency, which may be mistakenly considered as a database disconnection error. You can log in to the container of OMS Community Edition to check the GC status.</p>
</li>
<li>
<p>If batch operations are performed in the source, we recommend that you throttle the batch operations.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">su - ds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ps -ef|grep &quot;Component ID&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/alibaba/java/bin/jstat -gcutil {pid} 1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0.00  18.27  64.08   0.90  97.11  93.45      7    0.374     0    0.000    0.374</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0.00  18.27  64.08   0.90  97.11  93.45      7    0.374     0    0.000    0.374</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If full GC occurs frequently, you need to increase the JVM memory.</p>
<div class="language-JSON language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;jvm&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;JVM&quot;: &quot;{\&quot;heapMemoryMax\&quot;:7782,\&quot;heapMemoryInit\&quot;:8192,\&quot;heapMemoryUsed\&quot;:1072,\&quot;heapMemoryCommitted\&quot;:7782,\&quot;noHeapMemoryMax\&quot;:0,\&quot;noHeapMemoryInit\&quot;:2,\&quot;noHeapMemoryUsed\&quot;:78,\&quot;noHeapMemoryCommitted\&quot;:83,\&quot;gcInfoList\&quot;:[{\&quot;name\&quot;:\&quot;ParNew\&quot;,\&quot;count\&quot;:6,\&quot;costMs\&quot;:770},{\&quot;name\&quot;:\&quot;ConcurrentMarkSweep\&quot;,\&quot;count\&quot;:1,\&quot;costMs\&quot;:362}],\&quot;threadCount\&quot;:34}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;dataflow&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;slice_queue&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;os&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;OS&quot;: &quot;{\&quot;cpu\&quot;:0.5210029306414848,\&quot;sysCpu\&quot;:62.941847206385404}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;sink&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sink_worker_num&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ob_watermark_detect_times&quot;: 231,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sink_request_time&quot;: 198.43,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;source_iops&quot;: 0.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sink_total_transaction&quot;: 2384.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ob_exceed_mem_high_watermark_times&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sink_total_record&quot;: 23383.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;paused_time_ms&quot;: 0.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sink_commit_time&quot;: 3363.16,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sink_worker_num_all&quot;: 8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;shardTime&quot;: 0.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sink_total_bytes&quot;: 8739678.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sink_delay&quot;: 1717642529661,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;paused_total_time_ms&quot;: 0.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ob_free_memory&quot;: 92,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;rps&quot;: 41.42,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;tps&quot;: 3.1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ob_exceed_cpu_high_watermark_times&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;iops&quot;: 3921.59,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sinkSlowRoutes&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;sink_execute_time&quot;: 17.25,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ob_free_cpu&quot;: -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;source&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;source_read_time&quot;: 0.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;source_rps&quot;: 0.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;source_slice_time&quot;: 0.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;source_worker_num_all&quot;: 8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;source_worker_num&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;dispatcher&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;wait_dispatch_record_size&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;ready_execute_batch_size&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;frame&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;SourceTaskManager.createdSourceSize&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;queue_slot1.batchAccumulate&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;frame.throttle.throttle_memory_remain&quot;: &quot;2.14748365E9&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;queue_slot1.batchCount&quot;: 3715.0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;queue_slot1.tps&quot;: 0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="incremental-synchronization-delay-caused-by-suspected-hotspots">Incremental synchronization delay caused by suspected hotspots<a href="#incremental-synchronization-delay-caused-by-suspected-hotspots" class="hash-link" aria-label="Direct link to Incremental synchronization delay caused by suspected hotspots" title="Direct link to Incremental synchronization delay caused by suspected hotspots">​</a></h3>
<p>For more information, see <a href="https://www.oceanbase.com/knowledge-base/oms-ee-1000000000253328" target="_blank" rel="noopener noreferrer">Suspected hotspot issues</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="full-verification-1">Full verification<a href="#full-verification-1" class="hash-link" aria-label="Direct link to Full verification" title="Direct link to Full verification">​</a></h3>
<ul>
<li>
<p>For more information, see the &quot;Full migration&quot; section of this topic.</p>
</li>
<li>
<p>Specify the <code>task.sourceMasterSection.excludeColumn</code> parameter to exclude columns of the large object (LOB) type and columns that do not require verification. For more information, see <a href="https://en.oceanbase.com/docs/community-oms-en-10000000001658037" target="_blank" rel="noopener noreferrer">Parameters of the Full-Verification component</a>.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-issues-in-full-verification">Data Issues in Full Verification<a href="#data-issues-in-full-verification" class="hash-link" aria-label="Direct link to Data Issues in Full Verification" title="Direct link to Data Issues in Full Verification">​</a></h2>
<p><img decoding="async" loading="lazy" alt="FAQ-5" src="/assets/images/005-15bfb49e420f933c993432489dfec139.png" width="2806" height="1036" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-dump-data-from-a-store-component">How to dump data from a Store component<a href="#how-to-dump-data-from-a-store-component" class="hash-link" aria-label="Direct link to How to dump data from a Store component" title="Direct link to How to dump data from a Store component">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># The checkpoint is a Unix timestamp.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># For the 17006 and p_47qaxxxu8_source-000-0 error codes, see the following figure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># You can locate data by table name, time, and column content.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget &#x27;localhost:17006/p_47qaxxxsu8_source-000-0&#x27; --post-data &#x27;filter.conditions=*.*.*&amp;checkpoint=1667996779&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="FAQ-6" src="/assets/images/006-3040d92373ab905ad1b29f4b27e42d6c.png" width="1795" height="1836" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="typical-scenarios-and-features">Typical Scenarios and Features<a href="#typical-scenarios-and-features" class="hash-link" aria-label="Direct link to Typical Scenarios and Features" title="Direct link to Typical Scenarios and Features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multi-table-aggregation">Multi-table aggregation<a href="#multi-table-aggregation" class="hash-link" aria-label="Direct link to Multi-table aggregation" title="Direct link to Multi-table aggregation">​</a></h3>
<p>Here is an example of migrating data from multiple source tables to a single non-partitioned or partitioned table in the target.</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- Source table, primary key ID, unique key ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> test_01</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token keyword" style="color:#00009f">bigint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AUTO_INCREMENT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">uk_id </span><span class="token keyword" style="color:#00009f">bigint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> test_02</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token keyword" style="color:#00009f">bigint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AUTO_INCREMENT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">uk_id </span><span class="token keyword" style="color:#00009f">bigint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Target table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id_new </span><span class="token keyword" style="color:#00009f">bigint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AUTO_INCREMENT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">uk_id </span><span class="token keyword" style="color:#00009f">bigint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id_new</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">uk_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token keyword" style="color:#00009f">unique</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uk_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">PARTITION</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HASH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uk_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PARTITIONS </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Common issues are described as follows:</p>
<ul>
<li>
<p>Source tables need to be batch renamed during the creation of a data migration task. To batch rename tables, perform the following operations:</p>
<ul>
<li>
<p>Select the <strong>Match Rules</strong> option.</p>
</li>
<li>
<p>Use the <code>src_schema.test_*=dst_schema.test</code> setting.</p>
</li>
</ul>
</li>
<li>
<p>If the auto-increment ID column is used in multiple source tables, a new column name is specified as the auto-increment primary key in the target table. In this case:</p>
<ul>
<li>
<p>Do not migrate the ID column in the source table to the target table, and use the <code>id_new</code> column as an auto-increment column in the target table.</p>
</li>
<li>
<p>Set <code>sink.ignoreRedunantColumnsReplicate</code> to <code>true</code> to ignore the ID column during full migration.</p>
</li>
<li>
<p>Set <code>sink.ignoreRedunantColumnsReplicate</code> to <code>true</code> to ignore the ID column during incremental synchronization.</p>
</li>
</ul>
</li>
<li>
<p>In OceanBase Database, the primary key must contain the partitioning key if the target is a partitioned table. To enable support for data verification, perform the following operations:</p>
<ul>
<li>
<p>Set <code>task.sourceMasterSection.matchAllColumn</code> to <code>false</code> to skip the ID column during full verification. The source table must have a non-null unique key. Otherwise, verification is not supported.</p>
</li>
<li>
<p>Use the <code>filter.verify.inmod.tables=.*;.*;.*</code> setting to enable the IN mode for full verification. For more information, see <a href="https://en.oceanbase.com/docs/community-oms-en-10000000001658037" target="_blank" rel="noopener noreferrer">Parameters of the Full-Verification component</a>.</p>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-of-a-table-without-a-primary-key-from-oceanbase-database-with-a-hidden-column-added-in-the-target">Migration of a table without a primary key from OceanBase Database, with a hidden column added in the target<a href="#migration-of-a-table-without-a-primary-key-from-oceanbase-database-with-a-hidden-column-added-in-the-target" class="hash-link" aria-label="Direct link to Migration of a table without a primary key from OceanBase Database, with a hidden column added in the target" title="Direct link to Migration of a table without a primary key from OceanBase Database, with a hidden column added in the target">​</a></h3>
<p>When migrating a table without a primary key from OceanBase Database Community Edition, OMS Community Edition will use a hidden column <code>__pk_increment</code> as the primary key. During schema migration, an <code>OMS_PK_INCRMT</code> column will be added to the target table.</p>
<ul>
<li>
<p>The <code>OMS_PK_INCRMT</code> column will be deleted after a forward switchover.</p>
</li>
<li>
<p>If no forward switchover is performed and the target database serves as the source database in the next task, an exception will occur. In this case, you must manually delete the <code>OMS_PK_INCRMT</code> column.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="direct-load">Direct load<a href="#direct-load" class="hash-link" aria-label="Direct link to Direct load" title="Direct link to Direct load">​</a></h3>
<p>Apart from concurrency parameters, the direct load performance is also subject to the <code>sink.serverParallel</code> parameter, which defaults to <code>8</code>. This parameter will affect the number of worker threads and concurrency for direct load tasks on the OBServer node.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reverse-incremental-migration-1">Reverse incremental migration<a href="#reverse-incremental-migration-1" class="hash-link" aria-label="Direct link to Reverse incremental migration" title="Direct link to Reverse incremental migration">​</a></h3>
<p>If you want to roll back the database or use the source database as a standby database, we recommend that you select <strong>Reverse Incremental Migration</strong> when you create a data migration task. When you migrate data from a MySQL database to OceanBase Database Community Edition, you need to manually create a transaction database named <code>omstxndb</code> in the MySQL database, which will be used by OMS Community Edition. If you do not create this transaction database, an error prompting that the <code>omstxndb</code> database does not exist will be returned.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="active-active-disaster-recovery">Active-active disaster recovery<a href="#active-active-disaster-recovery" class="hash-link" aria-label="Direct link to Active-active disaster recovery" title="Direct link to Active-active disaster recovery">​</a></h3>
<p>If double write or canary switching is required, you can use the active-active disaster recovery feature of OMS Community Edition. At present, this feature is supported when you migrate data from a MySQL database to OceanBase Database Community Edition, or migrate data within OceanBase Database Community Edition. OMS Community Edition automatically sets cyclical replication prevention parameters. In an active-active disaster recovery scenario, all tables must have a primary key or unique key.</p>
<ol>
<li>
<p>Two databases named A and B exist.</p>
</li>
<li>
<p>An application writes data to A and B based on certain rules.</p>
<p>Non-double write means that data written to one database will not be written to the other database.</p>
</li>
<li>
<p>Both A and B store all data of the application.</p>
</li>
</ol>
<p><img decoding="async" loading="lazy" alt="FAQ-7" src="/assets/images/007-15a76d841586c9bbc97afcce60538ad7.png" width="1387" height="750" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="full-verification-2">Full verification<a href="#full-verification-2" class="hash-link" aria-label="Direct link to Full verification" title="Direct link to Full verification">​</a></h3>
<p>Two full verification modes are supported:</p>
<ul>
<li>
<p>Default mode: Data is queried based on the slice scope in both the source and target databases.</p>
</li>
<li>
<p>IN mode: Data is queried based on the slice scope in the source database. Data is queried in the target database by using the primary key or unique key in the data queried from the source database. You can enable the IN mode by using the <code>filter.verify.inmod.tables</code> parameter.</p>
<p>Here are some examples:</p>
<ul>
<li>
<p>Enable IN mode verification for all tables of the current task: <code>filter.verify.inmod.tables=.*;.*;.*</code></p>
</li>
<li>
<p>Enable IN mode verification for the <code>T1</code> table in the <code>D1</code> database: <code>filter.verify.inmod.tables=D1;T1;.*</code></p>
</li>
<li>
<p>Enable IN mode verification for the <code>T1</code> and <code>T2</code> tables in the <code>D1</code> database: <code>filter.verify.inmod.tables=D1;T1;.*|D1;T2;.*</code></p>
</li>
<li>
<p>Enable IN mode verification for the <code>T1</code> and <code>T2</code> tables in the <code>D1</code> database and the <code>T3</code> and <code>T4</code> tables in the <code>D2</code> database: <code>filter.verify.inmod.tables=D1;T1;.*|D1;T2;.*|D2;T3;.*|D2;T4;.*</code></p>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-views-used-in-oms-community-edition">System Views Used in OMS Community Edition<a href="#system-views-used-in-oms-community-edition" class="hash-link" aria-label="Direct link to System Views Used in OMS Community Edition" title="Direct link to System Views Used in OMS Community Edition">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql">MySQL<a href="#mysql" class="hash-link" aria-label="Direct link to MySQL" title="Direct link to MySQL">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="system-tables-and-views">System tables and views<a href="#system-tables-and-views" class="hash-link" aria-label="Direct link to System tables and views" title="Direct link to System tables and views">​</a></h4>
<table><thead><tr><th>Table/View</th><th>Description</th></tr></thead><tbody><tr><td>information_schema.SCHEMATA</td><td>Stores information about schemas.</td></tr><tr><td>information_schema.tables</td><td>Stores information about tables.</td></tr><tr><td>information_schema.columns</td><td>Stores information about columns.</td></tr><tr><td>information_schema.STATISTICS</td><td>Stores information about table indexes.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sql-statements">SQL statements<a href="#sql-statements" class="hash-link" aria-label="Direct link to SQL statements" title="Direct link to SQL statements">​</a></h4>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> TIME_ZONE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> sql_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> names </span><span class="token string" style="color:#e3116c">&#x27;utf8mb4&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> foreign_key_checks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">off</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> version</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query information about all schemas.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> CATALOG_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SCHEMA_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DEFAULT_CHARACTER_SET_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DEFAULT_COLLATION_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SQL_PATH </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">information_schema</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">.</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">SCHEMATA</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query information about all tables.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">TABLE_SCHEMA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">TABLE_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">TABLE_ROWS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TABLE_COLLATION</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ENGINE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">tables</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> TABLE_TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;BASE TABLE&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> TABLE_SCHEMA </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;mysql&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;information_schema&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;performance_schema&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query the database engine of a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">ENGINE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">information_schema</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">.</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">tables</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> TABLE_SCHEMA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> TABLE_NAME </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query the character set of a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TABLE_COLLATION </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">tables</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> TABLE_SCHEMA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> TABLE_NAME </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query information about columns.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">COLUMN_NAME</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">upper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">COLUMN_TYPE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">CHARACTER_MAXIMUM_LENGTH</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">NUMERIC_PRECISION</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">NUMERIC_SCALE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">columns</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_schema</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> ORDINAL_POSITION </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query all views.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TABLE_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TABLE_SCHEMA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> VIEW_DEFINITION </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">views </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> TABLE_SCHEMA </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;xx&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query only regular columns, excluding generated columns.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">COLUMN_NAME</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">upper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">COLUMN_TYPE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">CHARACTER_MAXIMUM_LENGTH</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">NUMERIC_PRECISION</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">NUMERIC_SCALE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">columns</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_schema</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GENERATION_EXPRESSION</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">or</span><span class="token plain"> GENERATION_EXPRESSION </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> ORDINAL_POSITION </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query indexes.     </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> INDEX_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">NON_UNIQUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SEQ_IN_INDEX</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">COLUMN_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SUB_PART </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">STATISTICS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_schema</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> concat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index_schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;.&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">index_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> concat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index_schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;.&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">index_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">STATISTICS</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_schema</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> upper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nullable</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;YES&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> INDEX_NAME </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SEQ_IN_INDEX </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query partitions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TABLE_SCHEMA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TABLE_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">PARTITION_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SUBPARTITION_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">PARTITION_METHOD</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">PARTITION_EXPRESSION</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SUBPARTITION_METHOD</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SUBPARTITION_EXPRESSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PARTITIONS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query constraints.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain">  REFERENCED_TABLE_SCHEMA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> REFERENCED_TABLE_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TABLE_SCHEMA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TABLE_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CONSTRAINT_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">REFERENCED_COLUMN_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> COLUMN_NAME </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">KEY_COLUMN_USAGE </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-tenant-of-oceanbase-database">MySQL tenant of OceanBase Database<a href="#mysql-tenant-of-oceanbase-database" class="hash-link" aria-label="Direct link to MySQL tenant of OceanBase Database" title="Direct link to MySQL tenant of OceanBase Database">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="system-tables-and-views-1">System tables and views<a href="#system-tables-and-views-1" class="hash-link" aria-label="Direct link to System tables and views" title="Direct link to System tables and views">​</a></h4>
<table><thead><tr><th>Table/View</th><th>Description</th></tr></thead><tbody><tr><td>information_schema.SCHEMATA</td><td>Stores information about schemas.</td></tr><tr><td>information_schema.tables</td><td>Stores information about tables.</td></tr><tr><td>information_schema.columns</td><td>Stores information about columns.</td></tr><tr><td>information_schema.STATISTICS</td><td>Stores information about table indexes.</td></tr><tr><td>information_schema.PARTITIONS</td><td>Stores information about partitions.</td></tr><tr><td>oceanbase.gv$memstore</td><td>Stores memory usage information.</td></tr><tr><td>oceanbase.gv$sysstat</td><td>Stores CPU utilization information.</td></tr><tr><td>oceanbase.gv$table</td><td>Stores table IDs.</td></tr><tr><td>oceanbase.__tenant_virtual_table_index</td><td>Stores information about indexes.</td></tr><tr><td>The following system tables are required for dividing data into macroblocks.</td><td></td></tr><tr><td>oceanbase.__all_tenant</td><td>Stores information about tenants.</td></tr><tr><td>oceanbase.__all_database</td><td>Stores information about databases.</td></tr><tr><td>oceanbase.__all_table</td><td>Stores information about tables.</td></tr><tr><td>oceanbase.__all_part</td><td>Stores information about partitions.</td></tr><tr><td>oceanbase.__all_meta_table</td><td>Stores table metadata.</td></tr><tr><td>oceanbase.__all_virtual_database</td><td>Stores information about databases.</td></tr><tr><td>oceanbase.__all_virtual_table</td><td>Stores information about tables.</td></tr><tr><td>oceanbase.__all_virtual_proxy_partition</td><td>Stores information about partitions.</td></tr><tr><td>oceanbase.__all_meta_table</td><td>Stores metadata.</td></tr><tr><td>oceanbase.__all_virtual_partition_item</td><td>Stores information about subpartitions.</td></tr><tr><td>oceanbase.__all_virtual_partition_sstable_macro_info</td><td>Stores information about macroblocks.</td></tr></tbody></table>
<main id="notice" type="explain"><h4>Note</h4><p>Macroblock information can be queried only from the sys tenant.</p></main>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sql-statements-1">SQL statements<a href="#sql-statements-1" class="hash-link" aria-label="Direct link to SQL statements" title="Direct link to SQL statements">​</a></h4>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- Query information about all schemas.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> CATALOG_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SCHEMA_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DEFAULT_CHARACTER_SET_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DEFAULT_COLLATION_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SQL_PATH </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">information_schema</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">.</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">SCHEMATA</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query information about all tables.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">TABLE_SCHEMA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">TABLE_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">TABLE_ROWS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TABLE_COLLATION</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ENGINE</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">tables</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> TABLE_TYPE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;BASE TABLE&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> TABLE_SCHEMA </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;mysql&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;information_schema&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;performance_schema&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query the database engine of a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">ENGINE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">information_schema</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">.</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">tables</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> TABLE_SCHEMA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> TABLE_NAME </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query the character set of a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TABLE_COLLATION </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">tables</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> TABLE_SCHEMA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> TABLE_NAME </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query column information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">COLUMN_NAME</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">upper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">COLUMN_TYPE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">CHARACTER_MAXIMUM_LENGTH</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">NUMERIC_PRECISION</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">NUMERIC_SCALE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">columns</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_schema</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> ORDINAL_POSITION </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query only regular columns, excluding generated columns.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">COLUMN_NAME</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">upper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">COLUMN_TYPE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">CHARACTER_MAXIMUM_LENGTH</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">NUMERIC_PRECISION</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">NUMERIC_SCALE</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">columns</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_schema</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GENERATION_EXPRESSION</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">or</span><span class="token plain"> GENERATION_EXPRESSION </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> ORDINAL_POSITION </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query indexes.     </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> INDEX_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">NON_UNIQUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SEQ_IN_INDEX</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">COLUMN_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SUB_PART </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">STATISTICS</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_schema</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> concat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index_schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;.&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">index_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> concat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index_schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;.&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">index_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">STATISTICS</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_schema</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> upper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nullable</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;YES&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> INDEX_NAME </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SEQ_IN_INDEX </span><span class="token keyword" style="color:#00009f">ASC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query partition information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> PARTITION_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SUBPARTITION_NAME </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PARTITIONS </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> TABLE_SCHEMA</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;{}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> TABLE_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;{}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query the partitioning key expression.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> PARTITION_EXPRESSION</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SUBPARTITION_EXPRESSION </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PARTITIONS </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> TABLE_SCHEMA</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> TABLE_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query tenant information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> tenant_id </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_tenant </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> tenant_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query indexes in a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain">  key_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> NON_UNIQUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">SEQ_IN_INDEX</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">COLUMN_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">null</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> nullable </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__tenant_virtual_table_index </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query the ID of a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Versions earlier than 20200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">s b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">table_id </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_database a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_table b </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">database_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">database_id </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tenant_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">database_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">table_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Versions later than 20200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">s b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">table_id </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_virtual_database a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_virtual_table b </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">database_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">database_id </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">tenant_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">database_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">table_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%s&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query partition information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Versions earlier than 20200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">s part_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">part_name </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_part </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> part_name </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> part_name</span><span class="token operator" style="color:#393A34">&lt;&gt;</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Versions later than 20200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">s part_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">part_name </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_virtual_proxy_partition </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> part_name </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> part_name</span><span class="token operator" style="color:#393A34">&lt;&gt;</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query subpartition information. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">s partition_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">when</span><span class="token plain"> subpart_name </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"> concat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">part_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;sp&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">subpart_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ELSE</span><span class="token plain"> subpart_name </span><span class="token keyword" style="color:#00009f">END</span><span class="token plain"> subpart_name </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_virtual_partition_item </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> partition_level</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query the ID of a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> table_id </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gv$</span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> database_name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">? </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Query macroblock information. store_type=1 indicates normal information, and store_type=4 indicates minor compaction information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Versions earlier than 20200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">s partition_id OMS_PARTITION_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data_seq OMS_DATA_SEQ</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">macro_range OMS_MACRO_RANGE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">row_count OMS_ROW_COUNT </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_virtual_partition_sstable_macro_info  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> tenant_id</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> store_type</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> macro_range </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">LIKE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%%]always true&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> macro_range</span><span class="token operator" style="color:#393A34">&lt;&gt;</span><span class="token string" style="color:#e3116c">&#x27;(MIN ; MAX]&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> macro_range </span><span class="token operator" style="color:#393A34">LIKE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%%]&#x27;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">svr_ip</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">svr_port</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">partition_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> svr_ip</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> svr_port</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">partition_id </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_meta_table </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> tenant_id</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> ROLE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> partition_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data_seq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Versions later than 20200</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">s partition_id OMS_PARTITION_ID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data_seq OMS_DATA_SEQ</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">macro_range OMS_MACRO_RANGE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">row_count OMS_ROW_COUNT </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_virtual_partition_sstable_macro_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> tenant_id</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> store_type</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> macro_range </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">LIKE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%%]always true&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> macro_range</span><span class="token operator" style="color:#393A34">&lt;&gt;</span><span class="token string" style="color:#e3116c">&#x27;(MIN ; MAX]&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> macro_range </span><span class="token operator" style="color:#393A34">LIKE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%%]&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">svr_ip</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">svr_port</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">partition_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> svr_ip</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> svr_port</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">partition_id </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__all_virtual_meta_table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> tenant_id</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">%</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> ROLE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> partition_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data_seq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Memory resource exhaustion prevention</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/*+query_timeout(5000000)*/</span><span class="token plain"> total</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> freeze_trigger</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">mem_limit </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gv$memstore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- CPU resource exhaustion prevention</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token operator" style="color:#393A34">-</span><span class="token function" style="color:#d73a49">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cpu_usage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">value</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> cpu_limit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> cpu_free_percent </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gv$sysstat cpu_usage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gv$sysstat cpu_limit </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> cpu_usage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cpu usage&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> cpu_limit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;max cpus&#x27;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> cpu_usage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">svr_ip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cpu_limit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">svr_ip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="others">Others<a href="#others" class="hash-link" aria-label="Direct link to Others" title="Direct link to Others">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hot-update-for-the-cdc-library">Hot update for the CDC library<a href="#hot-update-for-the-cdc-library" class="hash-link" aria-label="Direct link to Hot update for the CDC library" title="Direct link to Hot update for the CDC library">​</a></h3>
<p>OceanBase Database of each version provides a corresponding Change Data Capture (CDC) library for pulling incremental logs. The Store component of OMS Community Edition loads the CDC dynamic library to pull incremental data from OceanBase Database.</p>
<p>The following table lists the subdirectories in the <code>/home/ds/lib64/reader</code> directory of the Store component that are corresponding to OceanBase CDC libraries of different versions.</p>
<table><thead><tr><th>Store component</th><th>OceanBase CDC library</th></tr></thead><tbody><tr><td>ob-ce-reader</td><td>Hot updates not supported</td></tr><tr><td>ob-ce-4.x-reader</td><td>OceanBase Database of a version from V4.0.0 to V4.2.1</td></tr><tr><td>ob-ce-4.2.2-reader</td><td>OceanBase Database of a version from V4.2.2 to V4.3.0</td></tr><tr><td>ob-ce-4.3-reader</td><td>OceanBase Database V4.3.0 and later</td></tr></tbody></table>
<p>The hot update procedure is as follows:</p>
<ol>
<li>
<p>Download the RPM package of OceanBase CDC from <a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer">OceanBase Download Center</a>.</p>
</li>
<li>
<p>Run the following command to decompress the RPM package: <code>rpm2cpio oceanbase-ce-cdc-x.x.x.x-xxxx.el7.x86_64.rpm|cpio -idmu --quiet</code>.</p>
</li>
<li>
<p>After the decompression, the following files appear in the <code>./home/admin/oceanbase/lib64</code> directory:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">libobcdc.so.x.x.x.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">libobcdc.so.x -&gt; libobcdc.so.x.x.x.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">libobcdc.so -&gt; libobcdc.so.x</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Log in to the container of OMS Community Edition and run the <code>cd</code> command to go to the <code>/home/ds/lib64/reader</code> directory. Find the corresponding <code>ob-ce-xxx-reader</code> directory based on the version of OceanBase Database.</p>
</li>
<li>
<p>Back up the original files in the <code>ob-ce-xxx-reader</code> directory.</p>
</li>
<li>
<p>Copy the files in the <code>./home/admin/oceanbase/lib64</code> directory extracted from the RPM package to the <code>ob-ce-xxx-reader</code> directory.</p>
</li>
</ol>
<p>Then, all new Store components will use the updated CDC library. To perform a hot update for an existing Store component, perform the following steps:</p>
<ol>
<li>
<p>Go to the runtime directory <code>/home/ds/store/store{port}/lib64/reader</code> of the Store component. The directory structure is consistent with that of <code>/home/ds/lib64/reader</code>.</p>
</li>
<li>
<p>Copy the files in the <code>./home/admin/oceanbase/lib64</code> directory extracted from the RPM package to the <code>/home/ds/store/store{port}/lib64/reader/ob-ce-xxx-reader</code> directory.</p>
</li>
<li>
<p>Log in to the console of OMS Community Edition and pause the Store component. For more information, see <a href="https://en.oceanbase.com/docs/community-oms-en-10000000001658190" target="_blank" rel="noopener noreferrer">Start and pause a store</a>.</p>
</li>
<li>
<p>Run the following command to check whether the Store process has been stopped. If not, run the <code>kill -9</code> command.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ps -ef | grep store{port}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>In the console of OMS Community Edition, start the Store component.</p>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/operation_and_maintenance/en-US/tool_emergency_handbook/01_oms_troubleshooting_guide.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/user_manual/operation_and_maintenance/en-US/emergency_handbook/how_to_ask"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Unexpected Errors</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/user_manual/operation_and_maintenance/en-US/tool_emergency_handbook/odp_troubleshooting_guide/introduction"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Background Knowledge of ODP</div></a></nav><div>Loading...</div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#troubleshooting-procedure" class="table-of-contents__link toc-highlight">Troubleshooting Procedure</a></li><li><a href="#features-components-and-log-locations" class="table-of-contents__link toc-highlight">Features, Components, and Log Locations</a><ul><li><a href="#schema-migration" class="table-of-contents__link toc-highlight">Schema migration</a></li><li><a href="#full-migration" class="table-of-contents__link toc-highlight">Full migration</a></li><li><a href="#incremental-synchronization" class="table-of-contents__link toc-highlight">Incremental synchronization</a></li><li><a href="#full-verification" class="table-of-contents__link toc-highlight">Full verification</a></li><li><a href="#forward-switchover" class="table-of-contents__link toc-highlight">Forward switchover</a></li><li><a href="#reverse-incremental-migration" class="table-of-contents__link toc-highlight">Reverse incremental migration</a></li><li><a href="#management-components" class="table-of-contents__link toc-highlight">Management components</a></li></ul></li><li><a href="#issues-that-may-occur-during-oms-installation" class="table-of-contents__link toc-highlight">Issues that May Occur During OMS Installation</a></li><li><a href="#fullincremental-migration-performance-tuning" class="table-of-contents__link toc-highlight">Full/Incremental Migration Performance Tuning</a><ul><li><a href="#issues-related-to-concurrency-java-virtual-machine-jvm-memory-and-number-of-records-per-slice" class="table-of-contents__link toc-highlight">Issues related to concurrency, Java virtual machine (JVM) memory, and number of records per slice</a></li><li><a href="#incremental-synchronization-1" class="table-of-contents__link toc-highlight">Incremental synchronization</a></li><li><a href="#analyze-logs-in-the-metricslog-file" class="table-of-contents__link toc-highlight">Analyze logs in the metrics.log file</a></li><li><a href="#incremental-synchronization-delay-caused-by-suspected-hotspots" class="table-of-contents__link toc-highlight">Incremental synchronization delay caused by suspected hotspots</a></li><li><a href="#full-verification-1" class="table-of-contents__link toc-highlight">Full verification</a></li></ul></li><li><a href="#data-issues-in-full-verification" class="table-of-contents__link toc-highlight">Data Issues in Full Verification</a><ul><li><a href="#how-to-dump-data-from-a-store-component" class="table-of-contents__link toc-highlight">How to dump data from a Store component</a></li></ul></li><li><a href="#typical-scenarios-and-features" class="table-of-contents__link toc-highlight">Typical Scenarios and Features</a><ul><li><a href="#multi-table-aggregation" class="table-of-contents__link toc-highlight">Multi-table aggregation</a></li><li><a href="#migration-of-a-table-without-a-primary-key-from-oceanbase-database-with-a-hidden-column-added-in-the-target" class="table-of-contents__link toc-highlight">Migration of a table without a primary key from OceanBase Database, with a hidden column added in the target</a></li><li><a href="#direct-load" class="table-of-contents__link toc-highlight">Direct load</a></li><li><a href="#reverse-incremental-migration-1" class="table-of-contents__link toc-highlight">Reverse incremental migration</a></li><li><a href="#active-active-disaster-recovery" class="table-of-contents__link toc-highlight">Active-active disaster recovery</a></li><li><a href="#full-verification-2" class="table-of-contents__link toc-highlight">Full verification</a></li></ul></li><li><a href="#system-views-used-in-oms-community-edition" class="table-of-contents__link toc-highlight">System Views Used in OMS Community Edition</a><ul><li><a href="#mysql" class="table-of-contents__link toc-highlight">MySQL</a></li><li><a href="#mysql-tenant-of-oceanbase-database" class="table-of-contents__link toc-highlight">MySQL tenant of OceanBase Database</a></li></ul></li><li><a href="#others" class="table-of-contents__link toc-highlight">Others</a><ul><li><a href="#hot-update-for-the-cdc-library" class="table-of-contents__link toc-highlight">Hot update for the CDC library</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">SIG</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sig/AI/sig_intro">AI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/cloud-native/sig_intro">cloud-native</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/compilation/sig_intro">compilation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/develop-tools/sig_intro">develop-tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/miniob/sig_intro">MiniOB</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/obdiag/sig_intro">obdiag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/operation/sig_intro">operation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://en.oceanbase.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About OceanBase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blogs/arch/all-in-one">Blogs</a></li><li class="footer__item"><a href="https://github.com/oceanbase/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
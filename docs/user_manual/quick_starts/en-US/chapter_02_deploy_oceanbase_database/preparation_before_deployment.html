<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/preparation_before_deployment" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Preparations before deployment | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/preparation_before_deployment"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Preparations before deployment | OceanBase"><meta data-rh="true" name="description" content="OceanBase Database is a native distributed database. You can deploy OceanBase Database in standalone mode in an experience environment. However, you must deploy OceanBase Database on at least three servers in a production environment. The deployment of OceanBase Database has something in common with that of conventional databases. You need to modify the hardware and software settings of the operating system and adjust the file system to ensure stable operation and high performance of OceanBase Database."><meta data-rh="true" property="og:description" content="OceanBase Database is a native distributed database. You can deploy OceanBase Database in standalone mode in an experience environment. However, you must deploy OceanBase Database on at least three servers in a production environment. The deployment of OceanBase Database has something in common with that of conventional databases. You need to modify the hardware and software settings of the operating system and adjust the file system to ensure stable operation and high performance of OceanBase Database."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/preparation_before_deployment"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/preparation_before_deployment" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/preparation_before_deployment" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6JQM9QDU5V-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H4XM2M50RX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-H4XM2M50RX",{})</script><link rel="stylesheet" href="/assets/css/styles.7e3a93fe.css">
<script src="/assets/js/runtime~main.bf54e5d6.js" defer="defer"></script>
<script src="/assets/js/main.8fc986a8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a class="navbar__item navbar__link" href="/docs/blogs/arch/all-in-one">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Product Docs</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">User Manual</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Developer Manual</a></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><span><li><a class="dropdown__link" href="/docs/sig/overview/list">Special Interest Group(SIG)</a></li></span><span><li><a class="dropdown__link" href="/docs/honor/overview">Community Honors</a></li></span><span><li><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://discord.gg/74cF8vbNEs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum (in Chinese)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Data + AI</a><ul class="dropdown__menu"><span><li><a href="https://oceanbase-devhub.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">AI Workshops<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/ai-workshop-2024" target="_blank" rel="noopener noreferrer" class="dropdown__link">RAG Bot<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/dify/dify@oceanbase-workshop" target="_blank" rel="noopener noreferrer" class="dropdown__link">Dify (MySQL Compatible)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/DB-GPT/docker/compose_examples/ob_dbgpt_tutorial" target="_blank" rel="noopener noreferrer" class="dropdown__link">DB-GPT<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_01_overview_of_the_oceanbase_database/introduction">Overview of the Oceanbase database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/introduction">Deploy Oceanbase database</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/preparation_before_deployment">Preparations before deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/deployment_components">Ecosystem components for deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/deploy_personal_environment">Deploy OceanBase Database in an experience environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/deploy-production-environment">Deploy OceanBase Database in a production environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/view-resources">View the resource usage of an OceanBase cluster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/create-tenant">Create a MySQL user tenant</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/connecting-tenants">Connect to a tenant</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/set-parameters">Set parameters and variables</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_03_test_oceanbase_database/introduction">Test Oceanbase database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_04_migration_and_synchronization_oceanbase/introduction">Migrate and synchronize data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_05_operation_and_maintenance/introduction">Operation and maintenance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/introduction">Using Oceanbase for business development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_07_diagnosis_and_tuning/introduction">Diagnosis_and_tuning</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Deploy Oceanbase database</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Preparations before deployment</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>2.1 Preparations before deployment</h1></header>
<p>OceanBase Database is a native distributed database. You can deploy OceanBase Database in standalone mode in an experience environment. However, you must deploy OceanBase Database on at least three servers in a production environment. The deployment of OceanBase Database has something in common with that of conventional databases. You need to modify the hardware and software settings of the operating system and adjust the file system to ensure stable operation and high performance of OceanBase Database.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="software-and-hardware-resources">Software and hardware resources<a href="#software-and-hardware-resources" class="hash-link" aria-label="Direct link to Software and hardware resources" title="Direct link to Software and hardware resources">​</a></h2>
<p>OceanBase Database has been systematically tested and verified. We recommend that you deploy it in an environment that meets the software and hardware requirements listed in the following table.</p>
<table><thead><tr><th>Item</th><th>Requirement</th><th>Description</th></tr></thead><tbody><tr><td>Server</td><td>Mainstream servers that adapt to common software from Chinese manufacturers are supported.</td><td>The support details are as follows: <ul><li>Physical servers: Suma H620 series, Huawei TaiShan 200 series, and Great Wall Qingtian DF720 </li><li>CPUs: Hygon 7185/7280, Kunpeng 920, and FeiTeng 2000+ </li><li>Operating systems: Kylin V4, Kylin V10, and UOS V20; upper-layer middleware: TongWeb V7.0 and Apusic Application Server V9.0 </li></ul></td></tr><tr><td>Operating system</td><td>x86 and Arm architectures are supported.</td><td>The following operating systems are supported: <ul><li>Alibaba Cloud Linux 2/3 (kernel: Linux 3.10.0 and later)</li><li>Anolis OS 8.X (kernel: Linux 3.10.0 and later)</li><li>Red Hat Enterprise Linux Server 7.X and 8.X (kernel: Linux 3.10.0 and later)</li><li>CentOS Linux 7.X and 8.X (kernel: Linux 3.10.0 and later)</li><li>Debian 9.X and later (kernel: Linux 3.10.0 and later)</li><li>Ubuntu 20.X and later (kernel: Linux 3.10.0 and later)</li><li>SUSE/openSUSE 15.X and later (kernel: Linux 3.10.0 and later)</li><li>Kylin V10</li><li>UOS V20 </li><li>NFSChina 4.0 and later</li><li>Inspur KOS 5.8</li></ul></td></tr><tr><td>CPU</td><td><ul><li>For a test environment, at least 2 cores are required. </li><li>For a production environment, at least 4 cores are required and 32 cores or more are recommended. </li><li>For a performance test environment, 24 cores or more are recommended. </li></ul></td><td>The values provided here are the minimum number of cores allocated to OceanBase Database, not the total number of cores on servers.</td></tr><tr><td>Memory</td><td><ul><li>For a test environment, at least 6 GB is required. </li><li>For a production environment, at least 16 GB is required. For long-term use, at least 32 GB is required, and a value in the range from 256 GB to 1024 GB is recommended. </li><li>For a performance test environment, a value in the range from 128 GB to 1024 GB is recommended. </li></ul></td><td>The values provided here are the minimum size of memory allocated to OceanBase Database, not the total size of memory on servers. <blockquote><b>Note</b><br>If multiple clusters are deployed, we recommend that you use OceanBase Cloud Platform (OCP) for unified O&amp;M management. If a small number of clusters are deployed, we recommend that you use OceanBase Deployer (OBD) for installation and deployment. </blockquote></td></tr><tr><td>Swap</td><td>The swap feature is prohibited.</td><td>Partition swapping will compromise the performance of the entire cluster.</td></tr><tr><td>Disk type</td><td>SSDs are used.</td><td>We recommend that you do not use HDDs in a production environment or performance test environment.</td></tr><tr><td>File system</td><td>XFS and ext4 are supported.</td><td>Other file systems are not supported. When the data size exceeds 16 TB, XFS is recommended.</td></tr><tr><td>Disk capacity</td><td>The total disk capacity must be more than six times the memory size.</td><td>None</td></tr><tr><td>Disk mounting</td><td>The data disk size must be at least 20 GB. In an experience environment, the log disk size must be at least 24 GB. In a production environment, the log disk size must be at least 48 GB.</td><td>The rules for configuring the data disk size and log disk size are described as follows: <ul><li>We recommend that the combined size of the log disk and data disk be more than six times the size of memory allocated to OceanBase Database. Specifically, it should be greater than <code>memory_limit</code> × 6. </li><li>We recommend that the log disk size be three times the size of memory allocated to OceanBase Database. Specifically, it should be <code>memory_limit</code> × 3. </li><li>You can estimate the data disk size based on the business data volume. </li><li>In a production environment, data and logs must be stored on separate disks to avoid compromising the performance. </li></ul></td></tr><tr><td>RAID</td><td>Supported</td><td>To use RAID cache, data must be written in write-through mode.</td></tr><tr><td>NIC</td><td>At least a 1 Gbit/s NIC is used. A 10 Gbit/s NIC is recommended.</td><td>None</td></tr></tbody></table>
<blockquote>
<p><strong>Note</strong></p>
<ul>
<li>
<p>More software and hardware platforms are currently being tested for compatibility.</p>
</li>
<li>
<p>If you plan to deploy an OceanBase cluster on multiple servers, make sure that all servers in the cluster have the same configurations.</p>
</li>
</ul>
</blockquote>
<p>For the Red Hat operating system earlier than RHEL 9, run the following command to manually disable the transparent huge page mode:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo never &gt; /sys/kernel/mm/redhat_transparent_hugepage/enabled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For the Red Hat operating system RHEL 9 or CentOS operating system, run the following command to manually disable the transparent huge page mode:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="command-dependencies">Command dependencies<a href="#command-dependencies" class="hash-link" aria-label="Direct link to Command dependencies" title="Direct link to Command dependencies">​</a></h2>
<table><thead><tr><th>Environment package</th><th>Requirement</th><th>Reason</th></tr></thead><tbody><tr><td>nc</td><td>Strong dependency</td><td>The <code>nc</code> command is required when you deploy OceanBase Database by using OCP.</td></tr><tr><td>net-tools</td><td>Strong dependency</td><td>The <code>netstat</code> command is required when you deploy OceanBase Database by using OCP.</td></tr><tr><td>Python</td><td>Python 2.7 and later</td><td>Python commands are required when you add hosts in the OCP console. Python 2 commands are not supported.</td></tr><tr><td>JDK</td><td>java-1.8.0-openjdk</td><td>JDK is required when you deploy OCP Express and OCP by using OBD.</td></tr><tr><td>ntp/Chrony</td><td>Non-strong dependency</td><td>OceanBase clusters require that the time difference be less than 2s.</td></tr><tr><td>NFS</td><td>Non-strong dependency</td><td>OceanBase Database uses Network File System (NFS) as the backup media for remote physical backup.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="server-initialization">Server initialization<a href="#server-initialization" class="hash-link" aria-label="Direct link to Server initialization" title="Direct link to Server initialization">​</a></h2>
<blockquote>
<p><strong>Note</strong></p>
<ul>
<li>
<p>Server initialization is optional for deploying an experience environment, and is required for deploying a production environment.</p>
</li>
<li>
<p>This section describes how to initialize servers in an environment deployed by using a x86-based CentOS Linux 7.9 image. The procedure may differ for other environments.</p>
</li>
</ul>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-user-and-a-user-group">Create a user and a user group<a href="#create-a-user-and-a-user-group" class="hash-link" aria-label="Direct link to Create a user and a user group" title="Direct link to Create a user and a user group">​</a></h3>
<p>The following example describes how to create a normal operating system user <code>admin</code>.</p>
<blockquote>
<p><strong>Note</strong></p>
<ul>
<li>
<p>You need to perform the following operations on each OBServer node.</p>
</li>
<li>
<p>In OCP Community Edition of a version earlier than V4.2.0, you can use only the <code>admin</code> user to install and deploy OceanBase Database and OceanBase Database Proxy (ODP), also known as OBProxy. In OCP Community Edition V4.2.0 and later, you can use a custom user to install and deploy them. We recommend that you use OCP of the latest version for deployment.</p>
</li>
<li>
<p>OBD allows you to use any operating system users to install and deploy OceanBase Database and ODP.</p>
</li>
</ul>
</blockquote>
<ol>
<li>
<p>Create a user group named <code>admin</code>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]# groupadd -g 6001 admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a user named <code>admin</code>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]# useradd -u 6001 -g admin admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Notice</strong></p>
<p>The user ID must be consistent on all OBServer nodes. Otherwise, the backup will fail due to permission issues when you use NFS as the backup media.</p>
</blockquote>
</li>
<li>
<p>Configure the password of the <code>admin</code> user.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]# passwd admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Enter the password on the CLI.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-passwordless-sudo-access-for-the-user">Configure passwordless sudo access for the user<a href="#configure-passwordless-sudo-access-for-the-user" class="hash-link" aria-label="Direct link to Configure passwordless sudo access for the user" title="Direct link to Configure passwordless sudo access for the user">​</a></h3>
<ol>
<li>
<p>Add the write permission of the <code>sudoers</code> file in the <code>/etc/</code> directory.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]# chmod u+w /etc/sudoers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Configure passwordless sudo access for the <code>admin</code> user.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]# vim /etc/sudoers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Append the following content to the end of the <code>sudoers</code> file in the <code>/etc/</code> directory:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">## Same thing without a password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># %wheel        ALL=(ALL)       NOPASSWD: ALL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">admin       ALL=(ALL)       NOPASSWD: ALL</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Remove the write permission of the <code>sudoers</code> file in the <code>/etc/</code> directory.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]# chmod u-w  /etc/sudoers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-ssh-trust-for-the-user">Configure SSH trust for the user<a href="#configure-ssh-trust-for-the-user" class="hash-link" aria-label="Direct link to Configure SSH trust for the user" title="Direct link to Configure SSH trust for the user">​</a></h3>
<ol>
<li>
<p>Run the following command on the server where OBD resides to check whether the public key of the user exists:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]# ls ~/.ssh/id_rsa.pub</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If yes, you do not need to generate a new key.</p>
</li>
<li>
<p>(Optional) Run the following command to generate the public and private SSH keys:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]# ssh-keygen -t rsa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Run the following command on the server where OBD resides to copy the generated public SSH key to the <code>authorized_keys</code> file on the target server:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]# ssh-copy-id -i ~/.ssh/id_rsa.pub &lt;user&gt;@&lt;server_ip&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>If your server supports <code>yum</code> commands, you can run a script after the keys are generated to configure SSH trust. The procedure is as follows:</p>
<blockquote>
<p><strong>Note</strong></p>
<p>To run a script to configure SSH trust, you must have sudo permissions.</p>
</blockquote>
<ol>
<li>
<p>Create a script.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]# vim ssh.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, the script is named <code>ssh.sh</code>. You can specify a custom name. The script content is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/usr/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SERVERS=(&quot;&lt;user&gt;@&lt;server_ip1&gt;&quot; &quot;&lt;user&gt;@&lt;server_ip2&gt;&quot; &quot;&lt;user&gt;@&lt;server_ip3&gt;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PASSWORD=&quot;******&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keygen() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum -y install expect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">expect -c &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   spawn ssh-keygen -t rsa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   expect {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *(~/.ssh/id_rsa):* { send -- \r;exp_continue}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *(y/n)* { send -- y\r;exp_continue}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *Enter* { send -- \r;exp_continue}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *(y/n)* { send -- y\r;exp_continue}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *Enter* { send -- \r;exp_continue}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      eof {exit 0}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   expect eof</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">copy(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">expect -c &quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   set timeout -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   spawn ssh-copy-id $1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   expect {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *(yes/no)* { send -- yes\r; exp_continue }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      *password:* { send -- $PASSWORD\r; exp_continue}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      eof {exit 0}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   expect eof</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh_copy_id_to_all(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keygen ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for host in ${SERVERS[@]}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      copy $host</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh_copy_id_to_all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Notice</strong></p>
<ul>
<li>
<p>You must replace the server list and password in the first two lines of the script with the actual server list and password.</p>
</li>
<li>
<p>SSH trust between the OBD node, OCP node, and target service node must be configured for the created user.</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>Add the execute permission of the script.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]# chmod u+x your_script.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Execute the script.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]# ./ssh.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="disk-and-file-system-planning">Disk and file system planning<a href="#disk-and-file-system-planning" class="hash-link" aria-label="Direct link to Disk and file system planning" title="Direct link to Disk and file system planning">​</a></h3>
<table><thead><tr><th>Mount point</th><th>Size</th><th>Description</th><th>File system format</th></tr></thead><tr><td>/home</td><td>100 GB to 300 GB</td><td>Installation directory</td><td rowspan="3">When the data size does not exceed 16 TB, both XFS and ext4 are supported, but ext4 is recommended. When the data size exceeds 16 TB, XFS must be used. </td></tr><tr><td>/data</td><td>Depending on the size of data to be stored</td><td>Data directory of OceanBase Database</td></tr><tr><td>/redo</td><td>Three to four times the memory size of the database</td><td>Transaction log directory of OceanBase Database</td></tr></table>
<blockquote>
<p><strong>Note</strong></p>
<p>In a production environment, we recommend that you deploy the data directory (<code>/data</code>) and transaction log directory (<code>/redo</code>) on separate disks, that is, use independent mount directories.</p>
</blockquote>
<p>The directories mentioned in the preceding table are described as follows:</p>
<ul>
<li>
<p>Installation directory</p>
<p>The installation directory of OceanBase Database stores non-data files, such as binary files, configuration files, and system log files. It features sequential writes. System log files, including <code>observer.log</code>, <code>election.log</code>, <code>rootservice.log</code>, and <code>trace.log</code>, occupy a significant portion of disk space. In OceanBase Database, the size of each system log file is limited to 256 MB. Generally, new system logs are generated every 3 to 8 minutes. Therefore, you must ensure sufficient space for storing the log files and reserve extra capacity to support software upgrade and maintenance operations.</p>
<p>We recommend that the remaining disk space be at least 200 GB in a production environment. If a long system log retention period is specified, you need to estimate the required disk space based on the amount of system logs generated by the business system.</p>
</li>
<li>
<p>Data directory</p>
<p>The data directory of OceanBase Database stores the baseline data. It features random reads, sequential writes, and occasionally intensive random writes. The space of the data directory is preallocated. Once you specify the size of the directory and deploy it, the space is immediately occupied. You cannot modify a parameter to reduce the allocated space. The size of disk space required for the data directory depends on the amount of business data and the estimated data growth trends. If the data directory and transaction log directory are deployed on the same disk, we recommend that you specify a fixed disk capacity for the data directory by using the <code>datafile_size</code> parameter.</p>
</li>
<li>
<p>Transaction log directory</p>
<p>The transaction log directory of OceanBase Database stores all transaction operation logs. It features sequential writes. The space of the transaction log directory is preallocated. Once you specify the size of the directory and deploy it, the space is immediately occupied. You can modify a parameter to dynamically adjust the allocated space.</p>
<p>OceanBase Database uses the Write-Ahead Logging (WAL) strategy to ensure the atomicity and durability of transactions. Sufficient log space is required to handle the log generation speed in high-concurrency transaction scenarios. To ensure stable system operation and avoid service interruptions caused by log overflow, the transaction log directory must have sufficient reserved space. We recommend that the size of the reserved space be no less than three to four times the memory size of OceanBase Database. If the transaction log directory and data directory are deployed on the same disk, we recommend that you specify a fixed disk capacity for the transaction log directory by using the <code>log_disk_size</code> parameter.</p>
</li>
</ul>
<p>By default, the installation directory is located under the home directory of the deployment user, for example, <code>/home/admin</code>. The data directory (such as <code>/data</code>) and transaction log directory (such as <code>/redo</code>) must be mounted to different disks, and the permissions of both directories are 755 (drwxr-xr-x).</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ ls -ld /data </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x 2 admin admin 4096 Jan 25 17:34 /data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ ls -ld /redo </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwxr-xr-x 2 admin admin 4096 Jan 25 17:35 /redo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ df -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem      Size  Used Avail Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devtmpfs         16G     0   16G   0% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            16G     0   16G   0% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            16G  676K   16G   1% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            16G     0   16G   0% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/vda1       500G   50G  450G  90% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/vdb        500G    0   500G   0% /data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/vdc        500G    0   500G   0% /redo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optional-configure-logical-volumes-for-disks">(Optional) Configure logical volumes for disks<a href="#optional-configure-logical-volumes-for-disks" class="hash-link" aria-label="Direct link to (Optional) Configure logical volumes for disks" title="Direct link to (Optional) Configure logical volumes for disks">​</a></h4>
<p>In practice, you may encounter a situation where the disk capacity of servers is insufficient to store more data, and adding a server is costly. In this case, you can scale out the disks to resolve the issue. We recommend that you configure logical volumes for the disks before deployment.</p>
<p>The following example describes how to use four disks to create a disk/file system required for deploying OceanBase Database.</p>
<ol>
<li>
<p>Initialize physical volumes.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ pvcreate /dev/vdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ pvcreate /dev/vdc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ pvcreate /dev/vdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ pvcreate /dev/vde</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create volume groups.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ vgcreate vg_obdata /dev/vdb /dev/vdc /dev/vdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ vgcreate vg_obredo /dev/vde</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create logical volumes.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ lvcreate -l 100%FREE vg_obdata -n lv_obdata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ lvcreate -l 100%FREE vg_obredo -n lv_obredo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Format logical volumes.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ mkfs.ext4 /dev/vg_obdata/lv_obdata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ mkfs.ext4 /dev/vg_obredo/lv_obredo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>At present, ext4 and XFS are supported. For more information, see the description of file formats in preceding sections.</p>
</li>
<li>
<p>Create mount points.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ sudo mkdir /data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ sudo mkdir /redo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Configure automatic mounting upon startup.</p>
<p>Add the following content to the <code>fstab</code> file in the <code>/etc/</code> directory:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/dev/vg_obdata/lv_obdata          /data         ext4            defaults,noatime,nodiratime,nodelalloc,barrier=0        0 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/vg_obredo/lv_obredo          /redo         ext4            defaults,noatime,nodiratime,nodelalloc,barrier=0        0 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Perform mounting and confirm the operation.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ mount -a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[admin@test001 ~]$ df -h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="modify-user-resource-limits">Modify user resource limits<a href="#modify-user-resource-limits" class="hash-link" aria-label="Direct link to Modify user resource limits" title="Direct link to Modify user resource limits">​</a></h3>
<p>Add the following content to the <code>limits.conf</code> file in the <code>/etc/security/</code> directory:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root soft nofile 655350</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root hard nofile 655350</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* soft nofile 655350</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* hard nofile 655350</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* soft stack 20480</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* hard stack 20480</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* soft nproc 655360</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* hard nproc 655360</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* soft core unlimited</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* hard core unlimited</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Note</strong></p>
<p>If the <code>20-nproc.conf</code> file exists in the <code>/etc/security/limits.d/</code> directory and contains the <code>nproc</code> setting, you must change the value of <code>nproc</code> to <code>655360</code>.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="modify-kernel-parameters">Modify kernel parameters<a href="#modify-kernel-parameters" class="hash-link" aria-label="Direct link to Modify kernel parameters" title="Direct link to Modify kernel parameters">​</a></h3>
<p>Add the following content to the <code>sysctl.conf</code> file in the <code>/etc/</code> directory:</p>
<blockquote>
<p><strong>Note</strong></p>
<p>When you deploy OceanBase Database in a container, you need to modify the corresponding kernel configurations on the host. The container will inherit the kernel configurations of the host.</p>
</blockquote>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># for oceanbase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Modify the limit on the asynchronous I/O in the kernel.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs.aio-max-nr=1048576</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Optimize the network.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.core.somaxconn = 2048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.core.netdev_max_backlog = 10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.core.rmem_default = 16777216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.core.wmem_default = 16777216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.core.rmem_max = 16777216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.core.wmem_max = 16777216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.ip_local_port_range = 3500 65535</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.ip_forward = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.conf.default.rp_filter = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.conf.default.accept_source_route = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.tcp_syncookies = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.tcp_rmem = 4096 87380 16777216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.tcp_wmem = 4096 65536 16777216</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.tcp_max_syn_backlog = 16384</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.tcp_fin_timeout = 15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.tcp_tw_reuse = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.tcp_tw_recycle = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net.ipv4.tcp_slow_start_after_idle=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm.swappiness = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm.min_free_kbytes = 2097152</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm.overcommit_memory = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs.file-max = 6573688</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Modify the number of virtual memory areas that a process can have.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm.max_map_count = 655360</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Configure to store the core dump file in the data directory of OceanBase Database.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kernel.core_pattern = /data/core-%e-%p-%t</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Note</strong></p>
<p>We recommend that you do not specify a path in the root partition for <code>kernel.core_pattern</code>. This is to prevent the root partition from filling up with excessively large core dump files.</p>
</blockquote>
<p>For an Arm-based system, you also need to add the following content to the <code>sysctl.conf</code> file in the <code>/etc/</code> directory:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Disable NUMA balancing to avoid performance jitters during balancing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rnel.numa_balancing = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Disable memory reclamation and reallocation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vm.zone_reclaim_mode = 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, run the <code>sysctl -p</code> command to load and validate the configuration file.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="disable-the-firewall-and-selinux">Disable the firewall and SELinux<a href="#disable-the-firewall-and-selinux" class="hash-link" aria-label="Direct link to Disable the firewall and SELinux" title="Direct link to Disable the firewall and SELinux">​</a></h3>
<ul>
<li>
<p>Disable the firewall and confirm the operation</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]$ systemctl disable firewalld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]$ systemctl stop firewalld</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]$ systemctl status firewalld</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If <code>Active: inactive (dead)</code> is included in the output, the firewall is successfully disabled.</p>
</li>
<li>
<p>Disable SELinux and confirm the operation</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]$ sed -i &#x27;s/SELINUX=enforcing/SELINUX=disabled/g&#x27; /etc/sysconfig/selinux</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Although the <code>SELINUX</code> parameter can take effect temporarily, we recommend that you restart the server after it is initialized to persist the parameter.</p>
<p>After the server restarts, run the following command to verify whether SELinux is disabled:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]$ getenforce</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the <code>getenforce</code> command returns <code>Disabled</code>, SELinux is successfully disabled.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-the-clock-source">Configure the clock source<a href="#configure-the-clock-source" class="hash-link" aria-label="Direct link to Configure the clock source" title="Direct link to Configure the clock source">​</a></h3>
<p>OceanBase Database is a native distributed database system. If you deploy it in a cluster, you must ensure that time is synchronized across all servers in the cluster. Otherwise, the cluster cannot start. OceanBase Database V4.x allows a clock offset of no more than 2s among servers in a cluster. When the clock offset exceeds 2s, no leader is available. After clock synchronization resumes, you can restart the OceanBase cluster to solve the issue.</p>
<p>We recommend that you use the Chrony service as the clock source for CentOS and Red Hat 7.x. Chrony is another implementation of NTP. Unlike the ntpd service, the Chrony service can synchronize the system clock more quickly and accurately, thereby reducing the time and frequency errors.</p>
<p>You can install and configure the Chrony service based on the description in this section. For more information about how to use NTP as the clock source, see <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001106067" target="_blank" rel="noopener noreferrer">(Optional) Configure the clock source</a>.</p>
<ol>
<li>
<p>Install the Chrony server.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]$ yum -y install chrony</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Configure the Chrony server.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]$ vim /etc/chrony.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The file content is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Enter an NTP server after &quot;server&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use public servers from the pool.ntp.org project. Technically, you can add an unlimited number of NTP servers.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># You can also use the NTP servers of Alibaba Cloud.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Please consider joining the pool (&lt;http://www.pool.ntp.org/join.html&gt;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server ntp.cloud.aliyuncs.com minpoll 4 maxpoll 10 iburst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server ntp.aliyun.com minpoll 4 maxpoll 10 iburst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server ntp1.aliyun.com minpoll 4 maxpoll 10 iburst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server ntp1.cloud.aliyuncs.com minpoll 4 maxpoll 10 iburst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server ntp10.cloud.aliyuncs.com minpoll 4 maxpoll 10 iburst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># If no NTP server is available in a test environment, select a server and configure it as the NTP server.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># If you select the local server, uncomment the following server:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># server 127.127.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Calculate the rate at which the system clock gains/loses time and record the rate in a file. Make the best time compensation for the system after the system restarts.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">driftfile /var/lib/chrony/drift</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># chronyd slows down or speeds up time adjustment as needed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># In some cases, the system clock may drift quickly and thereby prolongs time adjustment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This directive forces chronyd to adjust the time. The system clock is stepped to the correct time if its offset is larger than the specified threshold.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This directive takes effect only when the startup time of chronyd exceeds the specified limit (you can use a negative value to disable the limit) and no more clock updates are available.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">makestep 1.0 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Enable a kernel mode in which the system time is copied to the real-time clock (RTC) every 11 minutes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rtcsync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Enable hardware timestamping on all interfaces that support it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use the hwtimestamp directive to enable hardware timestamping.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># hwtimestamp eth0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># hwtimestamp eth1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># hwtimestamp *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Increase the minimum number of selectable sources required to adjust</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># the system clock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># minsources 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Specify a host, subnet, or network to allow or disallow NTP connections to the server that functions as the NTP server.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># allow 192.168.0.0/16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># deny 192.168/16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Serve time even if not synchronized to a time source.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local stratum 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Specify the file containing keys for NTP authentication.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># keyfile /etc/chrony.keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Specify the directory where log files are stored.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logdir /var/log/chrony</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Select which information is logged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># log measurements statistics tracking</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here is a simple configuration example:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server 10.10.10.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allow 10.10.10.0/24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">local stratum 10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Start the Chrony service and verify the service status.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]$ systemctl start chronyd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]$ systemctl enable chronyd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@test001 ~]$ systemctl status chronyd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Install the Chrony client.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test002 ~]$ yum -y install chrony</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Configure the Chrony client.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test002 ~]$ server 10.10.10.1 minpoll 4 maxpoll 10 iburst</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Check whether the clock is synchronized.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@test002 ~]$chronyc tracking</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the output, if the value of <code>Leap status</code> is <code>Normal</code>, the synchronization process is normal. If the value of <code>Leap status</code> is <code>Not synchronised</code>, a synchronization error occurs.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Reference ID    : AC18FF60 (10.10.10.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stratum         : 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ref time (UTC)  : Wed Jan 31 07:49:10 2024</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">System time     : 0.000003143 seconds slow of NTP time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last offset     : -0.000003572 seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RMS offset      : 0.000003572 seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Frequency       : 7.534 ppm slow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Residual freq   : +14.035 ppm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Skew            : 0.192 ppm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Root delay      : 0.003962355 seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Root dispersion : 0.010611359 seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Update interval : 2.0 seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Leap status     : Normal</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-resource-parameters-of-oceanbase-database-and-their-calculation-methods">Common resource parameters of OceanBase Database and their calculation methods<a href="#common-resource-parameters-of-oceanbase-database-and-their-calculation-methods" class="hash-link" aria-label="Direct link to Common resource parameters of OceanBase Database and their calculation methods" title="Direct link to Common resource parameters of OceanBase Database and their calculation methods">​</a></h2>
<blockquote>
<p><strong>Note</strong></p>
<p>For more information about the parameters mentioned in this section, see <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001103709" target="_blank" rel="noopener noreferrer">Overview</a>.</p>
</blockquote>
<table><thead><tr><th></th><th>Parameter</th><th>Description</th><th>Modification mode</th><th>Tips</th></tr></thead><tr><td>CPU resource parameters</td><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105435">cpu_count</a></td><td>The number of CPU cores for OceanBase Database. The value is an integer, such as <code>16</code>. The default value is <code>0</code>. If the parameter is set to <code>0</code>, the system automatically detects and sets the number of CPU cores. </td><td>You can modify the parameter dynamically.</td><td>Other cluster parameters may affect the way in which this parameter takes effect. After you modify this parameter, we recommend that you use a SELECT statement to query the actual value of <code>CPU_CAPACITY</code> in the <code>GV$OB_SERVERS</code> internal table. If the modification does not take effect dynamically, restart the cluster. <blockquote><b>Notice</b><br>When you decrease the parameter value, make sure that the new value is not smaller than the number of CPU cores that have been allocated. </blockquote></td></tr><tr><td rowspan="3">Memory resource parameters</td><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105475">memory_limit</a></td><td>The size of memory for OceanBase Database. You need to specify the unit when you configure this parameter, such as <code>32G</code>. </td><td>You can modify the parameter dynamically.</td><td>Take note of the following considerations when you configure this parameter: <ul><li><code>memory_limit</code> has no upper bound. We recommend that you plan the memory size based on the actual size of available memory, which is shown in the <code>free</code> column of the <code>free -m</code> command output. </li><li>You can dynamically increase or decrease the memory size. The specified value must not be smaller than the size of memory that has been allocated on OBServer nodes. </li><li><code>memory_limit</code> has a higher priority than <code>memory_limit_percentage</code>. When both are configured, the value of <code>memory_limit</code> prevails. </li></ul></td></tr><tr><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105533">memory_limit_percentage</a></td><td>The percentage of the memory available for OceanBase Database to the total memory. The value is an integer, such as <code>80</code> (indicating 80%). </td><td>You can modify the parameter dynamically.</td><td>When this parameter and the <code>memory_limit</code> parameter are both configured, the value of <code>memory_limit</code> prevails. </td></tr><tr><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105522">system_memory</a></td><td>The memory reserved for the tenant whose ID is <code>500</code>, that is, the internal runtime memory of OceanBase Database. You need to specify the unit when you configure this parameter, such as <code>30G</code>. </td><td>You can modify the parameter dynamically.</td><td>Take note of the following considerations when you configure this parameter: <ul><li>The recommended value range of <code>system_memory</code> changes depending on the value of <code>memory_limit</code>. <ul><li>When the value of <code>memory_limit</code> falls within the range [16G, 32G], the value range of <code>system_memory</code> is [3G, 5G]. </li><li>When the value of <code>memory_limit</code> falls within the range [32G, 64G], the value range of <code>system_memory</code> is [5G, 10G]. </li><li>When <code>memory_limit</code> is set to a value greater than 64 GB, you can calculate the value of <code>system_memory</code> by using the <code>system_memory = 3 * (sqrt(memory_limit) - 3G)</code> formula and take the integral part of the calculation result. </li></ul></li><li>When <code>system_memory</code> is set to <code>0</code>, the system applies for memory adaptively. </li><li>The <code>system_memory</code> setting does not apply to the sys tenant. The sys tenant is an adaptive resource tenant automatically created by the system after OceanBase Database is deployed, with an ID of <code>1</code>. The <code>system_memory</code> setting applies to the tenant with the ID <code>500</code>. </li></ul></td></tr><tr><td rowspan="6">Disk resource parameters</td><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105406">datafile_size</a></td><td>The size of disk space preallocated to data files of OceanBase Database. You need to specify the unit when you configure this parameter, such as <code>32G</code>. </td><td>The space specified by this parameter is preallocated and you cannot decrease the value.</td><td>Take note of the following considerations when you configure this parameter: <ul><li>The required disk space is allocated in advance. If the disk usage is high after deployment, this is normal. </li><li><code>datafile_size</code> has a higher priority than <code>datafile_disk_percentage</code>. If both are configured, the value of <code>datafile_size</code> prevails. </li></ul></td></tr><tr><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105552">datafile_disk_percentage</a></td><td>The percentage of disk space preallocated to data files, such as <code>80</code> (indicating 80%). </td><td>The space specified by this parameter is preallocated and you cannot decrease the value.</td><td>When this parameter and the <code>datafile_size</code> parameter are both configured, the value of <code>datafile_size</code> prevails. </td></tr><tr><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105473">datafile_next</a></td><td>The step size of automatic space scale-out for disk files. You need to specify the unit when you configure this parameter, such as <code>100G</code>. </td><td>You can modify the parameter dynamically.</td><td>This parameter must be used in combination with <code>datafile_max</code>. </td></tr><tr><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105407">datafile_maxsize</a></td><td>The maximum space allowed in automatic space scale-out for disk files. You need to specify the unit when you configure this parameter, such as <code>100G</code>. </td><td>You can modify the parameter dynamically.</td><td>Take note of the following considerations when you configure this parameter: <ul><li>When you decrease the parameter value, the new value must not be smaller than the size of occupied data disk space. </li><li>This parameter must be used in combination with <code>datafile_max</code>. </li><li>When <code>datafile_next</code> and <code>datafile_maxsize</code> are set to values greater than 0, on-demand space allocation is enabled. At this time, <code>datafile_size</code> or <code>datafile_disk_percentage</code> affects the size of initial data files on the disk. </li></ul></td></tr><tr><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105489">log_disk_size</a></td><td>The size of disk space preallocated to redo log files of OceanBase Database. You need to specify the unit when you configure this parameter, such as <code>20G</code>. </td><td>The space specified by this parameter is preallocated but you can modify the value dynamically.</td><td>Take note of the following considerations when you configure this parameter: <ul><li>The value of <code>log_disk_size</code> must be at least three times the value of <code>memory_limit</code>, namely, <code>log_disk_size</code> &gt;= <code>memory_limit</code> × 3.</li><li>The required disk space is allocated in advance. If the disk usage is high after deployment, this is normal. </li><li><code>log_disk_size</code> has a higher priority than <code>log_disk_percentage</code>. When both are configured, the value of <code>log_disk_size</code> prevails. </li></ul></td></tr><tr><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105486">log_disk_percentage</a></td><td>The percentage of disk space preallocated to redo log files, such as <code>80</code> (indicating 80%). </td><td>The space specified by this parameter is preallocated but you can modify the value dynamically.</td><td>When this parameter and the <code>log_disk_size</code> parameter are both configured, the value of <code>log_disk_size</code> prevails. </td></tr><tr><td rowspan="2">System log parameters</td><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105534">enable_syslog_recycle</a></td><td>Specifies whether log files generated before the restart will be recycled after the restart. We recommend that you set the value to <code>true</code>. </td><td>You can modify the parameter dynamically.</td><td>This parameter must be used in combination with <code>max_syslog_file_count</code>. If you set this parameter to <code>false</code>, the log files that can be retained before log recycling do not include those generated before the restart. </td></tr><tr><td><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001105563">max_syslog_file_count</a></td><td>The maximum number of system log files that can be retained before the recycling of OceanBase Database system log files. </td><td>You can modify the parameter dynamically.</td><td>This parameter must be used in combination with <code>enable_syslog_recycle</code>. A single system log file can occupy at most 256 MB disk space. We recommend that you set the number of system log files based on the log retention period in a production environment. <blockquote><b>Notice</b><br>System log files are frequently generated in OceanBase Database. Pay attention to the number of system log files and the disk size to prevent the disk from being used up. </blockquote></td></tr></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/01_preparation_before_deployment.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/deployment_components"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Ecosystem components for deployment</div></a></nav><div>Loading...</div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#software-and-hardware-resources" class="table-of-contents__link toc-highlight">Software and hardware resources</a></li><li><a href="#command-dependencies" class="table-of-contents__link toc-highlight">Command dependencies</a></li><li><a href="#server-initialization" class="table-of-contents__link toc-highlight">Server initialization</a><ul><li><a href="#create-a-user-and-a-user-group" class="table-of-contents__link toc-highlight">Create a user and a user group</a></li><li><a href="#configure-passwordless-sudo-access-for-the-user" class="table-of-contents__link toc-highlight">Configure passwordless sudo access for the user</a></li><li><a href="#configure-ssh-trust-for-the-user" class="table-of-contents__link toc-highlight">Configure SSH trust for the user</a></li><li><a href="#disk-and-file-system-planning" class="table-of-contents__link toc-highlight">Disk and file system planning</a></li><li><a href="#modify-user-resource-limits" class="table-of-contents__link toc-highlight">Modify user resource limits</a></li><li><a href="#modify-kernel-parameters" class="table-of-contents__link toc-highlight">Modify kernel parameters</a></li><li><a href="#disable-the-firewall-and-selinux" class="table-of-contents__link toc-highlight">Disable the firewall and SELinux</a></li><li><a href="#configure-the-clock-source" class="table-of-contents__link toc-highlight">Configure the clock source</a></li></ul></li><li><a href="#common-resource-parameters-of-oceanbase-database-and-their-calculation-methods" class="table-of-contents__link toc-highlight">Common resource parameters of OceanBase Database and their calculation methods</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">SIG</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sig/AI/sig_intro">AI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/cloud-native/sig_intro">cloud-native</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/compilation/sig_intro">compilation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/develop-tools/sig_intro">develop-tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/miniob/sig_intro">MiniOB</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/obdiag/sig_intro">obdiag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/operation/sig_intro">operation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://en.oceanbase.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About OceanBase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blogs/arch/all-in-one">Blogs</a></li><li class="footer__item"><a href="https://github.com/oceanbase/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/extended_functionality" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Extended features of MySQL tenant | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/extended_functionality"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Extended features of MySQL tenant | OceanBase"><meta data-rh="true" name="description" content="Global index"><meta data-rh="true" property="og:description" content="Global index"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/extended_functionality"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/extended_functionality" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/extended_functionality" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6JQM9QDU5V-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H4XM2M50RX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-H4XM2M50RX",{})</script><link rel="stylesheet" href="/assets/css/styles.7e3a93fe.css">
<script src="/assets/js/runtime~main.c82231b9.js" defer="defer"></script>
<script src="/assets/js/main.f609a655.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a class="navbar__item navbar__link" href="/docs/blogs/arch/all-in-one">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Product Docs</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">User Manual</a><a class="sub-dropdown dropdown__link dropdown--hoverable" style="cursor:pointer">Developer Manual</a></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><span><li><a class="dropdown__link" href="/docs/sig/overview/list">Special Interest Group(SIG)</a></li></span><span><li><a class="dropdown__link" href="/docs/honor/overview">Community Honors</a></li></span><span><li><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussion<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://discord.gg/74cF8vbNEs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Forum (in Chinese)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Data + AI</a><ul class="dropdown__menu"><span><li><a href="https://oceanbase-devhub.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">AI Workshops<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/ai-workshop-2024" target="_blank" rel="noopener noreferrer" class="dropdown__link">RAG Bot<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/dify/dify@oceanbase-workshop" target="_blank" rel="noopener noreferrer" class="dropdown__link">Dify (MySQL Compatible)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span><span><li><a href="https://oceanbase-devhub.github.io/DB-GPT/docker/compose_examples/ob_dbgpt_tutorial" target="_blank" rel="noopener noreferrer" class="dropdown__link">DB-GPT<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></span></ul><ul class="dropdown__menu" style="left:160px;display:none"></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_01_overview_of_the_oceanbase_database/introduction">Overview of the Oceanbase database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_02_deploy_oceanbase_database/introduction">Deploy Oceanbase database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_03_test_oceanbase_database/introduction">Test Oceanbase database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_04_migration_and_synchronization_oceanbase/introduction">Migrate and synchronize data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_05_operation_and_maintenance/introduction">Operation and maintenance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/introduction">Using Oceanbase for business development</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/using_mysql_for_database_development">Perform database development in a MySQL tenant</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/using_odc_for_sql_development">Use ODC for GUI-based SQL development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/horizontal_splitting_using_partition_table">Partition a table by horizontal splitting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/extended_functionality">Extended features of MySQL tenant</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user_manual/quick_starts/en-US/chapter_07_diagnosis_and_tuning/introduction">Diagnosis_and_tuning</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Using Oceanbase for business development</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Extended features of MySQL tenant</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>6.4 Extended features of a MySQL tenant of OceanBase Database</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="global-index">Global index<a href="#global-index" class="hash-link" aria-label="Direct link to Global index" title="Direct link to Global index">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="definition">Definition<a href="#definition" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition">​</a></h3>
<p>MySQL Database supports only local indexes. Unlike a local index, the partitioning of a global index is independent of the partitioning of the table. You can specify the partitioning rules and the number of partitions for a global index. These rules and this number do not have to be the same as those of the table.</p>
<p><img decoding="async" loading="lazy" alt="Global index" src="/assets/images/001-296025cc0e2d2e787db157b0f9de2492.png" width="2150" height="1234" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benefits">Benefits<a href="#benefits" class="hash-link" aria-label="Direct link to Benefits" title="Direct link to Benefits">​</a></h3>
<p>Most indexes in a relational database are in a B+ Tree structure, where leaf nodes are stored in order by key values. Key values of an index correspond to the data in the table. When you specify the index conditions for data access, the database locates the target data by searching for the corresponding key value in the B+ Tree.</p>
<p><img decoding="async" loading="lazy" alt="B+ Tree" src="/assets/images/002-2c8f8b64eb7fedabef1e6aaeb5c3b0e4.png" width="1175" height="536" class="img_ev3q"></p>
<p>If a table is split into multiple shards, or partitions in OceanBase Database, how to split the table index? In MySQL Database, the index is split with the table, and an index shard is used for retrieving data in the corresponding table shard. Such an index is known as a local index. You can also create a local index in OceanBase Database with ease by specifying a <code>local</code> keyword at the end of the <code>CREATE INDEX</code> statement. Local indexes cause some issues.</p>
<p>First, if you use local indexes, you must specify the partitioning key in a query. Otherwise, the database does not know which partition contains the queried data, and will enumerate all the partitions, making the query inefficient. In the example as shown in the following figure, the partitioning key of the <code>employ</code> table is <code>emp_id</code>, and the partitioning key is not specified in the filter condition in the query statement. The result in the red box indicates that database has scanned all partitions.</p>
<p><img decoding="async" loading="lazy" alt="1" src="/assets/images/003-30e992e2a4579dee08f1b2b97237fd9b.png" width="1196" height="471" class="img_ev3q"></p>
<p>Another issue is that local indexes are created within partitions, so that index key values may not be globally unique. In the example as shown in the following figure, the key value <code>Edward</code> may exist in both local indexes of two partitions. Therefore, you must specify the partitioning key of partitions when you create a local index with a <code>UNIQUE</code> constraint in a database.</p>
<p><img decoding="async" loading="lazy" alt="2" src="/assets/images/004-207d9d2ce45a8475aa5e7c3a0cd6e715.png" width="3204" height="1338" class="img_ev3q"></p>
<p>To simplify the use of local indexes, OceanBase Database in MySQL mode allows you to create global indexes. The differences between global and local indexes are as follows: The structure of the global index for a table is independent of the table partitions. The key values of a global index may correspond to data in different partitions of the table. For example, in the index structure on the right side of the following figure, the key values <code>1</code>, <code>2</code>, and <code>5</code> correspond to the data in two partitions. This way, you no longer need to specify a partitioning key when you use a global index. In addition, the index key values will be globally unique because the structure of the global index is independent of the table.</p>
<p><img decoding="async" loading="lazy" alt="Global index" src="/assets/images/005-badfa2d50de78c5233da0a08066af5bc.png" width="3230" height="1322" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-statements">Sample statements<a href="#sample-statements" class="hash-link" aria-label="Direct link to Sample statements" title="Direct link to Sample statements">​</a></h3>
<p>To create a global index, simply specify the keyword <code>global</code> at the end of the <code>CREATE INDEX</code> statement. Here is an example:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- Create a HASH-partitioned table:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> t1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  c1 </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  c2 </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> partitions </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Create a partitioned index that adopts a different partitioning type:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">index</span><span class="token plain"> g_idx </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> t1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">global</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> p0 </span><span class="token keyword" style="color:#00009f">values</span><span class="token plain"> less than</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> p1 </span><span class="token keyword" style="color:#00009f">values</span><span class="token plain"> less than</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> p2 </span><span class="token keyword" style="color:#00009f">values</span><span class="token plain"> less than</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- The above two SQL statements are equivalent to the following SQL statement:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">t1</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">c1</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">c2</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">c1</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">g_idx</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">c2</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">GLOBAL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- The partitioning type of the index.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">p0</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">values</span><span class="token plain"> less than </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">p1</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">values</span><span class="token plain"> less than </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">p2</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">values</span><span class="token plain"> less than </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- The partitioning type of the table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">p0</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">p1</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">p2</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">p3</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">p4</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Notice</strong></p>
<p>By default, when you create an index without specifying the <code>global</code> or <code>local</code> keyword, a global index is created if the index information is followed by partition information; otherwise, a local index is created.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenarios">Scenarios<a href="#scenarios" class="hash-link" aria-label="Direct link to Scenarios" title="Direct link to Scenarios">​</a></h3>
<p>Given the aforesaid two benefits of global indexes, is it necessary to use global indexes unconditionally in distributed databases like OceanBase Database? Global indexes may involve cross-node data access. The costs caused by remote procedure calls (RPCs) during data retrieval cannot be ignored. Therefore, global indexes do not outperform local indexes in all scenarios.</p>
<p>We recommend that you use global indexes in the following scenarios:</p>
<ul>
<li>
<p>The table is partitioned, but the index does not contain the partitioning key of the table. In this scenario, a key value may exist on local indexes of all partitions, and the database must scan all indexed partitions to retrieve any data. Otherwise, data missing may occur. This leads to inefficient index scanning and a waste of resources. A global index solves that issue easily. If you use a global index, you can specify an index partitioning type that is different from the table partitioning type, and the partitioning key of the index is a subset of the index key.</p>
</li>
<li>
<p>Given that local indexes cannot guarantee uniqueness, you must use a global index when you want to ensure that the index keys are unique and that the index key does not include the partitioning key of the table.</p>
</li>
</ul>
<blockquote>
<p><strong>Note</strong></p>
<p>Many databases add constraints to partitioned tables. For example, the definition of the primary key and unique index of a table must contain all fields of the partitioning key of the table. This constraint ensures that the indexed data corresponding to a index key exists in only one partition, which means that a unique value in a partition is also unique in the table.</p>
<p>This constraint, while solving a database issue, bothers developers. This is because it greatly narrows the options of primary keys and unique indexes down to only a superset of the table partitioning keys, and therefore cannot meet the requirements of many business needs, making it the most complained drawback of local indexes.</p>
</blockquote>
<p>In general, it is more complex to implement a global index than a local index, especially in a distributed database. Only a few commercial databases support global indexes. However, global indexes are less restrictive to users, and provide better experience.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-cannot-i-set-the-primary-key-index-of-a-table-to-a-global-index">Why cannot I set the primary key index of a table to a global index?<a href="#why-cannot-i-set-the-primary-key-index-of-a-table-to-a-global-index" class="hash-link" aria-label="Direct link to Why cannot I set the primary key index of a table to a global index?" title="Direct link to Why cannot I set the primary key index of a table to a global index?">​</a></h4>
<p>OceanBase Database supports only index-organized tables (IOTs). Heap tables are not supported. IOT is a database table storage mode, which organizes data based on the primary key index of the table, rather than the physical sequence of data. This mode ensures that the primary key of a table is organized in the same way as the table, and cannot be used as a global index.</p>
<p>In OceanBase Database, a table without a primary key has a hidden auto-increment column that serves as a primary key. The ID of this column is <code>1</code> and the column name is <code>__pk_increment</code>. You can query the <code>oceanbase.__all_column</code> table to view more information about the column.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="why-must-the-partitioning-keys-of-a-partitioned-table-be-included-in-the-local-unique-index-and-the-primary-key-index">Why must the partitioning keys of a partitioned table be included in the local unique index and the primary key index?<a href="#why-must-the-partitioning-keys-of-a-partitioned-table-be-included-in-the-local-unique-index-and-the-primary-key-index" class="hash-link" aria-label="Direct link to Why must the partitioning keys of a partitioned table be included in the local unique index and the primary key index?" title="Direct link to Why must the partitioning keys of a partitioned table be included in the local unique index and the primary key index?">​</a></h4>
<p>In OceanBase Database, to create a local partitioned unique index on a partitioned table, you must ensure that the index contains the partitioning keys of the table. This constraint does not apply to global partitioned unique indexes. For more information, see <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001378763" target="_blank" rel="noopener noreferrer">Create indexes on partitioned tables</a>.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> t1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1 </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unique</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c2 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR </span><span class="token number" style="color:#36acaa">1503</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HY000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: A </span><span class="token keyword" style="color:#00009f">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INDEX</span><span class="token plain"> must include </span><span class="token keyword" style="color:#00009f">all</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">columns</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> the </span><span class="token keyword" style="color:#00009f">table</span><span class="token string" style="color:#e3116c">&#x27;s partitioning function</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">create table t1(c1 int primary key, c2 int) partition by hash(c2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERROR 1503 (HY000): A PRIMARY KEY must include all columns in the table&#x27;</span><span class="token plain">s partitioning </span><span class="token keyword" style="color:#00009f">function</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As aforementioned, a unique index supports data uniqueness checks only within each partition. Assuming that the unique index does not contain all the partitioning keys and that <code>create table t1(c1 int unique key, c2 int) partition by hash(c2);</code> is executed successfully, the table data may be as follows:</p>
<table><thead><tr><th>c1</th><th>c2</th></tr></thead><tbody><tr><td>1</td><td>1</td></tr><tr><td>1</td><td>2</td></tr><tr><td>2</td><td>1</td></tr><tr><td>2</td><td>2</td></tr><tr><td>3</td><td>1</td></tr><tr><td>3</td><td>2</td></tr></tbody></table>
<p>Then, one of the partitions is as shown below. The <code>c1</code>column of the partition meets the unique constraint, and will pass the uniqueness check.</p>
<table><thead><tr><th>c1</th><th>c2</th></tr></thead><tbody><tr><td>1</td><td>1</td></tr><tr><td>2</td><td>1</td></tr><tr><td>3</td><td>1</td></tr></tbody></table>
<p>The other partition is as shown below. The <code>c1</code>column of this partition also meets the unique constraint, and will pass the uniqueness check as well.</p>
<table><thead><tr><th>c1</th><th>c2</th></tr></thead><tbody><tr><td>1</td><td>2</td></tr><tr><td>2</td><td>2</td></tr><tr><td>3</td><td>2</td></tr></tbody></table>
<p>While both partitions pass the uniqueness check on the <code>c1</code> column, the data in the <code>c1</code> column is not unique. The same applies to the primary key. Of course, MySQL and Oracle databases also apply these requirements and constraints.</p>
<p>If the unique index is set to a global index, it is not partitioned by using the partitioning rule of the table, thereby avoiding the uniqueness check issue.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="recycle-bin">Recycle bin<a href="#recycle-bin" class="hash-link" aria-label="Direct link to Recycle bin" title="Direct link to Recycle bin">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="definition-1">Definition<a href="#definition-1" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition">​</a></h3>
<p>A recycle bin stores objects dropped by the user.</p>
<p>In OceanBase Database, you can move databases, tables, indexes, and tenants to a recycle bin. Objects in the recycle bin still occupy physical space unless they are manually cleared by using the <code>PURGE</code> statement or periodically cleared by the system. Before an object is cleared from the recycle bin, you can restore it by using corresponding statements.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benefits-1">Benefits<a href="#benefits-1" class="hash-link" aria-label="Direct link to Benefits" title="Direct link to Benefits">​</a></h3>
<p>The recycle bin feature allows you to restore a mistakenly dropped database object.</p>
<p>This useful feature is not supported in MySQL Database, but is supported in MySQL tenants of OceanBase Database and is designed based on the recycle bin feature of Oracle Database.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-statements-1">Sample statements<a href="#sample-statements-1" class="hash-link" aria-label="Direct link to Sample statements" title="Direct link to Sample statements">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enable-or-disable-the-recycle-bin-and-set-the-purging-interval">Enable or disable the recycle bin and set the purging interval<a href="#enable-or-disable-the-recycle-bin-and-set-the-purging-interval" class="hash-link" aria-label="Direct link to Enable or disable the recycle bin and set the purging interval" title="Direct link to Enable or disable the recycle bin and set the purging interval">​</a></h4>
<ul>
<li>
<p>Enable or disable the recycle bin</p>
<p>By default, the recycle bin feature is disabled.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- The following statements take effect for the current session.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> recyclebin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> recyclebin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">off</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">session</span><span class="token plain"> recyclebin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">session</span><span class="token plain"> recyclebin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">off</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can specify the <code>global</code> keyword to make the statement for enabling or disabling the recycle bin take effect within the current tenant.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- If you specify the `global` keyword in a session, it takes effect in subsequent sessions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">global</span><span class="token plain"> recyclebin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">global</span><span class="token plain"> recyclebin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">off</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>View whether the recycle bin feature is enabled</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">show</span><span class="token plain"> variables </span><span class="token operator" style="color:#393A34">like</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;recyclebin&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+-------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Variable_name | Value |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+-------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| recyclebin    | ON    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+-------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Set the interval for purging objects in the recycle bin</p>
<p>The default value is <code>0s</code>, which indicates that the periodic purging of the recycle bin is disabled. The following statement can be executed only in the sys tenant and takes effect for the entire cluster:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">alter</span><span class="token plain"> system </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> recyclebin_object_expire_time</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;7d&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can set the purging interval to <code>0s</code> to disable periodic purging of the recycle bin.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> SYSTEM </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> recyclebin_object_expire_time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>View the cluster-level parameter <code>recyclebin_object_expire_time</code>.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">show</span><span class="token plain"> parameters </span><span class="token operator" style="color:#393A34">like</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;recyclebin_object_expire_time&#x27;</span><span class="token plain">\G</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">*************************** 1. row ***************************</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         zone: zone1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     svr_type: observer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       svr_ip: 1.2.3.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     svr_port: 12345</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         name: recyclebin_object_expire_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data_type: NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        value: 0s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         info: recyclebin object expire time, default 0 that means auto purge recyclebin off. Range: [0s, +∞)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      section: ROOT_SERVICE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scope: CLUSTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       source: DEFAULT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   edit_level: DYNAMIC_EFFECTIVE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default_value: 0s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    isdefault: 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="view-objects-in-the-recycle-bin">View objects in the recycle bin<a href="#view-objects-in-the-recycle-bin" class="hash-link" aria-label="Direct link to View objects in the recycle bin" title="Direct link to View objects in the recycle bin">​</a></h4>
<blockquote>
<p><strong>Note</strong></p>
<ul>
<li>
<p>When you drop an index alone, the index is not moved to the recycle bin.</p>
</li>
<li>
<p>When you drop a table, indexes on the table are also moved to the recycle bin together with the table.</p>
</li>
</ul>
</blockquote>
<ol>
<li>
<p>Create a database and then an indexed table.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">database</span><span class="token plain"> test_db</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> t1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c2 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">index</span><span class="token plain"> idx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Drop the created database and indexed table.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">drop</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">database</span><span class="token plain"> test_db</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">drop</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> t1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>View objects in the recycle bin.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">show</span><span class="token plain"> RECYCLEBIN</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output is as follows, where <code>OBJECT_NAME</code> indicates the new name of an object after it is moved to the recycle bin. This is to uniquely identify objects of the same type and name in the recycle bin. <code>ORIGINAL_NAME</code> indicates the original name of an object before it was dropped.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------------------+------------------+----------+----------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| OBJECT_NAME                    | ORIGINAL_NAME    | TYPE     | CREATETIME                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------------------+------------------+----------+----------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| __recycle_$_1_1713173706419784 | __idx_500044_idx | INDEX    | 2024-04-15 17:35:06.419840 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| __recycle_$_1_1713173706464688 | t1               | TABLE    | 2024-04-15 17:35:06.465056 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| __recycle_$_1_1713173712877712 | test_db          | DATABASE | 2024-04-15 17:35:12.877862 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------------------+------------------+----------+----------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 rows in set</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Query the internal table <code>oceanbase.__all_recyclebin</code>.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> oceanbase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> __all_recyclebin</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output is as follows, showing details of objects before they were dropped in fields such as <code>database_id</code> and <code>table_id</code>:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------------+-----------+--------------------------------+------+-------------+----------+---------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| gmt_create                 | tenant_id | object_name                    | type | database_id | table_id | tablegroup_id | original_name    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------------+-----------+--------------------------------+------+-------------+----------+---------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 2024-04-15 17:35:06.419840 |         0 | __recycle_$_1_1713173706419784 |    2 |      500001 |   500045 |            -1 | __idx_500044_idx |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 2024-04-15 17:35:06.465056 |         0 | __recycle_$_1_1713173706464688 |    1 |      500001 |   500044 |            -1 | t1               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 2024-04-15 17:35:12.877862 |         0 | __recycle_$_1_1713173712877712 |    4 |      500046 |       -1 |            -1 | test_db          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------------+-----------+--------------------------------+------+-------------+----------+---------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 rows in set</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="restore-objects-from-the-recycle-bin">Restore objects from the recycle bin<a href="#restore-objects-from-the-recycle-bin" class="hash-link" aria-label="Direct link to Restore objects from the recycle bin" title="Direct link to Restore objects from the recycle bin">​</a></h4>
<p>To restore a table, for example, execute the following statement: <code>FLASHBACK TABLE object_name TO BEFORE DROP [RENAME To new_table_name];</code>.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- Create a table with the same name as the one that was just dropped.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> t1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> affected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Execute the statement in the database from which the table was dropped to restore the table from the recycle bin. By default, the original table name is used. You can use the `RENAME To new_table_name ` clause to rename the table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Indexes on the table are restored with the table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- If the original name of the table is the same as that of an existing table, the system returns an error.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flashback </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> __recycle_$_1_1713173706464688 </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> before </span><span class="token keyword" style="color:#00009f">drop</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR </span><span class="token number" style="color:#36acaa">1050</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">42</span><span class="token plain">S01</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: </span><span class="token keyword" style="color:#00009f">Table</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;t1&#x27;</span><span class="token plain"> already </span><span class="token keyword" style="color:#00009f">exists</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Use the `RENAME To new_table_name ` clause to rename the table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flashback </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> __recycle_$_1_1713173706464688 </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> before </span><span class="token keyword" style="color:#00009f">drop</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rename</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> old_t1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> affected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The output </span><span class="token operator" style="color:#393A34">is</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> follows</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> showing that the </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> its indexes are restored:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">show</span><span class="token plain"> RECYCLEBIN</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------+---------------+----------+----------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> OBJECT_NAME                    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ORIGINAL_NAME </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TYPE</span><span class="token plain">     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> CREATETIME                 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------+---------------+----------+----------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> __recycle_$_1_1713173712877712 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> test_db       </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2024</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">04</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">35</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">12.877862</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------+---------------+----------+----------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To restore a database or tenant from the recycle bin, replace the keyword <code>table</code> in the <code>FLASHBACK</code> statement with <code>database</code> or <code>tenant</code>.</p>
<blockquote>
<p><strong>Note</strong></p>
<ol>
<li>
<p>Before you restore a table from the recycle bin, you must restore the database to which the table belongs if the database has been dropped.</p>
</li>
<li>
<p>You cannot directly restore an index. When you execute the <code>FLASHBACK</code> statement to restore a table, indexes on the table are restored together with the table.</p>
</li>
<li>
<p>You can modify the name of an object when you restore it from the recycle bin, but the object name must be different from an existing one. Otherwise, the system returns an error.</p>
</li>
<li>
<p>If a table in the recycle bin originally belongs to a table group, it is restored to the group by default. If the group is deleted, the restored table does not belong to any group.</p>
</li>
</ol>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="purge-objects-in-the-recycle-bin">Purge objects in the recycle bin<a href="#purge-objects-in-the-recycle-bin" class="hash-link" aria-label="Direct link to Purge objects in the recycle bin" title="Direct link to Purge objects in the recycle bin">​</a></h4>
<p>You can execute the following statements to purge objects in the recycle bin:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">show</span><span class="token plain"> recyclebin</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------+------------------+----------+----------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> OBJECT_NAME                    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> ORIGINAL_NAME    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TYPE</span><span class="token plain">     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> CREATETIME                 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------+------------------+----------+----------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> __recycle_$_1_1713173712877712 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> test_db          </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2024</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">04</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">35</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">12.877862</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> __recycle_$_1_1713177112706600 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> __idx_500048_idx </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INDEX</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2024</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">04</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">31</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">52.706664</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> __recycle_$_1_1713177112725848 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> t1               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2024</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">04</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">31</span><span class="token plain">:</span><span class="token number" style="color:#36acaa">52.727735</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">--------------------------------+------------------+----------+----------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- To purge an index, execute the following statement: PURGE INDEX object_name;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">purge</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">index</span><span class="token plain"> __recycle_$_1_1713177112706600</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- To purge a table, execute the following statement: PURGE TABLE object_name;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">purge</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> __recycle_$_1_1713177112725848</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- To purge a database, execute the following statement: PURGE DATABASE object_name;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">purge</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">database</span><span class="token plain"> __recycle_$_1_1713173712877712</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- To purge a user tenant, execute the following statement: PURGE TENANT object_name; (You can execute the statement only in the sys tenant.)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- To purge all objects at a time, execute the following statement:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">purge</span><span class="token plain"> recyclebin</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- To view objects in the recycle bin after a purge recyclebin operation, execute the following statement:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">show</span><span class="token plain"> recyclebin</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Empty </span><span class="token keyword" style="color:#00009f">set</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Note</strong></p>
<p>The <code>PURGE</code> statement deletes an object along with its dependent objects in the recycle bin. For example, when you purge a database in the recycle bin, tables and indexes that belong to the database are also purged.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenarios-1">Scenarios<a href="#scenarios-1" class="hash-link" aria-label="Direct link to Scenarios" title="Direct link to Scenarios">​</a></h3>
<p>We recommend that you enable the recycle bin feature in a production environment to prevent DBAs from mistakenly dropping important tenant data.</p>
<p>To reduce the disk space occupied by the data in the recycle bin, you can specify a reasonable small value for the purging interval.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="faq-1">FAQ<a href="#faq-1" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="will-the-objects-in-the-recycle-bin-be-purged-if-i-disable-the-recycle-bin">Will the objects in the recycle bin be purged if I disable the recycle bin?<a href="#will-the-objects-in-the-recycle-bin-be-purged-if-i-disable-the-recycle-bin" class="hash-link" aria-label="Direct link to Will the objects in the recycle bin be purged if I disable the recycle bin?" title="Direct link to Will the objects in the recycle bin be purged if I disable the recycle bin?">​</a></h4>
<p>If you disable the recycle bin by using the <code>SET recyclebin = off</code> statement, the objects in the recycle bin are not purged.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="can-i-perform-a-flashback-or-purge-operation-on-the-objects-in-the-recycle-bin-by-their-original-names">Can I perform a <code>FLASHBACK</code> or <code>PURGE</code> operation on the objects in the recycle bin by their original names?<a href="#can-i-perform-a-flashback-or-purge-operation-on-the-objects-in-the-recycle-bin-by-their-original-names" class="hash-link" aria-label="Direct link to can-i-perform-a-flashback-or-purge-operation-on-the-objects-in-the-recycle-bin-by-their-original-names" title="Direct link to can-i-perform-a-flashback-or-purge-operation-on-the-objects-in-the-recycle-bin-by-their-original-names">​</a></h4>
<p>When you perform a <code>FLASHBACK</code> or <code>PURGE</code> operation on a table in the recycle bin, you can use its original name indicated by the <code>ORIGINAL_NAME</code> field in the return result of a <code>SHOW RECYCLEBIN</code> statement. The <code>FLASHBACK</code> or <code>PURGE</code> operation is performed based on the following rules:</p>
<ul>
<li>
<p>If the recycle bin contains tables with the same original name, the <code>FLASHBACK ORIGINAL_NAME</code> statement restores the table that was last moved to the recycle bin.</p>
</li>
<li>
<p>If the recycle bin contains tables with the same original name, the <code>PURGE ORIGINAL_NAME</code> statement purges the earliest table that was moved to the recycle bin.</p>
</li>
</ul>
<p>The preceding rules of OceanBase Database are consistent with those of Oracle Database.</p>
<p>You can also perform a <code>FLASHBACK</code> or <code>PURGE</code> operation on a tenant in the recycle bin by its original name based on the preceding rules.</p>
<p>However, the preceding rules do not apply to indexes or databases.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>While it seems easier to perform <code>FLASHBACK</code> or <code>PURGE</code> operations on the objects in the recycle bin by their original names, we recommend that you use the unique name indicated by the <code>OBJECT_NAME</code> field to avoid losses due to your misremembering of the operation rules.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="oceanbase-database-does-not-move-a-separately-dropped-index-to-the-recycle-bin-why">OceanBase Database does not move a separately dropped index to the recycle bin. Why?<a href="#oceanbase-database-does-not-move-a-separately-dropped-index-to-the-recycle-bin-why" class="hash-link" aria-label="Direct link to OceanBase Database does not move a separately dropped index to the recycle bin. Why?" title="Direct link to OceanBase Database does not move a separately dropped index to the recycle bin. Why?">​</a></h4>
<p>When you drop an index alone in OceanBase Database, the index is not moved to the recycle bin. However, when you drop a table, indexes on the table are moved to the recycle bin together with the table.</p>
<p>This is because an index in the recycle bin cannot be updated with the corresponding table, and cannot be restored by using the <code>FLASHBACK</code> statement due to data inconsistency.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="oceanbase-database-v4x-does-not-move-a-truncated-table-to-the-recycle-bin-why">OceanBase Database V4.x does not move a truncated table to the recycle bin. Why?<a href="#oceanbase-database-v4x-does-not-move-a-truncated-table-to-the-recycle-bin-why" class="hash-link" aria-label="Direct link to OceanBase Database V4.x does not move a truncated table to the recycle bin. Why?" title="Direct link to OceanBase Database V4.x does not move a truncated table to the recycle bin. Why?">​</a></h4>
<p>In OceanBase Database V3.x, if the session-level variable <code>ob_enable_truncate_flashback</code> is set to <code>on</code>, and you truncate a table by mistake, you can perform a <code>FLASHBACK</code> operation to restore the table and data to the status before the <code>TRUNCATE TABLE</code> operation.</p>
<p>That feature is not supported in OceanBase Database V4.x because the implementation of the <code>TRUNCATE TABLE</code> operation has changed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-groups">Table groups<a href="#table-groups" class="hash-link" aria-label="Direct link to Table groups" title="Direct link to Table groups">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="definition-2">Definition<a href="#definition-2" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition">​</a></h3>
<p>A table group is a logical concept that represents a collection of tables. By default, data is randomly distributed to tables. By defining a table group, you can control the physical proximity among a group of tables.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benefits-2">Benefits<a href="#benefits-2" class="hash-link" aria-label="Direct link to Benefits" title="Direct link to Benefits">​</a></h3>
<p>OceanBase Database is a native distributed database. When multiple OBServer nodes exit in each zone, the data of different tables and the data of different partitions of the same table may be distributed to different nodes for load balancing purposes.</p>
<p>This causes two issues:</p>
<ul>
<li>
<p>Although the partition definitions (including the partitioning type, number of partitions, and partitioning key value) of two partitioned tables are identical, the identical partitions of the two tables may exist on two different nodes. Each time a <code>JOIN</code> operation is performed on the partitioning keys of the two tables, cross-node communication is necessary, resulting in high network overheads.</p>
</li>
<li>
<p>Similarly, distributed transactions are performed when tables or partitions frequently involved in the same transaction do not exist on the same node. This may affect transaction performance.</p>
</li>
</ul>
<p>To avoid cross-node operations and improve database performance, OceanBase Database provides the table group feature, which stores a group of tables and the same partitions of tables with the same partition definitions on the same server.</p>
<p>Here is an example:</p>
<ol>
<li>
<p>Create two tables named <code>t1</code> and <code>t2</code> with the same partitioning rule.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obclient [test]&gt; CREATE TABLE t1(col1 int, col2 int) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION BY RANGE(col1)(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION p0 VALUES LESS THAN(100),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION p1 VALUES LESS THAN(200),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION p2 VALUES LESS THAN(300));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obclient [test]&gt; CREATE TABLE t2(col1 int, col2 int) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION BY RANGE(col1)(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION p0 VALUES LESS THAN(100),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION p1 VALUES LESS THAN(200),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION p2 VALUES LESS THAN(300));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a table group and add tables <code>t1</code> and <code>t2</code> to the table group.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obclient [test]&gt; CREATE TABLEGROUP tg1 sharding = &#x27;ADAPTIVE&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient [test]&gt; ALTER TABLEGROUP tg1 add t1, t2;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>View the information about the table group <code>tg1</code>.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obclient [test]&gt; SHOW TABLEGROUPS WHERE tablegroup_name = &#x27;tg1&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+------------+---------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Tablegroup_name | Table_name | Database_name | Sharding |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+------------+---------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| tg1             | t1         | test          | ADAPTIVE |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| tg1             | t2         | test          | ADAPTIVE |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+------------+---------------+----------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 rows in set</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a partitioned table with a different partitioning rule.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obclient [test]&gt; CREATE TABLE t3(col1 int, col2 int) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION BY RANGE(col1)(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION p0 VALUES LESS THAN(400),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION p1 VALUES LESS THAN(500),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     PARTITION p2 VALUES LESS THAN(600));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Add the differently partitioned table to the table group.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obclient [test]&gt; ALTER TABLEGROUP tg1 add t3;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output is as follows, with an error reported:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR 4179 (HY000): range_part partition value not equal, add table to tablegroup not allowed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>After you add tables <code>t1</code> and <code>t2</code> to the table group, their partitions with identical data are stored on the same node, as shown in the following figure.</p>
<p><img decoding="async" loading="lazy" alt="tablegroup" src="/assets/images/006-5ab9920ca8fe016e5014e29279932d20.png" width="1460" height="998" class="img_ev3q"></p>
<p>If two partitions adopting the same partitioning rule exist on the same node, you can perform a <code>JOIN</code> operation on their partitioning keys without redistributing the partition data or using the network. The aforementioned special <code>JOIN</code> operation in OceanBase Database is called a partition-wise join, which significantly reduces the network overheads.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obclient [test]&gt; explain select * from t1, t2 where t1.col1 = t2.col1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output is as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =============================================================                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR                 |NAME    |EST.ROWS|EST.TIME(us)|                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------------------------------                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |PX COORDINATOR           |        |1       |26          |                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |1 |└─EXCHANGE OUT DISTR     |:EX10000|1       |25          |                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |2 |  └─PX PARTITION ITERATOR|        |1       |24          |                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |3 |    └─HASH JOIN          |        |1       |24          |                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |4 |      ├─TABLE FULL SCAN  |t1      |1       |12          |                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |5 |      └─TABLE FULL SCAN  |t2      |1       |12          |                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =============================================================                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([INTERNAL_FUNCTION(t1.col1, t1.col2, t2.col1, t2.col2)]), filter(nil), rowset=16 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   1 - output([INTERNAL_FUNCTION(t1.col1, t1.col2, t2.col1, t2.col2)]), filter(nil), rowset=16 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       dop=1                                                                                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   2 - output([t1.col1], [t2.col1], [t1.col2], [t2.col2]), filter(nil), rowset=16              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       partition wise, force partition granule                                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   3 - output([t1.col1], [t2.col1], [t1.col2], [t2.col2]), filter(nil), rowset=16              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       equal_conds([t1.col1 = t2.col1]), other_conds(nil)                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   4 - output([t1.col1], [t1.col2]), filter(nil), rowset=16                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([t1.col1], [t1.col2]), partitions(p[0-2])                                        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false,                                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([t1.__pk_increment]), range(MIN ; MAX)always true                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   5 - output([t2.col1], [t2.col2]), filter(nil), rowset=16                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([t2.col1], [t2.col2]), partitions(p[0-2])                                        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false,                                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([t2.__pk_increment]), range(MIN ; MAX)always true                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">27 rows in set</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example performs a <code>JOIN</code> operation on two tables partitioned by different rules. You can observe the differences from the <code>JOIN</code> operation on two tables partitioned by the same rule.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">explain select * from t1, t3 where t1.col1 = t3.col1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The output is as follows. The <code>EXCHANGE OUT DISTR (PKEY)</code> operator specifies to redistribute the data of the <code>t1</code> table based on the partitioning rule of the <code>t3</code> table, which incurs network overheads.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Query Plan                                                                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =====================================================================                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |ID|OPERATOR                         |NAME    |EST.ROWS|EST.TIME(us)|                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ---------------------------------------------------------------------                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |0 |PX COORDINATOR                   |        |1       |27          |                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |1 |└─EXCHANGE OUT DISTR             |:EX10001|1       |26          |                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |2 |  └─HASH JOIN                    |        |1       |25          |                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |3 |    ├─EXCHANGE IN DISTR          |        |1       |13          |                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |4 |    │ └─EXCHANGE OUT DISTR (PKEY)|:EX10000|1       |13          |                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |5 |    │   └─PX PARTITION ITERATOR  |        |1       |12          |                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |6 |    │     └─TABLE FULL SCAN      |t1      |1       |12          |                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |7 |    └─PX PARTITION ITERATOR      |        |1       |12          |                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| |8 |      └─TABLE FULL SCAN          |t3      |1       |12          |                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| =====================================================================                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Outputs &amp; filters:                                                                            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| -------------------------------------                                                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   0 - output([INTERNAL_FUNCTION(t1.col1, t1.col2, t3.col1, t3.col2)]), filter(nil), rowset=16 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   1 - output([INTERNAL_FUNCTION(t1.col1, t1.col2, t3.col1, t3.col2)]), filter(nil), rowset=16 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       dop=1                                                                                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   2 - output([t1.col1], [t3.col1], [t1.col2], [t3.col2]), filter(nil), rowset=16              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       equal_conds([t1.col1 = t3.col1]), other_conds(nil)                                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   3 - output([t1.col1], [t1.col2]), filter(nil), rowset=16                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   4 - output([t1.col1], [t1.col2]), filter(nil), rowset=16                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       (#keys=1, [t1.col1]), dop=1                                                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   5 - output([t1.col1], [t1.col2]), filter(nil), rowset=16                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       force partition granule                                                                 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   6 - output([t1.col1], [t1.col2]), filter(nil), rowset=16                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([t1.col1], [t1.col2]), partitions(p[0-2])                                        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false,                                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([t1.__pk_increment]), range(MIN ; MAX)always true                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   7 - output([t3.col1], [t3.col2]), filter(nil), rowset=16                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       affinitize, force partition granule                                                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   8 - output([t3.col1], [t3.col2]), filter(nil), rowset=16                                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       access([t3.col1], [t3.col2]), partitions(p[0-2])                                        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       is_index_back=false, is_global_index=false,                                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       range_key([t3.__pk_increment]), range(MIN ; MAX)always true                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------------------------------------------------------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">35 rows in set</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-statements-2">Sample statements<a href="#sample-statements-2" class="hash-link" aria-label="Direct link to Sample statements" title="Direct link to Sample statements">​</a></h3>
<p>For more information about table groups, see <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001377877" target="_blank" rel="noopener noreferrer">Create and manage table groups</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sharding-attribute">SHARDING attribute<a href="#sharding-attribute" class="hash-link" aria-label="Direct link to SHARDING attribute" title="Direct link to SHARDING attribute">​</a></h3>
<p>The table group feature has been introduced since OceanBase Database V1.x. Tables associated with each other often share the same partitioning rules. Partitions that adopt the same partitioning rules are placed together to implement partition-wise joins, which greatly optimize read and write performance. Therefore, the table group feature is provided to change regular joins to partition-wise joins.</p>
<p>The <code>SHARDING</code> attribute has been introduced since OceanBase Database V4.2.0 to control the aggregation and dispersion of table data within a table group. By default, data of different tables is randomly distributed. To gather the partitions of multiple related tables on the same node to support partition-wise joins and improve performance, you need to specify the alignment rules between partitions of different tables.</p>
<ul>
<li>
<p>If you specify <code>SHARDING = NONE</code>, all partitions of all tables in a table group exist on the same node, regardless of the partitioning type. This way, you can distribute tables frequently involved in the same transaction on the same server, thus simplifying a distributed transaction to a single-server transaction.</p>
</li>
<li>
<p>If you set the <code>SHARDING</code> attribute of a table group to a value other than <code>NONE</code>, the data of each table in the table group is distributed to multiple servers. To ensure consistent table data distribution, all tables in the table group must have the same partition definition, including the partitioning type, number of partitions, and partitioning key value. The system schedules or aligns partitions with the same partition attributes to the same server to implement partition-wise joins.</p>
</li>
</ul>
<p>Other valid values of the <code>SHARDING</code> attribute and their effect on the tables in a table group are as follows:</p>
<ul>
<li>
<p><code>PARTITION</code>: Specifies to distribute data by partition. For a subpartitioned table, all subpartitions under the same partition are aggregated.</p>
<ul>
<li>
<p>Partitioning type requirement: All tables use the same partitioning type. For a subpartitioned table, only its partitioning type is verified. Therefore, if the <code>SHARDING</code> attribute of a table group is set to this value, the table group may contain both partitioned and subpartitioned tables, as long as their partitioning types are the same.</p>
</li>
<li>
<p>Partition alignment rules: Partitions with the same partitioning key value are aggregated, including partitions of partitioned tables and all subpartitions under corresponding partitions of subpartitioned tables.</p>
</li>
</ul>
</li>
<li>
<p><code>ADAPTIVE</code>: Data is distributed in an adaptive way. If the <code>SHARDING</code> attribute of a table group is set to this value, and the table group contains only partitioned tables, data is distributed by partition. If the table group contains only subpartitioned tables, data is distributed by subpartition.</p>
<ul>
<li>
<p>Partitioning type requirement: All tables in the table group are partitioned tables or subpartitioned tables. If all tables are partitioned tables, the tables must use the same partitioning type. If all tables are subpartitioned tables, the tables must use the same partitioning and subpartitioning types.</p>
</li>
<li>
<p>Partition alignment rules: For partitioned tables, partitions with the same partitioning key value are aggregated. For subpartitioned tables, subpartitions with the same partitioning key value and subpartitioning key value are aggregated.</p>
</li>
</ul>
</li>
</ul>
<p>The following examples describe how to use the <code>SHARDING</code> attribute.</p>
<p><strong>Example 1: SHARDING = NONE</strong></p>
<p>If you specify <code>SHARDING = NONE</code> for a table group, all partitions of all tables in the table group are distributed in the same partition group on the same server.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> TABLEGROUP TG1 SHARDING </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;NONE&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a non-partitioned table and specify its table group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> T_NONPART </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> tablegroup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TG1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a partitioned table and specify its table group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> T_PART_2 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  tablegroup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TG1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     partitions </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a subpartitioned table and specify its table group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> T_SUBPART_2_2 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c1 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> tablegroup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TG1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     subpartition </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> subpartitions </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     partitions </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><tr><td rowspan="2">Table</td><td>Partition Group</td></tr><tr><td>0</td></tr><tr><td>T_NONPART</td><td>P0</td></tr><tr><td>T_PART_2</td><td>P0, P1</td></tr><tr><td>T_SUBPART_2_2</td><td>P0SP0, P0SP1, P1SP0, P1SP1</td></tr></table>
<p><strong>Example 2: SHARDING = PARTITION</strong></p>
<p>If you specify <code>SHARDING = PARTITION</code> for a table group, all tables in the table group must be partitioned tables adopting the same partitioning type. Partitions with the same partition attributes are aggregated in a partition group.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> TABLEGROUP TG1 SHARDING </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PARTITION&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a partitioned table and specify its table group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> T_PART_2 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> tablegroup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TG1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> partitions </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a subpartitioned table and specify its table group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> T_SUBPART_2_2 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c1 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> tablegroup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TG1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     subpartition </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> subpartitions </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     partitions </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><tr><td rowspan="2">Table</td><td colspan="2">Partition Group</td></tr><tr><td>0</td><td>1</td></tr><tr><td>T_PART_2</td><td>P0</td><td>P1</td></tr><tr><td>T_SUBPART_2_2</td><td>P0SP0, P0SP1</td><td>P1SP0, P1SP1</td></tr></table>
<p><strong>Example 3: SHARDING = ADAPTIVE</strong></p>
<p>In this case, all tables in the table group must adopt the same partitioning and subpartitioning types. Partitioned tables and subpartitioned tables cannot be added to the same table group.</p>
<p>Create a table group for partitioned tables:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> TABLEGROUP TG_PART SHARDING </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ADAPTIVE&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a partitioned table and specify its table group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> T1_PART_2 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> tablegroup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TG_PART</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> partitions </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a partitioned table and specify its table group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> T2_PART_2 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c1 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> tablegroup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TG_PART</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> partitions </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><tr><td rowspan="2">Table</td><td colspan="2">Partition Group</td></tr><tr><td>0</td><td>1</td></tr><tr><td>T1_PART_2</td><td>P0</td><td>P1</td></tr><tr><td>T2_PART_2</td><td>P0</td><td>P1</td></tr></table>
<p>Create a table group for subpartitioned tables:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> TABLEGROUP TG_SUBPART SHARDING </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ADAPTIVE&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a subpartitioned table and specify its table group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> T1_SUBPART_2_2 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c1 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> tablegroup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TG_SUBPART</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     subpartition </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> subpartitions </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     partitions </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a subpartitioned table and specify its table group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> T2_SUBPART_2_2 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c1 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c2 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> c1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> tablegroup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TG_SUBPART</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token keyword" style="color:#00009f">partition</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     subpartition </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hash</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> subpartitions </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     partitions </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><tr><td rowspan="2">Table</td><td colspan="4">Partition Group</td></tr><tr><td>00</td><td>01</td><td>10</td><td>11</td></tr><tr><td>T1_SUBPART_2_2</td><td>P0SP0</td><td>P0SP1</td><td>P1SP0</td><td>P1SP1</td></tr><tr><td>T2_SUBPART_3_3</td><td>P0SP0</td><td>P0SP1</td><td>P1SP0</td><td>P1SP1</td></tr></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="faq-2">FAQ<a href="#faq-2" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="is-a-table-group-affiliated-with-a-database">Is a table group affiliated with a database?<a href="#is-a-table-group-affiliated-with-a-database" class="hash-link" aria-label="Direct link to Is a table group affiliated with a database?" title="Direct link to Is a table group affiliated with a database?">​</a></h4>
<p>A table group is not affiliated with a database. They are objects in a tenant.</p>
<p>The affiliation relationship between database objects in OcreanBase Database is as follows:</p>
<ul>
<li>Tenants<!-- -->
<ul>
<li>Databases and table groups<!-- -->
<ul>
<li>Tables<!-- -->
<ul>
<li>Indexes, partitions, and constraints</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sequences">Sequences<a href="#sequences" class="hash-link" aria-label="Direct link to Sequences" title="Direct link to Sequences">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="definition-3">Definition<a href="#definition-3" class="hash-link" aria-label="Direct link to Definition" title="Direct link to Definition">​</a></h3>
<p>In OceanBase Database, a sequence is a set of auto-increment unique numeric values generated in the database based on some rules. Sequences are often used to generate unique identifiers.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benefits-3">Benefits<a href="#benefits-3" class="hash-link" aria-label="Direct link to Benefits" title="Direct link to Benefits">​</a></h3>
<p>Many database users need to migrate their business systems from DB2 or Oracle Database to MySQL tenants of Oceanbase Database.</p>
<p>Their business involves a great number of sequence objects in DB2 or Oracle Database. To reduce the workload in business modification, OceanBase Database supports sequences in MySQL mode.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-statements-3">Sample statements<a href="#sample-statements-3" class="hash-link" aria-label="Direct link to Sample statements" title="Direct link to Sample statements">​</a></h3>
<p>For more information about sequences, see <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001377919" target="_blank" rel="noopener noreferrer">Create and manage sequences</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenarios-2">Scenarios<a href="#scenarios-2" class="hash-link" aria-label="Direct link to Scenarios" title="Direct link to Scenarios">​</a></h3>
<ol>
<li>
<p>Business is migrated from DB2 or Oracle Database to MySQL tenants of Oceanbase Database.</p>
</li>
<li>
<p>The auto-increment column feature, which is bound to a table, cannot meet the business needs. Sequences are not bound to tables. You can create a sequence separately and use it for multiple tables.</p>
</li>
<li>
<p>An auto-increment column, which does not support the <code>CYCLE</code> option, has reached its maximum value. Sequences support the <code>CYCLE</code> option and can wrap around.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="faq-3">FAQ<a href="#faq-3" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-differences-between-a-sequence-and-an-auto-increment-column">What are the differences between a sequence and an auto-increment column?<a href="#what-are-the-differences-between-a-sequence-and-an-auto-increment-column" class="hash-link" aria-label="Direct link to What are the differences between a sequence and an auto-increment column?" title="Direct link to What are the differences between a sequence and an auto-increment column?">​</a></h4>
<ol>
<li>
<p>Auto-increment columns are bound to tables. Sequences are not bound to tables. You can create a sequence separately and use it for multiple tables.</p>
</li>
<li>
<p>Auto-increment columns do not support the <code>CYCLE</code> option. Sequences support the <code>CYCLE</code> option and can wrap around.</p>
</li>
</ol>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- Create a table that contains an auto-increment column named `id`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> t1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token keyword" style="color:#00009f">bigint</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">null</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">auto_increment</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">primary</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name </span><span class="token keyword" style="color:#00009f">varchar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> affected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> t1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;A&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;B&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;C&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> affected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> t1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">----+------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">----+------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> A    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> B    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> C    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">----+------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Create a sequence whose start value is 1, minimum value is 1, and maximum value is 5, with a step size of 2, and specify the `NOCYCLE` option.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> SEQUENCE seq1 </span><span class="token keyword" style="color:#00009f">START</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> MINVALUE </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> MAXVALUE </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> INCREMENT </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> NOCYCLE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> affected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> seq1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextval </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> DUAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> nextval </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> seq1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextval </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> DUAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> nextval </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> seq1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextval </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> DUAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> nextval </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- If you specify the `NOCYCLE` option, no more values can be generated after the sequence reaches the maximum value.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> seq1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextval </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> DUAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR </span><span class="token number" style="color:#36acaa">4332</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HY000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: sequence exceeds MAXVALUE </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> cannot be instantiated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- Create another sequence whose start value is 1, minimum value is 1, and maximum value is 5, with a step size of 2, and specify the `CYCLE` and `CACHE` options.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> SEQUENCE seq7 </span><span class="token keyword" style="color:#00009f">START</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WITH</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> MINVALUE </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> MAXVALUE </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> INCREMENT </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CYCLE</span><span class="token plain"> CACHE </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> affected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> seq7</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextval </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> DUAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> nextval </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> seq7</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextval </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> DUAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> nextval </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> seq7</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextval </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> DUAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> nextval </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> seq7</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextval </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> DUAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> nextval </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">---------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- In addition to top-level `SELECT` statements, you can also use sequences in `INSERT` and `UPDATE` statements.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">create</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c1 </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> affected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">insert</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">into</span><span class="token plain"> t2 </span><span class="token keyword" style="color:#00009f">values</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">seq7</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextval</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> affected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> c1   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> t2 </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> c1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> seq7</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">nextval</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> affected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">Rows</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">matched</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">  Changed: </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">  </span><span class="token keyword" style="color:#00009f">Warnings</span><span class="token plain">: </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obclient </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> t2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> c1   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token comment" style="color:#999988;font-style:italic">------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-the-impact-of-the-order-and-noorder-options-on-a-sequence-and-an-auto-increment-column">What is the impact of the ORDER and NOORDER options on a sequence and an auto-increment column?<a href="#what-is-the-impact-of-the-order-and-noorder-options-on-a-sequence-and-an-auto-increment-column" class="hash-link" aria-label="Direct link to What is the impact of the ORDER and NOORDER options on a sequence and an auto-increment column?" title="Direct link to What is the impact of the ORDER and NOORDER options on a sequence and an auto-increment column?">​</a></h4>
<p>The ORDER and NOORDER options have the same impact on sequences and auto-increment columns.</p>
<p>OceanBase Database is a distributed database in which database tables are generally distributed across multiple servers. OceanBase Database must ensure the auto-increment column generation performance in distributed multi-server scenarios. This result in the issue of value hopping when auto-increment values are generated.</p>
<p>OceanBase Database supports <code>NOORDER</code> and <code>ORDER</code> auto-increment modes for auto-increment columns. By default, the <code>ORDER</code> mode is used.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="noorder-mode">NOORDER mode<a href="#noorder-mode" class="hash-link" aria-label="Direct link to NOORDER mode" title="Direct link to NOORDER mode">​</a></h5>
<p>This mode is implemented based on the distributed cache. Values in an auto-increment column in this mode are globally unique. Values in the auto-increment column only increase locally within a node. Global increment is not guaranteed.</p>
<p>The data structure of an auto-increment column in <code>NOORDER</code> mode consists of two parts:</p>
<ul>
<li>
<p>Internal table: a table that resides on the central node and into which the central node persists the checkpoint of auto-increment values that have been used.</p>
</li>
<li>
<p>Cache: an auto-increment value range that exists in each OBServer node and is requested from the internal table.</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="NOORDER mode" src="/assets/images/007-c6f08d6c804482167bdfaf8356a479aa.png" width="1460" height="878" class="img_ev3q"></p>
<p>For an auto-increment column in <code>NOORDER</code> mode, OBServer nodes are independent of each other. Each OBServer node can obtain an auto-increment value range from the internal table and record the range in the server cache. Auto-increment values are obtained from the local cache without accessing the central node.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="order-mode">ORDER mode<a href="#order-mode" class="hash-link" aria-label="Direct link to ORDER mode" title="Direct link to ORDER mode">​</a></h5>
<p>This mode is implemented based on the centralized cache. Values in a sequence or an auto-increment column in this mode increase globally.</p>
<p>The following figure shows the working principle of an auto-increment column in <code>ORDER</code> mode.</p>
<p><img decoding="async" loading="lazy" alt="ORDER mode" src="/assets/images/008-933e72a61f1b28a057a6b68e84ad4958.png" width="1510" height="948" class="img_ev3q"></p>
<p>In <code>ORDER</code> mode, an auto-increment column will select the OBServer node that is the leader of the current cluster and where RootService is deployed to provide services. Other OBServer nodes that serve as followers must send an RPC request to apply for auto-increment values from the leader. The leader will request an auto-increment value range from the internal table and cache the value range.</p>
<p>To avoid value hopping in <code>NOORDER </code> mode while applying for auto-increment values from different nodes in distributed scenarios, you need to set the auto-increment column to <code>ORDER</code> mode.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>The default mode of a sequence is different from that of an auto-increment column:</p>
<ul>
<li>
<p>To be compatible with Oracle Database, a sequence is created in <code>NOORDER</code> mode by default.</p>
</li>
<li>
<p>To be compatible with MySQL Database, an auto-increment column is created in <code>ORDER</code> mode by default.</p>
</li>
</ul>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="considering-performance-overheads-what-are-the-recommended-attribute-settings-when-i-create-a-sequence">Considering performance overheads, what are the recommended attribute settings when I create a sequence?<a href="#considering-performance-overheads-what-are-the-recommended-attribute-settings-when-i-create-a-sequence" class="hash-link" aria-label="Direct link to Considering performance overheads, what are the recommended attribute settings when I create a sequence?" title="Direct link to Considering performance overheads, what are the recommended attribute settings when I create a sequence?">​</a></h4>
<p>If you create a sequence in <code>ORDER</code> mode, to ensure global sequentiality, the database accesses the central node to update a specific internal table every time it obtains the next value. This may cause serious lock conflicts in high-concurrency scenarios. If the sequence values do not need to be incremental but must be unique, we recommend that you set the sequence to <code>NOORDER</code> mode.</p>
<p>If you have high performance requirements, pay attention to the value cache mode. Two value cache modes are supported: CACHE and NOCACHE.</p>
<ul>
<li>
<p><code>NOCACHE</code>: Specifies that auto-increment values are not cached in the OBServer node. In this mode, the <code>SELECT</code> and <code>UPDATE</code> statements are executed every time the <code>NEXTVAL</code> pseudocolumn is called. This affects the performance of the database.</p>
</li>
<li>
<p><code>CACHE</code>: Specifies the number of auto-increment values that each OBServer node caches in memory. The default value is <code>20</code>.</p>
</li>
</ul>
<blockquote>
<p><strong>Note</strong></p>
<p>By default, the database caches a small number of auto-increment values for sequences. When you create a sequence, we recommend that you specify a larger value for <code>CACHE</code>. For a database instance with the capability of handling 100 transactions per second (TPS), you can set the <code>CACHE SIZE</code> parameter to <code>360000</code>.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="flashback-queries">Flashback queries<a href="#flashback-queries" class="hash-link" aria-label="Direct link to Flashback queries" title="Direct link to Flashback queries">​</a></h2>
<p>OceanBase Database supports record-specific flashback queries, which allows you to obtain data of a specific historical version.</p>
<p>For more information, see <a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001375474" target="_blank" rel="noopener noreferrer">Flashback queries</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="replicated-tables">Replicated tables<a href="#replicated-tables" class="hash-link" aria-label="Direct link to Replicated tables" title="Direct link to Replicated tables">​</a></h2>
<p>OceanBase Database allows you to create replicated tables. A replicated table can read the latest data modifications from any healthy replica. If you do not frequently write data and are more concerned about the operation latency and load balancing, a replicated table is a good choice.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/04_extended_functionality.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/user_manual/quick_starts/en-US/chapter_06_using_ob_for_business_development/horizontal_splitting_using_partition_table"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Partition a table by horizontal splitting</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/user_manual/quick_starts/en-US/chapter_07_diagnosis_and_tuning/introduction"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introduction</div></a></nav><div>Loading...</div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#global-index" class="table-of-contents__link toc-highlight">Global index</a><ul><li><a href="#definition" class="table-of-contents__link toc-highlight">Definition</a></li><li><a href="#benefits" class="table-of-contents__link toc-highlight">Benefits</a></li><li><a href="#sample-statements" class="table-of-contents__link toc-highlight">Sample statements</a></li><li><a href="#scenarios" class="table-of-contents__link toc-highlight">Scenarios</a></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a></li></ul></li><li><a href="#recycle-bin" class="table-of-contents__link toc-highlight">Recycle bin</a><ul><li><a href="#definition-1" class="table-of-contents__link toc-highlight">Definition</a></li><li><a href="#benefits-1" class="table-of-contents__link toc-highlight">Benefits</a></li><li><a href="#sample-statements-1" class="table-of-contents__link toc-highlight">Sample statements</a></li><li><a href="#scenarios-1" class="table-of-contents__link toc-highlight">Scenarios</a></li><li><a href="#faq-1" class="table-of-contents__link toc-highlight">FAQ</a></li></ul></li><li><a href="#table-groups" class="table-of-contents__link toc-highlight">Table groups</a><ul><li><a href="#definition-2" class="table-of-contents__link toc-highlight">Definition</a></li><li><a href="#benefits-2" class="table-of-contents__link toc-highlight">Benefits</a></li><li><a href="#sample-statements-2" class="table-of-contents__link toc-highlight">Sample statements</a></li><li><a href="#sharding-attribute" class="table-of-contents__link toc-highlight">SHARDING attribute</a></li><li><a href="#faq-2" class="table-of-contents__link toc-highlight">FAQ</a></li></ul></li><li><a href="#sequences" class="table-of-contents__link toc-highlight">Sequences</a><ul><li><a href="#definition-3" class="table-of-contents__link toc-highlight">Definition</a></li><li><a href="#benefits-3" class="table-of-contents__link toc-highlight">Benefits</a></li><li><a href="#sample-statements-3" class="table-of-contents__link toc-highlight">Sample statements</a></li><li><a href="#scenarios-2" class="table-of-contents__link toc-highlight">Scenarios</a></li><li><a href="#faq-3" class="table-of-contents__link toc-highlight">FAQ</a></li></ul></li><li><a href="#flashback-queries" class="table-of-contents__link toc-highlight">Flashback queries</a></li><li><a href="#replicated-tables" class="table-of-contents__link toc-highlight">Replicated tables</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://github.com/oceanbase/oceanbase/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/oceanbase/shared_invite/zt-1e25oz3ol-lJ6YNqPHaKwY_mhhioyEuw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">SIG</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/sig/AI/sig_intro">AI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/cloud-native/sig_intro">cloud-native</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/compilation/sig_intro">compilation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/develop-tools/sig_intro">develop-tools</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/miniob/sig_intro">MiniOB</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/obdiag/sig_intro">obdiag</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sig/operation/sig_intro">operation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://en.oceanbase.com/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About OceanBase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/blogs/arch/all-in-one">Blogs</a></li><li class="footer__item"><a href="https://github.com/oceanbase/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-obd/user-guide/obd-command/test-command-group" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Testing commands | OceanBase</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://oceanbase.github.io/docs/obd/user-guide/obd-command/test-command-group"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Testing commands | OceanBase"><meta data-rh="true" name="description" content="OBD provides multiple-level commands. You can use the -h/--help option to view the help information of sub-commands. Similarly, you can also use -v/--verbose to view the detailed execution process of commands when the execution of sub commands reports an error."><meta data-rh="true" property="og:description" content="OBD provides multiple-level commands. You can use the -h/--help option to view the help information of sub-commands. Similarly, you can also use -v/--verbose to view the detailed execution process of commands when the execution of sub commands reports an error."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oceanbase.github.io/docs/obd/user-guide/obd-command/test-command-group"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/obd/user-guide/obd-command/test-command-group" hreflang="en"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/zh-Hans/docs/obd/user-guide/obd-command/test-command-group" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://oceanbase.github.io/docs/obd/user-guide/obd-command/test-command-group" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QK0JZ42KY7-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OceanBase RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OceanBase Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="OceanBase" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.235050f3.css">
<script src="/assets/js/runtime~main.80be478c.js" defer="defer"></script>
<script src="/assets/js/main.8abb3ebd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="OceanBase Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OceanBase</b></a><a class="navbar__item navbar__link" href="/docs/tutorial/intro">Quick Start</a><a class="navbar__item navbar__link" href="/blog">Blogs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Documentations</a><ul class="dropdown__menu"><li><a href="https://github.com/oceanbase/obdeploy" target="_blank" rel="noopener noreferrer" class="dropdown__link">obd<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://oceanbase.github.io/ob-operator/" target="_blank" rel="noopener noreferrer" class="dropdown__link">ob-operator<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://oceanbase.github.io/oceanbase/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Developer<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://en.oceanbase.com/docs/common-oceanbase-database-10000000001228248" target="_blank" rel="noopener noreferrer" class="dropdown__link">API Reference<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://en.oceanbase.com/softwarecenter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Downloads<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/obd/user-guide/obd-command/test-command-group" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-Hans/docs/obd/user-guide/obd-command/test-command-group" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Testing commands</h1>
<p>OBD provides multiple-level commands. You can use the <code>-h/--help</code> option to view the help information of sub-commands. Similarly, you can also use <code>-v/--verbose</code> to view the detailed execution process of commands when the execution of sub commands reports an error.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="obd-test-mysqltest">obd test mysqltest<a href="#obd-test-mysqltest" class="hash-link" aria-label="Direct link to obd test mysqltest" title="Direct link to obd test mysqltest">​</a></h2>
<p>Runs the mysqltest on the specified node of an OcecanBase cluster or ODP. To run the mysqltest, you must install OBClient.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obd test mysqltest &lt;deploy name&gt; [--test-set &lt;test-set&gt;] [flags]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obd test mysqltest test --all --auto-retry</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>deploy name</code> parameter specifies the name of the deployed cluster. You can consider it as an alias for the configuration file.</p>
<p>This table describes the corresponding options.</p>
<table><thead><tr><th>Option</th><th>Required</th><th>Data type</th><th>Default value</th><th>Description</th></tr></thead><tbody><tr><td>--component</td><td>No</td><td>string</td><td>Empty</td><td>The name of the component to be tested. Valid values: <code>oceanbase-ce</code>, <code>oceanbase</code>, <code>obproxy-ce</code> and <code>obproxy</code>. If you do not specify a value, the existence of <code>obproxy</code>, <code>obproxy-ce</code>, <code>oceanbase</code>, <code>oceanbase-ce</code> is checked sequentially. The traversal stops when a component is found, and the component is then tested.</td></tr><tr><td>--test-server</td><td>No</td><td>string</td><td>The first node of the specified component.</td><td>Machine to be tested, followed by the <code>name</code> value corresponding to <code>servers</code> in the <code>yaml</code> file. If the <code>name</code> value is not configured after <code>servers</code>, the <code>ip</code> value is used. It must be the name of a node of the specified component.</td></tr><tr><td>--user</td><td>No</td><td>string</td><td>admin</td><td>The username for running the test.</td></tr><tr><td>--password</td><td>No</td><td>string</td><td>admin</td><td>The password for running the test.</td></tr><tr><td>--database</td><td>No</td><td>String</td><td>test</td><td>The database where the test is to be performed.</td></tr><tr><td>--mysqltest-bin</td><td>No</td><td>string</td><td>/u01/obclient/bin/mysqltest</td><td>The path of the mysqltest binary file.</td></tr><tr><td>--obclient-bin</td><td>No</td><td>string</td><td>obclient</td><td>The path of the OBClient binary file.</td></tr><tr><td>--test-dir</td><td>No</td><td>string</td><td>./mysql_test/t</td><td>The directory that stores the test file required for the mysqltest. If no test file is found in the directory, OBD will search for a built-in test file.</td></tr><tr><td>--test-file-suffix</td><td>No</td><td>String</td><td>.test</td><td>The suffix of the test file required by mysqltest.</td></tr><tr><td>--result-dir</td><td>No</td><td>string</td><td>./mysql_test/r</td><td>The directory that stores the result file required for the mysqltest. If no result file is found in the directory, OBD will search for a built-in result file.</td></tr><tr><td>--result-file-suffix</td><td>No</td><td>String</td><td>.result</td><td>The suffix of the result file required by mysqltest.</td></tr><tr><td>--record</td><td>No</td><td>Bool</td><td>false</td><td>Specifies whether to record only the execution results of mysqltest in the record files.</td></tr><tr><td>--record-dir</td><td>No</td><td>String</td><td>./record</td><td>The directory where the record files that record the execution results of mysqltest are stored.</td></tr><tr><td>--record-file-suffix</td><td>No</td><td>String</td><td>.record</td><td>The suffix of the record files that record the execution results of mysqltest.</td></tr><tr><td>--tmp-dir</td><td>No</td><td>string</td><td>./tmp</td><td>The mysqltest tmpdir option.</td></tr><tr><td>--var-dir</td><td>No</td><td>string</td><td>./var</td><td>The directory to create the log directory. The log directory will be added to the mysqltest command as the logdir option.</td></tr><tr><td>--test-set</td><td>No</td><td>string</td><td>None</td><td>The array of test cases. Separate multiple cases with commas (<code>,</code>).</td></tr><tr><td>--exclude</td><td>No</td><td>String</td><td>None</td><td>The array of test cases to be excluded. Separate multiple cases with commas (<code>,</code>).</td></tr><tr><td>--test-pattern</td><td>No</td><td>string</td><td>None</td><td>The regular expression for matching test file names. Test cases matching the regular expression will overwrite the values of the test-set option.</td></tr><tr><td>--suite</td><td>No</td><td>string</td><td>None</td><td>The suite array. A suite contains multiple tests. Separate multiple tests with commas (<code>,</code>). If this option is enabled, the --test-pattern and --test-set options will become invalid.</td></tr><tr><td>--suite-dir</td><td>No</td><td>string</td><td>./mysql_test/test_suite</td><td>The directory that stores the suite directory. If no suite directory is found in the directory, OBD will search for a built-in suite directory.</td></tr><tr><td>--all</td><td>No</td><td>bool</td><td>false</td><td>Specifies whether to run all test cases in the directory specified for the --suite-dir option. The --suite-dir option specifies the directory that stores the suite directory.</td></tr><tr><td>--need-init</td><td>No</td><td>bool</td><td>false</td><td>Specifies whether to run the init sql files. Before OBD runs the mysqltest on a new cluster, it may run some initialization files. For example, it may create some accounts or tenants required for running the test cases. The --suite-dir option specifies the directory that stores the suite directory. This option is disabled by default.</td></tr><tr><td>--init-sql-dir</td><td>No</td><td>string</td><td>./</td><td>The directory that stores the init sql files. If no init sql file is found in the directory, OBD will search for built-in init sql files.</td></tr><tr><td>--init-sql-files</td><td>No</td><td>string</td><td>Empty</td><td>The init sql files to be run when initialization is required. Separate multiple init sql files with commas (<code>,</code>). If this option is not specified but initialization is required, OBD will run the built-in init files based on the cluster configurations.</td></tr><tr><td>--auto-retry</td><td>No</td><td>bool</td><td>false</td><td>Specifies whether to automatically redeploy the cluster for a retry after a test fails.</td></tr><tr><td>--psmall</td><td>No</td><td>Bool</td><td>false</td><td>Specifies whether to execute the cases in psmall mode.</td></tr><tr><td>--slices</td><td>No</td><td>Int</td><td>Empty</td><td>The number of slices into which the case to be executed is divided.</td></tr><tr><td>--slice-idx</td><td>No</td><td>Int</td><td>Empty</td><td>The ID of the current slice.</td></tr><tr><td>--slb-host</td><td>No</td><td>String</td><td>Empty</td><td>The host for soft load balancing.</td></tr><tr><td>--exec-id</td><td>No</td><td>String</td><td>Empty</td><td>The ID of the execution.</td></tr><tr><td>--case-filter</td><td>No</td><td>String</td><td>./mysql_test/filter.py</td><td>The filter.py file, which contains lists of cases to be filtered out.</td></tr><tr><td>--reboot-timeout</td><td>No</td><td>Int</td><td>0</td><td>The timeout period for the restart.</td></tr><tr><td>--reboot-retries</td><td>No</td><td>Int</td><td>5</td><td>The number of retries allowed if the restart fails.</td></tr><tr><td>--collect-all</td><td>No</td><td>Bool</td><td>false</td><td>Specifies whether to collect component logs.</td></tr><tr><td>--log-dir</td><td>No</td><td>String</td><td><code>tmp_dir/log</code></td><td>The path to the directory where the mysqltest logs are stored.</td></tr><tr><td>--log-pattern</td><td>No</td><td>String</td><td>*.log</td><td>The regular expression that is used to match log file names. Files that match the expression are collected.</td></tr><tr><td>--case-timeout</td><td>No</td><td>Int</td><td>3600</td><td>The timeout period for a single test of mysqltest.</td></tr><tr><td>--disable-reboot</td><td>No</td><td>Bool</td><td>false</td><td>Specifies whether to disable restart during the test.</td></tr><tr><td>--collect-components</td><td>No</td><td>string</td><td>Empty</td><td>Specify the components to collect logs. Multiple components are separated by commas (<code>,</code>).</td></tr><tr><td>--init-only</td><td>No</td><td>bool</td><td>false</td><td>If this option is true, it means that only init SQL is executed.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="obd-test-sysbench">obd test sysbench<a href="#obd-test-sysbench" class="hash-link" aria-label="Direct link to obd test sysbench" title="Direct link to obd test sysbench">​</a></h2>
<p>Runs the Sysbench test on the specified node of an OcecanBase cluster or ODP.  To run the Sysbench test, you must install OBClient and ob-sysbench.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obd test sysbench &lt;deploy name&gt; [flags]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum install ob-sysbench</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obd test sysbench test --tenant=sysbench --script-name=oltp_read_only.lua --table-size=1000000 --threads=32 --rand-type=uniform</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>deploy name</code> parameter specifies the name of the deployed cluster. You can consider it as an alias for the configuration file.</p>
<p>This table describes the corresponding options.</p>
<table><thead><tr><th>Option</th><th>Required</th><th>Data type</th><th>Default value</th><th>Description</th></tr></thead><tbody><tr><td>--component</td><td>No</td><td>string</td><td>Empty</td><td>The name of the component to be tested. Valid values: <code>oceanbase-ce</code>, <code>oceanbase</code>, <code>obproxy-ce</code> and <code>obproxy</code>. If you do not specify a value, the existence of <code>obproxy</code>, <code>obproxy-ce</code>, <code>oceanbase</code>, <code>oceanbase-ce</code> is checked sequentially. The traversal stops when a component is found, and the component is then tested.</td></tr><tr><td>--test-server</td><td>No</td><td>string</td><td>The first node of the specified component.</td><td>Machine to be tested, followed by the <code>name</code> value corresponding to <code>servers</code> in the <code>yaml</code> file. If the <code>name</code> value is not configured after <code>servers</code>, the <code>ip</code> value is used. It must be the name of a node of the specified component.</td></tr><tr><td>--user</td><td>No</td><td>string</td><td>root</td><td>The username for running the test.</td></tr><tr><td>--password</td><td>No</td><td>string</td><td>Empty</td><td>The password for running the test.</td></tr><tr><td>-t/--tenant</td><td>No</td><td>string</td><td>test</td><td>The tenant name used to perform the test. You need ensure this tenant has been created.</td></tr><tr><td>--database</td><td>No</td><td>string</td><td>test</td><td>The database for performing the test.</td></tr><tr><td>--obclient-bin</td><td>No</td><td>string</td><td>obclient</td><td>The path of the OBClient binary file.</td></tr><tr><td>--sysbench-bin</td><td>No</td><td>string</td><td>sysbench</td><td>The path of the Sysbench binary file.</td></tr><tr><td>--script-name</td><td>No</td><td>string</td><td>point_select.lua</td><td>The name of the Sysbench script to be run.</td></tr><tr><td>--sysbench-script-dir</td><td>No</td><td>string</td><td>/usr/sysbench/share/sysbench</td><td>The directory that stores the Sysbench script.</td></tr><tr><td>--tables</td><td>No</td><td>int</td><td>30</td><td>The number of tables to be initialized.</td></tr><tr><td>--table-size</td><td>No</td><td>int</td><td>20000</td><td>The data size of each table to be initialized.</td></tr><tr><td>--threads</td><td>No</td><td>int</td><td>16</td><td>The number of threads to be started.</td></tr><tr><td>--time</td><td>No</td><td>int</td><td>60</td><td>Test execution time in seconds. When this option is set to 0, the running duration is not limited.</td></tr><tr><td>--interval</td><td>No</td><td>int</td><td>10</td><td>The logging interval, in seconds. Disables intermediate reports When this option is set to <code>0</code>.</td></tr><tr><td>--mysql-ignore-errors</td><td>No</td><td>String</td><td>1062</td><td>The error code to be ignored. Separate multiple error codes with commas (<code>,</code>). The value <code>all</code> indicates to ignore all errors.</td></tr><tr><td>--events</td><td>No</td><td>int</td><td>0</td><td>The maximum number of requests. If this option is specified, the --time option is not needed.</td></tr><tr><td>--rand-type</td><td>No</td><td>string</td><td>Empty</td><td>The random number generation function used for data access. Valid values: special, uniform, gaussian, and pareto.  Default value: special, early value: uniform.</td></tr><tr><td>---skip-trx</td><td>No</td><td>string</td><td>Empty</td><td>Specifies whether to enable or disable a transaction in a read-only test.</td></tr><tr><td>--percentile</td><td>No</td><td>int</td><td>Empty</td><td>Percentile to calculate in latency statistics. Value range: [1,100]. 0 means to disable percentile calculations.</td></tr><tr><td>-S/--skip-cluster-status-check</td><td>No</td><td>bool</td><td>false</td><td>Skip cluster status check when the option is true.</td></tr><tr><td>-O/--optimization</td><td>No</td><td>int</td><td>1</td><td>The degree of auto-tuning. Valid values: <code>0</code>, <code>1</code>, and <code>2</code>. <code>0</code> indicates that auto-tuning is disabled. <code>1</code> indicates that the auto-tuning parameters that take effect without a cluster restart are modified. <code>2</code> indicates that all auto-tuning parameters are modified. If necessary, the cluster is restarted to make all parameters take effect.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="obd-test-tpch">obd test tpch<a href="#obd-test-tpch" class="hash-link" aria-label="Direct link to obd test tpch" title="Direct link to obd test tpch">​</a></h2>
<p>This section describes how to run the TPC-H test on the specified node of an OcecanBase cluster or ODP. To run the TPC-H test, you must install OBClient and obtpch.
TPC-H needs to specify an OceanBase target server as the execution target. Before executing the TPC-H test, OBD will transfer the data files required for the test to the specified directory of the specified machine. Please make sure that you have enough disk space on this machine because these files may be relatively large.
Of course, you can prepare the data files on the target machine in advance and then turn off the transfer by using the <code>-dt/--disable-transfer</code> option.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obd test tpch &lt;deploy name&gt; [flags]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum install obtpch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obd test tpch test --tenant=tpch -s 100 --remote-tbl-dir=/tmp/tpch100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>deploy name</code> parameter specifies the name of the deployed cluster. You can consider it as an alias for the configuration file.</p>
<table><thead><tr><th>Option</th><th>Required</th><th>Data type</th><th>Default value</th><th>Description</th></tr></thead><tbody><tr><td>--component</td><td>No</td><td>string</td><td>Empty</td><td>The name of the component to be tested. Valid values: <code>oceanbase-ce</code>, <code>oceanbase</code>, <code>obproxy-ce</code> and <code>obproxy</code>. If you do not specify a value, the existence of <code>obproxy</code>, <code>obproxy-ce</code>, <code>oceanbase</code>, <code>oceanbase-ce</code> is checked sequentially. The traversal stops when a component is found, and the component is then tested.</td></tr><tr><td>--test-server</td><td>No</td><td>string</td><td>The first node of the specified component.</td><td>Machine to be tested, followed by the <code>name</code> value corresponding to <code>servers</code> in the <code>yaml</code> file. If the <code>name</code> value is not configured after <code>servers</code>, the <code>ip</code> value is used. It must be the name of a node of the specified component.</td></tr><tr><td>--user</td><td>No</td><td>string</td><td>root</td><td>The username for running the test.</td></tr><tr><td>--password</td><td>No</td><td>string</td><td>Empty</td><td>The password for running the test.</td></tr><tr><td>-t/--tenant</td><td>No</td><td>string</td><td>test</td><td>The tenant name used to perform the test. You need ensure this tenant has been created.</td></tr><tr><td>--database</td><td>No</td><td>string</td><td>test</td><td>The database for performing the test.</td></tr><tr><td>--obclient-bin</td><td>No</td><td>string</td><td>obclient</td><td>The path of the OBClient binary file.</td></tr><tr><td>--dbgen-bin</td><td>No</td><td>string</td><td>/usr/tpc-h-tools/tpc-h-tools/bin/dbgen</td><td>The path of the dbgen binary file.</td></tr><tr><td>--dss-config</td><td>No</td><td>string</td><td>/usr/tpc-h-tools/tpc-h-tools/</td><td>The directory that stores the dists.dss files.</td></tr><tr><td>-s/--scale-factor</td><td>No</td><td>int</td><td>1</td><td>Automatically generate the scale of test data, the data is measured in Gigabytes.</td></tr><tr><td>--tmp-dir</td><td>No</td><td>string</td><td>./tmp</td><td>Temporary directory when executing tpch. When enabled, this option will automatically generate test data, auto-tuned SQL files, log files for executing test SQL, and so on.</td></tr><tr><td>--ddl-path</td><td>No</td><td>string</td><td>Empty</td><td>The path or directory of the ddl file. If it is empty, OBD will use the ddl file that comes with it.</td></tr><tr><td>--tbl-path</td><td>No</td><td>string</td><td>Empty</td><td>The path or directory of the tbl file. If it is empty, use dbgen to generate test data.</td></tr><tr><td>--sql-path</td><td>No</td><td>string</td><td>Empty</td><td>The path or directory of the sql file. If it is empty, OBD will use the sql file that comes with it.</td></tr><tr><td>--remote-tbl-dir</td><td>No</td><td>string</td><td>Empty</td><td>The directory where the tbl is stored on the target observer, it is the absolute path. Please make sure that you have the read and write permissions to this directory when you start the server. This option is required when  <code>--test-only</code> is not enabled.</td></tr><tr><td>--test-only</td><td>No</td><td>bool</td><td>false</td><td>When you enable this option, initialization will not be done, only the test SQL is exectued.</td></tr><tr><td>--dt/--disable-transfer</td><td>No</td><td>bool</td><td>false</td><td>Disable transfer. When you enable this option, OBD will not transfer the local tbl to the remote remote-tbl-dir, and OBD will directly use the tbl file under the target machine remote-tbl-dir.</td></tr><tr><td>-S/--skip-cluster-status-check</td><td>No</td><td>bool</td><td>false</td><td>Skip cluster status check when the option is true.</td></tr><tr><td>-O/--optimization</td><td>No</td><td>int</td><td>1</td><td>The degree of auto-tuning. Valid values: <code>0</code>, <code>1</code>, and <code>2</code>. <code>0</code> indicates that auto-tuning is disabled. <code>1</code> indicates that the auto-tuning parameters that take effect without a cluster restart are modified. <code>2</code> indicates that all auto-tuning parameters are modified. If necessary, the cluster is restarted to make all parameters take effect.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="obd-test-tpcc">obd test tpcc<a href="#obd-test-tpcc" class="hash-link" aria-label="Direct link to obd test tpcc" title="Direct link to obd test tpcc">​</a></h2>
<p>You can run this command to perform a TPC-C test on a specified node of an OceanBase cluster or an OceanBase Database Proxy (ODP) component.</p>
<p>Make sure that you have installed OBClient and obtpcc, which are required to perform a TPC-C test.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">obd test tpcc &lt;deploy name&gt; [flags]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo yum install obtpcc java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obd test tpcc test --tenant=tpcc --warehouses 10 --run-mins 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>deploy name</code> parameter specifies the name of the deployed cluster. You can consider it as an alias for the configuration file.</p>
<p>The following table describes details about the available options.</p>
<table><thead><tr><th>Option</th><th>Required</th><th>Data type</th><th>Default value</th><th>Description</th></tr></thead><tbody><tr><td>--component</td><td>No</td><td>string</td><td>Empty</td><td>The name of the component to be tested. Valid values: <code>oceanbase-ce</code>, <code>oceanbase</code>, <code>obproxy-ce</code> and <code>obproxy</code>. If you do not specify a value, the existence of <code>obproxy</code>, <code>obproxy-ce</code>, <code>oceanbase</code>, <code>oceanbase-ce</code> is checked sequentially. The traversal stops when a component is found, and the component is then tested.</td></tr><tr><td>--test-server</td><td>No</td><td>string</td><td>The name of the first node under the specified component.</td><td>Machine to be tested, followed by the <code>name</code> value corresponding to <code>servers</code> in the <code>yaml</code> file. If the <code>name</code> value is not configured after <code>servers</code>, the <code>ip</code> value is used. The name of the node to be tested under the specified component.</td></tr><tr><td>--user</td><td>No</td><td>string</td><td>root</td><td>The username used to perform the test.</td></tr><tr><td>--password</td><td>No</td><td>string</td><td>Empty</td><td>The user password used to perform the test.</td></tr><tr><td>-t/--tenant</td><td>No</td><td>string</td><td>test</td><td>The tenant name used to perform the test. You need ensure this tenant has been created.</td></tr><tr><td>--database</td><td>No</td><td>string</td><td>test</td><td>The database where the test is to be performed.</td></tr><tr><td>--obclient-bin</td><td>No</td><td>string</td><td>obclient</td><td>The path to the directory where the binary files of OBClient are stored.</td></tr><tr><td>--java-bin</td><td>No</td><td>string</td><td>java</td><td>The path to the directory where the Java binary files are stored.</td></tr><tr><td>--tmp-dir</td><td>No</td><td>string</td><td>./tmp</td><td>The temporary directory to be used for the TPC-C test. Automatically generated configuration files, auto-tuned SQL files, and test output files will be stored in this directory.</td></tr><tr><td>--bmsql-dir</td><td>No</td><td>string</td><td>Empty</td><td>The installation directory of BenchmarkSQL. You need to specify this option only if you manually compile and install BenchmarkSQL. If you use obtpcc, this option is not required.</td></tr><tr><td>--bmsql-jar</td><td>No</td><td>string</td><td>Empty</td><td>The path to the directory where the JAR file of BenchmarkSQL is stored. If you do not specify the path, and the BenchmarkSQL directory is not specified, the default installation directory generated by obtpcc is used. If the BenchmarkSQL directory is specified, the JAR file in the <code>&lt;bmsql-dir&gt;/dist</code> directory is used.</td></tr><tr><td>--bmsql-libs</td><td>No</td><td>string</td><td>Empty</td><td>If the BenchmarkSQL directory is specified, the JAR files in the <code>&lt;bmsql-dir&gt;/lib</code> and <code>&lt;bmsql-dir&gt;/lib/oceanbase</code> directories are used. If you use obtpcc, this option is not required.</td></tr><tr><td>--bmsql-sql-dir</td><td>No</td><td>string</td><td>Empty</td><td>The path to the directory where the SQL files for the TPC-C test are stored. If you do not specify the path, OceanBase Deployer (OBD) uses the SQL files that are automatically generated.</td></tr><tr><td>--warehouses</td><td>No</td><td>int</td><td>10</td><td>The number of warehouses for the TPC-C test data set. If you do not specify a value, the assigned value is 20 times the number of CPU cores allocated to the OceanBase cluster.</td></tr><tr><td>--load-workers</td><td>No</td><td>int</td><td>Empty</td><td>The number of concurrent worker threads for building the test data set. If you do not specify a value, the number of CPU cores per server or the size of tenant memory (GB)/2, whichever is smaller, is used.</td></tr><tr><td>--terminals</td><td>No</td><td>int</td><td>Empty</td><td>The number of virtual terminals to be used for the TPC-C test. If you do not specify a value, the number of CPU cores for the OceanBase cluster × 15 or the number of warehouses × 10, whichever is smaller, is used.</td></tr><tr><td>--run-mins</td><td>No</td><td>int</td><td>10</td><td>The amount of time allocated for the execution of the TPC-C test.</td></tr><tr><td>--test-only</td><td>No</td><td>bool</td><td>false</td><td>Specifies that the test is performed without data construction.</td></tr><tr><td>-S/--skip-cluster-status-check</td><td>No</td><td>bool</td><td>false</td><td>Skip cluster status check when the option is true.</td></tr><tr><td>-O/--optimization</td><td>No</td><td>int</td><td>1</td><td>The degree of auto-tuning. Valid values: <code>0</code>, <code>1</code>, and <code>2</code>. <code>0</code> indicates that auto-tuning is disabled. <code>1</code> indicates that the auto-tuning parameters that take effect without a cluster restart are modified. <code>2</code> indicates that all auto-tuning parameters are modified. If necessary, the cluster is restarted to make all parameters take effect.</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/oceanbase/oceanbase.github.io/tree/main/docs/obd/300.user-guide/300.obd-command/300.test-command-group.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#obd-test-mysqltest" class="table-of-contents__link toc-highlight">obd test mysqltest</a></li><li><a href="#obd-test-sysbench" class="table-of-contents__link toc-highlight">obd test sysbench</a></li><li><a href="#obd-test-tpch" class="table-of-contents__link toc-highlight">obd test tpch</a></li><li><a href="#obd-test-tpcc" class="table-of-contents__link toc-highlight">obd test tpcc</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/obd/what-is-obd">obd</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ob-operator/what-is-ob-operator">ob-operator</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://oceanbase.slack.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://ask.oceanbase.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum (in Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/oceanbase" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OceanBase, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>